var Cl=Object.defineProperty;var Qo=r=>{throw TypeError(r)};var Al=(r,i,o)=>i in r?Cl(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o;var Gr=(r,i,o)=>Al(r,typeof i!="symbol"?i+"":i,o),xo=(r,i,o)=>i.has(r)||Qo("Cannot "+o);var de=(r,i,o)=>(xo(r,i,"read from private field"),o?o.call(r):i.get(r)),ra=(r,i,o)=>i.has(r)?Qo("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(r):i.set(r,o),ea=(r,i,o,d)=>(xo(r,i,"write to private field"),d?d.call(r,o):i.set(r,o),o),Qa=(r,i,o)=>(xo(r,i,"access private method"),o);var lo=Array.isArray,Pl=Array.prototype.indexOf,Ys=Array.prototype.includes,co=Array.from,Js=Object.defineProperty,ri=Object.getOwnPropertyDescriptor,jl=Object.getOwnPropertyDescriptors,$n=Object.prototype,Ol=Array.prototype,Io=Object.getPrototypeOf,Xo=Object.isExtensible;const Ll=()=>{};function Rl(r){for(var i=0;i<r.length;i++)r[i]()}function Tn(){var r,i,o=new Promise((d,c)=>{r=d,i=c});return{promise:o,resolve:r,reject:i}}function vo(r,i){if(Array.isArray(r))return r;if(!(Symbol.iterator in r))return Array.from(r);const o=[];for(const d of r)if(o.push(d),o.length===i)break;return o}const Ka=2,Li=4,uo=8,En=1<<24,vs=16,Ir=32,ei=64,Sn=128,kr=512,Ba=1024,Wa=2048,Nr=4096,xr=8192,gs=16384,zi=32768,vi=65536,to=1<<17,Cn=1<<18,bi=1<<19,Ml=1<<20,ns=1<<25,Qs=65536,wo=1<<21,fo=1<<22,hs=1<<23,Vs=Symbol("$state"),Nl=Symbol(""),An=Symbol("proxy path"),Ms=new class extends Error{constructor(){super(...arguments);Gr(this,"name","StaleReactionError");Gr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},Il=1,Dl=11;function Fl(r){{const i=new Error(`lifecycle_outside_component
\`${r}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw i.name="Svelte error",i}}function Ul(){{const r=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw r.name="Svelte error",r}}function Zo(){{const r=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw r.name="Svelte error",r}}function zl(r,i){{const o=new Error(`component_api_changed
Calling \`${r}\` on a component instance (of ${i}) is no longer valid in Svelte 5
https://svelte.dev/e/component_api_changed`);throw o.name="Svelte error",o}}function Bl(r,i){{const o=new Error(`component_api_invalid_new
Attempted to instantiate ${r} with \`new ${i}\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \`compatibility.componentApi\` compiler option to \`4\` to keep it working.
https://svelte.dev/e/component_api_invalid_new`);throw o.name="Svelte error",o}}function ql(){{const r=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw r.name="Svelte error",r}}function Gl(r,i,o){{const d=new Error(`each_key_duplicate
${o?`Keyed each block has duplicate key \`${o}\` at indexes ${r} and ${i}`:`Keyed each block has duplicate key at indexes ${r} and ${i}`}
https://svelte.dev/e/each_key_duplicate`);throw d.name="Svelte error",d}}function Vl(r){{const i=new Error(`effect_in_teardown
\`${r}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw i.name="Svelte error",i}}function Hl(){{const r=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw r.name="Svelte error",r}}function Kl(r){{const i=new Error(`effect_orphan
\`${r}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw i.name="Svelte error",i}}function Wl(){{const r=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw r.name="Svelte error",r}}function Yl(r){{const i=new Error(`rune_outside_svelte
The \`${r}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw i.name="Svelte error",i}}function Jl(){{const r=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw r.name="Svelte error",r}}function Ql(){{const r=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw r.name="Svelte error",r}}function Xl(){{const r=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw r.name="Svelte error",r}}function Zl(){{const r=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw r.name="Svelte error",r}}const ed=1,td=2,Pn=4,ad=8,rd=16,sd=1,id=2,Va=Symbol(),u=Symbol("filename"),jn="http://www.w3.org/1999/xhtml";var gi="font-weight: bold",hi="font-weight: normal";function od(r,i){console.warn(`%c[svelte] binding_property_non_reactive
%c${i?`\`${r}\` (${i}) is binding to a non-reactive property`:`\`${r}\` is binding to a non-reactive property`}
https://svelte.dev/e/binding_property_non_reactive`,gi,hi)}function nd(r){console.warn(`%c[svelte] console_log_state
%cYour \`console.${r}\` contained \`$state\` proxies. Consider using \`$inspect(...)\` or \`$state.snapshot(...)\` instead
https://svelte.dev/e/console_log_state`,gi,hi)}function ld(r,i){console.warn(`%c[svelte] event_handler_invalid
%c${r} should be a function. Did you mean to ${i}?
https://svelte.dev/e/event_handler_invalid`,gi,hi)}function dd(){console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",gi,hi)}function Ci(r){console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${r}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,gi,hi)}function cd(){console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",gi,hi)}function On(r){return r===this.v}function vd(r,i){return r!=r?i==i:r!==i||r!==null&&typeof r=="object"||typeof r=="function"}function Ln(r){return!vd(r,this.v)}let ud=!1;var fd="font-weight: bold",pd="font-weight: normal";function en(r){console.warn(`%c[svelte] state_snapshot_uncloneable
%c${r?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${r}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,fd,pd)}const _d=[];function md(r,i=!1,o=!1){if(!i){const d=[],c=Ai(r,new Map,"",d,null,o);if(d.length===1&&d[0]==="")en();else if(d.length>0){const f=d.length>10?d.slice(0,7):d.slice(0,10),b=d.length-f.length;let h=f.map(w=>`- <value>${w}`).join(`
`);b>0&&(h+=`
- ...and ${b} more`),en(h)}return c}return Ai(r,new Map,"",_d,null,o)}function Ai(r,i,o,d,c=null,f=!1){if(typeof r=="object"&&r!==null){var b=i.get(r);if(b!==void 0)return b;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(lo(r)){var h=Array(r.length);i.set(r,h),c!==null&&i.set(c,h);for(var w=0;w<r.length;w+=1){var L=r[w];w in r&&(h[w]=Ai(L,i,`${o}[${w}]`,d,null,f))}return h}if(Io(r)===$n){h={},i.set(r,h),c!==null&&i.set(c,h);for(var j in r)h[j]=Ai(r[j],i,`${o}.${j}`,d,null,f);return h}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function"&&!f)return Ai(r.toJSON(),i,`${o}.toJSON()`,d,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return d.push(o),r}}function S(r,i){return r.label=i,yi(r.v,i),r}function yi(r,i){var o;return(o=r==null?void 0:r[An])==null||o.call(r,i),r}function xd(r){const i=new Error,o=bd();return o.length===0?null:(o.unshift(`
`),Js(i,"stack",{value:o.join(`
`)}),Js(i,"name",{value:r}),i)}function bd(){const r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const i=new Error().stack;if(Error.stackTraceLimit=r,!i)return[];const o=i.split(`
`),d=[];for(let c=0;c<o.length;c++){const f=o[c],b=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];b.includes("svelte/src/internal")||b.includes("node_modules/.vite")||d.push(f)}}return d}let Da=null;function ui(r){Da=r}let ls=null;function ao(r){ls=r}function g(r,i,o,d,c,f){const b=ls;ls={type:i,file:o[u],line:d,column:c,parent:b,...f};try{return r()}finally{ls=b}}let ys=null;function tn(r){ys=r}function ga(r,i=!1,o){Da={p:Da,i:!1,c:null,e:null,s:r,x:null,l:null},Da.function=o,ys=o}function ha(r){var i=Da,o=i.e;if(o!==null){i.e=null;for(var d of o)el(d)}return r!==void 0&&(i.x=r),i.i=!0,Da=i.p,ys=(Da==null?void 0:Da.function)??null,r??{}}function Rn(){return!0}let Ns=[];function Mn(){var r=Ns;Ns=[],Rl(r)}function Xr(r){if(Ns.length===0&&!Pi){var i=Ns;queueMicrotask(()=>{i===Ns&&Mn()})}Ns.push(r)}function gd(){for(;Ns.length>0;)Mn()}const ko=new WeakMap;function Nn(r){var i=_a;if(i===null)return oa.f|=hs,r;if(r instanceof Error&&!ko.has(r)&&ko.set(r,hd(r,i)),(i.f&zi)===0&&(i.f&Li)===0)throw!i.parent&&r instanceof Error&&In(r),r;fi(r,i)}function fi(r,i){for(;i!==null;){if((i.f&Sn)!==0){if((i.f&zi)===0)throw r;try{i.b.error(r);return}catch(o){r=o}}i=i.parent}throw r instanceof Error&&In(r),r}function hd(r,i){var b,h,w;const o=ri(r,"message");if(!(o&&!o.configurable)){for(var d=Bo?"  ":"	",c=`
${d}in ${((b=i.fn)==null?void 0:b.name)||"<unknown>"}`,f=i.ctx;f!==null;)c+=`
${d}in ${(h=f.function)==null?void 0:h[u].split("/").pop()}`,f=f.p;return{message:r.message+`
${c}
`,stack:(w=r.stack)==null?void 0:w.split(`
`).filter(L=>!L.includes("svelte/src/internal")).join(`
`)}}}function In(r){const i=ko.get(r);i&&(Js(r,"message",{value:i.message}),Js(r,"stack",{value:i.stack}))}const yd=-7169;function Ia(r,i){r.f=r.f&yd|i}function Do(r){(r.f&kr)!==0||r.deps===null?Ia(r,Ba):Ia(r,Nr)}function Dn(r){if(r!==null)for(const i of r)(i.f&Ka)===0||(i.f&Qs)===0||(i.f^=Qs,Dn(i.deps))}function Fn(r,i,o){(r.f&Wa)!==0?i.add(r):(r.f&Nr)!==0&&o.add(r),Dn(r.deps),Ia(r,Ba)}const Vi=new Set;let Qt=null,ro=null,Ha=null,lr=[],po=null,$o=!1,Pi=!1;var si,ii,Fs,oi,Ii,Di,Us,is,ni,as,To,Eo,Un;const Jo=class Jo{constructor(){ra(this,as);Gr(this,"committed",!1);Gr(this,"current",new Map);Gr(this,"previous",new Map);ra(this,si,new Set);ra(this,ii,new Set);ra(this,Fs,0);ra(this,oi,0);ra(this,Ii,null);ra(this,Di,new Set);ra(this,Us,new Set);ra(this,is,new Map);Gr(this,"is_fork",!1);ra(this,ni,!1)}is_deferred(){return this.is_fork||de(this,oi)>0}skip_effect(i){de(this,is).has(i)||de(this,is).set(i,{d:[],m:[]})}unskip_effect(i){var o=de(this,is).get(i);if(o){de(this,is).delete(i);for(var d of o.d)Ia(d,Wa),Or(d);for(d of o.m)Ia(d,Nr),Or(d)}}process(i){var c;lr=[],this.apply();var o=[],d=[];for(const f of i)Qa(this,as,To).call(this,f,o,d);if(this.is_deferred()){Qa(this,as,Eo).call(this,d),Qa(this,as,Eo).call(this,o);for(const[f,b]of de(this,is))Gn(f,b)}else{for(const f of de(this,si))f();de(this,si).clear(),de(this,Fs)===0&&Qa(this,as,Un).call(this),ro=this,Qt=null,an(d),an(o),ro=null,(c=de(this,Ii))==null||c.resolve()}Ha=null}capture(i,o){o!==Va&&!this.previous.has(i)&&this.previous.set(i,o),(i.f&hs)===0&&(this.current.set(i,i.v),Ha==null||Ha.set(i,i.v))}activate(){Qt=this,this.apply()}deactivate(){Qt===this&&(Qt=null,Ha=null)}flush(){if(this.activate(),lr.length>0){if(zn(),Qt!==null&&Qt!==this)return}else de(this,Fs)===0&&this.process([]);this.deactivate()}discard(){for(const i of de(this,ii))i(this);de(this,ii).clear()}increment(i){ea(this,Fs,de(this,Fs)+1),i&&ea(this,oi,de(this,oi)+1)}decrement(i){ea(this,Fs,de(this,Fs)-1),i&&ea(this,oi,de(this,oi)-1),!de(this,ni)&&(ea(this,ni,!0),Xr(()=>{ea(this,ni,!1),this.is_deferred()?lr.length>0&&this.flush():this.revive()}))}revive(){for(const i of de(this,Di))de(this,Us).delete(i),Ia(i,Wa),Or(i);for(const i of de(this,Us))Ia(i,Nr),Or(i);this.flush()}oncommit(i){de(this,si).add(i)}ondiscard(i){de(this,ii).add(i)}settled(){return(de(this,Ii)??ea(this,Ii,Tn())).promise}static ensure(){if(Qt===null){const i=Qt=new Jo;Vi.add(Qt),Pi||Xr(()=>{Qt===i&&i.flush()})}return Qt}apply(){}};si=new WeakMap,ii=new WeakMap,Fs=new WeakMap,oi=new WeakMap,Ii=new WeakMap,Di=new WeakMap,Us=new WeakMap,is=new WeakMap,ni=new WeakMap,as=new WeakSet,To=function(i,o,d){i.f^=Ba;for(var c=i.first,f=null;c!==null;){var b=c.f,h=(b&(Ir|ei))!==0,w=h&&(b&Ba)!==0,L=w||(b&xr)!==0||de(this,is).has(c);if(!L&&c.fn!==null){h?c.f^=Ba:f!==null&&(b&(Li|uo|En))!==0?f.b.defer_effect(c):(b&Li)!==0?o.push(c):qi(c)&&((b&vs)!==0&&de(this,Us).add(c),mi(c));var j=c.first;if(j!==null){c=j;continue}}var A=c.parent;for(c=c.next;c===null&&A!==null;)A===f&&(f=null),c=A.next,A=A.parent}},Eo=function(i){for(var o=0;o<i.length;o+=1)Fn(i[o],de(this,Di),de(this,Us))},Un=function(){var c;if(Vi.size>1){this.previous.clear();var i=Ha,o=!0;for(const f of Vi){if(f===this){o=!1;continue}const b=[];for(const[w,L]of this.current){if(f.current.has(w))if(o&&L!==f.current.get(w))f.current.set(w,L);else continue;b.push(w)}if(b.length===0)continue;const h=[...f.current.keys()].filter(w=>!this.current.has(w));if(h.length>0){var d=lr;lr=[];const w=new Set,L=new Map;for(const j of b)Bn(j,h,w,L);if(lr.length>0){Qt=f,f.apply();for(const j of lr)Qa(c=f,as,To).call(c,j,[],[]);f.deactivate()}lr=d}}Qt=null,Ha=i}this.committed=!0,Vi.delete(this)};let ws=Jo;function wd(r){var i=Pi;Pi=!0;try{for(var o;;){if(gd(),lr.length===0&&(Qt==null||Qt.flush(),lr.length===0))return po=null,o;zn()}}finally{Pi=i}}function zn(){$o=!0;var r=new Set;try{for(var i=0;lr.length>0;){var o=ws.ensure();if(i++>1e3){var d=new Map;for(const f of o.current.keys())for(const[b,h]of f.updated??[]){var c=d.get(b);c||(c={error:h.error,count:0},d.set(b,c)),c.count+=h.count}for(const f of d.values())f.error&&console.error(f.error);kd()}o.process(lr),ks.clear();for(const f of o.current.keys())r.add(f)}}finally{lr=[],$o=!1,po=null;for(const f of r)f.updated=null}}function kd(){try{Wl()}catch(r){Js(r,"stack",{value:""}),fi(r,po)}}let Pr=null;function an(r){var i=r.length;if(i!==0){for(var o=0;o<i;){var d=r[o++];if((d.f&(gs|xr))===0&&qi(d)&&(Pr=new Set,mi(d),d.deps===null&&d.first===null&&d.nodes===null&&d.teardown===null&&d.ac===null&&rl(d),(Pr==null?void 0:Pr.size)>0)){ks.clear();for(const c of Pr){if((c.f&(gs|xr))!==0)continue;const f=[c];let b=c.parent;for(;b!==null;)Pr.has(b)&&(Pr.delete(b),f.push(b)),b=b.parent;for(let h=f.length-1;h>=0;h--){const w=f[h];(w.f&(gs|xr))===0&&mi(w)}}Pr.clear()}}Pr=null}}function Bn(r,i,o,d){if(!o.has(r)&&(o.add(r),r.reactions!==null))for(const c of r.reactions){const f=c.f;(f&Ka)!==0?Bn(c,i,o,d):(f&(fo|vs))!==0&&(f&Wa)===0&&qn(c,i,d)&&(Ia(c,Wa),Or(c))}}function qn(r,i,o){const d=o.get(r);if(d!==void 0)return d;if(r.deps!==null)for(const c of r.deps){if(Ys.call(i,c))return!0;if((c.f&Ka)!==0&&qn(c,i,o))return o.set(c,!0),!0}return o.set(r,!1),!1}function Or(r){for(var i=po=r;i.parent!==null;){i=i.parent;var o=i.f;if($o&&i===_a&&(o&vs)!==0&&(o&Cn)===0)return;if((o&(ei|Ir))!==0){if((o&Ba)===0)return;i.f^=Ba}}lr.push(i)}function Gn(r,i){if(!((r.f&Ir)!==0&&(r.f&Ba)!==0)){(r.f&Wa)!==0?i.d.push(r):(r.f&Nr)!==0&&i.m.push(r),Ia(r,Ba);for(var o=r.first;o!==null;)Gn(o,i),o=o.next}}function $d(r){let i=0,o=Xs(0),d;return S(o,"createSubscriber version"),()=>{qo()&&(e(o),Ri(()=>(i===0&&(d=wi(()=>r(()=>ji(o)))),i+=1,()=>{Xr(()=>{i-=1,i===0&&(d==null||d(),d=void 0,ji(o))})})))}}var Td=vi|bi|Sn;function Ed(r,i,o){new Sd(r,i,o)}var hr,No,Vr,zs,Hr,yr,nr,Kr,os,xs,Bs,bs,li,qs,di,ci,Wr,oo,qa,Cd,Ad,So,Yi,Ji,Co;class Sd{constructor(i,o,d){ra(this,qa);Gr(this,"parent");Gr(this,"is_pending",!1);ra(this,hr);ra(this,No,null);ra(this,Vr);ra(this,zs);ra(this,Hr);ra(this,yr,null);ra(this,nr,null);ra(this,Kr,null);ra(this,os,null);ra(this,xs,null);ra(this,Bs,0);ra(this,bs,0);ra(this,li,!1);ra(this,qs,!1);ra(this,di,new Set);ra(this,ci,new Set);ra(this,Wr,null);ra(this,oo,$d(()=>(ea(this,Wr,Xs(de(this,Bs))),S(de(this,Wr),"$effect.pending()"),()=>{ea(this,Wr,null)})));ea(this,hr,i),ea(this,Vr,o),ea(this,zs,d),this.parent=_a.b,this.is_pending=!!de(this,Vr).pending,ea(this,Hr,Vo(()=>{_a.b=this;{var c=Qa(this,qa,So).call(this);try{ea(this,yr,wr(()=>d(c)))}catch(f){this.error(f)}de(this,bs)>0?Qa(this,qa,Ji).call(this):this.is_pending=!1}return()=>{var f;(f=de(this,xs))==null||f.remove()}},Td))}defer_effect(i){Fn(i,de(this,di),de(this,ci))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!de(this,Vr).pending}update_pending_count(i){Qa(this,qa,Co).call(this,i),ea(this,Bs,de(this,Bs)+i),!(!de(this,Wr)||de(this,li))&&(ea(this,li,!0),Xr(()=>{ea(this,li,!1),de(this,Wr)&&_i(de(this,Wr),de(this,Bs))}))}get_effect_pending(){return de(this,oo).call(this),e(de(this,Wr))}error(i){var o=de(this,Vr).onerror;let d=de(this,Vr).failed;if(de(this,qs)||!o&&!d)throw i;de(this,yr)&&(cr(de(this,yr)),ea(this,yr,null)),de(this,nr)&&(cr(de(this,nr)),ea(this,nr,null)),de(this,Kr)&&(cr(de(this,Kr)),ea(this,Kr,null));var c=!1,f=!1;const b=()=>{if(c){cd();return}c=!0,f&&Zl(),ws.ensure(),ea(this,Bs,0),de(this,Kr)!==null&&Hs(de(this,Kr),()=>{ea(this,Kr,null)}),this.is_pending=this.has_pending_snippet(),ea(this,yr,Qa(this,qa,Yi).call(this,()=>(ea(this,qs,!1),wr(()=>de(this,zs).call(this,de(this,hr)))))),de(this,bs)>0?Qa(this,qa,Ji).call(this):this.is_pending=!1};Xr(()=>{try{f=!0,o==null||o(i,b),f=!1}catch(h){fi(h,de(this,Hr)&&de(this,Hr).parent)}d&&ea(this,Kr,Qa(this,qa,Yi).call(this,()=>{ws.ensure(),ea(this,qs,!0);try{return wr(()=>{d(de(this,hr),()=>i,()=>b)})}catch(h){return fi(h,de(this,Hr).parent),null}finally{ea(this,qs,!1)}}))})}}hr=new WeakMap,No=new WeakMap,Vr=new WeakMap,zs=new WeakMap,Hr=new WeakMap,yr=new WeakMap,nr=new WeakMap,Kr=new WeakMap,os=new WeakMap,xs=new WeakMap,Bs=new WeakMap,bs=new WeakMap,li=new WeakMap,qs=new WeakMap,di=new WeakMap,ci=new WeakMap,Wr=new WeakMap,oo=new WeakMap,qa=new WeakSet,Cd=function(){try{ea(this,yr,wr(()=>de(this,zs).call(this,de(this,hr))))}catch(i){this.error(i)}},Ad=function(){const i=de(this,Vr).pending;i&&(ea(this,nr,wr(()=>i(de(this,hr)))),Xr(()=>{var o=Qa(this,qa,So).call(this);ea(this,yr,Qa(this,qa,Yi).call(this,()=>(ws.ensure(),wr(()=>de(this,zs).call(this,o))))),de(this,bs)>0?Qa(this,qa,Ji).call(this):(Hs(de(this,nr),()=>{ea(this,nr,null)}),this.is_pending=!1)}))},So=function(){var i=de(this,hr);return this.is_pending&&(ea(this,xs,cs()),de(this,hr).before(de(this,xs)),i=de(this,xs)),i},Yi=function(i){var o=_a,d=oa,c=Da;ts(de(this,Hr)),Tr(de(this,Hr)),ui(de(this,Hr).ctx);try{return i()}catch(f){return Nn(f),null}finally{ts(o),Tr(d),ui(c)}},Ji=function(){const i=de(this,Vr).pending;de(this,yr)!==null&&(ea(this,os,document.createDocumentFragment()),de(this,os).append(de(this,xs)),ol(de(this,yr),de(this,os))),de(this,nr)===null&&ea(this,nr,wr(()=>i(de(this,hr))))},Co=function(i){var o;if(!this.has_pending_snippet()){this.parent&&Qa(o=this.parent,qa,Co).call(o,i);return}if(ea(this,bs,de(this,bs)+i),de(this,bs)===0){this.is_pending=!1;for(const d of de(this,di))Ia(d,Wa),Or(d);for(const d of de(this,ci))Ia(d,Nr),Or(d);de(this,di).clear(),de(this,ci).clear(),de(this,nr)&&Hs(de(this,nr),()=>{ea(this,nr,null)}),de(this,os)&&(de(this,hr).before(de(this,os)),ea(this,os,null))}};function Vn(r,i,o,d){const c=Fo;var f=r.filter(k=>!k.settled);if(o.length===0&&f.length===0){d(i.map(c));return}var b=Qt,h=_a,w=jd(),L=f.length===1?f[0].promise:f.length>1?Promise.all(f.map(k=>k.promise)):null;function j(k){w();try{d(k)}catch(q){(h.f&gs)===0&&fi(q,h)}b==null||b.deactivate(),Ao()}if(o.length===0){L.then(()=>j(i.map(c)));return}function A(){w(),Promise.all(o.map(k=>Ld(k))).then(k=>j([...i.map(c),...k])).catch(k=>fi(k,h))}L?L.then(A):A()}function Pd(r,i){Vn(r,[],[],i)}function jd(){var r=_a,i=oa,o=Da,d=Qt,c=ls;return function(b=!0){ts(r),Tr(i),ui(o),b&&(d==null||d.activate()),ao(c)}}async function M(r){var i=await r;return()=>i}function Ao(){ts(null),Tr(null),ui(null),ao(null)}const Od=new Set;function Fo(r){var i=Ka|Wa,o=oa!==null&&(oa.f&Ka)!==0?oa:null;return _a!==null&&(_a.f|=bi),{ctx:Da,deps:null,effects:null,equals:On,f:i,fn:r,reactions:null,rv:0,v:Va,wv:0,parent:o??_a,ac:null}}function Ld(r,i,o){let d=_a;d===null&&Ul();var c=d.b,f=void 0,b=Xs(Va);b.label=i;var h=!oa,w=new Map;return Xd(()=>{var q;var L=Tn();f=L.promise;try{Promise.resolve(r()).then(L.resolve,L.reject).then(()=>{j===Qt&&j.committed&&j.deactivate(),Ao()})}catch(V){L.reject(V),Ao()}var j=Qt;if(h){var A=c.is_rendered();c.update_pending_count(1),j.increment(A),(q=w.get(j))==null||q.reject(Ms),w.delete(j),w.set(j,L)}const k=(V,X=void 0)=>{if(j.activate(),X)X!==Ms&&(b.f|=hs,_i(b,X));else{(b.f&hs)!==0&&(b.f^=hs),_i(b,V);for(const[N,ne]of w){if(w.delete(N),N===j)break;ne.reject(Ms)}}h&&(c.update_pending_count(-1),j.decrement(A))};L.promise.then(k,V=>k(null,V||"unknown"))}),Go(()=>{for(const L of w.values())L.reject(Ms)}),b.f|=fo,new Promise(L=>{function j(A){function k(){A===f?L(b):j(f)}A.then(k,k)}j(f)})}function ma(r){const i=Fo(r);return nl(i),i}function Rd(r){const i=Fo(r);return i.equals=Ln,i}function Md(r){var i=r.effects;if(i!==null){r.effects=null;for(var o=0;o<i.length;o+=1)cr(i[o])}}let bo=[];function Nd(r){for(var i=r.parent;i!==null;){if((i.f&Ka)===0)return(i.f&gs)===0?i:null;i=i.parent}return null}function Uo(r){var i,o=_a;ts(Nd(r));{let d=pi;rn(new Set);try{Ys.call(bo,r)&&ql(),bo.push(r),r.f&=~Qs,Md(r),i=vl(r)}finally{ts(o),rn(d),bo.pop()}}return i}function Hn(r){var i=Uo(r);if(!r.equals(i)&&(r.wv=dl(),(!(Qt!=null&&Qt.is_fork)||r.deps===null)&&(r.v=i,r.deps===null))){Ia(r,Ba);return}Zs||(Ha!==null?(qo()||Qt!=null&&Qt.is_fork)&&Ha.set(r,i):Do(r))}function Id(r){var i,o;if(r.effects!==null)for(const d of r.effects)(d.teardown||d.ac)&&((i=d.teardown)==null||i.call(d),(o=d.ac)==null||o.abort(Ms),d.teardown=Ll,d.ac=null,Mi(d,0),Ho(d))}function Kn(r){if(r.effects!==null)for(const i of r.effects)i.teardown&&mi(i)}let pi=new Set;const ks=new Map;function rn(r){pi=r}let zo=!1;function Dd(){zo=!0}function Xs(r,i){var o={f:0,v:r,reactions:null,equals:On,rv:0,wv:0};return o}function P(r,i){const o=Xs(r);return nl(o),o}function Fd(r,i=!1,o=!0){const d=Xs(r);return i||(d.equals=Ln),d}function p(r,i,o=!1){oa!==null&&(!Lr||(oa.f&to)!==0)&&Rn()&&(oa.f&(Ka|vs|fo|to))!==0&&($r===null||!Ys.call($r,r))&&Xl();let d=o?Jt(i):i;return yi(d,r.label),_i(r,d)}function _i(r,i){var c;if(!r.equals(i)){var o=r.v;Zs?ks.set(r,i):ks.set(r,o),r.v=i;var d=ws.ensure();d.capture(r,o);{if(_a!==null){r.updated??(r.updated=new Map);const f=(((c=r.updated.get(""))==null?void 0:c.count)??0)+1;if(r.updated.set("",{error:null,count:f}),f>5){const b=xd("updated at");if(b!==null){let h=r.updated.get(b.stack);h||(h={error:b,count:0},r.updated.set(b.stack,h)),h.count++}}}_a!==null&&(r.set_during_effect=!0)}if((r.f&Ka)!==0){const f=r;(r.f&Wa)!==0&&Uo(f),Do(f)}r.wv=dl(),Yn(r,Wa),_a!==null&&(_a.f&Ba)!==0&&(_a.f&(Ir|ei))===0&&(gr===null?tc([r]):gr.push(r)),!d.is_fork&&pi.size>0&&!zo&&Wn()}return i}function Wn(){zo=!1;for(const r of pi)(r.f&Ba)!==0&&Ia(r,Nr),qi(r)&&mi(r);pi.clear()}function sn(r,i=1){var o=e(r),d=i===1?o++:o--;return p(r,o),d}function ji(r){p(r,r.v+1)}function Yn(r,i){var o=r.reactions;if(o!==null)for(var d=o.length,c=0;c<d;c++){var f=o[c],b=f.f;if((b&to)!==0){pi.add(f);continue}var h=(b&Wa)===0;if(h&&Ia(f,i),(b&Ka)!==0){var w=f;Ha==null||Ha.delete(w),(b&Qs)===0&&(b&kr&&(f.f|=Qs),Yn(w,Nr))}else h&&((b&vs)!==0&&Pr!==null&&Pr.add(f),Or(f))}}const Ud=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Jt(r){if(typeof r!="object"||r===null||Vs in r)return r;const i=Io(r);if(i!==$n&&i!==Ol)return r;var o=new Map,d=lo(r),c=P(0),f=Ks,b=j=>{if(Ks===f)return j();var A=oa,k=Ks;Tr(null),cn(f);var q=j();return Tr(A),cn(k),q};d&&(o.set("length",P(r.length)),r=qd(r));var h="";let w=!1;function L(j){if(!w){w=!0,h=j,S(c,`${h} version`);for(const[A,k]of o)S(k,Rs(h,A));w=!1}}return new Proxy(r,{defineProperty(j,A,k){(!("value"in k)||k.configurable===!1||k.enumerable===!1||k.writable===!1)&&Jl();var q=o.get(A);return q===void 0?b(()=>{var V=P(k.value);return o.set(A,V),typeof A=="string"&&S(V,Rs(h,A)),V}):p(q,k.value,!0),!0},deleteProperty(j,A){var k=o.get(A);if(k===void 0){if(A in j){const q=b(()=>P(Va));o.set(A,q),ji(c),S(q,Rs(h,A))}}else p(k,Va),ji(c);return!0},get(j,A,k){var N;if(A===Vs)return r;if(A===An)return L;var q=o.get(A),V=A in j;if(q===void 0&&(!V||(N=ri(j,A))!=null&&N.writable)&&(q=b(()=>{var ne=Jt(V?j[A]:Va),je=P(ne);return S(je,Rs(h,A)),je}),o.set(A,q)),q!==void 0){var X=e(q);return X===Va?void 0:X}return Reflect.get(j,A,k)},getOwnPropertyDescriptor(j,A){var k=Reflect.getOwnPropertyDescriptor(j,A);if(k&&"value"in k){var q=o.get(A);q&&(k.value=e(q))}else if(k===void 0){var V=o.get(A),X=V==null?void 0:V.v;if(V!==void 0&&X!==Va)return{enumerable:!0,configurable:!0,value:X,writable:!0}}return k},has(j,A){var X;if(A===Vs)return!0;var k=o.get(A),q=k!==void 0&&k.v!==Va||Reflect.has(j,A);if(k!==void 0||_a!==null&&(!q||(X=ri(j,A))!=null&&X.writable)){k===void 0&&(k=b(()=>{var N=q?Jt(j[A]):Va,ne=P(N);return S(ne,Rs(h,A)),ne}),o.set(A,k));var V=e(k);if(V===Va)return!1}return q},set(j,A,k,q){var Ee;var V=o.get(A),X=A in j;if(d&&A==="length")for(var N=k;N<V.v;N+=1){var ne=o.get(N+"");ne!==void 0?p(ne,Va):N in j&&(ne=b(()=>P(Va)),o.set(N+"",ne),S(ne,Rs(h,N)))}if(V===void 0)(!X||(Ee=ri(j,A))!=null&&Ee.writable)&&(V=b(()=>P(void 0)),S(V,Rs(h,A)),p(V,Jt(k)),o.set(A,V));else{X=V.v!==Va;var je=b(()=>Jt(k));p(V,je)}var we=Reflect.getOwnPropertyDescriptor(j,A);if(we!=null&&we.set&&we.set.call(q,k),!X){if(d&&typeof A=="string"){var Te=o.get("length"),Ke=Number(A);Number.isInteger(Ke)&&Ke>=Te.v&&p(Te,Ke+1)}ji(c)}return!0},ownKeys(j){e(c);var A=Reflect.ownKeys(j).filter(V=>{var X=o.get(V);return X===void 0||X.v!==Va});for(var[k,q]of o)q.v!==Va&&!(k in j)&&A.push(k);return A},setPrototypeOf(){Ql()}})}function Rs(r,i){return typeof i=="symbol"?`${r}[Symbol(${i.description??""})]`:Ud.test(i)?`${r}.${i}`:/^\d+$/.test(i)?`${r}[${i}]`:`${r}['${i}']`}function ds(r){try{if(r!==null&&typeof r=="object"&&Vs in r)return r[Vs]}catch{}return r}function zd(r,i){return Object.is(ds(r),ds(i))}const Bd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function qd(r){return new Proxy(r,{get(i,o,d){var c=Reflect.get(i,o,d);return Bd.has(o)?function(...f){Dd();var b=c.apply(this,f);return Wn(),b}:c}})}function Gd(){const r=Array.prototype,i=Array.__svelte_cleanup;i&&i();const{indexOf:o,lastIndexOf:d,includes:c}=r;r.indexOf=function(f,b){const h=o.call(this,f,b);if(h===-1){for(let w=b??0;w<this.length;w+=1)if(ds(this[w])===f){Ci("array.indexOf(...)");break}}return h},r.lastIndexOf=function(f,b){const h=d.call(this,f,b??this.length-1);if(h===-1){for(let w=0;w<=(b??this.length-1);w+=1)if(ds(this[w])===f){Ci("array.lastIndexOf(...)");break}}return h},r.includes=function(f,b){const h=c.call(this,f,b);if(!h){for(let w=0;w<this.length;w+=1)if(ds(this[w])===f){Ci("array.includes(...)");break}}return h},Array.__svelte_cleanup=()=>{r.indexOf=o,r.lastIndexOf=d,r.includes=c}}function C(r,i,o=!0){try{r===i!=(ds(r)===ds(i))&&Ci(o?"===":"!==")}catch{}return r===i===o}function on(r,i,o=!0){return r==i!=(ds(r)==ds(i))&&Ci(o?"==":"!="),r==i===o}var nn,Bo,Jn,Qn;function Vd(){if(nn===void 0){nn=window,Bo=/Firefox/.test(navigator.userAgent);var r=Element.prototype,i=Node.prototype,o=Text.prototype;Jn=ri(i,"firstChild").get,Qn=ri(i,"nextSibling").get,Xo(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Xo(o)&&(o.__t=void 0),r.__svelte_meta=null,Gd()}}function cs(r=""){return document.createTextNode(r)}function so(r){return Jn.call(r)}function Bi(r){return Qn.call(r)}function a(r,i){return so(r)}function Ae(r,i=!1){{var o=so(r);return o instanceof Comment&&o.data===""?Bi(o):o}}function s(r,i=1,o=!1){let d=r;for(;i--;)d=Bi(d);return d}function Hd(r){r.textContent=""}function Xn(){return!1}function Kd(r,i,o){return document.createElementNS(jn,r,void 0)}function Hi(r,i){if(i){const o=document.body;r.autofocus=!0,Xr(()=>{document.activeElement===o&&r.focus()})}}let ln=!1;function Wd(){ln||(ln=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var i;if(!r.defaultPrevented)for(const o of r.target.elements)(i=o.__on_r)==null||i.call(o)})},{capture:!0}))}function _o(r){var i=oa,o=_a;Tr(null),ts(null);try{return r()}finally{Tr(i),ts(o)}}function Zn(r,i,o,d=o){r.addEventListener(i,()=>_o(o));const c=r.__on_r;c?r.__on_r=()=>{c(),d(!0)}:r.__on_r=()=>d(!0),Wd()}function Yd(r){_a===null&&(oa===null&&Kl(r),Hl()),Zs&&Vl(r)}function Jd(r,i){var o=i.last;o===null?i.last=i.first=r:(o.next=r,r.prev=o,i.last=r)}function us(r,i,o){for(var d=_a;d!==null&&(d.f&to)!==0;)d=d.parent;d!==null&&(d.f&xr)!==0&&(r|=xr);var c={ctx:Da,deps:null,nodes:null,f:r|Wa|kr,first:null,fn:i,last:null,next:null,parent:d,b:d&&d.b,prev:null,teardown:null,wv:0,ac:null};if(c.component_function=ys,o)try{mi(c)}catch(h){throw cr(c),h}else i!==null&&Or(c);var f=c;if(o&&f.deps===null&&f.teardown===null&&f.nodes===null&&f.first===f.last&&(f.f&bi)===0&&(f=f.first,(r&vs)!==0&&(r&vi)!==0&&f!==null&&(f.f|=vi)),f!==null&&(f.parent=d,d!==null&&Jd(f,d),oa!==null&&(oa.f&Ka)!==0&&(r&ei)===0)){var b=oa;(b.effects??(b.effects=[])).push(f)}return c}function qo(){return oa!==null&&!Lr}function Go(r){const i=us(uo,null,!1);return Ia(i,Ba),i.teardown=r,i}function Ga(r){Yd("$effect"),Js(r,"name",{value:"$effect"});var i=_a.f,o=!oa&&(i&Ir)!==0&&(i&zi)===0;if(o){var d=Da;(d.e??(d.e=[])).push(r)}else return el(r)}function el(r){return us(Li|Ml,r,!1)}function Qd(r){ws.ensure();const i=us(ei|bi,r,!0);return(o={})=>new Promise(d=>{o.outro?Hs(i,()=>{cr(i),d(void 0)}):(cr(i),d(void 0))})}function tl(r){return us(Li,r,!1)}function Xd(r){return us(fo|bi,r,!0)}function Ri(r,i=0){return us(uo|i,r,!0)}function x(r,i=[],o=[],d=[]){Vn(d,i,o,c=>{us(uo,()=>r(...c.map(e)),!0)})}function Vo(r,i=0){var o=us(vs|i,r,!0);return o.dev_stack=ls,o}function wr(r){return us(Ir|bi,r,!0)}function al(r){var i=r.teardown;if(i!==null){const o=Zs,d=oa;dn(!0),Tr(null);try{i.call(null)}finally{dn(o),Tr(d)}}}function Ho(r,i=!1){var o=r.first;for(r.first=r.last=null;o!==null;){const c=o.ac;c!==null&&_o(()=>{c.abort(Ms)});var d=o.next;(o.f&ei)!==0?o.parent=null:cr(o,i),o=d}}function Zd(r){for(var i=r.first;i!==null;){var o=i.next;(i.f&Ir)===0&&cr(i),i=o}}function cr(r,i=!0){var o=!1;(i||(r.f&Cn)!==0)&&r.nodes!==null&&r.nodes.end!==null&&(ec(r.nodes.start,r.nodes.end),o=!0),Ho(r,i&&!o),Mi(r,0),Ia(r,gs);var d=r.nodes&&r.nodes.t;if(d!==null)for(const f of d)f.stop();al(r);var c=r.parent;c!==null&&c.first!==null&&rl(r),r.component_function=null,r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes=r.ac=null}function ec(r,i){for(;r!==null;){var o=r===i?null:Bi(r);r.remove(),r=o}}function rl(r){var i=r.parent,o=r.prev,d=r.next;o!==null&&(o.next=d),d!==null&&(d.prev=o),i!==null&&(i.first===r&&(i.first=d),i.last===r&&(i.last=o))}function Hs(r,i,o=!0){var d=[];sl(r,d,!0);var c=()=>{o&&cr(r),i&&i()},f=d.length;if(f>0){var b=()=>--f||c();for(var h of d)h.out(b)}else c()}function sl(r,i,o){if((r.f&xr)===0){r.f^=xr;var d=r.nodes&&r.nodes.t;if(d!==null)for(const h of d)(h.is_global||o)&&i.push(h);for(var c=r.first;c!==null;){var f=c.next,b=(c.f&vi)!==0||(c.f&Ir)!==0&&(r.f&vs)!==0;sl(c,i,b?o:!1),c=f}}}function Ko(r){il(r,!0)}function il(r,i){if((r.f&xr)!==0){r.f^=xr,(r.f&Ba)===0&&(Ia(r,Wa),Or(r));for(var o=r.first;o!==null;){var d=o.next,c=(o.f&vi)!==0||(o.f&Ir)!==0;il(o,c?i:!1),o=d}var f=r.nodes&&r.nodes.t;if(f!==null)for(const b of f)(b.is_global||i)&&b.in()}}function ol(r,i){if(r.nodes)for(var o=r.nodes.start,d=r.nodes.end;o!==null;){var c=o===d?null:Bi(o);i.append(o),o=c}}let Qi=!1,Zs=!1;function dn(r){Zs=r}let oa=null,Lr=!1;function Tr(r){oa=r}let _a=null;function ts(r){_a=r}let $r=null;function nl(r){oa!==null&&($r===null?$r=[r]:$r.push(r))}let dr=null,pr=0,gr=null;function tc(r){gr=r}let ll=1,Is=0,Ks=Is;function cn(r){Ks=r}function dl(){return++ll}function qi(r){var i=r.f;if((i&Wa)!==0)return!0;if(i&Ka&&(r.f&=~Qs),(i&Nr)!==0){for(var o=r.deps,d=o.length,c=0;c<d;c++){var f=o[c];if(qi(f)&&Hn(f),f.wv>r.wv)return!0}(i&kr)!==0&&Ha===null&&Ia(r,Ba)}return!1}function cl(r,i,o=!0){var d=r.reactions;if(d!==null&&!($r!==null&&Ys.call($r,r)))for(var c=0;c<d.length;c++){var f=d[c];(f.f&Ka)!==0?cl(f,i,!1):i===f&&(o?Ia(f,Wa):(f.f&Ba)!==0&&Ia(f,Nr),Or(f))}}function vl(r){var X;var i=dr,o=pr,d=gr,c=oa,f=$r,b=Da,h=Lr,w=Ks,L=r.f;dr=null,pr=0,gr=null,oa=(L&(Ir|ei))===0?r:null,$r=null,ui(r.ctx),Lr=!1,Ks=++Is,r.ac!==null&&(_o(()=>{r.ac.abort(Ms)}),r.ac=null);try{r.f|=wo;var j=r.fn,A=j();r.f|=zi;var k=r.deps,q=Qt==null?void 0:Qt.is_fork;if(dr!==null){var V;if(q||Mi(r,pr),k!==null&&pr>0)for(k.length=pr+dr.length,V=0;V<dr.length;V++)k[pr+V]=dr[V];else r.deps=k=dr;if(qo()&&(r.f&kr)!==0)for(V=pr;V<k.length;V++)((X=k[V]).reactions??(X.reactions=[])).push(r)}else!q&&k!==null&&pr<k.length&&(Mi(r,pr),k.length=pr);if(Rn()&&gr!==null&&!Lr&&k!==null&&(r.f&(Ka|Nr|Wa))===0)for(V=0;V<gr.length;V++)cl(gr[V],r);if(c!==null&&c!==r){if(Is++,c.deps!==null)for(let N=0;N<o;N+=1)c.deps[N].rv=Is;if(i!==null)for(const N of i)N.rv=Is;gr!==null&&(d===null?d=gr:d.push(...gr))}return(r.f&hs)!==0&&(r.f^=hs),A}catch(N){return Nn(N)}finally{r.f^=wo,dr=i,pr=o,gr=d,oa=c,$r=f,ui(b),Lr=h,Ks=w}}function ac(r,i){let o=i.reactions;if(o!==null){var d=Pl.call(o,r);if(d!==-1){var c=o.length-1;c===0?o=i.reactions=null:(o[d]=o[c],o.pop())}}if(o===null&&(i.f&Ka)!==0&&(dr===null||!Ys.call(dr,i))){var f=i;(f.f&kr)!==0&&(f.f^=kr,f.f&=~Qs),Do(f),Id(f),Mi(f,0)}}function Mi(r,i){var o=r.deps;if(o!==null)for(var d=i;d<o.length;d++)ac(r,o[d])}function mi(r){var i=r.f;if((i&gs)===0){Ia(r,Ba);var o=_a,d=Qi;_a=r,Qi=!0;{var c=ys;tn(r.component_function);var f=ls;ao(r.dev_stack??ls)}try{(i&(vs|En))!==0?Zd(r):Ho(r),al(r);var b=vl(r);r.teardown=typeof b=="function"?b:null,r.wv=ll;var h;ud&&(r.f&Wa)!==0&&r.deps}finally{Qi=d,_a=o,tn(c),ao(f)}}}async function Xi(){await Promise.resolve(),wd()}function e(r){var i=r.f,o=(i&Ka)!==0;if(oa!==null&&!Lr){var d=_a!==null&&(_a.f&gs)!==0;if(!d&&($r===null||!Ys.call($r,r))){var c=oa.deps;if((oa.f&wo)!==0)r.rv<Is&&(r.rv=Is,dr===null&&c!==null&&c[pr]===r?pr++:dr===null?dr=[r]:dr.push(r));else{(oa.deps??(oa.deps=[])).push(r);var f=r.reactions;f===null?r.reactions=[oa]:Ys.call(f,oa)||f.push(oa)}}}if(Od.delete(r),Zs&&ks.has(r))return ks.get(r);if(o){var b=r;if(Zs){var h=b.v;return((b.f&Ba)===0&&b.reactions!==null||fl(b))&&(h=Uo(b)),ks.set(b,h),h}var w=(b.f&kr)===0&&!Lr&&oa!==null&&(Qi||(oa.f&kr)!==0),L=(b.f&zi)===0;qi(b)&&(w&&(b.f|=kr),Hn(b)),w&&!L&&(Kn(b),ul(b))}if(Ha!=null&&Ha.has(r))return Ha.get(r);if((r.f&hs)!==0)throw r.v;return r.v}function ul(r){if(r.f|=kr,r.deps!==null)for(const i of r.deps)(i.reactions??(i.reactions=[])).push(r),(i.f&Ka)!==0&&(i.f&kr)===0&&(Kn(i),ul(i))}function fl(r){if(r.v===Va)return!0;if(r.deps===null)return!1;for(const i of r.deps)if(ks.has(i)||(i.f&Ka)!==0&&fl(i))return!0;return!1}function wi(r){var i=Lr;try{return Lr=!0,r()}finally{Lr=i}}const rc=["touchstart","touchmove"];function sc(r){return rc.includes(r)}function _(r,i,o){return(...d)=>{const c=r(...d);var f=c.nodeType===Dl?c.firstChild:c;return pl(f,i,o),c}}function ic(r,i,o){r.__svelte_meta={parent:ls,loc:{file:i,line:o[0],column:o[1]}},o[2]&&pl(r.firstChild,i,o[2])}function pl(r,i,o){for(var d=0;r&&d<o.length;)r.nodeType===Il&&ic(r,i,o[d++]),r=r.nextSibling}const Zi=Symbol("events"),_l=new Set,Po=new Set;function oc(r,i,o,d={}){function c(f){if(d.capture||Oo.call(i,f),!f.cancelBubble)return _o(()=>o==null?void 0:o.call(this,f))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Xr(()=>{i.addEventListener(r,c,d)}):i.addEventListener(r,c,d),c}function jo(r,i,o,d,c){var f={capture:d,passive:c},b=oc(r,i,o,f);(i===document.body||i===window||i===document||i instanceof HTMLMediaElement)&&Go(()=>{i.removeEventListener(r,b,f)})}function Y(r,i,o){(i[Zi]??(i[Zi]={}))[r]=o}function La(r){for(var i=0;i<r.length;i++)_l.add(r[i]);for(var o of Po)o(r)}let vn=null;function Oo(r){var N,ne;var i=this,o=i.ownerDocument,d=r.type,c=((N=r.composedPath)==null?void 0:N.call(r))||[],f=c[0]||r.target;vn=r;var b=0,h=vn===r&&r.__root;if(h){var w=c.indexOf(h);if(w!==-1&&(i===document||i===window)){r.__root=i;return}var L=c.indexOf(i);if(L===-1)return;w<=L&&(b=w)}if(f=c[b]||r.target,f!==i){Js(r,"currentTarget",{configurable:!0,get(){return f||o}});var j=oa,A=_a;Tr(null),ts(null);try{for(var k,q=[];f!==null;){var V=f.assignedSlot||f.parentNode||f.host||null;try{var X=(ne=f[Zi])==null?void 0:ne[d];X!=null&&(!f.disabled||r.target===f)&&X.call(f,r)}catch(je){k?q.push(je):k=je}if(r.cancelBubble||V===i||V===null)break;f=V}if(k){for(let je of q)queueMicrotask(()=>{throw je});throw k}}finally{r.__root=i,delete r.currentTarget,Tr(j),ts(A)}}}function un(r,i,o,d,c,f=!1,b=!1){var L,j;let h,w;try{h=r()}catch(A){w=A}if(typeof h!="function"&&(f||h!=null||w)){const A=d==null?void 0:d[u],k=c?` at ${A}:${c[0]}:${c[1]}`:` in ${A}`,q=((L=o[0])==null?void 0:L.eventPhase)<Event.BUBBLING_PHASE?"capture":"",X=`\`${((j=o[0])==null?void 0:j.type)+q}\` handler${k}`;if(ld(X,b?"remove the trailing `()`":"add a leading `() =>`"),w)throw w}h==null||h.apply(i,o)}var yn,wn;const go=(wn=(yn=globalThis==null?void 0:globalThis.window)==null?void 0:yn.trustedTypes)==null?void 0:wn.createPolicy("svelte-trusted-html",{createHTML:r=>r});function nc(r){return(go==null?void 0:go.createHTML(r))??r}function lc(r,i=!1){var o=Kd("template");return r=r.replaceAll("<!>","<!---->"),o.innerHTML=i?nc(r):r,o.content}function io(r,i){var o=_a;o.nodes===null&&(o.nodes={start:r,end:i,a:null,t:null})}function m(r,i){var o=(i&sd)!==0,d=(i&id)!==0,c,f=!r.startsWith("<!>");return()=>{c===void 0&&(c=lc(f?r:"<!>"+r,!0),o||(c=so(c)));var b=d||Bo?document.importNode(c,!0):c.cloneNode(!0);if(o){var h=so(b),w=b.lastChild;io(h,w)}else io(b,b);return b}}function Jr(r=""){{var i=cs(r+"");return io(i,i),i}}function Oa(){var r=document.createDocumentFragment(),i=document.createComment(""),o=cs();return r.append(i,o),io(i,o),r}function v(r,i){r!==null&&r.before(i)}function n(r,i){var o=i==null?"":typeof i=="object"?i+"":i;o!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=o,r.nodeValue=o+"")}function dc(r,i){return cc(r,i)}const Ki=new Map;function cc(r,{target:i,anchor:o,props:d={},events:c,context:f,intro:b=!0}){Vd();var h=new Set,w=A=>{for(var k=0;k<A.length;k++){var q=A[k];if(!h.has(q)){h.add(q);var V=sc(q);for(const ne of[i,document]){var X=Ki.get(ne);X===void 0&&(X=new Map,Ki.set(ne,X));var N=X.get(q);N===void 0?(ne.addEventListener(q,Oo,{passive:V}),X.set(q,1)):X.set(q,N+1)}}}};w(co(_l)),Po.add(w);var L=void 0,j=Qd(()=>{var A=o??i.appendChild(cs());return Ed(A,{pending:()=>{}},k=>{ga({});var q=Da;f&&(q.c=f),c&&(d.$$events=c),L=r(k,d)||{},ha()}),()=>{var X;for(var k of h)for(const N of[i,document]){var q=Ki.get(N),V=q.get(k);--V==0?(N.removeEventListener(k,Oo),q.delete(k),q.size===0&&Ki.delete(N)):q.set(k,V)}Po.delete(w),A!==o&&((X=A.parentNode)==null||X.removeChild(A))}});return vc.set(L,j),L}let vc=new WeakMap;function wa(r){r&&Bl(r[u]??"a component",r.name)}function ka(){const r=Da==null?void 0:Da.function;function i(o){zl(o,r[u])}return{$destroy:()=>i("$destroy()"),$on:()=>i("$on(...)"),$set:()=>i("$set(...)")}}var jr,Yr,_r,Gs,Fi,Ui,no;class uc{constructor(i,o=!0){Gr(this,"anchor");ra(this,jr,new Map);ra(this,Yr,new Map);ra(this,_r,new Map);ra(this,Gs,new Set);ra(this,Fi,!0);ra(this,Ui,()=>{var i=Qt;if(de(this,jr).has(i)){var o=de(this,jr).get(i),d=de(this,Yr).get(o);if(d)Ko(d),de(this,Gs).delete(o);else{var c=de(this,_r).get(o);c&&(de(this,Yr).set(o,c.effect),de(this,_r).delete(o),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),d=c.effect)}for(const[f,b]of de(this,jr)){if(de(this,jr).delete(f),f===i)break;const h=de(this,_r).get(b);h&&(cr(h.effect),de(this,_r).delete(b))}for(const[f,b]of de(this,Yr)){if(f===o||de(this,Gs).has(f))continue;const h=()=>{if(Array.from(de(this,jr).values()).includes(f)){var L=document.createDocumentFragment();ol(b,L),L.append(cs()),de(this,_r).set(f,{effect:b,fragment:L})}else cr(b);de(this,Gs).delete(f),de(this,Yr).delete(f)};de(this,Fi)||!d?(de(this,Gs).add(f),Hs(b,h,!1)):h()}}});ra(this,no,i=>{de(this,jr).delete(i);const o=Array.from(de(this,jr).values());for(const[d,c]of de(this,_r))o.includes(d)||(cr(c.effect),de(this,_r).delete(d))});this.anchor=i,ea(this,Fi,o)}ensure(i,o){var d=Qt,c=Xn();if(o&&!de(this,Yr).has(i)&&!de(this,_r).has(i))if(c){var f=document.createDocumentFragment(),b=cs();f.append(b),de(this,_r).set(i,{effect:wr(()=>o(b)),fragment:f})}else de(this,Yr).set(i,wr(()=>o(this.anchor)));if(de(this,jr).set(d,i),c){for(const[h,w]of de(this,Yr))h===i?d.unskip_effect(w):d.skip_effect(w);for(const[h,w]of de(this,_r))h===i?d.unskip_effect(w.effect):d.skip_effect(w.effect);d.oncommit(de(this,Ui)),d.ondiscard(de(this,no))}else de(this,Ui).call(this)}}jr=new WeakMap,Yr=new WeakMap,_r=new WeakMap,Gs=new WeakMap,Fi=new WeakMap,Ui=new WeakMap,no=new WeakMap;function y(r,i,o=!1){var d=new uc(r),c=o?vi:0;function f(b,h){d.ensure(b,h)}Vo(()=>{var b=!1;i((h,w=0)=>{b=!0,f(w,h)}),b||f(!1,null)},c)}function la(r,i){return i}function fc(r,i,o){for(var d=[],c=i.length,f,b=i.length,h=0;h<c;h++){let A=i[h];Hs(A,()=>{if(f){if(f.pending.delete(A),f.done.add(A),f.pending.size===0){var k=r.outrogroups;Lo(co(f.done)),k.delete(f),k.size===0&&(r.outrogroups=null)}}else b-=1},!1)}if(b===0){var w=d.length===0&&o!==null;if(w){var L=o,j=L.parentNode;Hd(j),j.append(L),r.items.clear()}Lo(i,!w)}else f={pending:new Set(i),done:new Set},(r.outrogroups??(r.outrogroups=new Set)).add(f)}function Lo(r,i=!0){for(var o=0;o<r.length;o++)cr(r[o],i)}var fn;function Dt(r,i,o,d,c,f=null){var b=r,h=new Map,w=(i&Pn)!==0;if(w){var L=r;b=L.appendChild(cs())}var j=null,A=Rd(()=>{var ne=o();return lo(ne)?ne:ne==null?[]:co(ne)}),k,q=!0;function V(){N.fallback=j,pc(N,k,b,i,d),j!==null&&(k.length===0?(j.f&ns)===0?Ko(j):(j.f^=ns,Ei(j,null,b)):Hs(j,()=>{j=null}))}var X=Vo(()=>{k=e(A);for(var ne=k.length,je=new Set,we=Qt,Te=Xn(),Ke=0;Ke<ne;Ke+=1){var Ee=k[Ke],te=d(Ee,Ke),_e=q?null:h.get(te);_e?(_e.v&&_i(_e.v,Ee),_e.i&&_i(_e.i,Ke),Te&&we.unskip_effect(_e.e)):(_e=_c(h,q?b:fn??(fn=cs()),Ee,te,Ke,c,i,o),q||(_e.e.f|=ns),h.set(te,_e)),je.add(te)}if(ne===0&&f&&!j&&(q?j=wr(()=>f(b)):(j=wr(()=>f(fn??(fn=cs()))),j.f|=ns)),ne>je.size&&mc(k,d),!q)if(Te){for(const[Ve,K]of h)je.has(Ve)||we.skip_effect(K.e);we.oncommit(V),we.ondiscard(()=>{})}else V();e(A)}),N={effect:X,items:h,outrogroups:null,fallback:j};q=!1}function Ti(r){for(;r!==null&&(r.f&Ir)===0;)r=r.next;return r}function pc(r,i,o,d,c){var K,W,Ue,Ne,Pe,R,ie,qe,Se;var f=(d&ad)!==0,b=i.length,h=r.items,w=Ti(r.effect.first),L,j=null,A,k=[],q=[],V,X,N,ne;if(f)for(ne=0;ne<b;ne+=1)V=i[ne],X=c(V,ne),N=h.get(X).e,(N.f&ns)===0&&((W=(K=N.nodes)==null?void 0:K.a)==null||W.measure(),(A??(A=new Set)).add(N));for(ne=0;ne<b;ne+=1){if(V=i[ne],X=c(V,ne),N=h.get(X).e,r.outrogroups!==null)for(const me of r.outrogroups)me.pending.delete(N),me.done.delete(N);if((N.f&ns)!==0)if(N.f^=ns,N===w)Ei(N,null,o);else{var je=j?j.next:w;N===r.effect.last&&(r.effect.last=N.prev),N.prev&&(N.prev.next=N.next),N.next&&(N.next.prev=N.prev),ms(r,j,N),ms(r,N,je),Ei(N,je,o),j=N,k=[],q=[],w=Ti(j.next);continue}if((N.f&xr)!==0&&(Ko(N),f&&((Ne=(Ue=N.nodes)==null?void 0:Ue.a)==null||Ne.unfix(),(A??(A=new Set)).delete(N))),N!==w){if(L!==void 0&&L.has(N)){if(k.length<q.length){var we=q[0],Te;j=we.prev;var Ke=k[0],Ee=k[k.length-1];for(Te=0;Te<k.length;Te+=1)Ei(k[Te],we,o);for(Te=0;Te<q.length;Te+=1)L.delete(q[Te]);ms(r,Ke.prev,Ee.next),ms(r,j,Ke),ms(r,Ee,we),w=we,j=Ee,ne-=1,k=[],q=[]}else L.delete(N),Ei(N,w,o),ms(r,N.prev,N.next),ms(r,N,j===null?r.effect.first:j.next),ms(r,j,N),j=N;continue}for(k=[],q=[];w!==null&&w!==N;)(L??(L=new Set)).add(w),q.push(w),w=Ti(w.next);if(w===null)continue}(N.f&ns)===0&&k.push(N),j=N,w=Ti(N.next)}if(r.outrogroups!==null){for(const me of r.outrogroups)me.pending.size===0&&(Lo(co(me.done)),(Pe=r.outrogroups)==null||Pe.delete(me));r.outrogroups.size===0&&(r.outrogroups=null)}if(w!==null||L!==void 0){var te=[];if(L!==void 0)for(N of L)(N.f&xr)===0&&te.push(N);for(;w!==null;)(w.f&xr)===0&&w!==r.fallback&&te.push(w),w=Ti(w.next);var _e=te.length;if(_e>0){var Ve=(d&Pn)!==0&&b===0?o:null;if(f){for(ne=0;ne<_e;ne+=1)(ie=(R=te[ne].nodes)==null?void 0:R.a)==null||ie.measure();for(ne=0;ne<_e;ne+=1)(Se=(qe=te[ne].nodes)==null?void 0:qe.a)==null||Se.fix()}fc(r,te,Ve)}}f&&Xr(()=>{var me,$;if(A!==void 0)for(N of A)($=(me=N.nodes)==null?void 0:me.a)==null||$.apply()})}function _c(r,i,o,d,c,f,b,h){var w=(b&ed)!==0?(b&rd)===0?Fd(o,!1,!1):Xs(o):null,L=(b&td)!==0?Xs(c):null;return w&&(w.trace=()=>{h()[(L==null?void 0:L.v)??c]}),{v:w,i:L,e:wr(()=>(f(i,w??o,L??c,h),()=>{r.delete(d)}))}}function Ei(r,i,o){if(r.nodes)for(var d=r.nodes.start,c=r.nodes.end,f=i&&(i.f&ns)===0?i.nodes.start:o;d!==null;){var b=Bi(d);if(f.before(d),d===c)return;d=b}}function ms(r,i,o){i===null?r.effect.first=o:i.next=o,o===null?r.effect.last=i:o.prev=i}function mc(r,i){const o=new Map,d=r.length;for(let c=0;c<d;c++){const f=i(r[c],c);if(o.has(f)){const b=String(o.get(f)),h=String(c);let w=String(f);w.startsWith("[object ")&&(w=null),Gl(b,h,w)}o.set(f,c)}}const pn=[...` 	
\r\f \v\uFEFF`];function xc(r,i,o){var d=r==null?"":""+r;if(i&&(d=d?d+" "+i:i),o){for(var c in o)if(o[c])d=d?d+" "+c:c;else if(d.length)for(var f=c.length,b=0;(b=d.indexOf(c,b))>=0;){var h=b+f;(b===0||pn.includes(d[b-1]))&&(h===d.length||pn.includes(d[h]))?d=(b===0?"":d.substring(0,b))+d.substring(h+1):b=h}}return d===""?null:d}function bc(r,i){return r==null?null:String(r)}function Qe(r,i,o,d,c,f){var b=r.__className;if(b!==o||b===void 0){var h=xc(o,d,f);h==null?r.removeAttribute("class"):r.className=h,r.__className=o}else if(f&&c!==f)for(var w in f){var L=!!f[w];(c==null||L!==!!c[w])&&r.classList.toggle(w,L)}return f}function Ds(r,i,o,d){var c=r.__style;if(c!==i){var f=bc(i);f==null?r.removeAttribute("style"):r.style.cssText=f,r.__style=i}return d}function mo(r,i,o=!1){if(r.multiple){if(i==null)return;if(!lo(i))return dd();for(var d of r.options)d.selected=i.includes(Oi(d));return}for(d of r.options){var c=Oi(d);if(zd(c,i)){d.selected=!0;return}}(!o||i!==void 0)&&(r.selectedIndex=-1)}function Wo(r){var i=new MutationObserver(()=>{mo(r,r.__value)});i.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Go(()=>{i.disconnect()})}function Gi(r,i,o=i){var d=new WeakSet,c=!0;Zn(r,"change",f=>{var b=f?"[selected]":":checked",h;if(r.multiple)h=[].map.call(r.querySelectorAll(b),Oi);else{var w=r.querySelector(b)??r.querySelector("option:not([disabled])");h=w&&Oi(w)}o(h),Qt!==null&&d.add(Qt)}),tl(()=>{var f=i();if(r===document.activeElement){var b=ro??Qt;if(d.has(b))return}if(mo(r,f,c),c&&f===void 0){var h=r.querySelector(":checked");h!==null&&(f=Oi(h),o(f))}r.__value=f,c=!1}),Wo(r)}function Oi(r){return"__value"in r?r.__value:r.value}const gc=Symbol("is custom element"),hc=Symbol("is html");function St(r,i,o,d){var c=yc(r);c[i]!==(c[i]=o)&&(i==="loading"&&(r[Nl]=o),o==null?r.removeAttribute(i):typeof o!="string"&&wc(r).includes(i)?r[i]=o:r.setAttribute(i,o))}function yc(r){return r.__attributes??(r.__attributes={[gc]:r.nodeName.includes("-"),[hc]:r.namespaceURI===jn})}var _n=new Map;function wc(r){var i=r.getAttribute("is")||r.nodeName,o=_n.get(i);if(o)return o;_n.set(i,o=[]);for(var d,c=r,f=Element.prototype;f!==c;){d=jl(c);for(var b in d)d[b].set&&o.push(b);c=Io(c)}return o}function ua(r,i,o=i){var d=new WeakSet;Zn(r,"input",async c=>{r.type==="checkbox"&&Zo();var f=c?r.defaultValue:r.value;if(f=ho(r)?yo(f):f,o(f),Qt!==null&&d.add(Qt),await Xi(),f!==(f=i())){var b=r.selectionStart,h=r.selectionEnd,w=r.value.length;if(r.value=f??"",h!==null){var L=r.value.length;b===h&&h===w&&L>w?(r.selectionStart=L,r.selectionEnd=L):(r.selectionStart=b,r.selectionEnd=Math.min(h,L))}}}),wi(i)==null&&r.value&&(o(ho(r)?yo(r.value):r.value),Qt!==null&&d.add(Qt)),Ri(()=>{r.type==="checkbox"&&Zo();var c=i();if(r===document.activeElement){var f=ro??Qt;if(d.has(f))return}ho(r)&&c===yo(r.value)||r.type==="date"&&!c&&!r.value||c!==r.value&&(r.value=c??"")})}function ho(r){var i=r.type;return i==="number"||i==="range"}function yo(r){return r===""?null:+r}function mn(r,i){return r===i||(r==null?void 0:r[Vs])===i}function ml(r={},i,o,d){return tl(()=>{var c,f;return Ri(()=>{c=f,f=[],wi(()=>{r!==o(...f)&&(i(r,...f),c&&mn(o(...c),r)&&i(null,...c))})}),()=>{Xr(()=>{f&&mn(o(...f),r)&&i(null,...f)})}}),r}let Wi=!1;function kc(r){var i=Wi;try{return Wi=!1,[r(),Wi]}finally{Wi=i}}function $c(r,i,o,d){var c=d,f=!0,b=()=>(f&&(f=!1,c=d),c),h;h=r[i],h===void 0&&d!==void 0&&(h=b());var w;return w=()=>{var L=r[i];return L===void 0?b():(f=!0,L)},w}function xn(r,i,o,d,c,f){Pd(i,()=>{var b=!1,h=ys==null?void 0:ys[u];Ri(()=>{if(!b){var[w,L]=kc(o);if(!L){var j=d(),A=!1,k=Ri(()=>{A||w[j]});if(A=!0,k.deps===null){var q=`${h}:${c}:${f}`;od(r,q),b=!0}}}})})}function Xt(r,...i){return wi(()=>{try{let o=!1;const d=[];for(const c of i)c&&typeof c=="object"&&Vs in c?(d.push(md(c,!0)),o=!0):d.push(c);o&&(nd(r),console.log("%c[snapshot]","color: grey",...d))}catch{}}),i}{let r=function(i){if(!(i in globalThis)){let o;Object.defineProperty(globalThis,i,{configurable:!0,get:()=>{if(o!==void 0)return o;Yl(i)},set:d=>{o=d}})}};var Rx=r;r("$state"),r("$effect"),r("$derived"),r("$inspect"),r("$props"),r("$bindable")}function Es(r){Da===null&&Fl("onMount"),Ga(()=>{const i=wi(r);if(typeof i=="function")return i})}const Tc="5";var kn;typeof window<"u"&&((kn=window.__svelte??(window.__svelte={})).v??(kn.v=new Set)).add(Tc);const Ec="modulepreload",Sc=function(r){return"/"+r},bn={},ai=function(i,o,d){let c=Promise.resolve();if(o&&o.length>0){let b=function(L){return Promise.all(L.map(j=>Promise.resolve(j).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),w=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));c=b(o.map(L=>{if(L=Sc(L),L in bn)return;bn[L]=!0;const j=L.endsWith(".css"),A=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${L}"]${A}`))return;const k=document.createElement("link");if(k.rel=j?"stylesheet":Ec,j||(k.as="script"),k.crossOrigin="",k.href=L,w&&k.setAttribute("nonce",w),document.head.appendChild(k),j)return new Promise((q,V)=>{k.addEventListener("load",q),k.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${L}`)))})}))}function f(b){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=b,window.dispatchEvent(h),!h.defaultPrevented)throw b}return c.then(b=>{for(const h of b||[])h.status==="rejected"&&f(h.reason);return i().catch(f)})},Ni={"common.loading":"Loading...","common.save":"Save","common.saving":"Saving...","common.saved":"Saved","common.cancel":"Cancel","common.refresh":"Refresh","common.delete":"Delete","common.confirm":"Confirm","common.back":"Back","common.next":"Next","common.skip":"Skip","common.yes":"Yes","common.no":"No","common.enabled":"Enabled","common.disabled":"Disabled","common.connected":"Connected","common.disconnected":"Disconnected","common.not_configured":"Not configured","common.none":"None","common.error":"Error","common.success":"Success","common.failed":"Failed","common.network_error":"Network error","common.connection_failed":"Connection failed","common.or":"or","common.tools":"tools","common.verify":"Verify","common.verifying":"Verifying...","common.close":"Close","nav.overview":"Overview","nav.chat":"Chat","nav.goals":"Goals","nav.skills":"Skills","nav.knowledge":"Knowledge","nav.tools":"Tools","nav.trash":"Trash","nav.security":"Security","nav.ops":"Ops","nav.settings":"Settings","header.title":"safe-agent","header.loading":"loading...","header.paused":"paused","header.running":"running","header.disconnected":"disconnected","header.tools_count":"{count} tools","header.resume":"Resume","header.pause":"Pause","header.force_tick":"Force Tick","header.sign_out":"Sign out","login.title":"safe-agent","login.2fa_required":"Two-factor authentication required","login.sign_in_continue":"Sign in to continue","login.sign_in_account":"Sign in with your account","login.enter_password":"Enter the dashboard password to continue","login.login_failed":"Login failed","login.verification_failed":"Verification failed","login.waiting_passkey":"Waiting for passkey...","login.use_passkey":"Use Passkey","login.authenticator_code":"Authenticator Code","login.verify":"Verify","login.verify_recovery":"Verify Recovery Code","login.use_recovery":"Use a recovery code instead","login.recovery_code":"Recovery Code","login.use_authenticator":"Use authenticator code instead","login.back_to_login":"Back to login","login.continue_with":"Continue with {provider}","login.username":"Username","login.password":"Password","login.enter_username":"Enter username","login.enter_password_placeholder":"Enter password","login.signing_in":"Signing in...","login.sign_in":"Sign In","login.passkey_cancelled":"Passkey authentication was cancelled","login.passkey_cancelled_timeout":"Passkey authentication was cancelled or timed out","login.passkey_failed":"Passkey authentication failed: {message}","login.passkey_start_failed":"Failed to start passkey authentication","login.passkey_verify_failed":"Passkey verification failed","onboarding.welcome":"Welcome to Safe Agent","onboarding.welcome_desc":"Let's set up your AI agent. You can change these later in Settings.","onboarding.agent_name":"Agent Name","onboarding.agent_name_placeholder":"e.g. Jarvis, Friday, Atlas...","onboarding.core_personality":"Core Personality","onboarding.personality_placeholder":"Describe how your agent should behave, e.g. 'You are a helpful assistant that responds concisely.'","onboarding.personality_hint":"This instruction persists across all interactions.","onboarding.llm_backend":"LLM Backend","onboarding.llm_desc":"Choose and test the AI model that powers your agent.","onboarding.backend_label":"Backend","onboarding.env_hint":"Make sure the required environment variable for your chosen backend is set","onboarding.testing":"Testing connection...","onboarding.test_connection":"Test Connection","onboarding.test_success":"Success!","onboarding.test_failed":"Failed","onboarding.network_error_test":"Network error testing LLM connection","onboarding.messaging":"Messaging Platforms","onboarding.messaging_desc":"Optionally connect messaging platforms. You can do this later in Settings.","onboarding.telegram":"Telegram","onboarding.telegram_requires":"Requires TELEGRAM_BOT_TOKEN","onboarding.whatsapp":"WhatsApp","onboarding.whatsapp_requires":"Requires WhatsApp bridge setup","onboarding.messaging_hint":"Messaging platforms can be configured later via the config file or environment variables.","onboarding.ready":"Ready to Go","onboarding.ready_desc":"Review your configuration and complete setup.","onboarding.review_name":"Agent Name","onboarding.review_backend":"LLM Backend","onboarding.review_telegram":"Telegram","onboarding.review_whatsapp":"WhatsApp","onboarding.review_personality":"Personality","onboarding.default":"(default)","onboarding.change_later":"You can change all of these later from the Settings tab.","onboarding.step_of":"Step {current} of {total}","onboarding.completing":"Completing...","onboarding.complete_setup":"Complete Setup","onboarding.network_error_save":"Network error saving config","onboarding.network_error_complete":"Network error completing onboarding","onboarding.failed_save":"Failed to save config","onboarding.failed_complete":"Failed to complete onboarding","chat.no_messages":"No messages yet. Say something to the agent.","chat.tool_running":"running…","chat.thinking":"Thinking…","chat.processing":"Processing…","chat.send_failed":"Failed to send message","chat.placeholder":"Type a message...","goals.title":"Goals & Tasks","goals.all_statuses":"All statuses","goals.active":"Active","goals.paused":"Paused","goals.completed":"Completed","goals.failed":"Failed","goals.cancelled":"Cancelled","goals.error_loading":"Error loading goals","goals.no_goals":"No goals yet. The agent will create goals as it works on tasks.","goals.pause":"Pause","goals.cancel":"Cancel","goals.resume":"Resume","goals.self_reflection":"Self-Reflection","goals.tasks":"Tasks","goals.no_tasks":"No tasks defined yet.","goals.depends_on":"Depends on:","goals.tool":"Tool:","goals.created":"Created","goals.updated":"Updated","goals.completed_at":"Completed","goals.id":"ID","goals.status_update_failed":"Failed to update status: ","skills.title":"Skills & Credentials","skills.count":"{count} skill(s)","skills.import":"Import","skills.import_skill":"Import Skill","skills.git_repo":"Git Repository","skills.archive_url":"Archive URL","skills.local_path":"Local Path","skills.git_placeholder":"https://github.com/user/skill.git","skills.url_placeholder":"https://example.com/skill.tar.gz","skills.path_placeholder":"/path/to/skill/dir","skills.importing":"Importing...","skills.error_loading":"Error loading skills","skills.no_skills":"No skills installed. The agent can create skills, or import one above.","skills.stop":"Stop","skills.start":"Start","skills.restart":"Restart","skills.view_log":"View Log","skills.credentials":"Credentials","skills.no_credentials":"No credentials defined","skills.schedule":"Schedule","skills.entrypoint":"Entrypoint","skills.has_venv":"Python venv","skills.manually_stopped":"Manually stopped","knowledge.title":"Knowledge Graph","knowledge.summary":"{nodes} nodes, {edges} edges","knowledge.search_placeholder":"Search knowledge graph...","knowledge.back":"Back","knowledge.no_nodes":"No knowledge nodes yet. The agent builds its knowledge graph over time.","knowledge.no_neighbors":"No neighbors for this node.","knowledge.confidence":"confidence:","knowledge.node_type":"Type","knowledge.created":"Created","tools.title":"Registered Tools","tools.no_tools":"No tools loaded.","tools.description":"Description","tools.auto_approve":"Auto-approve","tools.parameters":"Parameters","tools.no_parameters":"No parameters","trash.title":"Trash","trash.empty":"Trash is empty.","trash.restore":"Restore","trash.delete_permanent":"Delete permanently","trash.confirm_delete":"Permanently delete this file?","trash.deleted":"Deleted","trash.original_path":"Original path","security.title":"Security & Trust","security.overview":"Overview","security.audit_trail":"Audit Trail","security.cost_tracking":"Cost Tracking","security.rate_limits":"Rate Limits","security.twofa":"2FA","security.total_events":"Total Events","security.tool_calls":"Tool Calls","security.approvals":"Approvals","security.rejections":"Rejections","security.pii_detections":"PII Detections","security.permission_denied":"Permission Denied","security.todays_cost":"Today's Cost","security.month_cost":"This Month","security.total_cost":"All-Time Cost","security.total_tokens":"Total Tokens","security.daily_limit":"Daily Limit","security.budget_remaining":"Budget Remaining","security.calls_per_min":"Calls/min","security.calls_per_hour":"Calls/hr","security.limit_per_min":"Limit/min","security.limit_per_hour":"Limit/hr","security.recent_events":"Recent Events","security.no_events":"No audit events yet.","security.filter":"Filter","security.all_types":"All types","security.why":"Why?","security.recent_costs":"Recent Cost Entries","security.no_costs":"No cost data yet.","security.model":"Model","security.tokens":"Tokens","security.cost":"Cost","security.pending_challenges":"Pending 2FA Challenges","security.no_challenges":"No pending 2FA challenges.","security.reject":"Reject","security.action_explanation":"Action Explanation","security.causal_chain":"Causal Chain","security.no_explanation":"No explanation available.","ops.health":"Health","ops.updates":"Updates","ops.backup":"Backup","ops.federation":"Federation","ops.llm_backends":"LLM Backends","ops.health_check":"Health Check","ops.checking_health":"Checking health...","ops.database":"Database","ops.agent":"Agent","ops.prometheus":"Prometheus Metrics","ops.prometheus_desc":"Metrics are exposed at /metrics in Prometheus text format.","ops.prometheus_hint":"Point your Prometheus scrape config or Grafana agent at this endpoint. No authentication is required for /metrics.","ops.view_raw_metrics":"View Raw Metrics","ops.auto_update":"Auto-Update","ops.current_version":"Current:","ops.update_available":"Update Available","ops.up_to_date":"Up to date","ops.release_notes":"Release Notes","ops.applying":"Applying...","ops.apply_update":"Apply Update","ops.view_release":"View Release","ops.check_updates":"Check for Updates","ops.checking":"Checking...","ops.backup_restore":"Backup & Restore","ops.export_backup":"Export Backup","ops.download_backup":"Download Backup","ops.restore_backup":"Restore from Backup","ops.upload_backup":"Upload Backup File","ops.restoring":"Restoring...","ops.federation_title":"Multi-Node Federation","ops.federation_loading":"Loading federation status...","ops.add_peer":"Add Peer Address","ops.add":"Add","ops.peers":"Peers","ops.no_peers":"No peers connected.","ops.remove_peer":"Remove peer","ops.llm_plugins":"LLM Backend Plugins","ops.loading_backends":"Loading backends...","ops.active_backend":"Active:","ops.available_backends":"Available Backends","settings.messaging":"Messaging Platforms","settings.telegram":"Telegram","settings.telegram_desc":"Long-polling bot via teloxide","settings.whatsapp":"WhatsApp","settings.whatsapp_desc":"Baileys bridge (Node.js)","settings.bot_token":"Bot Token","settings.bot_token_set":"Set (TELEGRAM_BOT_TOKEN)","settings.bot_token_not_set":"Not set","settings.allowed_chat_ids":"Allowed Chat IDs","settings.none_all_denied":"None (all denied)","settings.primary_channel":"Primary Channel","settings.enable_telegram_hint":"Enable Telegram by setting telegram.enabled = true in your config and providing a TELEGRAM_BOT_TOKEN env var.","settings.bridge_port":"Bridge Port","settings.webhook_port":"Webhook Port","settings.allowed_numbers":"Allowed Numbers","settings.connected_number":"Connected Number","settings.scan_qr":"Scan this QR code with WhatsApp to pair","settings.waiting_qr":"Waiting for QR...","settings.refresh_qr":"Refresh QR","settings.enable_whatsapp_hint":"Enable WhatsApp by setting whatsapp.enabled = true in your config and adding allowed numbers. The Baileys bridge requires Node.js in the container.","settings.active_platforms":"{count} active platform(s)","settings.active_platforms_detail":"the primary messaging backend is used by the message tool.","settings.pairing":"Pairing","settings.dashboard_auth":"Dashboard Authentication","settings.password_login":"Password Login","settings.password_active":"Password authentication is active via the DASHBOARD_PASSWORD env var.","settings.password_disabled":"Password login is disabled. Users must sign in via SSO.","settings.sso_providers":"SSO Providers","settings.sso_configured":"{count} configured","settings.no_sso":"No SSO providers configured. Add providers to [dashboard].sso_providers in config.","settings.lockout_warning":"Password login is disabled and no SSO providers are configured. You may be locked out after your session expires.","settings.sso_config_hint":"Configure SSO in your config.toml:","settings.sso_callback_hint":"SSO reuses the same OAuth client credentials. The SSO callback URL is /api/auth/sso/{provider}/callback.","settings.twofa":"Two-Factor Authentication","settings.oauth":"Connected Accounts (OAuth)","settings.oauth_count":"{count} account(s)","settings.available_integrations":"Available Integrations","settings.no_oauth":"No OAuth providers available.","settings.no_refresh_token":"No refresh token","settings.updated":"Updated:","settings.refresh_all":"Refresh all","settings.add_account":"Add account","settings.disconnect_confirm":"Disconnect {email} from {provider}?","settings.timezone_locale":"Timezone & Locale","settings.current_time":"Current Time","settings.effective_timezone":"Effective Timezone","settings.per_user_override":"(per-user override)","settings.system_default":"(system default)","settings.timezone":"Timezone","settings.detect":"Detect","settings.timezone_hint":"IANA timezone name. Leave empty to use system default ({default}).","settings.locale":"Locale","settings.locale_hint":"BCP 47 locale tag (e.g. en-US, de-DE, ja-JP). Leave empty to use system default ({default}).","settings.config_reference":"Configuration Reference","settings.config_hint":"Messaging and OAuth configuration is done via the TOML config file and environment variables. Changes require a container restart.","settings.language":"Language","settings.language_hint":"Choose the dashboard display language. This also sets your locale for agent responses.","memory.title_core":"Core Memory","memory.title_conversation":"Conversation","memory.title_archival":"Archival","memory.core":"Core","memory.conversation":"Conversation","memory.archival":"Archival","memory.empty":"No memories found.","memory.search_placeholder":"Search archival memory...","memory.search":"Search","memory.edit":"Edit","memory.save":"Save","memory.delete_confirm":"Delete this memory?","stats.title":"Agent Statistics","stats.ticks":"Ticks","stats.messages":"Messages","stats.approvals":"Approvals","stats.rejections":"Rejections","stats.uptime":"Uptime","stats.last_tick":"Last Tick","stats.never":"never","activity.title":"Recent Activity","activity.no_activity":"No recent activity.","feed.title":"Tool Activity","feed.no_events":"No tool events yet. Activity will appear here in real time.","feed.thinking":"Thinking","feed.executing":"Executing","feed.completed":"Completed","feed.approval_needed":"Approval needed","pending.title":"Pending Actions","pending.approve_all":"Approve All","pending.reject_all":"Reject All","pending.approve":"Approve","pending.reject":"Reject","pending.no_pending":"No pending actions.","pending.tool":"Tool","pending.params":"Params","users.title":"User Management","users.add_user":"Add User","users.no_users":"No users found.","users.username":"Username","users.display_name":"Display Name","users.email":"Email","users.role":"Role","users.status":"Status","users.actions":"Actions","users.active":"Active","users.disabled":"disabled","users.edit":"Edit","users.disable":"Disable","users.enable":"Enable","users.create_user":"Create User","users.creating":"Creating...","users.password":"Password","users.role_admin":"admin","users.role_user":"user","users.role_viewer":"viewer","users.telegram_id":"Telegram ID","users.whatsapp_id":"WhatsApp ID","users.platform_ids":"Platform IDs","twofa.title":"Two-Factor Authentication","twofa.totp_enabled":"TOTP two-factor authentication is active. Enter your current code to disable it.","twofa.totp_code":"TOTP Code","twofa.disable_2fa":"Disable 2FA","twofa.setup_desc":"Add an extra layer of security by requiring a time-based code from your phone when signing in.","twofa.setup_authenticator":"Set Up Authenticator","twofa.scan_step":"1. Scan with your authenticator app:","twofa.manual_key":"Or enter this key manually:","twofa.save_recovery":"2. Save your recovery codes:","twofa.recovery_hint":"Store these codes somewhere safe. Each code can only be used once.","twofa.show_codes":"Show recovery codes","twofa.hide_codes":"Hide recovery codes","twofa.verify_step":"3. Verify your setup:","twofa.verify_hint":"Enter a code from your authenticator to confirm.","twofa.verify_enable":"Verify & Enable","twofa.passkeys":"Passkeys","twofa.passkeys_desc":"Use biometrics, security keys, or your device's screen lock","twofa.registered":"{count} registered","twofa.passkey_name":"Passkey Name","twofa.passkey_placeholder":"e.g. MacBook Touch ID","twofa.registering":"Registering...","twofa.add_passkey":"Add Passkey","twofa.passkey_info":"Passkeys use your device's biometric sensor, security key, or screen lock for passwordless 2FA.","twofa.added":"Added","twofa.delete_passkey":"Delete passkey","twofa.info_box":"When 2FA is enabled, you'll need to provide a second factor (authenticator code or passkey) after entering your password.","twofa.info_both":"You can use either your authenticator app or a passkey.","cred.label":"Credential","cred.env":"env","cred.oauth":"OAuth","cred.set":"Set","cred.missing":"Missing","cred.token_present":"Token present","cred.no_token":"No token","cred.configured":"Configured","cred.required":"Required","cred.optional":"Optional","cred.configured_placeholder":"(configured - enter new value to update)","cred.enter_value":"Enter value...","cred.remove_confirm":'Remove credential "{name}" from "{skill}"?',"cred.save_failed":"Failed to save credential: ","cred.remove_failed":"Failed to remove credential: ","goals.count":"{count} goal(s)","skills.name_placeholder":"Skill name (optional, auto-detected)","skills.import_desc":"Import an existing OpenClaw skill from a Git repository, archive URL (.tar.gz/.zip), or local directory. The skill must contain a skill.toml manifest.","skills.no_skills_import":"No skills installed. Skills will appear here when the agent creates them, or use the Import button above.","skills.disable":"Disable","skills.enable":"Enable","skills.deleting":"Deleting...","skills.delete":"Delete","skills.parameters":"Parameters","skills.logs":"Logs","skills.manifest":"Manifest","skills.extension":"Extension","skills.environment_vars":"Environment Variables","skills.add":"Add","skills.skill_panel":"Skill Panel","skills.open_full_page":"Open full page","skills.registered_routes":"Registered Routes","skills.no_extension_ui":"This skill has an extension but no UI panel or routes registered.","skills.edit_manifest":"Edit skill.toml directly","skills.loading_detail":"Loading detail...","skills.last_lines":"Last 300 lines of skill.log","skills.no_log":"(no log output)","skills.saved_restart":"Saved. Restart the skill for changes to take effect.","skills.delete_confirm":'Permanently delete skill "{name}"? This cannot be undone.',"skills.restart_failed":"Failed to restart skill: ","skills.delete_failed":"Failed to delete skill: ","skills.toggle_failed":"Failed to toggle skill: ","skills.env_failed":"Failed to set env var: ","skills.delete_env_failed":"Failed to delete env var: ","skills.remove_env_confirm":'Remove env var "{key}" from "{skill}"?',"trash.search_placeholder":"Search by name, path, or source...","trash.no_match":'No items matching "{query}"',"trash.empty_hint":"Deleted files and directories will appear here for recovery.","trash.empty_trash":"Empty Trash","trash.delete_all":"Delete all?","trash.items_count":"{count} item(s)","trash.restore_title":"Restore to original location","trash.delete_permanent_title":"Permanently delete","trash.permanent_confirm":'Permanently delete "{name}"? This cannot be undone.',"trash.load_failed":"Failed to load trash","trash.restore_failed":"Failed to restore","trash.delete_failed":"Failed to delete","trash.empty_failed":"Failed to empty trash","trash.restored":"Restored","trash.emptied":"Trash emptied","users.users":"Users","users.new_user":"New User","users.loading":"Loading users...","users.no_users_desc":"No users configured. The agent operates in single-user mode.","users.create":"Create","users.delete_confirm":'Delete user "{username}"? This cannot be undone.',"users.disable_user":"Disable user","users.enable_user":"Enable user","users.delete_user":"Delete user","users.last_seen":"Last seen:","users.never":"Never","users.just_now":"Just now","users.failed_create":"Failed to create user (username may already exist)","users.error_create":"Error creating user","users.failed_update":"Failed to update user","users.failed_role":"Failed to update role","users.failed_delete":"Failed to delete user","users.created":'User "{username}" created',"twofa.multi_user_only":"Two-factor authentication is only available for multi-user accounts.","twofa.loading_status":"Loading 2FA status...","twofa.load_failed":"Failed to load 2FA status","twofa.authenticator_app":"Authenticator App (TOTP)","twofa.authenticator_hint":"Use an app like Google Authenticator or Authy","twofa.enabled_badge":"Enabled","twofa.disabled_badge":"Disabled","twofa.none_badge":"None","twofa.added_label":"Added","ops.tools":"Tools","ops.exporting":"Exporting...","ops.peer_placeholder":"http://192.168.1.101:3031","ops.remove_peer_title":"Remove peer","ops.federation_disabled":"Federation is not enabled. Add [federation] with enabled = true to your config to enable multi-node features.","ops.peers_count":"Peers ({count})","ops.switch_backend_hint":"To switch backends, set backend in [llm] config or the LLM_BACKEND env var and restart. Custom backends can be registered as plugins at runtime.","ops.model_advisor":"Model Advisor","ops.system_specs":"System Specifications","ops.advisor_ram":"RAM","ops.advisor_available":"available","ops.advisor_cpu":"CPU","ops.advisor_cores":"cores","ops.advisor_gpu":"GPU","ops.advisor_no_gpu":"No GPU detected","ops.advisor_backend_accel":"Acceleration","ops.advisor_unified":"Unified memory","ops.advisor_detect":"Detect Hardware & Recommend Models","ops.ollama_status":"Ollama Status","ops.ollama_running":"Ollama is running","ops.ollama_not_running":"Ollama is not running","ops.ollama_install_hint":"Install Ollama from https://ollama.com to pull and run models locally.","ops.advisor_models_installed":"models installed","ops.advisor_detect_first":"Click 'Detect Hardware' above to scan your system.","ops.recommended_models":"Recommended Models","ops.advisor_all_use_cases":"All Use Cases","ops.advisor_uc_general":"General","ops.advisor_uc_coding":"Coding","ops.advisor_uc_reasoning":"Reasoning","ops.advisor_uc_chat":"Chat","ops.advisor_uc_multimodal":"Multimodal","ops.advisor_analyzing":"Analyzing models for your hardware...","ops.advisor_col_name":"Model","ops.advisor_col_params":"Params","ops.advisor_col_score":"Score","ops.advisor_col_fit":"Fit","ops.advisor_col_mode":"Mode","ops.advisor_col_quant":"Quant","ops.advisor_col_tps":"tok/s","ops.advisor_col_mem":"Memory","ops.advisor_col_action":"Action","ops.advisor_use":"Use This","ops.advisor_install":"Install","ops.advisor_pulling":"Pulling...","ops.advisor_pull_complete":"Pull complete!","ops.advisor_configured":"Configured {model} as active Ollama backend.","ops.advisor_no_models":"No models fit your hardware. Try a different use case filter.","onboarding.ollama_detecting":"Detecting hardware...","onboarding.ollama_your_hardware":"Your hardware:","onboarding.ollama_connected":"Ollama is connected","onboarding.ollama_not_running":"Ollama is not running","onboarding.ollama_top_models":"Top recommended models","onboarding.ollama_score":"Score","onboarding.ollama_use":"Use This","onboarding.ollama_install":"Install","onboarding.ollama_pulling":"Pulling...","onboarding.ollama_installed":"Installed!","onboarding.ollama_configured":"Configured {model} as Ollama backend!","onboarding.ollama_install_hint":"Install Ollama from https://ollama.com, then restart setup to pull models.","header.theme_light":"Light mode","header.theme_dark":"Dark mode","header.menu":"Menu","header.close_menu":"Close menu","header.notifications":"Notifications","header.install_app":"Install App","history.title":"Conversation History","history.search":"Search conversations...","history.no_results":"No conversations found.","history.load_more":"Load More","history.total":"{total} messages","history.all_roles":"All","history.user_only":"User","history.assistant_only":"Assistant","history.system_only":"System","notifications.enable":"Enable Notifications","notifications.enabled":"Notifications enabled","notifications.disabled":"Notifications disabled","notifications.approval_title":"Approval Required","notifications.approval_body":"{tool} needs your approval","notifications.unsupported":"Browser notifications not supported","marketplace.title":"Skill Marketplace","marketplace.search":"Search community skills...","marketplace.install":"Install","marketplace.installing":"Installing...","marketplace.installed":"Installed!","marketplace.failed":"Install failed","marketplace.community":"Community Skills","marketplace.no_results":"No matching skills found.","marketplace.browse_github":"Browse on GitHub","marketplace.featured":"Featured Skills","marketplace.category_all":"All","marketplace.category_productivity":"Productivity","marketplace.category_development":"Development","marketplace.category_communication":"Communication","marketplace.category_data":"Data & Analytics","marketplace.repo":"Repository","marketplace.by":"by","knowledge.graph_view":"Graph View","knowledge.list_view":"List View","knowledge.zoom_in":"Zoom in","knowledge.zoom_out":"Zoom out","knowledge.reset_view":"Reset view","knowledge.graph_hint":"Click a node to explore its connections. Drag to pan, scroll to zoom.","knowledge.loading_graph":"Loading graph data...","persona.title":"Agent Persona","persona.personality":"Core Personality","persona.personality_hint":"Define how your agent behaves, its tone, and priorities. This persists across all conversations.","persona.save":"Save Persona","persona.saving":"Saving...","persona.saved":"Persona saved","persona.failed":"Failed to save persona","oauth.health_good":"Healthy","oauth.health_warning":"Expiring soon","oauth.health_expired":"Expired","oauth.expires_in":"Expires in {time}","oauth.expired_ago":"Expired {time} ago","oauth.never_expires":"No expiry","oauth.reauth":"Re-authorize","pwa.install":"Install App","pwa.install_hint":"Install safe-agent as an app for quick access","pwa.dismiss":"Dismiss"},xl="safe-agent-locale",eo={en:"English",es:"Español",fr:"Français",de:"Deutsch",ja:"日本語","zh-CN":"简体中文","pt-BR":"Português (Brasil)"},Si=new Map;Si.set("en",Ni);const Ws=$state({locale:"en",messages:Ni});function l(r,i){let o=Ws.messages[r]??Ni[r]??r;if(i)for(const[d,c]of Object.entries(i))o=o.replaceAll(`{${d}}`,String(c));return o}const gn={es:()=>ai(()=>import("./assets/es-C-5hGQRB.js"),[]),fr:()=>ai(()=>import("./assets/fr-D38o4Ede.js"),[]),de:()=>ai(()=>import("./assets/de-isHq9pf6.js"),[]),ja:()=>ai(()=>import("./assets/ja-DI5H4Z4j.js"),[]),"zh-CN":()=>ai(()=>import("./assets/zh-CN-BQXAz369.js"),[]),"pt-BR":()=>ai(()=>import("./assets/pt-BR-DTLklRIk.js"),[])};async function Ro(r){if(r===Ws.locale&&Si.has(r))return;let i;if(Si.has(r))i=Si.get(r);else if(gn[r])try{i=(await gn[r]()).default,Si.set(r,i)}catch{console.warn(`Locale "${r}" not found, falling back to English`),i=Ni,r="en"}else i=Ni,r="en";Ws.locale=r,Ws.messages=i;try{localStorage.setItem(xl,r)}catch{}}function Cc(){let r=null;try{r=localStorage.getItem(xl)}catch{}if(r&&r in eo){Ro(r);return}const i=navigator.language??"en",o=i in eo?i:null,d=o?null:Object.keys(eo).find(f=>i.startsWith(f.split("-")[0]));Ro(o??d??"en")}const Ac=100,kt=yi(Jt({refreshCounter:0,currentTab:"overview",currentMemoryTab:"core",mobileMenuOpen:!1,theme:"dark",notificationsEnabled:!1}),"dashboard"),va=yi(Jt({checked:!1,authenticated:!1,userId:null,role:null,subject:null,onboardingCompleted:null}),"auth");function Pc(){const r=localStorage.getItem("safe-agent-theme");(C(r,"light")||C(r,"dark"))&&(kt.theme=r),bl(kt.theme)}function jc(){kt.theme=C(kt.theme,"dark")?"light":"dark",localStorage.setItem("safe-agent-theme",kt.theme),bl(kt.theme)}function bl(r){document.documentElement.setAttribute("data-theme",r)}function Oc(){if("Notification"in window){if(C(Notification.permission,"granted")){kt.notificationsEnabled=!0;return}C(Notification.permission,"denied",!1)&&Notification.requestPermission().then(r=>{kt.notificationsEnabled=C(r,"granted")})}}function Lc(r,i){if(!kt.notificationsEnabled||document.hasFocus())return;const o=new Notification("Approval Required",{body:`${r} needs your approval`,icon:"/manifest-icon-192.png",tag:`approval-${i}`});o.onclick=()=>{window.focus(),kt.currentTab="overview",o.close()}}const Sa=yi(Jt({events:[],isThinking:!1,activeTool:null}),"liveFeed");function Rr(){kt.refreshCounter++}function gl(r){switch(Sa.events=[r,...Sa.events].slice(0,Ac),r.type){case"thinking":Sa.isThinking=!0,Sa.activeTool=null;break;case"tool_start":Sa.activeTool=r.tool;break;case"tool_result":Sa.activeTool=null;break;case"turn_complete":case"error":Sa.isThinking=!1,Sa.activeTool=null;break}}function hl(){Sa.events=[],Sa.isThinking=!1,Sa.activeTool=null}Yt[u]="src/components/LoginOverlay.svelte";var Rc=_(m('<div class="mb-4 px-3 py-2 rounded-md bg-error-950 border border-error-500/30 text-sm text-error-400"><i class="fa-solid fa-circle-exclamation mr-1"></i> </div>'),Yt[u],[[262,12,[[263,16]]]]),Mc=_(m('<div class="text-center py-4"><i class="fa-solid fa-spinner fa-spin text-text-muted"></i></div>'),Yt[u],[[268,12,[[269,16]]]]),Nc=_(m('<i class="fa-solid fa-spinner fa-spin"></i> ',1),Yt[u],[[285,28]]),Ic=_(m('<i class="fa-solid fa-fingerprint text-amber-400"></i> ',1),Yt[u],[[287,28]]),Dc=_(m(`<button type="button" class="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-md
                               border border-border bg-surface-elevated text-text font-medium text-sm
                               hover:bg-surface hover:border-primary-500/40 transition-colors
                               disabled:opacity-50 disabled:cursor-not-allowed"><!></button>`),Yt[u],[[275,20]]),Fc=_(m('<div class="relative my-2"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-border"></div></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-surface px-3 text-text-muted tracking-wider"> </span></div></div>'),Yt[u],[[293,20,[[294,24,[[295,28]]],[297,24,[[298,28]]]]]]),Uc=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Yt[u],[[330,36]]),zc=_(m('<i class="fa-solid fa-check mr-1"></i> ',1),Yt[u],[[332,36]]),Bc=_(m(`<div><label class="block mb-3"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" maxlength="6" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                           font-mono tracking-widest text-center text-lg
                                           placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                           disabled:opacity-50" placeholder="000000"/></label> <button type="button" class="w-full px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                                       hover:bg-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div> <button type="button" class="w-full text-xs text-text-muted hover:text-primary-400 transition-colors"> </button>`,1),Yt[u],[[305,24,[[306,28,[[307,32],[308,32]]],[322,28]]],[336,24]]),qc=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Yt[u],[[368,36]]),Gc=_(m('<i class="fa-solid fa-check mr-1"></i> ',1),Yt[u],[[370,36]]),Vc=_(m(`<div><label class="block mb-3"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                           font-mono tracking-wider text-center
                                           placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                           disabled:opacity-50" placeholder="abcd1234"/></label> <button type="button" class="w-full px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                                       hover:bg-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div> <button type="button" class="w-full text-xs text-text-muted hover:text-primary-400 transition-colors"> </button>`,1),Yt[u],[[344,24,[[345,28,[[346,32],[347,32]]],[360,28]]],[374,24]]),Hc=_(m('<div class="space-y-4"><!> <!> <!> <button type="button" class="w-full text-xs text-text-muted hover:text-text transition-colors mt-2"><i class="fa-solid fa-arrow-left mr-1"></i> </button></div>'),Yt[u],[[273,12,[[384,16,[[389,20]]]]]]),Kc=_(m(`<button type="button" class="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-md
                                   border border-border bg-surface-elevated text-text font-medium text-sm
                                   hover:bg-surface hover:border-primary-500/40 transition-colors"><i></i> </button>`),Yt[u],[[397,24,[[404,28]]]]),Wc=_(m('<div class="relative my-5"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-border"></div></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-surface px-3 text-text-muted tracking-wider"> </span></div></div>'),Yt[u],[[411,20,[[412,24,[[413,28]]],[415,24,[[416,28]]]]]]),Yc=_(m('<div class="space-y-2 mb-4"></div> <!>',1),Yt[u],[[395,16]]),Jc=_(m(`<label class="block mb-3"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" required="" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                       placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                       disabled:opacity-50"/></label>`),Yt[u],[[425,24,[[426,28],[427,28]]]]),Qc=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Yt[u],[[462,28]]),Xc=_(m('<i class="fa-solid fa-right-to-bracket mr-1"></i> ',1),Yt[u],[[464,28]]),Zc=_(m(`<form><!> <label class="block mb-4"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="password" required="" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                   disabled:opacity-50"/></label> <button type="submit" class="w-full px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                               hover:bg-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button></form>`),Yt[u],[[423,16,[[440,20,[[441,24],[442,24]]],[455,20]]]]),ev=_(m("<!> <!>",1),Yt[u],[]),tv=_(m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"><div class="w-full max-w-sm mx-4 p-8 rounded-xl border border-border bg-surface shadow-2xl"><div class="text-center mb-6"><i class="fa-solid fa-robot text-3xl text-primary-400 mb-3"></i> <h2 class="text-lg font-semibold text-text"> </h2> <p class="text-sm text-text-muted mt-1"><!></p></div> <!> <!></div></div>'),Yt[u],[[243,0,[[244,4,[[245,8,[[246,12],[247,12],[248,12]]]]]]]]);function Yt(r,i){wa(new.target),ga(i,!0,Yt);let o=S(P(""),"username"),d=S(P(""),"password"),c=S(P(""),"error"),f=S(P(!1),"loading"),b=S(P(!0),"passwordEnabled"),h=S(P(Jt([])),"ssoProviders"),w=S(P(!1),"infoLoaded"),L=S(P(!1),"multiUserMode"),j=S(P(!1),"twoFaRequired"),A=S(P(""),"challengeToken"),k=S(P(Jt([])),"twoFaMethods"),q=S(P(""),"twoFaUserId"),V=S(P(""),"totpCode"),X=S(P(""),"recoveryCode"),N=S(P(!1),"showRecoveryInput"),ne=S(P(!1),"passkeyLoading");Ga(()=>{je()});async function je(){try{const T=(await M(fetch("/api/auth/info")))(),E=(await M(T.json()))();p(b,E.password_enabled??!0,!0),p(h,E.sso_providers??[],!0),p(L,E.multi_user??!1,!0)}catch{p(b,!0),p(h,[],!0)}finally{p(w,!0)}}async function we(T){T.preventDefault(),p(c,""),p(f,!0);try{const E={password:e(d)};e(L)&&e(o)&&(E.username=e(o));const U=(await M(fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})))(),J=(await M(U.json()))();J.requires_2fa?(p(j,!0),p(A,J.challenge_token,!0),p(k,J.methods||[],!0),p(q,J.user_id||"",!0),p(d,"")):U.ok&&J.ok?Ee(J):p(c,J.error||l("login.login_failed"),!0)}catch{p(c,l("common.connection_failed"),!0)}finally{p(f,!1)}}async function Te(){p(c,""),p(f,!0);try{const T={challenge_token:e(A)};e(N)?T.recovery_code=e(X).trim():T.totp_code=e(V).trim();const E=(await M(fetch("/api/auth/2fa/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)})))(),U=(await M(E.json()))();E.ok&&U.ok?Ee(U):p(c,U.error||l("login.verification_failed"),!0)}catch{p(c,l("common.connection_failed"),!0)}finally{p(f,!1)}}async function Ke(){p(c,""),p(ne,!0);try{const T=(await M(fetch("/api/auth/passkey/authenticate/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge_token:e(A)})})))(),E=(await M(T.json()))();if(!E.ok){p(c,E.error||l("login.passkey_start_failed"),!0),p(ne,!1);return}const U=E.options;if(U.publicKey.challenge=Ve(U.publicKey.challenge),U.publicKey.allowCredentials)for(const Xe of U.publicKey.allowCredentials)Xe.id=Ve(Xe.id);const J=(await M(navigator.credentials.get(U)))();if(!J){p(c,l("login.passkey_cancelled"),!0),p(ne,!1);return}const xe=J.response,fe={challenge_token:e(A),credential:{id:J.id,rawId:K(J.rawId),response:{authenticatorData:K(xe.authenticatorData),clientDataJSON:K(xe.clientDataJSON),signature:K(xe.signature),userHandle:xe.userHandle?K(xe.userHandle):null},type:J.type}},F=(await M(fetch("/api/auth/passkey/authenticate/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fe)})))(),he=(await M(F.json()))();F.ok&&he.ok?Ee(he):p(c,he.error||l("login.passkey_verify_failed"),!0)}catch(T){C(T.name,"NotAllowedError")?p(c,l("login.passkey_cancelled_timeout"),!0):p(c,l("login.passkey_failed",{message:T.message}),!0)}finally{p(ne,!1)}}function Ee(T){va.authenticated=!0,T.user&&(va.userId=T.user.id,va.role=T.user.role,va.subject=T.user.username),p(o,""),p(d,""),p(j,!1),p(A,""),p(V,""),p(X,"")}function te(){p(j,!1),p(A,""),p(k,[],!0),p(V,""),p(X,""),p(N,!1),p(c,"")}function _e(T){window.location.href=T.login_url}function Ve(T){const E=T.replace(/-/g,"+").replace(/_/g,"/"),U=E+"=".repeat((4-E.length%4)%4),J=atob(U),xe=new ArrayBuffer(J.length),fe=new Uint8Array(xe);for(let F=0;F<J.length;F++)fe[F]=J.charCodeAt(F);return xe}function K(T){const E=new Uint8Array(T);let U="";for(const J of E)U+=String.fromCharCode(J);return btoa(U).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var W={...ka()},Ue=tv(),Ne=a(Ue),Pe=a(Ne),R=s(a(Pe),2),ie=a(R),qe=s(R,2),Se=a(qe);{var me=T=>{var E=Jr();x(U=>n(E,U),[()=>l("login.2fa_required")]),v(T,E)},$=T=>{var E=Jr();x(U=>n(E,U),[()=>l("login.sign_in_continue")]),v(T,E)},z=T=>{var E=Jr();x(U=>n(E,U),[()=>l("login.sign_in_account")]),v(T,E)},Z=T=>{var E=Jr();x(U=>n(E,U),[()=>l("login.enter_password")]),v(T,E)};g(()=>y(Se,T=>{e(j)?T(me):e(b)&&e(h).length>0?T($,1):e(h).length>0?T(z,2):T(Z,!1)}),"if",Yt,249,16)}var H=s(Pe,2);{var Le=T=>{var E=Rc(),U=s(a(E));x(()=>n(U,` ${e(c)??""}`)),v(T,E)};g(()=>y(H,T=>{e(c)&&T(Le)}),"if",Yt,261,8)}var O=s(H,2);{var B=T=>{var E=Mc();v(T,E)},ue=T=>{var E=Hc(),U=a(E);{var J=le=>{var I=Dc(),ae=a(I);{var G=re=>{var ke=Nc(),ve=s(Ae(ke));x(Q=>n(ve,` ${Q??""}`),[()=>l("login.waiting_passkey")]),v(re,ke)},ee=re=>{var ke=Ic(),ve=s(Ae(ke));x(Q=>n(ve,` ${Q??""}`),[()=>l("login.use_passkey")]),v(re,ke)};g(()=>y(ae,re=>{e(ne)?re(G):re(ee,!1)}),"if",Yt,284,24)}x(()=>I.disabled=e(ne)),Y("click",I,Ke),v(le,I)},xe=ma(()=>e(k).includes("passkey"));g(()=>y(U,le=>{e(xe)&&le(J)}),"if",Yt,274,16)}var fe=s(U,2);{var F=le=>{var I=Fc(),ae=s(a(I),2),G=a(ae),ee=a(G);x(re=>n(ee,re),[()=>l("common.or")]),v(le,I)},he=ma(()=>e(k).includes("passkey")&&e(k).includes("totp"));g(()=>y(fe,le=>{e(he)&&le(F)}),"if",Yt,292,16)}var Xe=s(fe,2);{var yt=le=>{var I=Oa(),ae=Ae(I);{var G=re=>{var ke=Bc(),ve=Ae(ke),Q=a(ve),$e=a(Q),Ie=a($e),Re=s($e,2);Hi(Re,!0);var Ct=s(Q,2),st=a(Ct);{var De=ze=>{var be=Uc(),ce=s(Ae(be));x(pe=>n(ce,` ${pe??""}`),[()=>l("common.verifying")]),v(ze,be)},lt=ze=>{var be=zc(),ce=s(Ae(be));x(pe=>n(ce,` ${pe??""}`),[()=>l("common.verify")]),v(ze,be)};g(()=>y(st,ze=>{e(f)?ze(De):ze(lt,!1)}),"if",Yt,329,32)}var Je=s(ve,2),_t=a(Je);x((ze,be,ce)=>{n(Ie,ze),Re.disabled=e(f),Ct.disabled=be,n(_t,ce)},[()=>l("login.authenticator_code"),()=>e(f)||C(e(V).trim().length,6,!1),()=>l("login.use_recovery")]),Y("keydown",Re,function(be){C(be.key,"Enter")&&C(e(V).trim().length,6)&&Te()}),ua(Re,function(){return e(V)},function(be){p(V,be)}),Y("click",Ct,Te),Y("click",Je,function(){p(N,!0),p(c,"")}),v(re,ke)},ee=re=>{var ke=Vc(),ve=Ae(ke),Q=a(ve),$e=a(Q),Ie=a($e),Re=s($e,2);Hi(Re,!0);var Ct=s(Q,2),st=a(Ct);{var De=ze=>{var be=qc(),ce=s(Ae(be));x(pe=>n(ce,` ${pe??""}`),[()=>l("common.verifying")]),v(ze,be)},lt=ze=>{var be=Gc(),ce=s(Ae(be));x(pe=>n(ce,` ${pe??""}`),[()=>l("login.verify_recovery")]),v(ze,be)};g(()=>y(st,ze=>{e(f)?ze(De):ze(lt,!1)}),"if",Yt,367,32)}var Je=s(ve,2),_t=a(Je);x((ze,be,ce)=>{n(Ie,ze),Re.disabled=e(f),Ct.disabled=be,n(_t,ce)},[()=>l("login.recovery_code"),()=>e(f)||!e(X).trim(),()=>l("login.use_authenticator")]),Y("keydown",Re,function(be){C(be.key,"Enter")&&e(X).trim()&&Te()}),ua(Re,function(){return e(X)},function(be){p(X,be)}),Y("click",Ct,Te),Y("click",Je,function(){p(N,!1),p(c,"")}),v(re,ke)};g(()=>y(ae,re=>{e(N)?re(ee,!1):re(G)}),"if",Yt,304,20)}v(le,I)},ht=ma(()=>e(k).includes("totp"));g(()=>y(Xe,le=>{e(ht)&&le(yt)}),"if",Yt,303,16)}var ct=s(Xe,2),oe=s(a(ct));x(le=>n(oe,` ${le??""}`),[()=>l("login.back_to_login")]),Y("click",ct,te),v(T,E)},D=T=>{var E=ev(),U=Ae(E);{var J=F=>{var he=Yc(),Xe=Ae(he);g(()=>Dt(Xe,21,()=>e(h),la,(ct,oe)=>{var le=Kc(),I=a(le),ae=s(I);x(G=>{Qe(I,1,`${e(oe).icon??""} text-base`),n(ae,` ${G??""}`)},[()=>l("login.continue_with",{provider:e(oe).name})]),Y("click",le,function(){return _e(e(oe))}),v(ct,le)}),"each",Yt,396,20);var yt=s(Xe,2);{var ht=ct=>{var oe=Wc(),le=s(a(oe),2),I=a(le),ae=a(I);x(G=>n(ae,G),[()=>l("common.or")]),v(ct,oe)};g(()=>y(yt,ct=>{e(b)&&ct(ht)}),"if",Yt,410,16)}v(F,he)};g(()=>y(U,F=>{e(h).length>0&&F(J)}),"if",Yt,394,12)}var xe=s(U,2);{var fe=F=>{var he=Zc(),Xe=a(he);{var yt=re=>{var ke=Jc(),ve=a(ke),Q=a(ve),$e=s(ve,2);Hi($e,!0),x((Ie,Re)=>{n(Q,Ie),$e.disabled=e(f),St($e,"placeholder",Re)},[()=>l("login.username"),()=>l("login.enter_username")]),ua($e,function(){return e(o)},function(Re){p(o,Re)}),v(re,ke)};g(()=>y(Xe,re=>{e(L)&&re(yt)}),"if",Yt,424,20)}var ht=s(Xe,2),ct=a(ht),oe=a(ct),le=s(ct,2);Hi(le,!e(L));var I=s(ht,2),ae=a(I);{var G=re=>{var ke=Qc(),ve=s(Ae(ke));x(Q=>n(ve,` ${Q??""}`),[()=>l("login.signing_in")]),v(re,ke)},ee=re=>{var ke=Xc(),ve=s(Ae(ke));x(Q=>n(ve,` ${Q??""}`),[()=>l("login.sign_in")]),v(re,ke)};g(()=>y(ae,re=>{e(f)?re(G):re(ee,!1)}),"if",Yt,461,24)}x((re,ke)=>{n(oe,re),le.disabled=e(f),St(le,"placeholder",ke),I.disabled=e(f)||!e(d)},[()=>l("login.password"),()=>l("login.enter_password_placeholder")]),jo("submit",he,we),ua(le,function(){return e(d)},function(ke){p(d,ke)}),v(F,he)};g(()=>y(xe,F=>{e(b)&&F(fe)}),"if",Yt,422,12)}v(T,E)};g(()=>y(O,T=>{e(w)?e(j)?T(ue,1):T(D,!1):T(B)}),"if",Yt,267,8)}return x(T=>n(ie,T),[()=>l("login.title")]),v(r,Ue),ha(W)}La(["click","keydown"]);At[u]="src/components/OnboardingWizard.svelte";var av=_(m('<i class="fa-solid fa-check"></i>'),At[u],[[217,28]]),rv=_(m("<div></div>"),At[u],[[223,24]]),sv=_(m('<div class="flex items-center"><div><!></div> <!></div>'),At[u],[[213,16,[[214,20]]]]),iv=_(m(`<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-600/10 mb-4"><i class="fa-solid fa-robot text-3xl text-primary-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <label class="block mb-4"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50"/></label> <label class="block mb-2"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <textarea rows="4" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50 resize-none"></textarea></label> <p class="text-xs text-text-muted"> </p>`,1),At[u],[[234,20,[[235,24,[[236,28]]],[238,24],[239,24]]],[242,20,[[243,24],[244,24]]],[253,20,[[254,24],[255,24]]],[263,20]]),ov=_(m("<option> </option>"),At[u],[[283,32]]),nv=_(m('<p class="text-sm text-text-muted"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </p>'),At[u],[[298,32,[[298,67]]]]),lv=_(m('<div class="flex items-center gap-2 text-sm"><span></span> <span> </span></div>'),At[u],[[313,36,[[314,40],[315,40]]]]),dv=_(m('<button class="bg-green-600/20 text-green-400 px-2 py-1 rounded text-xs hover:bg-green-600/30"> </button>'),At[u],[[330,56]]),cv=_(m('<span class="text-xs text-text-muted"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </span>'),At[u],[[338,60,[[338,98]]]]),vv=_(m('<button class="bg-surface text-text px-2 py-1 rounded text-xs hover:bg-surface-elevated border border-border"><i class="fa-solid fa-download mr-1"></i> </button>'),At[u],[[340,60,[[344,64]]]]),uv=_(m('<span class="text-xs text-text-muted">—</span>'),At[u],[[348,56]]),fv=_(m('<div class="flex items-center justify-between p-2 rounded bg-surface border border-border/50"><div><span class="font-mono text-sm text-text"> </span> <span class="text-xs text-text-muted ml-2"> </span></div> <div><!></div></div>'),At[u],[[323,44,[[324,48,[[325,52],[326,52]]],[328,48]]]]),pv=_(m('<div class="text-xs font-medium text-text-muted uppercase tracking-wide"> </div> <div class="space-y-2"></div>',1),At[u],[[320,36],[321,36]]),_v=_(m('<p class="text-xs text-text-muted"> </p>'),At[u],[[357,36]]),mv=_(m('<div class="text-sm"><span class="font-medium"> </span> <span class="text-text-muted ml-2"> <!></span></div> <!> <!> <!>',1),At[u],[[300,32,[[301,36],[302,36]]]]),xv=_(m('<div class="mb-4 p-4 rounded-lg border border-border bg-surface-elevated space-y-3"><!></div>'),At[u],[[296,24]]),bv=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),At[u],[[372,28]]),gv=_(m('<i class="fa-solid fa-flask mr-1"></i> ',1),At[u],[[374,28]]),hv=_(m('<i class="fa-solid fa-check-circle mr-1"></i> <strong> </strong> <p class="mt-1 text-xs opacity-80"> </p>',1),At[u],[[381,32],[381,78],[382,32]]),yv=_(m('<i class="fa-solid fa-times-circle mr-1"></i> <strong> </strong> <p class="mt-1 text-xs opacity-80"> </p>',1),At[u],[[384,32],[384,78],[385,32]]),wv=_(m("<div><!></div>"),At[u],[[379,24]]),kv=_(m(`<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-600/10 mb-4"><i class="fa-solid fa-brain text-3xl text-primary-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <label class="block mb-4"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <select class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   focus:outline-none focus:ring-2 focus:ring-primary-500/50"></select></label> <p class="text-xs text-text-muted mb-4"> <code class="bg-surface-elevated px-1 rounded text-xs">OPENROUTER_API_KEY</code>, <code class="bg-surface-elevated px-1 rounded text-xs">CLAUDE_BIN</code>, etc.)</p> <!> <button class="w-full px-4 py-2 rounded-md border border-border bg-surface-elevated text-text font-medium text-sm
                               hover:bg-surface transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <!>`,1),At[u],[[267,20,[[268,24,[[269,28]]],[271,24],[272,24]]],[275,20,[[276,24],[277,24]]],[288,20,[[290,30],[291,24]]],[365,20]]),$v=_(m('<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-600/10 mb-4"><i class="fa-solid fa-comments text-3xl text-primary-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <div class="space-y-4"><div class="flex items-center justify-between p-4 rounded-lg border border-border bg-surface-elevated"><div class="flex items-center gap-3"><i class="fa-brands fa-telegram text-2xl text-blue-400"></i> <div><p class="font-medium text-text"> </p> <p class="text-xs text-text-muted"> </p></div></div> <span> </span></div> <div class="flex items-center justify-between p-4 rounded-lg border border-border bg-surface-elevated"><div class="flex items-center gap-3"><i class="fa-brands fa-whatsapp text-2xl text-green-400"></i> <div><p class="font-medium text-text"> </p> <p class="text-xs text-text-muted"> </p></div></div> <span> </span></div></div> <p class="text-xs text-text-muted mt-4"> </p>',1),At[u],[[392,20,[[393,24,[[394,28]]],[396,24],[397,24]]],[400,20,[[401,24,[[402,28,[[403,32],[404,32,[[405,36],[406,36]]]]],[409,28]]],[415,24,[[416,28,[[417,32],[418,32,[[419,36],[420,36]]]]],[423,28]]]]],[430,20]]),Tv=_(m('<div class="p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-xs text-text-muted uppercase tracking-wide"> </span> <p class="text-sm text-text mt-1 line-clamp-3"> </p></div>'),At[u],[[466,28,[[467,32],[468,32]]]]),Ev=_(m('<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-green-600/10 mb-4"><i class="fa-solid fa-check-double text-3xl text-green-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <div class="space-y-3 mb-6"><div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span class="text-sm font-medium text-text"> </span></div> <div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span class="text-sm font-medium text-text"> </span></div> <div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span> </span></div> <div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span> </span></div> <!></div> <p class="text-xs text-text-muted text-center mb-2"> </p>',1),At[u],[[436,20,[[437,24,[[438,28]]],[440,24],[441,24]]],[444,20,[[445,24,[[446,28],[447,28]]],[449,24,[[450,28],[451,28]]],[453,24,[[454,28],[455,28]]],[459,24,[[460,28],[461,28]]]]],[473,20]]),Sv=_(m('<div class="px-8 pb-2"><div class="p-3 rounded-md bg-red-900/30 border border-red-700/50 text-red-300 text-sm"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div></div>'),At[u],[[481,16,[[482,20,[[483,24]]]]]]),Cv=_(m('<button class="px-4 py-2 rounded-md text-sm text-text-muted hover:text-text transition-colors"><i class="fa-solid fa-arrow-left mr-1"></i> </button>'),At[u],[[492,24,[[496,28]]]]),Av=_(m('<button class="px-4 py-2 rounded-md text-sm text-text-muted hover:text-text transition-colors"> <i class="fa-solid fa-forward ml-1"></i></button>'),At[u],[[505,24,[[509,47]]]]),Pv=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> Saving...',1),At[u],[[521,32]]),jv=_(m('Next <i class="fa-solid fa-arrow-right ml-1"></i>',1),At[u],[[523,37]]),Ov=_(m(`<button class="px-5 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                                   hover:bg-primary-500 transition-colors disabled:opacity-50"><!></button>`),At[u],[[514,24]]),Lv=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> Completing...',1),At[u],[[534,32]]),Rv=_(m('<i class="fa-solid fa-rocket mr-1"></i> Complete Setup',1),At[u],[[536,32]]),Mv=_(m(`<button class="px-5 py-2 rounded-md bg-green-600 text-white font-medium text-sm
                                   hover:bg-green-500 transition-colors disabled:opacity-50"><!></button>`),At[u],[[527,24]]),Nv=_(m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-bg/95 backdrop-blur-sm"><div class="w-full max-w-2xl mx-4"><div class="flex items-center justify-center mb-8 gap-2"></div> <div class="bg-surface rounded-xl border border-border shadow-2xl overflow-hidden"><div class="p-8"><!></div> <!> <div class="flex justify-between items-center px-8 py-5 bg-surface-elevated border-t border-border"><div><!></div> <div class="flex items-center gap-2"><span class="text-xs text-text-muted"> </span> <!> <!></div></div></div></div></div>'),At[u],[[207,0,[[208,4,[[210,8],[229,8,[[231,12],[489,12,[[490,16],[501,16,[[502,20]]]]]]]]]]]]);function At(r,i){wa(new.target),ga(i,!0,At);let o=S(P(1),"currentStep");const d=4;let c=S(P(""),"agentName"),f=S(P(""),"corePersonality"),b=S(P(""),"activeBackend"),h=S(P(Jt([])),"availableBackends"),w=S(P(""),"llmTestResult"),L=S(P(null),"llmTestOk"),j=S(P(!1),"llmTesting"),A=S(P(null),"ollamaSpecs"),k=S(P(Jt([])),"ollamaRecs"),q=S(P(!1),"ollamaRecsLoading"),V=S(P(null),"ollamaAvail"),X=S(P(""),"ollamaPulling"),N=S(P(""),"ollamaPullMsg"),ne=S(P(!1),"telegramEnabled"),je=S(P(!1),"whatsappEnabled"),we=S(P(!1),"saving"),Te=S(P(""),"error"),Ke=S(P(!1),"completing");const Ee=oe=>{window.dispatchEvent(new CustomEvent(oe))};async function te(){p(q,!0);try{const[oe,le,I]=(await M(Promise.all([fetch("/api/llm/advisor/system"),fetch("/api/llm/advisor/recommend?limit=3"),fetch("/api/llm/ollama/status")])))();p(A,(await M(oe.json()))(),!0);const ae=(await M(le.json()))();p(k,ae.models||[],!0),p(V,(await M(I.json()))(),!0)}catch(oe){console.error(...Xt("error","Failed to load Ollama advisor",oe))}p(q,!1)}async function _e(oe){p(X,oe,!0),p(N,l("onboarding.ollama_pulling"),!0);try{const le=(await M(fetch("/api/llm/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:oe})})))(),I=(await M(le.json()))();if(I.ok){p(N,l("onboarding.ollama_installed"),!0);const ae=(await M(fetch("/api/llm/ollama/status")))();p(V,(await M(ae.json()))(),!0);const G=(await M(fetch("/api/llm/advisor/recommend?limit=3")))(),ee=(await M(G.json()))();p(k,ee.models||[],!0)}else p(N,I.error||"Pull failed",!0)}catch{p(N,"Pull failed")}setTimeout(()=>{p(X,""),p(N,"")},3e3)}async function Ve(oe){try{(await M(fetch("/api/llm/ollama/configure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:oe})})))(),p(L,!0),p(w,l("onboarding.ollama_configured",{model:oe}),!0)}catch{}}Ga(()=>{K()}),Ga(()=>{C(e(b),"ollama")&&!e(A)&&te()});async function K(){try{const oe=(await M(fetch("/api/onboarding/status")))(),le=(await M(oe.json()))();p(c,le.agent_name||"",!0),p(f,le.core_personality||"",!0),p(b,le.llm_backend||"",!0),p(h,le.llm_available||[],!0),p(ne,le.telegram_enabled||!1,!0),p(je,le.whatsapp_enabled||!1,!0)}catch(oe){console.error(...Xt("error","Failed to load onboarding status",oe))}}async function W(){p(we,!0),p(Te,"");try{const oe=(await M(fetch("/api/onboarding/save-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_name:e(c)||void 0,core_personality:e(f)||void 0,llm_backend:e(b)||void 0})})))(),le=(await M(oe.json()))();le.ok||p(Te,le.message||l("onboarding.failed_save"),!0)}catch{p(Te,l("onboarding.network_error_save"),!0)}finally{p(we,!1)}}async function Ue(){p(j,!0),p(w,""),p(L,null);try{const oe=(await M(fetch("/api/onboarding/test-llm",{method:"POST",headers:{"Content-Type":"application/json"}})))(),le=(await M(oe.json()))();p(L,le.ok,!0),p(w,le.ok?le.response:le.error,!0)}catch{p(L,!1),p(w,l("onboarding.network_error_test"),!0)}finally{p(j,!1)}}async function Ne(){p(Ke,!0),p(Te,"");try{const oe=(await M(fetch("/api/onboarding/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_name:e(c)||void 0,core_personality:e(f)||void 0})})))(),le=(await M(oe.json()))();le.ok?Ee("onboarding-complete"):p(Te,le.message||l("onboarding.failed_complete"),!0)}catch{p(Te,l("onboarding.network_error_complete"),!0)}finally{p(Ke,!1)}}function Pe(){C(e(o),1)&&W(),e(o)<d&&sn(o)}function R(){e(o)>1&&sn(o,-1)}var ie={...ka()},qe=Nv(),Se=a(qe),me=a(Se);g(()=>Dt(me,21,()=>Array(d),la,(oe,le,I)=>{const ae=S(ma(()=>I+1),"step");e(ae);var G=sv(),ee=a(G),re=a(ee);{var ke=Ie=>{var Re=av();v(Ie,Re)},ve=Ie=>{var Re=Jr();x(()=>n(Re,e(ae))),v(Ie,Re)};g(()=>y(re,Ie=>{e(ae)<e(o)?Ie(ke):Ie(ve,!1)}),"if",At,216,24)}var Q=s(ee,2);{var $e=Ie=>{var Re=rv();x(()=>Qe(Re,1,`w-12 h-0.5 mx-1 ${e(ae)<e(o)?"bg-green-600":"bg-border"}`)),v(Ie,Re)};g(()=>y(Q,Ie=>{I<d-1&&Ie($e)}),"if",At,222,20)}x(()=>Qe(ee,1,`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-colors
                        ${e(ae)<e(o)?"bg-green-600 text-white":C(e(ae),e(o))?"bg-primary-600 text-white":"bg-surface-elevated text-text-muted border border-border"}`)),v(oe,G)}),"each",At,211,12);var $=s(me,2),z=a($),Z=a(z);{var H=oe=>{var le=iv(),I=Ae(le),ae=s(a(I),2),G=a(ae),ee=s(ae,2),re=a(ee),ke=s(I,2),ve=a(ke),Q=a(ve),$e=s(ve,2),Ie=s(ke,2),Re=a(Ie),Ct=a(Re),st=s(Re,2),De=s(Ie,2),lt=a(De);x((Je,_t,ze,be,ce,pe,Oe)=>{n(G,Je),n(re,_t),n(Q,ze),St($e,"placeholder",be),n(Ct,ce),St(st,"placeholder",pe),n(lt,Oe)},[()=>l("onboarding.welcome"),()=>l("onboarding.welcome_desc"),()=>l("onboarding.agent_name"),()=>l("onboarding.agent_name_placeholder"),()=>l("onboarding.core_personality"),()=>l("onboarding.personality_placeholder"),()=>l("onboarding.personality_hint")]),ua($e,function(){return e(c)},function(_t){p(c,_t)}),ua(st,function(){return e(f)},function(_t){p(f,_t)}),v(oe,le)},Le=oe=>{var le=kv(),I=Ae(le),ae=s(a(I),2),G=a(ae),ee=s(ae,2),re=a(ee),ke=s(I,2),ve=a(ke),Q=a(ve),$e=s(ve,2);g(()=>Dt($e,21,()=>e(h),la,(ce,pe)=>{var Oe=ov(),Me=a(Oe,!0);var Ze={};x(()=>{n(Me,e(pe)),Ze!==(Ze=e(pe))&&(Oe.value=(Oe.__value=e(pe))??"")}),v(ce,Oe)}),"each",At,282,28);var Ie=s(ke,2),Re=a(Ie),Ct=s(Ie,2);{var st=ce=>{var pe=xv(),Oe=a(pe);{var Me=Be=>{var We=nv(),it=s(a(We));x(ot=>n(it,` ${ot??""}`),[()=>l("onboarding.ollama_detecting")]),v(Be,We)},Ze=Be=>{var We=mv(),it=Ae(We),ot=a(it),rt=a(ot),Fe=s(ot,2),ut=a(Fe),mt=s(ut);{var Tt=at=>{var ft=Jr();x(wt=>n(ft,`· ${(e(A).gpu_name||"GPU")??""} (${wt??""} GB VRAM) · ${e(A).backend??""}`),[()=>{var wt;return((wt=e(A).gpu_vram_gb)==null?void 0:wt.toFixed(0))??"?"}]),v(at,ft)},xt=at=>{var ft=Jr("· CPU only");v(at,ft)};g(()=>y(mt,at=>{e(A).has_gpu?at(Tt):at(xt,!1)}),"if",At,304,40)}var se=s(it,2);{var ye=at=>{var ft=lv(),wt=a(ft),Ge=s(wt,2),bt=a(Ge);x(pt=>{Qe(wt,1,`w-2 h-2 rounded-full ${e(V).available?"bg-green-500":"bg-red-500"}`),n(bt,pt)},[()=>e(V).available?l("onboarding.ollama_connected"):l("onboarding.ollama_not_running")]),v(at,ft)};g(()=>y(se,at=>{e(V)&&at(ye)}),"if",At,312,32)}var et=s(se,2);{var dt=at=>{var ft=pv(),wt=Ae(ft),Ge=a(wt),bt=s(wt,2);g(()=>Dt(bt,21,()=>e(k),la,(pt,vt)=>{var Pt=fv(),Et=a(Pt),jt=a(Et),Ft=a(jt,!0);var Ht=s(jt,2),Ut=a(Ht);var Kt=s(Et,2),na=a(Kt);{var ta=zt=>{var da=dv(),ia=a(da,!0);x(aa=>n(ia,aa),[()=>l("onboarding.ollama_use")]),Y("click",da,function(){return Ve(e(vt).ollama_tag||e(vt).name)}),v(zt,da)},Ea=zt=>{var da=Oa(),ia=Ae(da);{var aa=gt=>{var Ot=cv(),Lt=s(a(Ot),1,!0);x(()=>n(Lt,e(N))),v(gt,Ot)},$a=gt=>{var Ot=vv(),Lt=s(a(Ot),1,!0);x(Mt=>n(Lt,Mt),[()=>l("onboarding.ollama_install")]),Y("click",Ot,function(){return _e(e(vt).ollama_tag)}),v(gt,Ot)};g(()=>y(ia,gt=>{C(e(X),e(vt).ollama_tag)?gt(aa):gt($a,!1)}),"if",At,337,56)}v(zt,da)},pa=zt=>{var da=uv();v(zt,da)};g(()=>y(na,zt=>{var da;e(vt).installed?zt(ta):e(vt).ollama_tag&&((da=e(V))!=null&&da.available)?zt(Ea,1):zt(pa,!1)}),"if",At,329,52)}x((zt,da,ia)=>{n(Ft,e(vt).name),n(Ut,`${zt??""}B · ${e(vt).best_quant??""} · ${da??""}: ${ia??""}`)},[()=>{var zt;return(zt=e(vt).params_b)==null?void 0:zt.toFixed(1)},()=>l("onboarding.ollama_score"),()=>{var zt;return(zt=e(vt).score)==null?void 0:zt.toFixed(0)}]),v(pt,Pt)}),"each",At,322,40),x(pt=>n(Ge,pt),[()=>l("onboarding.ollama_top_models")]),v(at,ft)};g(()=>y(et,at=>{e(k).length&&at(dt)}),"if",At,319,32)}var tt=s(et,2);{var Ye=at=>{var ft=_v(),wt=a(ft);x(Ge=>n(wt,Ge),[()=>l("onboarding.ollama_install_hint")]),v(at,ft)};g(()=>y(tt,at=>{var ft;(ft=e(V))!=null&&ft.available||at(Ye)}),"if",At,356,32)}x((at,ft)=>{n(rt,at),n(ut,`${ft??""} GB RAM `)},[()=>l("onboarding.ollama_your_hardware"),()=>{var at;return(at=e(A).total_ram_gb)==null?void 0:at.toFixed(0)}]),v(Be,We)};g(()=>y(Oe,Be=>{e(q)?Be(Me):e(A)&&Be(Ze,1)}),"if",At,297,28)}v(ce,pe)};g(()=>y(Ct,ce=>{C(e(b),"ollama")&&ce(st)}),"if",At,295,20)}var De=s(Ct,2),lt=a(De);{var Je=ce=>{var pe=bv(),Oe=s(Ae(pe));x(Me=>n(Oe,` ${Me??""}`),[()=>l("onboarding.testing")]),v(ce,pe)},_t=ce=>{var pe=gv(),Oe=s(Ae(pe));x(Me=>n(Oe,` ${Me??""}`),[()=>l("onboarding.test_connection")]),v(ce,pe)};g(()=>y(lt,ce=>{e(j)?ce(Je):ce(_t,!1)}),"if",At,371,24)}var ze=s(De,2);{var be=ce=>{var pe=wv(),Oe=a(pe);{var Me=Be=>{var We=hv(),it=s(Ae(We),2),ot=a(it),rt=s(it,2),Fe=a(rt);x(ut=>{n(ot,ut),n(Fe,e(w))},[()=>l("onboarding.test_success")]),v(Be,We)},Ze=Be=>{var We=yv(),it=s(Ae(We),2),ot=a(it),rt=s(it,2),Fe=a(rt);x(ut=>{n(ot,ut),n(Fe,e(w))},[()=>l("onboarding.test_failed")]),v(Be,We)};g(()=>y(Oe,Be=>{e(L)?Be(Me):Be(Ze,!1)}),"if",At,380,28)}x(()=>Qe(pe,1,`mt-4 p-3 rounded-md text-sm ${e(L)?"bg-green-900/30 border border-green-700/50 text-green-300":"bg-red-900/30 border border-red-700/50 text-red-300"}`)),v(ce,pe)};g(()=>y(ze,ce=>{C(e(L),null,!1)&&ce(be)}),"if",At,378,20)}x((ce,pe,Oe,Me)=>{n(G,ce),n(re,pe),n(Q,Oe),n(Re,`${Me??""}
                        (e.g. `),De.disabled=e(j)},[()=>l("onboarding.llm_backend"),()=>l("onboarding.llm_desc"),()=>l("onboarding.backend_label"),()=>l("onboarding.env_hint")]),Gi($e,function(){return e(b)},function(pe){p(b,pe)}),Y("click",De,Ue),v(oe,le)},O=oe=>{var le=$v(),I=Ae(le),ae=s(a(I),2),G=a(ae),ee=s(ae,2),re=a(ee),ke=s(I,2),ve=a(ke),Q=a(ve),$e=s(a(Q),2),Ie=a($e),Re=a(Ie),Ct=s(Ie,2),st=a(Ct),De=s(Q,2),lt=a(De),Je=s(ve,2),_t=a(Je),ze=s(a(_t),2),be=a(ze),ce=a(be),pe=s(be,2),Oe=a(pe),Me=s(_t,2),Ze=a(Me),Be=s(ke,2),We=a(Be);x((it,ot,rt,Fe,ut,mt,Tt,xt,se)=>{n(G,it),n(re,ot),n(Re,rt),n(st,Fe),Qe(De,1,`px-2 py-1 text-xs rounded-full font-medium
                                ${e(ne)?"bg-green-900/40 text-green-400 border border-green-700/50":"bg-surface text-text-muted border border-border"}`),n(lt,ut),n(ce,mt),n(Oe,Tt),Qe(Me,1,`px-2 py-1 text-xs rounded-full font-medium
                                ${e(je)?"bg-green-900/40 text-green-400 border border-green-700/50":"bg-surface text-text-muted border border-border"}`),n(Ze,xt),n(We,se)},[()=>l("onboarding.messaging"),()=>l("onboarding.messaging_desc"),()=>l("onboarding.telegram"),()=>l("onboarding.telegram_requires"),()=>e(ne)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.whatsapp"),()=>l("onboarding.whatsapp_requires"),()=>e(je)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.messaging_hint")]),v(oe,le)},B=oe=>{var le=Ev(),I=Ae(le),ae=s(a(I),2),G=a(ae),ee=s(ae,2),re=a(ee),ke=s(I,2),ve=a(ke),Q=a(ve),$e=a(Q),Ie=s(Q,2),Re=a(Ie),Ct=s(ve,2),st=a(Ct),De=a(st),lt=s(st,2),Je=a(lt),_t=s(Ct,2),ze=a(_t),be=a(ze),ce=s(ze,2),pe=a(ce),Oe=s(_t,2),Me=a(Oe),Ze=a(Me),Be=s(Me,2),We=a(Be),it=s(Oe,2);{var ot=ut=>{var mt=Tv(),Tt=a(mt),xt=a(Tt),se=s(Tt,2),ye=a(se);x(et=>{n(xt,et),n(ye,e(f))},[()=>l("onboarding.review_personality")]),v(ut,mt)};g(()=>y(it,ut=>{e(f)&&ut(ot)}),"if",At,465,24)}var rt=s(ke,2),Fe=a(rt);x((ut,mt,Tt,xt,se,ye,et,dt,tt,Ye,at)=>{n(G,ut),n(re,mt),n($e,Tt),n(Re,xt),n(De,se),n(Je,ye),n(be,et),Qe(ce,1,`text-sm font-medium ${e(ne)?"text-green-400":"text-text-muted"}`),n(pe,dt),n(Ze,tt),Qe(Be,1,`text-sm font-medium ${e(je)?"text-green-400":"text-text-muted"}`),n(We,Ye),n(Fe,at)},[()=>l("onboarding.ready"),()=>l("onboarding.ready_desc"),()=>l("onboarding.review_name"),()=>e(c)||l("onboarding.default"),()=>l("onboarding.review_backend"),()=>e(b)||l("onboarding.default"),()=>l("onboarding.review_telegram"),()=>e(ne)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.review_whatsapp"),()=>e(je)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.change_later")]),v(oe,le)};g(()=>y(Z,oe=>{C(e(o),1)?oe(H):C(e(o),2)?oe(Le,1):C(e(o),3)?oe(O,2):C(e(o),4)&&oe(B,3)}),"if",At,232,16)}var ue=s(z,2);{var D=oe=>{var le=Sv(),I=a(le),ae=s(a(I));x(()=>n(ae,` ${e(Te)??""}`)),v(oe,le)};g(()=>y(ue,oe=>{e(Te)&&oe(D)}),"if",At,480,12)}var T=s(ue,2),E=a(T),U=a(E);{var J=oe=>{var le=Cv(),I=s(a(le));x(ae=>n(I,` ${ae??""}`),[()=>l("common.back")]),Y("click",le,R),v(oe,le)};g(()=>y(U,oe=>{e(o)>1&&oe(J)}),"if",At,491,20)}var xe=s(E,2),fe=a(xe),F=a(fe),he=s(fe,2);{var Xe=oe=>{var le=Av(),I=a(le);x(ae=>n(I,`${ae??""} `),[()=>l("common.skip")]),Y("click",le,Pe),v(oe,le)};g(()=>y(he,oe=>{C(e(o),3)&&oe(Xe)}),"if",At,504,20)}var yt=s(he,2);{var ht=oe=>{var le=Ov(),I=a(le);{var ae=ee=>{var re=Pv();v(ee,re)},G=ee=>{var re=jv();v(ee,re)};g(()=>y(I,ee=>{e(we)?ee(ae):ee(G,!1)}),"if",At,520,28)}x(()=>le.disabled=e(we)),Y("click",le,Pe),v(oe,le)},ct=oe=>{var le=Mv(),I=a(le);{var ae=ee=>{var re=Lv();v(ee,re)},G=ee=>{var re=Rv();v(ee,re)};g(()=>y(I,ee=>{e(Ke)?ee(ae):ee(G,!1)}),"if",At,533,28)}x(()=>le.disabled=e(Ke)),Y("click",le,Ne),v(oe,le)};g(()=>y(yt,oe=>{e(o)<d?oe(ht):oe(ct,!1)}),"if",At,513,20)}return x(oe=>n(F,oe),[()=>l("onboarding.step_of",{current:e(o),total:d})]),v(r,qe),ha(ie)}La(["click"]);class Iv extends Error{constructor(){super("Unauthorized"),this.name="UnauthorizedError"}}async function Nt(r,i,o){const d={method:r,headers:{}};o&&(d.headers["Content-Type"]="application/json",d.body=JSON.stringify(o));const c=await fetch(i,d);if(c.status===401)throw va.authenticated=!1,new Iv;if(!c.ok)throw new Error(`${r} ${i}: ${c.status}`);return c.json()}mr[u]="src/components/Header.svelte";var Dv=_(m('<button class="hidden sm:inline-flex px-4 py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-play mr-1"></i> </button>'),mr[u],[[110,12,[[114,16]]]]),Fv=_(m('<button class="hidden sm:inline-flex px-4 py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-pause mr-1"></i> </button>'),mr[u],[[117,12,[[121,16]]]]),Uv=_(m('<span class="text-text-muted/60 ml-1"> </span>'),mr[u],[[137,20]]),zv=_(m('<span class="hidden lg:inline-flex text-xs text-text-muted border border-border rounded px-2 py-1"><i class="fa-solid fa-user mr-1"></i> <!></span>'),mr[u],[[133,12,[[134,16]]]]),Bv=_(m('<header class="flex justify-between items-center px-3 sm:px-6 py-3 sm:py-4 border-b border-border bg-surface"><div class="flex items-center gap-2 sm:gap-3"><button class="sm:hidden p-2 -ml-1 text-text-muted hover:text-text transition-colors"><i class="fa-solid fa-bars text-lg"></i></button> <h1 class="text-base sm:text-lg font-semibold tracking-tight text-primary-400"><i class="fa-solid fa-robot mr-1"></i> <span class="hidden xs:inline"> </span></h1> <span><i></i><span class="hidden sm:inline"> </span></span> <span class="hidden md:inline-flex text-xs px-2 py-0.5 rounded-full font-medium bg-primary-950 text-primary-400"><i class="fa-solid fa-screwdriver-wrench mr-1"></i> </span></div> <div class="flex items-center gap-1.5 sm:gap-2"><button class="p-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors text-text-muted"><i></i></button> <button><i></i></button> <!> <button class="hidden sm:inline-flex px-4 py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-bolt mr-1"></i> <span class="hidden lg:inline"> </span></button> <!> <button class="p-2 sm:px-4 sm:py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors text-text-muted"><i class="fa-solid fa-right-from-bracket"></i></button></div></header>'),mr[u],[[66,0,[[67,4,[[69,8,[[74,12]]],[77,8,[[78,12],[79,12]]],[81,8,[[82,12],[82,54]]],[84,8,[[85,12]]]]],[88,4,[[90,8,[[95,12]]],[99,8,[[106,12]]],[125,8,[[129,12],[129,50]]],[142,8,[[147,12]]]]]]]]);function mr(r,i){wa(new.target),ga(i,!0,mr);let o=S(P(!1),"paused"),d=S(P(0),"toolsCount"),c=S(P(""),"statusClass"),f=S(P("fa-spinner fa-spin"),"statusIcon"),b=S(P(Jt(l("header.loading"))),"statusText"),h=S(P(!1),"disconnected");async function w(){try{const O=(await M(Nt("GET","/api/status")))();p(o,O.paused,!0),p(d,O.tools_count,!0),p(h,!1),O.paused?(p(c,"badge-paused"),p(f,"fa-circle-pause"),p(b,l("header.paused"),!0)):(p(c,"badge-running"),p(f,"fa-circle-check"),p(b,l("header.running"),!0))}catch{p(h,!0),p(c,"text-error-500"),p(f,"fa-circle-xmark"),p(b,l("header.disconnected"),!0)}}async function L(){(await M(Nt("POST","/api/agent/pause")))(),Rr()}async function j(){(await M(Nt("POST","/api/agent/resume")))(),Rr()}async function A(){(await M(Nt("POST","/api/agent/tick")))(),Rr()}async function k(){try{(await M(fetch("/api/auth/logout",{method:"POST"})))()}catch{}va.authenticated=!1}Ga(()=>{kt.refreshCounter,w()});var q={...ka()},V=Bv(),X=a(V),N=a(X),ne=s(N,2),je=s(a(ne),2),we=a(je),Te=s(ne,2),Ke=a(Te),Ee=s(Ke),te=a(Ee),_e=s(Te,2),Ve=s(a(_e),1,!0),K=s(X,2),W=a(K),Ue=a(W),Ne=s(W,2);let Pe;var R=a(Ne),ie=s(Ne,2);{var qe=O=>{var B=Dv(),ue=s(a(B));x(D=>n(ue,` ${D??""}`),[()=>l("header.resume")]),Y("click",B,j),v(O,B)},Se=O=>{var B=Fv(),ue=s(a(B));x(D=>n(ue,` ${D??""}`),[()=>l("header.pause")]),Y("click",B,L),v(O,B)};g(()=>y(ie,O=>{e(o)?O(qe):O(Se,!1)}),"if",mr,109,8)}var me=s(ie,2),$=s(a(me),2),z=a($),Z=s(me,2);{var H=O=>{var B=zv(),ue=s(a(B)),D=s(ue);{var T=E=>{var U=Uv(),J=a(U);x(()=>n(J,`(${va.role??""})`)),v(E,U)};g(()=>y(D,E=>{va.role&&E(T)}),"if",mr,136,16)}x(()=>n(ue,` ${va.subject??""} `)),v(O,B)};g(()=>y(Z,O=>{va.subject&&O(H)}),"if",mr,132,8)}var Le=s(Z,2);return x((O,B,ue,D,T,E,U)=>{St(N,"title",O),n(we,B),Qe(Te,1,`text-xs px-2 py-0.5 rounded-full font-medium ${e(c)??""}`),Qe(Ke,1,`fa-solid ${e(f)??""} mr-1`),n(te,e(b)),n(Ve,ue),St(W,"title",D),Qe(Ue,1,`fa-solid ${C(kt.theme,"dark")?"fa-sun":"fa-moon"}`),Pe=Qe(Ne,1,"p-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors",null,Pe,{"text-primary-400":kt.notificationsEnabled,"text-text-muted":!kt.notificationsEnabled}),St(Ne,"title",T),Qe(R,1,`fa-solid ${kt.notificationsEnabled?"fa-bell":"fa-bell-slash"}`),n(z,E),St(Le,"title",U)},[()=>l("header.menu"),()=>l("header.title"),()=>l("header.tools_count",{count:e(d)}),()=>C(kt.theme,"dark")?l("header.theme_light"):l("header.theme_dark"),()=>kt.notificationsEnabled?l("notifications.enabled"):l("notifications.enable"),()=>l("header.force_tick"),()=>l("header.sign_out")]),Y("click",N,function(){return kt.mobileMenuOpen=!0}),Y("click",W,function(...O){un(()=>jc,this,O,mr,[91,21])}),Y("click",Ne,function(...O){un(()=>Oc,this,O,mr,[100,21])}),Y("click",me,A),Y("click",Le,k),v(r,V),ha(q)}La(["click"]);$s[u]="src/components/PendingActions.svelte";var qv=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),$s[u],[[66,12]]),Gv=_(m('<div class="p-3 border border-border rounded-md mb-2 bg-surface-muted"><div class="text-xs uppercase tracking-wider text-primary-500 font-semibold mb-1"><i class="fa-solid fa-gear mr-1"></i> </div> <pre class="text-xs whitespace-pre-wrap my-1 text-text font-mono"> </pre> <div class="text-xs text-text-muted mb-2"> </div> <div class="text-[11px] text-text-subtle"> </div> <div class="flex gap-1.5 mt-2"><button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"><i class="fa-solid fa-check mr-1"></i> </button> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-xmark mr-1"></i> </button></div></div>'),$s[u],[[69,16,[[70,20,[[71,24]]],[73,20],[74,20],[75,20],[76,20,[[77,24,[[81,28]]],[83,24,[[87,28]]]]]]]]),Vv=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-clock-rotate-left mr-1.5"></i> </h2> <div class="flex gap-1.5 pr-3"><button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"> </button> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors"> </button></div></div> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),$s[u],[[48,0,[[49,4,[[50,8,[[51,12]]],[53,8,[[54,12],[58,12]]]]],[64,4]]]]);function $s(r,i){wa(new.target),ga(i,!0,$s);let o=S(P(Jt([])),"actions");async function d(){try{p(o,(await M(Nt("GET","/api/pending")))(),!0)}catch(te){console.error(...Xt("error","loadPending:",te))}}async function c(te){(await M(Nt("POST",`/api/pending/${te}/approve`)))(),Rr()}async function f(te){(await M(Nt("POST",`/api/pending/${te}/reject`)))(),Rr()}async function b(){(await M(Nt("POST","/api/pending/approve-all")))(),Rr()}async function h(){(await M(Nt("POST","/api/pending/reject-all")))(),Rr()}function w(te){var Ve;const _e=(Ve=te.action)==null?void 0:Ve.params;return _e?JSON.stringify(_e,null,2):"{}"}Ga(()=>{kt.refreshCounter,d()});var L={...ka()},j=Vv(),A=a(j),k=a(A),q=s(a(k)),V=s(k,2),X=a(V),N=a(X),ne=s(X,2),je=a(ne),we=s(A,2),Te=a(we);{var Ke=te=>{var _e=qv(),Ve=a(_e);x(K=>n(Ve,K),[()=>l("pending.no_pending")]),v(te,_e)},Ee=te=>{var _e=Oa(),Ve=Ae(_e);g(()=>Dt(Ve,17,()=>e(o),K=>K.id,(K,W)=>{var Ue=Gv(),Ne=a(Ue),Pe=s(a(Ne),1,!0);var R=s(Ne,2),ie=a(R,!0);var qe=s(R,2),Se=a(qe,!0);var me=s(qe,2),$=a(me,!0);var z=s(me,2),Z=a(z),H=s(a(Z),1,!0);var Le=s(Z,2),O=s(a(Le),1,!0);x((B,ue,D)=>{var T,E;n(Pe,((T=e(W).action)==null?void 0:T.tool)??"unknown"),n(ie,B),n(Se,e(W).reasoning??((E=e(W).action)==null?void 0:E.reasoning)??""),n($,e(W).proposed_at),n(H,ue),n(O,D)},[()=>w(e(W)),()=>l("pending.approve"),()=>l("pending.reject")]),Y("click",Z,function(){return c(e(W).id)}),Y("click",Le,function(){return f(e(W).id)}),v(K,Ue)}),"each",$s,68,12),v(te,_e)};g(()=>y(Te,te=>{C(e(o).length,0)?te(Ke):te(Ee,!1)}),"if",$s,65,8)}return x((te,_e,Ve)=>{n(q,` ${te??""}`),n(N,_e),n(je,Ve)},[()=>l("pending.title"),()=>l("pending.approve_all"),()=>l("pending.reject_all")]),Y("click",X,b),Y("click",ne,h),v(r,j),ha(L)}La(["click"]);function Yo(r){if(!r)return null;try{return/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(r)?new Date(r.replace(" ","T")+"Z"):new Date(r)}catch{return null}}function hn(r,i){const o=Yo(r);return!o||isNaN(o.getTime())?"":o.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function Zr(r,i){const o=Yo(r);return!o||isNaN(o.getTime())?r:o.toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Mo(r,i){const o=Yo(r);if(!o||isNaN(o.getTime()))return r;const d=new Date,c=new Date(d.getFullYear(),d.getMonth(),d.getDate()),f=new Date(c.getTime()-864e5),b=new Date(o.getFullYear(),o.getMonth(),o.getDate()),h=o.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return b.getTime()===c.getTime()?`Today ${h}`:b.getTime()===f.getTime()?`Yesterday ${h}`:Zr(r)}Qr[u]="src/components/ActivityLog.svelte";var Hv=_(m('<p class="text-text-subtle text-sm italic text-center py-4">No activity yet</p>'),Qr[u],[[35,12]]),Kv=_(m('<br/><span class="text-text-muted"> </span>',1),Qr[u],[[43,28],[43,32]]),Wv=_(m('<div class="flex items-start gap-2.5 py-2 border-b border-border-muted text-sm"><div></div> <div class="flex-1"><strong> </strong> <!></div> <div class="text-[11px] text-text-subtle whitespace-nowrap"> </div></div>'),Qr[u],[[38,16,[[39,20],[40,20,[[41,24]]],[46,20]]]]),Yv=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-list-check mr-1.5"></i> Activity Log</h2> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),Qr[u],[[29,0,[[30,4,[[31,8]]],[33,4]]]]);function Qr(r,i){wa(new.target),ga(i,!0,Qr);let o=S(P(Jt([])),"entries");async function d(){try{p(o,(await M(Nt("GET","/api/activity?limit=30")))(),!0)}catch(A){console.error(...Xt("error","loadActivity:",A))}}function c(A){return C(A,"ok")?"bg-success-500":C(A,"error")?"bg-error-500":"bg-warning-500"}Ga(()=>{kt.refreshCounter,d()});var f={...ka()},b=Yv(),h=s(a(b),2),w=a(h);{var L=A=>{var k=Hv();v(A,k)},j=A=>{var k=Oa(),q=Ae(k);g(()=>Dt(q,17,()=>e(o),la,(V,X)=>{var N=Wv(),ne=a(N),je=s(ne,2),we=a(je),Te=a(we,!0);var Ke=s(we),Ee=s(Ke);{var te=K=>{var W=Kv(),Ue=s(Ae(W)),Ne=a(Ue,!0);x(Pe=>n(Ne,Pe),[()=>e(X).detail.slice(0,200)]),v(K,W)};g(()=>y(Ee,K=>{e(X).detail&&K(te)}),"if",Qr,42,24)}var _e=s(je,2),Ve=a(_e,!0);x((K,W)=>{Qe(ne,1,`w-1.5 h-1.5 rounded-full mt-1.5 shrink-0 ${K??""}`),n(Te,e(X).action_type),n(Ke,`: ${e(X).summary??""} `),n(Ve,W)},[()=>c(e(X).status),()=>Mo(e(X).created_at)]),v(V,N)}),"each",Qr,37,12),v(A,k)};g(()=>y(w,A=>{C(e(o).length,0)?A(L):A(j,!1)}),"if",Qr,34,8)}return v(r,b),ha(f)}Ca[u]="src/components/LiveFeed.svelte";var Jv=_(m('<span class="relative flex h-2.5 w-2.5"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-500 opacity-75"></span> <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-primary-500"></span></span>'),Ca[u],[[119,16,[[120,20],[121,20]]]]),Qv=_(m('<i class="fa-solid fa-bolt"></i>'),Ca[u],[[124,16]]),Xv=_(m('<span class="text-[10px] bg-surface-muted text-text-subtle px-1.5 py-0.5 rounded-full normal-case tracking-normal font-normal"> </span>'),Ca[u],[[128,16]]),Zv=_(m('<span class="text-[11px] text-primary-400 font-mono animate-pulse"><i class="fa-solid fa-gear fa-spin mr-1"></i> </span>'),Ca[u],[[136,16,[[137,20]]]]),eu=_(m('<span class="text-[11px] text-info-400 animate-pulse"><i class="fa-solid fa-brain mr-1"></i> </span>'),Ca[u],[[141,16,[[142,20]]]]),tu=_(m('<button class="text-[11px] text-text-subtle hover:text-text-muted transition-colors" title="Clear feed"><i class="fa-solid fa-xmark"></i></button>'),Ca[u],[[146,16,[[151,20]]]]),au=_(m('<p class="text-text-subtle text-sm italic text-center py-6"></p>'),Ca[u],[[160,16]]),ru=_(m('<div class="text-xs text-text-muted mt-0.5 truncate font-mono"> </div>'),Ca[u],[[173,36]]),su=_(m('<div><i></i> <div class="flex-1 min-w-0"><div class="text-sm text-text leading-snug"> </div> <!></div> <div class="text-[10px] text-text-subtle whitespace-nowrap shrink-0 mt-0.5"> </div></div>'),Ca[u],[[166,24,[[167,28],[168,28,[[169,32]]],[178,28]]]]),iu=_(m('<div class="divide-y divide-border-muted"></div>'),Ca[u],[[164,16]]),ou=_(m('<div class="max-h-72 overflow-y-auto custom-scroll"><!></div>'),Ca[u],[[158,8]]),nu=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><button class="flex items-center gap-2 text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted hover:text-text transition-colors"><!> <!> <i></i></button> <div class="flex items-center gap-2 pr-3"><!> <!> <!></div></div> <!></section>'),Ca[u],[[112,0,[[113,4,[[114,8,[[132,12]]],[134,8]]]]]]);function Ca(r,i){wa(new.target),ga(i,!0,Ca);let o=S(P(!0),"expanded");Es(async()=>{if(C(Sa.events.length,0))try{const R=(await M(Nt("GET","/api/tool-events?limit=50")))();for(const ie of R)gl(ie)}catch(R){console.error(...Xt("error","Failed to load buffered tool events:",R))}});function d(R){switch(R.type){case"thinking":return"fa-brain";case"tool_start":return"fa-play";case"tool_result":return R.success?"fa-circle-check":"fa-circle-xmark";case"approval_needed":return"fa-shield-halved";case"turn_complete":return"fa-flag-checkered";case"error":return"fa-triangle-exclamation";default:return"fa-circle"}}function c(R){switch(R.type){case"thinking":return"text-info-500";case"tool_start":return"text-primary-500";case"tool_result":return R.success?"text-success-500":"text-error-500";case"approval_needed":return"text-warning-500";case"turn_complete":return"text-success-400";case"error":return"text-error-500";default:return"text-text-muted"}}function f(R){switch(R.type){case"thinking":return"border-l-info-500";case"tool_start":return"border-l-primary-500";case"tool_result":return R.success?"border-l-success-500":"border-l-error-500";case"approval_needed":return"border-l-warning-500";case"turn_complete":return"border-l-success-400";case"error":return"border-l-error-500";default:return"border-l-border"}}function b(R){switch(R.type){case"thinking":return C(R.context,"follow_up_after_approval")?"Generating follow-up reply…":`Thinking (turn ${R.turn+1}/${R.max_turns})…`;case"tool_start":{const ie=R.auto_approved?"auto":R.approved?"approved":"manual";return`Executing ${R.tool} [${ie}]`}case"tool_result":return`${R.tool}: ${R.success?"success":"error"}`;case"approval_needed":return`${R.tool} needs approval`;case"turn_complete":{if(R.exhausted)return`Max turns exhausted (${R.turns_used})`;const ie=R.pending_approvals?`, ${R.pending_approvals} awaiting approval`:"";return`Complete in ${R.turns_used} turn${C(R.turns_used,1)?"":"s"}${ie}`}case"error":return R.message;default:return"Unknown event"}}function h(R){switch(R.type){case"tool_start":return R.reasoning||null;case"tool_result":return R.output_preview||null;case"approval_needed":return R.reasoning||null;default:return null}}function w(R){try{return new Date(R).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}const L=S(ma(()=>Sa.events.length>0),"hasEvents"),j=S(ma(()=>Sa.isThinking||C(Sa.activeTool,null,!1)),"isActive");var A={...ka()},k=nu(),q=a(k),V=a(q),X=a(V);{var N=R=>{var ie=Jv();v(R,ie)},ne=R=>{var ie=Qv();v(R,ie)};g(()=>y(X,R=>{e(j)?R(N):R(ne,!1)}),"if",Ca,118,12)}var je=s(X);je.nodeValue=` ${t("feed.title")??""} `;var we=s(je);{var Te=R=>{var ie=Xv(),qe=a(ie);x(()=>n(qe,Sa.events.length)),v(R,ie)};g(()=>y(we,R=>{e(L)&&R(Te)}),"if",Ca,127,12)}var Ke=s(we,2),Ee=s(V,2),te=a(Ee);{var _e=R=>{var ie=Zv(),qe=s(a(ie),1,!0);x(()=>n(qe,Sa.activeTool)),v(R,ie)};g(()=>y(te,R=>{Sa.activeTool&&R(_e)}),"if",Ca,135,12)}var Ve=s(te,2);{var K=R=>{var ie=eu(),qe=s(a(ie));qe.nodeValue=`${t("feed.thinking")??""}…`,v(R,ie)};g(()=>y(Ve,R=>{Sa.isThinking&&!Sa.activeTool&&R(K)}),"if",Ca,140,12)}var W=s(Ve,2);{var Ue=R=>{var ie=tu();Y("click",ie,function(){return hl()}),v(R,ie)};g(()=>y(W,R=>{e(L)&&R(Ue)}),"if",Ca,145,12)}var Ne=s(q,2);{var Pe=R=>{var ie=ou(),qe=a(ie);{var Se=$=>{var z=au();z.textContent=t("feed.no_events"),v($,z)},me=$=>{var z=iu();g(()=>Dt(z,21,()=>Sa.events,la,(Z,H,Le)=>{var O=su(),B=a(O),ue=s(B,2),D=a(ue),T=a(D,!0);var E=s(D,2);{var U=F=>{var he=ru(),Xe=a(he,!0);x((yt,ht)=>{St(he,"title",yt),n(Xe,ht)},[()=>h(e(H))??void 0,()=>h(e(H))]),v(F,he)},J=ma(()=>h(e(H)));g(()=>y(E,F=>{e(J)&&F(U)}),"if",Ca,172,32)}var xe=s(ue,2),fe=a(xe,!0);x((F,he,Xe,yt,ht)=>{Qe(O,1,`flex items-start gap-2.5 px-4 py-2.5 border-l-2 ${F??""} ${C(Le,0)&&e(j)?"bg-surface-muted/50":""}`),Qe(B,1,`fa-solid ${he??""} ${Xe??""} text-xs mt-0.5 w-4 text-center shrink-0`),n(T,yt),n(fe,ht)},[()=>f(e(H)),()=>d(e(H)),()=>c(e(H)),()=>b(e(H)),()=>w(e(H).timestamp)]),v(Z,O)}),"each",Ca,165,20),v($,z)};g(()=>y(qe,$=>{e(L)?$(me,!1):$(Se)}),"if",Ca,159,12)}v(R,ie)};g(()=>y(Ne,R=>{e(o)&&R(Pe)}),"if",Ca,157,4)}return x(()=>Qe(Ke,1,`fa-solid ${e(o)?"fa-chevron-up":"fa-chevron-down"} text-[10px] ml-1`)),Y("click",V,function(){return p(o,!e(o))}),v(r,k),ha(A)}La(["click"]);Ua[u]="src/components/MemoryPanel.svelte";var lu=_(m("<button><i></i> </button>"),Ua[u],[[69,12,[[74,16]]]]),du=_(m('<div class="px-4 py-2 border-b border-border"><input type="text" class="w-full px-2.5 py-1.5 border border-border rounded-md bg-background text-text text-sm outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 font-sans"/></div>'),Ua[u],[[80,8,[[81,12]]]]),cu=_(m('<p class="text-text-subtle text-sm italic text-center py-4">Error loading memory</p>'),Ua[u],[[93,12]]),vu=_(m('<div class="whitespace-pre-wrap font-mono text-xs leading-relaxed"> </div>'),Ua[u],[[95,12]]),uu=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Ua[u],[[98,16]]),fu=_(m('<div class="py-1.5 border-b border-border-muted text-sm"><strong> </strong> <span class="text-text-muted"> </span><br/> </div>'),Ua[u],[[101,20,[[102,24],[103,24],[103,91]]]]),pu=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Ua[u],[[110,16]]),_u=_(m('<div class="py-1.5 border-b border-border-muted text-sm"><span class="text-xs text-primary-500 font-semibold uppercase tracking-wider"> </span> <span class="text-text-muted text-[11px]"> </span><br/> </div>'),Ua[u],[[113,20,[[114,24],[115,24],[115,104]]]]),mu=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-brain mr-1.5"></i> Memory</h2> <div class="flex px-4 border-b border-border"></div> <!> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),Ua[u],[[63,0,[[64,4,[[65,8]]],[67,4],[91,4]]]]);function Ua(r,i){wa(new.target),ga(i,!0,Ua);let o=S(P(""),"content"),d=S(P(Jt([])),"messages"),c=S(P(Jt([])),"archivalEntries"),f=S(P(""),"searchQuery"),b=S(P(!1),"error");const h=[{id:"core",label:"Core",icon:"fa-microchip"},{id:"conversation",label:"Conversation",icon:"fa-comments"},{id:"archival",label:"Archival",icon:"fa-box-archive"}];function w(Ee){kt.currentMemoryTab=Ee}async function L(){p(b,!1);try{if(C(kt.currentMemoryTab,"core")){const Ee=(await M(Nt("GET","/api/memory/core")))();p(o,Ee.personality||"(empty)",!0),p(d,[],!0),p(c,[],!0)}else if(C(kt.currentMemoryTab,"conversation")){const Ee=(await M(Nt("GET","/api/memory/conversation")))();p(d,Ee,!0),p(o,""),p(c,[],!0)}else if(C(kt.currentMemoryTab,"archival")){const Ee=e(f)?`/api/memory/archival?q=${encodeURIComponent(e(f))}`:"/api/memory/archival",te=(await M(Nt("GET",Ee)))();p(c,te,!0),p(o,""),p(d,[],!0)}}catch(Ee){p(b,!0),console.error(...Xt("error","loadMemory:",Ee))}}function j(Ee){C(Ee.key,"Enter")&&L()}Ga(()=>{kt.refreshCounter,kt.currentMemoryTab,L()});var A={...ka()},k=mu(),q=s(a(k),2);g(()=>Dt(q,21,()=>h,la,(Ee,te)=>{var _e=lu();let Ve;var K=a(_e),W=s(K);x(Ue=>{Ve=Qe(_e,1,"mem-tab",null,Ve,{active:C(kt.currentMemoryTab,e(te).id)}),Qe(K,1,`fa-solid ${e(te).icon??""} mr-1`),n(W,` ${Ue??""}`)},[()=>l("memory."+e(te).id)]),Y("click",_e,function(){return w(e(te).id)}),v(Ee,_e)}),"each",Ua,68,8);var V=s(q,2);{var X=Ee=>{var te=du(),_e=a(te);x(Ve=>St(_e,"placeholder",Ve),[()=>l("memory.search_placeholder")]),Y("keyup",_e,j),ua(_e,function(){return e(f)},function(K){p(f,K)}),v(Ee,te)};g(()=>y(V,Ee=>{C(kt.currentMemoryTab,"archival")&&Ee(X)}),"if",Ua,79,4)}var N=s(V,2),ne=a(N);{var je=Ee=>{var te=cu();v(Ee,te)},we=Ee=>{var te=vu(),_e=a(te);x(()=>n(_e,e(o))),v(Ee,te)},Te=Ee=>{var te=Oa(),_e=Ae(te);{var Ve=W=>{var Ue=uu(),Ne=a(Ue);x(Pe=>n(Ne,Pe),[()=>l("memory.empty")]),v(W,Ue)},K=W=>{var Ue=Oa(),Ne=Ae(Ue);g(()=>Dt(Ne,17,()=>e(d),la,(Pe,R)=>{var ie=fu(),qe=a(ie),Se=a(qe,!0);var me=s(qe,2),$=a(me,!0);var z=s(me,2);x(Z=>{n(Se,e(R).role),n($,Z),n(z,` ${e(R).content??""}`)},[()=>Mo(e(R).created_at)]),v(Pe,ie)}),"each",Ua,100,16),v(W,Ue)};g(()=>y(_e,W=>{C(e(d).length,0)?W(Ve):W(K,!1)}),"if",Ua,97,12)}v(Ee,te)},Ke=Ee=>{var te=Oa(),_e=Ae(te);{var Ve=W=>{var Ue=pu(),Ne=a(Ue);x(Pe=>n(Ne,Pe),[()=>l("memory.empty")]),v(W,Ue)},K=W=>{var Ue=Oa(),Ne=Ae(Ue);g(()=>Dt(Ne,17,()=>e(c),la,(Pe,R)=>{var ie=_u(),qe=a(ie),Se=a(qe,!0);var me=s(qe,2),$=a(me,!0);var z=s(me,2);x(Z=>{n(Se,e(R).category),n($,Z),n(z,` ${e(R).content??""}`)},[()=>Mo(e(R).created_at)]),v(Pe,ie)}),"each",Ua,112,16),v(W,Ue)};g(()=>y(_e,W=>{C(e(c).length,0)?W(Ve):W(K,!1)}),"if",Ua,109,12)}v(Ee,te)};g(()=>y(ne,Ee=>{e(b)?Ee(je):C(kt.currentMemoryTab,"core")?Ee(we,1):C(kt.currentMemoryTab,"conversation")?Ee(Te,2):C(kt.currentMemoryTab,"archival")&&Ee(Ke,3)}),"if",Ua,92,8)}return v(r,k),ha(A)}La(["click","keyup"]);es[u]="src/components/StatsPanel.svelte";var xu=_(m('<i class="fa-regular fa-clock mr-1"></i> <br/>',1),es[u],[[49,20],[49,104]]),bu=_(m("No ticks yet<br/>",1),es[u],[[51,32]]),gu=_(m('<div class="grid grid-cols-2 gap-3"><div class="text-center"><div class="text-3xl font-bold text-primary-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div> <div class="text-center"><div class="text-3xl font-bold text-primary-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div> <div class="text-center"><div class="text-3xl font-bold text-success-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div> <div class="text-center"><div class="text-3xl font-bold text-error-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div></div> <div class="mt-3 text-xs text-text-muted"><!> <i class="fa-solid fa-power-off mr-1"></i> </div>',1),es[u],[[29,12,[[30,16,[[31,20],[32,20]]],[34,16,[[35,20],[36,20]]],[38,16,[[39,20],[40,20]]],[42,16,[[43,20],[44,20]]]]],[47,12,[[53,16]]]]),hu=_(m('<p class="text-text-subtle text-sm italic text-center py-4">Loading...</p>'),es[u],[[56,12]]),yu=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-chart-bar mr-1.5"></i> </h2> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),es[u],[[23,0,[[24,4,[[25,8]]],[27,4]]]]);function es(r,i){wa(new.target),ga(i,!0,es);let o=S(P(null),"stats");async function d(){try{p(o,(await M(Nt("GET","/api/stats")))(),!0)}catch(k){console.error(...Xt("error","loadStats:",k))}}Ga(()=>{kt.refreshCounter,d()});var c={...ka()},f=yu(),b=a(f),h=s(a(b)),w=s(b,2),L=a(w);{var j=k=>{var q=gu(),V=Ae(q),X=a(V),N=a(X),ne=a(N),je=s(N,2),we=a(je),Te=s(X,2),Ke=a(Te),Ee=a(Ke),te=s(Ke,2),_e=a(te),Ve=s(Te,2),K=a(Ve),W=a(K),Ue=s(K,2),Ne=a(Ue),Pe=s(Ve,2),R=a(Pe),ie=a(R),qe=s(R,2),Se=a(qe),me=s(V,2),$=a(me);{var z=Le=>{var O=xu(),B=s(Ae(O));x(ue=>n(B,`${ue??""}: ${e(o).last_tick_at??""}`),[()=>l("stats.last_tick")]),v(Le,O)},Z=Le=>{var O=bu();v(Le,O)};g(()=>y($,Le=>{e(o).last_tick_at?Le(z):Le(Z,!1)}),"if",es,48,16)}var H=s($,3);x((Le,O,B,ue)=>{n(ne,e(o).total_ticks),n(we,Le),n(Ee,e(o).total_actions),n(_e,O),n(W,e(o).total_approved),n(Ne,B),n(ie,e(o).total_rejected),n(Se,ue),n(H,`Started: ${e(o).started_at??""}`)},[()=>l("stats.ticks"),()=>l("stats.messages"),()=>l("stats.approvals"),()=>l("stats.rejections")]),v(k,q)},A=k=>{var q=hu();v(k,q)};g(()=>y(L,k=>{e(o)?k(j):k(A,!1)}),"if",es,28,8)}return x(k=>n(h,` ${k??""}`),[()=>l("stats.title")]),v(r,f),ha(c)}ja[u]="src/components/ChatTab.svelte";var wu=_(m('<div class="flex items-center justify-center h-full"><div class="text-center text-text-subtle"><i class="fa-solid fa-comments text-3xl mb-3 block text-text-subtle"></i> <p class="text-sm"> </p></div></div>'),ja[u],[[93,12,[[94,16,[[95,20],[96,20]]]]]]),ku=_(m('<div class="flex justify-end"><div class="max-w-[70%] min-w-[120px]"><div class="bg-primary-600 text-white rounded-lg rounded-br-sm px-3 py-2 text-sm whitespace-pre-wrap break-words"> </div> <div class="text-[10px] text-text-subtle mt-0.5 text-right"> </div></div></div>'),ja[u],[[102,20,[[103,24,[[104,28],[107,28]]]]]]),$u=_(m('<div class="flex justify-start"><div class="max-w-[70%] min-w-[120px]"><div class="bg-surface-elevated border border-border rounded-lg rounded-bl-sm px-3 py-2 text-sm whitespace-pre-wrap break-words"> </div> <div class="text-[10px] text-text-subtle mt-0.5"> </div></div></div>'),ja[u],[[113,20,[[114,24,[[115,28],[118,28]]]]]]),Tu=_(m('<div class="flex justify-center"><div class="text-[11px] text-text-subtle italic px-3 py-1 bg-surface-muted rounded-full max-w-[80%] truncate"> </div></div>'),ja[u],[[125,20,[[126,24]]]]),Eu=_(m('<i class="fa-solid fa-gear fa-spin mr-1.5 text-primary-500"></i> <span class="text-primary-400 font-mono"> </span> <span class="text-text-subtle ml-1">running…</span>',1),ja[u],[[138,32],[139,32],[140,32]]),Su=_(m('<i class="fa-solid fa-brain mr-1.5 text-info-500 animate-pulse"></i>Thinking…',1),ja[u],[[142,32]]),Cu=_(m('<i class="fa-solid fa-circle-notch fa-spin mr-1.5"></i> ',1),ja[u],[[144,32]]),Au=_(m('<div class="flex justify-start"><div class="min-w-[120px] max-w-[70%]"><div class="bg-surface-elevated border border-border rounded-lg rounded-bl-sm px-3 py-2 text-sm text-text-muted"><!></div></div></div>'),ja[u],[[134,16,[[135,20,[[136,24]]]]]]),Pu=_(m("<!> <!>",1),ja[u],[]),ju=_(m('<div class="mx-4 mb-2 px-3 py-2 rounded-md bg-error-950 border border-error-500/30 text-error-400 text-xs"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div>'),ja[u],[[155,8,[[156,12]]]]),Ou=_(m('<i class="fa-solid fa-circle-notch fa-spin"></i>'),ja[u],[[181,20]]),Lu=_(m('<i class="fa-solid fa-paper-plane"></i>'),ja[u],[[183,20]]),Ru=_(m(`<div class="flex flex-col h-[calc(100vh-140px)]"><div class="flex-1 overflow-y-auto custom-scroll p-4 space-y-3"><!></div> <!> <div class="border-t border-border bg-surface px-4 py-3"><div class="flex gap-2 items-end"><textarea placeholder="Type a message..." rows="1" class="flex-1 px-3 py-2 rounded-md border border-border bg-background text-text text-sm outline-none
                       focus:border-primary-500 focus:ring-1 focus:ring-primary-500/50 font-sans
                       placeholder:text-text-subtle disabled:opacity-50 disabled:cursor-not-allowed resize-none"></textarea> <button class="px-4 py-2 rounded-md bg-primary-600 text-white text-sm font-medium
                       hover:bg-primary-500 transition-colors
                       disabled:opacity-50 disabled:cursor-not-allowed shrink-0"><!></button></div></div></div>`),ja[u],[[86,0,[[88,4],[161,4,[[162,8,[[163,12],[173,12]]]]]]]]);function ja(r,i){wa(new.target),ga(i,!0,ja);let o=S(P(Jt([])),"messages"),d=S(P(""),"input"),c=S(P(!1),"sending"),f=S(P(""),"error"),b=S(P(void 0),"messagesEl");async function h(){try{p(o,(await M(Nt("GET","/api/memory/conversation")))(),!0),(await M(Xi()))(),w()}catch(K){console.error(...Xt("error","loadChat:",K))}}function w(){e(b)&&(e(b).scrollTop=e(b).scrollHeight)}async function L(){const K=e(d).trim();if(!(!K||e(c))){p(f,""),p(c,!0),p(d,""),p(o,[...e(o),{id:Date.now(),role:"user",content:K,created_at:new Date().toISOString()}],!0),(await M(Xi()))(),w();try{const W={message:K};va.userId&&(W.user_id=va.userId);const Ue=(await M(Nt("POST","/api/chat",W)))();(await M(h()))()}catch(W){p(f,(W==null?void 0:W.message)||l("chat.send_failed"),!0),(await M(h()))()}finally{p(c,!1),(await M(Xi()))(),w()}}}function j(K){C(K.key,"Enter")&&!K.shiftKey&&(K.preventDefault(),L())}Es(()=>{h()}),Ga(()=>{kt.refreshCounter,e(c)||h()});var A={...ka()},k=Ru(),q=a(k),V=a(q);{var X=K=>{var W=wu(),Ue=a(W),Ne=s(a(Ue),2),Pe=a(Ne);x(R=>n(Pe,R),[()=>l("chat.no_messages")]),v(K,W)},N=K=>{var W=Pu(),Ue=Ae(W);g(()=>Dt(Ue,17,()=>e(o),R=>R.id,(R,ie)=>{var qe=Oa(),Se=Ae(qe);{var me=Z=>{var H=ku(),Le=a(H),O=a(Le),B=a(O,!0);var ue=s(O,2),D=a(ue,!0);x(T=>{n(B,e(ie).content),n(D,T)},[()=>hn(e(ie).created_at)]),v(Z,H)},$=Z=>{var H=$u(),Le=a(H),O=a(Le),B=a(O,!0);var ue=s(O,2),D=a(ue,!0);x(T=>{n(B,e(ie).content),n(D,T)},[()=>hn(e(ie).created_at)]),v(Z,H)},z=Z=>{var H=Tu(),Le=a(H),O=a(Le,!0);x(()=>n(O,e(ie).content)),v(Z,H)};g(()=>y(Se,Z=>{C(e(ie).role,"user")?Z(me):C(e(ie).role,"assistant")?Z($,1):Z(z,!1)}),"if",ja,101,16)}v(R,qe)}),"each",ja,100,12);var Ne=s(Ue,2);{var Pe=R=>{var ie=Au(),qe=a(ie),Se=a(qe),me=a(Se);{var $=H=>{var Le=Eu(),O=s(Ae(Le),2),B=a(O);x(()=>n(B,Sa.activeTool)),v(H,Le)},z=H=>{var Le=Su();v(H,Le)},Z=H=>{var Le=Cu(),O=s(Ae(Le),1,!0);x(B=>n(O,B),[()=>l("chat.processing")]),v(H,Le)};g(()=>y(me,H=>{Sa.activeTool?H($):Sa.isThinking?H(z,1):H(Z,!1)}),"if",ja,137,28)}v(R,ie)};g(()=>y(Ne,R=>{e(c)&&R(Pe)}),"if",ja,133,12)}v(K,W)};g(()=>y(V,K=>{C(e(o).length,0)&&!e(c)?K(X):K(N,!1)}),"if",ja,92,8)}ml(q,K=>p(b,K),()=>e(b));var ne=s(q,2);{var je=K=>{var W=ju(),Ue=s(a(W),1,!0);x(()=>n(Ue,e(f))),v(K,W)};g(()=>y(ne,K=>{e(f)&&K(je)}),"if",ja,154,4)}var we=s(ne,2),Te=a(we),Ke=a(Te),Ee=s(Ke,2),te=a(Ee);{var _e=K=>{var W=Ou();v(K,W)},Ve=K=>{var W=Lu();v(K,W)};g(()=>y(te,K=>{e(c)?K(_e):K(Ve,!1)}),"if",ja,180,16)}return x(K=>{Ke.disabled=e(c),Ee.disabled=K},[()=>e(c)||!e(d).trim()]),Y("keydown",Ke,j),ua(Ke,function(){return e(d)},function(W){p(d,W)}),Y("click",Ee,L),v(r,k),ha(A)}La(["keydown","click"]);Vt[u]="src/components/GoalsTab.svelte";var Mu=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Vt[u],[[164,12]]),Nu=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Vt[u],[[166,12]]),Iu=_(m('<span class="text-[11px] px-1.5 py-0.5 rounded-full bg-warning-500/15 text-warning-500 font-medium shrink-0"> </span>'),Vt[u],[[181,32]]),Du=_(m('<div class="flex items-center gap-1.5"><div class="w-20 h-1.5 bg-border rounded-full overflow-hidden"><div class="h-full bg-success-500 rounded-full transition-all"></div></div> <span class="text-[11px] text-text-muted font-mono"> </span></div>'),Vt[u],[[188,32,[[189,36,[[190,40]]],[195,36]]]]),Fu=_(m('<div class="text-sm text-text-muted px-4 pb-3 -mt-1"> </div>'),Vt[u],[[207,24]]),Uu=_(m('<div class="text-sm text-text-muted px-4 pt-3 pb-2"> </div>'),Vt[u],[[214,32]]),zu=_(m('<button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-warning-500 hover:bg-warning-500/10 hover:border-warning-500 transition-colors"><i class="fa-solid fa-pause mr-1"></i> </button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-error-400 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-ban mr-1"></i> </button>',1),Vt[u],[[220,36,[[224,40]]],[226,36,[[230,40]]]]),Bu=_(m('<button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"><i class="fa-solid fa-play mr-1"></i> </button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-error-400 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-ban mr-1"></i> </button>',1),Vt[u],[[233,36,[[237,40]]],[239,36,[[243,40]]]]),qu=_(m('<div class="p-4 text-sm text-text-subtle italic text-center"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </div>'),Vt[u],[[249,32,[[250,36]]]]),Gu=_(m('<div class="mx-4 mt-3 p-3 bg-primary-950/40 border border-primary-800/30 rounded-md"><div class="text-[11px] font-semibold uppercase tracking-wider text-primary-400 mb-1"><i class="fa-solid fa-brain mr-1"></i> </div> <div class="text-xs text-text-muted leading-relaxed"> </div></div>'),Vt[u],[[255,36,[[256,40,[[257,44]]],[259,40]]]]),Vu=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),Vt[u],[[273,40]]),Hu=_(m('<div class="text-xs text-text-muted mb-1"> </div>'),Vt[u],[[293,60]]),Ku=_(m('<div class="text-[10px] text-text-subtle"> </div>'),Vt[u],[[296,60]]),Wu=_(m('<div class="mt-1.5 p-2 bg-background border border-border rounded text-[11px] font-mono text-text-muted max-h-[120px] overflow-auto whitespace-pre-wrap break-all leading-relaxed"> </div>'),Vt[u],[[301,60]]),Yu=_(m('<div class="mt-1 text-[10px] text-accent-300 font-mono"> </div>'),Vt[u],[[306,60]]),Ju=_(m('<div class="flex items-start gap-3 p-3 bg-surface border border-border rounded-md"><div class="shrink-0 mt-0.5"><span><i></i></span></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-0.5"><span class="text-sm font-medium"> </span> <span> </span></div> <!> <!> <!> <!></div></div>'),Vt[u],[[279,48,[[280,52,[[281,56,[[282,60]]]]],[285,52,[[286,56,[[287,60],[288,60]]]]]]]]),Qu=_(m('<div class="space-y-2"></div>'),Vt[u],[[277,40]]),Xu=_(m('<span class="text-text-subtle"> </span> <span class="text-text-muted font-mono"> </span>',1),Vt[u],[[325,44],[326,44]]),Zu=_(m('<!> <div class="p-4"><div class="text-xs font-semibold uppercase tracking-wider text-text-muted mb-3"><i class="fa-solid fa-list-check mr-1"></i> </div> <!></div> <div class="px-4 pb-4"><div class="grid grid-cols-2 gap-x-4 gap-y-1 text-[11px]"><span class="text-text-subtle"> </span> <span class="text-text-muted font-mono"> </span> <span class="text-text-subtle"> </span> <span class="text-text-muted font-mono"> </span> <!> <span class="text-text-subtle"> </span> <span class="text-text-muted font-mono truncate"> </span></div></div>',1),Vt[u],[[266,32,[[267,36,[[268,40]]]]],[318,32,[[319,36,[[320,40],[321,40],[322,40],[323,40],[328,40],[329,40]]]]]]),ef=_(m('<div class="border-t border-border"><!> <div class="flex items-center gap-2 px-4 py-2 border-b border-border"><!></div> <!></div>'),Vt[u],[[212,24,[[218,28]]]]),tf=_(m('<div class="border border-border rounded-md mb-3 bg-surface-muted overflow-hidden"><button class="w-full p-4 flex justify-between items-center hover:bg-surface-elevated/40 transition-colors cursor-pointer text-left"><div class="flex items-center gap-2 flex-1 min-w-0"><i></i> <span class="text-[15px] font-semibold truncate"> </span> <!></div> <div class="flex items-center gap-2 shrink-0 ml-3"><!> <span><i></i> </span></div></button> <!> <!></div>'),Vt[u],[[171,16,[[173,20,[[177,24,[[178,28],[179,28]]],[186,24,[[200,28,[[201,32]]]]]]]]]]),af=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-bullseye mr-1.5"></i> </h2> <div class="flex items-center gap-2 pr-3"><select class="text-xs px-2 py-1 border border-border rounded-md bg-surface text-text outline-none focus:border-primary-500"><option> </option><option> </option><option> </option><option> </option><option> </option><option> </option></select> <span class="text-xs text-text-muted"> </span> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div></div> <div class="p-3"><!></div></section>'),Vt[u],[[132,0,[[133,4,[[134,8,[[135,12]]],[137,8,[[138,12,[[143,16],[144,16],[145,16],[146,16],[147,16],[148,16]]],[150,12],[153,12,[[157,16]]]]]]],[162,4]]]]);function Vt(r,i){wa(new.target),ga(i,!0,Vt);let o=S(P(Jt([])),"goals"),d=S(P(!1),"error"),c=S(P(""),"statusFilter"),f=S(P(null),"expandedGoal"),b=S(P(null),"goalDetail"),h=S(P(!1),"detailLoading");async function w(){p(d,!1);try{const B=e(c)?`?status=${e(c)}`:"";p(o,(await M(Nt("GET",`/api/goals${B}`)))(),!0)}catch(B){p(d,!0),console.error(...Xt("error","loadGoals:",B))}}async function L(B){p(h,!0);try{p(b,(await M(Nt("GET",`/api/goals/${encodeURIComponent(B)}`)))(),!0)}catch(ue){console.error(...Xt("error","loadGoalDetail:",ue))}finally{p(h,!1)}}async function j(B,ue){try{(await M(Nt("PUT",`/api/goals/${encodeURIComponent(B)}/status`,{status:ue})))(),w(),C(e(f),B)&&L(B)}catch(D){alert(l("goals.status_update_failed")+D.message)}}function A(B){C(e(f),B)?(p(f,null),p(b,null)):(p(f,B,!0),L(B))}function k(B){switch(B){case"active":return"bg-primary-500/15 text-primary-400";case"paused":return"bg-warning-500/15 text-warning-500";case"completed":return"bg-success-500/15 text-success-500";case"failed":return"bg-error-500/12 text-error-400";case"cancelled":return"bg-text-subtle/10 text-text-subtle";case"in_progress":return"bg-primary-500/15 text-primary-400";case"pending":return"bg-text-subtle/10 text-text-muted";case"skipped":return"bg-text-subtle/10 text-text-subtle";default:return"bg-text-subtle/10 text-text-subtle"}}function q(B){switch(B){case"active":return"fa-circle-play";case"paused":return"fa-circle-pause";case"completed":return"fa-circle-check";case"failed":return"fa-circle-xmark";case"cancelled":return"fa-ban";case"in_progress":return"fa-spinner fa-spin";case"pending":return"fa-clock";case"skipped":return"fa-forward";default:return"fa-question"}}Ga(()=>{C(kt.currentTab,"goals")&&(kt.refreshCounter,w())});var V={...ka()},X=af(),N=a(X),ne=a(N),je=s(a(ne)),we=s(ne,2),Te=a(we),Ke=a(Te),Ee=a(Ke);Ke.value=Ke.__value="";var te=s(Ke),_e=a(te);te.value=te.__value="active";var Ve=s(te),K=a(Ve);Ve.value=Ve.__value="paused";var W=s(Ve),Ue=a(W);W.value=W.__value="completed";var Ne=s(W),Pe=a(Ne);Ne.value=Ne.__value="failed";var R=s(Ne),ie=a(R);R.value=R.__value="cancelled";var qe=s(Te,2),Se=a(qe),me=s(qe,2),$=s(a(me)),z=s(N,2),Z=a(z);{var H=B=>{var ue=Mu(),D=a(ue);x(T=>n(D,T),[()=>l("goals.error_loading")]),v(B,ue)},Le=B=>{var ue=Nu(),D=a(ue);x(T=>n(D,T),[()=>l("goals.no_goals")]),v(B,ue)},O=B=>{var ue=Oa(),D=Ae(ue);g(()=>Dt(D,17,()=>e(o),T=>T.id,(T,E)=>{var U=tf(),J=a(U),xe=a(J),fe=a(xe),F=s(fe,2),he=a(F,!0);var Xe=s(F,2);{var yt=ve=>{var Q=Iu(),$e=a(Q);x(()=>n($e,`P${e(E).priority??""}`)),v(ve,Q)};g(()=>y(Xe,ve=>{e(E).priority>0&&ve(yt)}),"if",Vt,180,28)}var ht=s(xe,2),ct=a(ht);{var oe=ve=>{var Q=Du(),$e=a(Q),Ie=a($e);var Re=s($e,2),Ct=a(Re);x(()=>{Ds(Ie,`width: ${e(E).total_tasks>0?e(E).completed_tasks/e(E).total_tasks*100:0}%`),n(Ct,`${e(E).completed_tasks??""}/${e(E).total_tasks??""}`)}),v(ve,Q)};g(()=>y(ct,ve=>{e(E).total_tasks>0&&ve(oe)}),"if",Vt,187,28)}var le=s(ct,2),I=a(le),ae=s(I,1,!0);var G=s(J,2);{var ee=ve=>{var Q=Fu(),$e=a(Q,!0);x(()=>n($e,e(E).description)),v(ve,Q)};g(()=>y(G,ve=>{e(E).description&&C(e(f),e(E).id,!1)&&ve(ee)}),"if",Vt,206,20)}var re=s(G,2);{var ke=ve=>{var Q=ef(),$e=a(Q);{var Ie=ze=>{var be=Uu(),ce=a(be,!0);x(()=>n(ce,e(E).description)),v(ze,be)};g(()=>y($e,ze=>{e(E).description&&ze(Ie)}),"if",Vt,213,28)}var Re=s($e,2),Ct=a(Re);{var st=ze=>{var be=zu(),ce=Ae(be),pe=s(a(ce),1,!0);var Oe=s(ce,2),Me=s(a(Oe),1,!0);x((Ze,Be)=>{n(pe,Ze),n(Me,Be)},[()=>l("goals.pause"),()=>l("common.cancel")]),Y("click",ce,function(){return j(e(E).id,"paused")}),Y("click",Oe,function(){return j(e(E).id,"cancelled")}),v(ze,be)},De=ze=>{var be=Bu(),ce=Ae(be),pe=s(a(ce),1,!0);var Oe=s(ce,2),Me=s(a(Oe),1,!0);x((Ze,Be)=>{n(pe,Ze),n(Me,Be)},[()=>l("goals.resume"),()=>l("common.cancel")]),Y("click",ce,function(){return j(e(E).id,"active")}),Y("click",Oe,function(){return j(e(E).id,"cancelled")}),v(ze,be)};g(()=>y(Ct,ze=>{C(e(E).status,"active")?ze(st):C(e(E).status,"paused")&&ze(De,1)}),"if",Vt,219,32)}var lt=s(Re,2);{var Je=ze=>{var be=qu(),ce=s(a(be),1,!0);x(pe=>n(ce,pe),[()=>l("common.loading")]),v(ze,be)},_t=ze=>{var be=Zu(),ce=Ae(be);{var pe=Ge=>{var bt=Gu(),pt=a(bt),vt=s(a(pt));var Pt=s(pt,2),Et=a(Pt,!0);x(jt=>{n(vt,` ${jt??""}`),n(Et,e(b).goal.reflection)},[()=>l("goals.self_reflection")]),v(Ge,bt)};g(()=>y(ce,Ge=>{e(b).goal.reflection&&Ge(pe)}),"if",Vt,254,32)}var Oe=s(ce,2),Me=a(Oe),Ze=s(a(Me));var Be=s(Me,2);{var We=Ge=>{var bt=Vu(),pt=a(bt,!0);x(vt=>n(pt,vt),[()=>l("goals.no_tasks")]),v(Ge,bt)},it=Ge=>{var bt=Qu();g(()=>Dt(bt,23,()=>e(b).tasks,pt=>pt.id,(pt,vt)=>{var Pt=Ju(),Et=a(Pt),jt=a(Et),Ft=a(jt);var Ht=s(Et,2),Ut=a(Ht),Kt=a(Ut),na=a(Kt,!0);var ta=s(Kt,2),Ea=a(ta,!0);var pa=s(Ut,2);{var zt=Lt=>{var Mt=Hu(),fa=a(Mt,!0);x(()=>n(fa,e(vt).description)),v(Lt,Mt)};g(()=>y(pa,Lt=>{e(vt).description&&Lt(zt)}),"if",Vt,292,56)}var da=s(pa,2);{var ia=Lt=>{var Mt=Ku(),fa=a(Mt);x((Aa,Ra)=>n(fa,`${Aa??""} ${Ra??""}`),[()=>l("goals.depends_on"),()=>e(vt).depends_on.join(", ")]),v(Lt,Mt)};g(()=>y(da,Lt=>{e(vt).depends_on.length>0&&Lt(ia)}),"if",Vt,295,56)}var aa=s(da,2);{var $a=Lt=>{var Mt=Wu(),fa=a(Mt,!0);x(()=>n(fa,e(vt).result)),v(Lt,Mt)};g(()=>y(aa,Lt=>{e(vt).result&&Lt($a)}),"if",Vt,300,56)}var gt=s(aa,2);{var Ot=Lt=>{var Mt=Yu(),fa=a(Mt);x((Aa,Ra)=>n(fa,`${Aa??""} ${Ra??""}`),[()=>l("goals.tool"),()=>JSON.stringify(e(vt).tool_call)]),v(Lt,Mt)};g(()=>y(gt,Lt=>{e(vt).tool_call&&Lt(Ot)}),"if",Vt,305,56)}x((Lt,Mt,fa)=>{Qe(jt,1,`inline-flex items-center justify-center w-6 h-6 rounded-full text-[11px] font-semibold ${Lt??""}`),Qe(Ft,1,`fa-solid ${Mt??""}`),n(na,e(vt).title),Qe(ta,1,`text-[10px] px-1.5 py-0.5 rounded-full ${fa??""}`),n(Ea,e(vt).status)},[()=>k(e(vt).status),()=>q(e(vt).status),()=>k(e(vt).status)]),v(pt,Pt)}),"each",Vt,278,44),v(Ge,bt)};g(()=>y(Be,Ge=>{C(e(b).tasks.length,0)?Ge(We):Ge(it,!1)}),"if",Vt,272,36)}var ot=s(Oe,2),rt=a(ot),Fe=a(rt),ut=a(Fe,!0);var mt=s(Fe,2),Tt=a(mt,!0);var xt=s(mt,2),se=a(xt,!0);var ye=s(xt,2),et=a(ye,!0);var dt=s(ye,2);{var tt=Ge=>{var bt=Xu(),pt=Ae(bt),vt=a(pt,!0);var Pt=s(pt,2),Et=a(Pt,!0);x((jt,Ft)=>{n(vt,jt),n(Et,Ft)},[()=>l("goals.completed_at"),()=>Zr(e(b).goal.completed_at)]),v(Ge,bt)};g(()=>y(dt,Ge=>{e(b).goal.completed_at&&Ge(tt)}),"if",Vt,324,40)}var Ye=s(dt,2),at=a(Ye,!0);var ft=s(Ye,2),wt=a(ft,!0);x((Ge,bt,pt,vt,Pt,Et)=>{n(Ze,` ${Ge??""} (${e(b).tasks.length??""})`),n(ut,bt),n(Tt,pt),n(se,vt),n(et,Pt),n(at,Et),St(ft,"title",e(b).goal.id),n(wt,e(b).goal.id)},[()=>l("goals.tasks"),()=>l("goals.created"),()=>Zr(e(b).goal.created_at),()=>l("goals.updated"),()=>Zr(e(b).goal.updated_at),()=>l("goals.id")]),v(ze,be)};g(()=>y(lt,ze=>{e(h)?ze(Je):e(b)&&ze(_t,1)}),"if",Vt,248,28)}v(ve,Q)};g(()=>y(re,ve=>{C(e(f),e(E).id)&&ve(ke)}),"if",Vt,211,20)}x((ve,Q)=>{Qe(fe,1,`fa-solid fa-chevron-right text-[10px] text-text-subtle transition-transform ${C(e(f),e(E).id)?"rotate-90":""}`),n(he,e(E).title),Qe(le,1,`text-[11px] px-2 py-0.5 rounded-full font-medium ${ve??""}`),Qe(I,1,`fa-solid ${Q??""} mr-1`),n(ae,e(E).status)},[()=>k(e(E).status),()=>q(e(E).status)]),Y("click",J,function(){return A(e(E).id)}),v(T,U)}),"each",Vt,170,12),v(B,ue)};g(()=>y(Z,B=>{e(d)?B(H):C(e(o).length,0)?B(Le,1):B(O,!1)}),"if",Vt,163,8)}return x((B,ue,D,T,E,U,J,xe,fe)=>{n(je,` ${B??""}`),n(Ee,ue),n(_e,D),n(K,T),n(Ue,E),n(Pe,U),n(ie,J),n(Se,xe),n($,` ${fe??""}`)},[()=>l("goals.title"),()=>l("goals.all_statuses"),()=>l("goals.active"),()=>l("goals.paused"),()=>l("goals.completed"),()=>l("goals.failed"),()=>l("goals.cancelled"),()=>l("goals.count",{count:e(o).length}),()=>l("common.refresh")]),Y("change",Te,function(){return w()}),Gi(Te,function(){return e(c)},function(ue){p(c,ue)}),Y("click",me,w),v(r,X),ha(V)}La(["change","click"]);xi[u]="src/components/CredentialRow.svelte";var rf=_(m('<button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-trash-can"></i></button>'),xi[u],[[91,12,[[96,16]]]]),sf=_(m('<div class="flex items-center gap-2 mb-2 text-sm"><div></div> <div class="font-mono text-xs min-w-[200px] shrink-0 text-accent-300"> </div> <input type="password" class="flex-1 px-2 py-1 border border-border rounded-md bg-background text-text text-xs font-mono outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 placeholder:text-text-subtle"/> <div class="flex gap-1 shrink-0"><button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"><i class="fa-solid fa-floppy-disk"></i></button> <!></div></div>'),xi[u],[[67,0,[[68,4],[69,4],[75,4],[82,4,[[83,8,[[88,12]]]]]]]]);function xi(r,i){wa(new.target),ga(i,!0,xi);let o=S(P(""),"inputValue");function d(){return i.credential.configured?"bg-success-500":i.credential.required?"bg-error-500":"bg-warning-500"}function c(){return i.credential.configured?l("cred.configured"):i.credential.required?l("cred.required"):l("cred.optional")}function f(){return i.credential.configured?l("cred.configured_placeholder"):i.credential.description||l("cred.enter_value")}async function b(){const we=e(o).trim();if(we)try{(await M(Nt("PUT",`/api/skills/${encodeURIComponent(i.skillName)}/credentials`,{key:i.credential.name,value:we})))(),p(o,""),i.onchange()}catch(Te){console.error(...Xt("error","saveCredential:",Te)),alert(l("cred.save_failed")+Te.message)}}async function h(){if(confirm(l("cred.remove_confirm",{name:i.credential.name,skill:i.skillName})))try{(await M(Nt("DELETE",`/api/skills/${encodeURIComponent(i.skillName)}/credentials/${encodeURIComponent(i.credential.name)}`)))(),i.onchange()}catch(we){console.error(...Xt("error","deleteCredential:",we)),alert(l("cred.remove_failed")+we.message)}}function w(we){C(we.key,"Enter")&&b()}var L={...ka()},j=sf(),A=a(j),k=s(A,2),q=a(k),V=s(k,2),X=s(V,2),N=a(X),ne=s(N,2);{var je=we=>{var Te=rf();x(Ke=>St(Te,"title",Ke),[()=>l("common.delete")]),Y("click",Te,h),v(we,Te)};g(()=>y(ne,we=>{i.credential.configured&&we(je)}),"if",xi,90,8)}return x((we,Te,Ke,Ee)=>{Qe(A,1,`w-2 h-2 rounded-full shrink-0 ${we??""}`),St(A,"title",Te),St(k,"title",i.credential.description),n(q,i.credential.label||i.credential.name),St(V,"placeholder",Ke),St(N,"title",Ee)},[d,c,f,()=>l("common.save")]),Y("keyup",V,w),ua(V,function(){return e(o)},function(Te){p(o,Te)}),Y("click",N,b),v(r,j),ha(L)}La(["keyup","click"]);$t[u]="src/components/SkillCard.svelte";var of=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-primary-950 text-primary-400"><i class="fa-solid fa-server mr-1"></i>daemon</span>'),$t[u],[[202,16,[[203,20]]]]),nf=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-warning-500/15 text-warning-500"><i class="fa-solid fa-bolt mr-1"></i>oneshot</span>'),$t[u],[[206,16,[[207,20]]]]),lf=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-text-subtle/10 text-text-subtle"><i class="fa-solid fa-ban mr-1"></i>disabled</span>'),$t[u],[[212,16,[[213,20]]]]),df=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-success-500/15 text-success-500"><i class="fa-solid fa-circle-check mr-1"></i>running</span>'),$t[u],[[216,16,[[217,20]]]]),cf=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-error-500/12 text-error-400"><i class="fa-solid fa-circle-stop mr-1"></i>stopped</span>'),$t[u],[[220,16,[[221,20]]]]),vf=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-violet-900/30 text-violet-400 border border-violet-800/40"><i class="fa-solid fa-plug mr-1"></i>ext</span>'),$t[u],[[226,16,[[227,20]]]]),uf=_(m('<span class="text-[11px] text-text-subtle font-mono"> </span>'),$t[u],[[232,16]]),ff=_(m('<div class="text-sm text-text-muted px-4 pb-3 -mt-1"> </div>'),$t[u],[[238,8]]),pf=_(m('<div class="text-sm text-text-muted px-4 pt-3 pb-2"> </div>'),$t[u],[[245,16]]),_f=_(m('<i class="fa-solid fa-power-off mr-1"></i> ',1),$t[u],[[255,24]]),mf=_(m('<i class="fa-solid fa-play mr-1"></i> ',1),$t[u],[[257,24]]),xf=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),$t[u],[[279,24]]),bf=_(m('<i class="fa-solid fa-trash-can mr-1"></i> ',1),$t[u],[[281,24]]),gf=_(m('<div class="p-4 text-sm text-text-subtle italic text-center"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </div>'),$t[u],[[287,16,[[288,20]]]]),hf=_(m('<div class="p-4 text-sm text-error-400 italic text-center"> </div>'),$t[u],[[291,16]]),yf=_(m('<button><i class="fa-solid fa-plug mr-1"></i> </button>'),$t[u],[[314,24,[[318,28]]]]),wf=_(m('<div class="flex items-center gap-2 mb-1.5 text-xs"><span class="font-mono text-accent-300 min-w-[180px]"> </span> <span class="flex-1 font-mono text-text-muted truncate"> </span> <button class="px-2 py-0.5 text-xs border border-border rounded bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors shrink-0"><i class="fa-solid fa-trash-can"></i></button></div>'),$t[u],[[345,36,[[346,40],[347,40],[348,40,[[353,44]]]]]]),kf=_(m('<div class="border-t border-border pt-3 mb-3"><div class="text-xs font-semibold uppercase tracking-wider text-primary-400 mb-2"><i class="fa-solid fa-gear mr-1"></i> </div> <!> <div class="flex items-center gap-2 mt-2 text-xs"><input type="text" placeholder="KEY" class="w-[180px] px-2 py-1 border border-border rounded bg-background text-text text-xs font-mono outline-none focus:border-primary-500 placeholder:text-text-subtle"/> <input type="text" placeholder="value" class="flex-1 px-2 py-1 border border-border rounded bg-background text-text text-xs font-mono outline-none focus:border-primary-500 placeholder:text-text-subtle"/> <button class="px-2.5 py-1 text-xs border border-border rounded bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors shrink-0"><i class="fa-solid fa-plus mr-1"></i> </button></div></div>'),$t[u],[[340,28,[[341,32,[[342,36]]],[359,32,[[360,36],[366,36],[372,36,[[376,40]]]]]]]]),$f=_(m('<div class="border-t border-border pt-3"><div class="text-xs font-semibold uppercase tracking-wider text-accent-500 mb-2"><i class="fa-solid fa-key mr-1"></i> </div> <!></div>'),$t[u],[[384,28,[[385,32,[[386,36]]]]]]),Tf=_(m('<div class="grid grid-cols-2 gap-x-4 gap-y-1 mb-4 text-xs"><div class="text-text-muted"> </div> <div class="font-mono text-accent-300"> </div> <div class="text-text-muted">Directory</div> <div class="font-mono text-accent-300 truncate"> </div> <div class="text-text-muted">Type</div> <div> </div> <div class="text-text-muted">Enabled</div> <div> </div></div> <!> <!>',1),$t[u],[[327,24,[[328,28],[329,28],[330,28],[331,28],[332,28],[333,28],[334,28],[335,28]]]]),Ef=_(m('<div class="p-4 text-sm text-text-subtle italic text-center"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </div>'),$t[u],[[408,32,[[409,36]]]]),Sf=_(m('<pre class="bg-background border border-border rounded-md p-3 text-[11px] font-mono text-text-muted max-h-[400px] overflow-auto whitespace-pre-wrap break-all leading-relaxed"> </pre>'),$t[u],[[412,32]]),Cf=_(m('<div class="relative"><div class="flex justify-between items-center mb-2"><span class="text-xs text-text-muted"> </span> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div> <!></div>'),$t[u],[[395,24,[[396,28,[[397,32],[400,32,[[404,36]]]]]]]]),Af=_(m('<div><div class="text-xs font-semibold uppercase tracking-wider text-violet-400 mb-2"><i class="fa-solid fa-window-maximize mr-1"></i> </div> <div class="bg-background border border-border rounded-md overflow-hidden"><iframe class="w-full border-0" style="min-height: 300px;" sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe></div></div>'),$t[u],[[420,32,[[421,36,[[422,40]]],[424,36,[[425,40]]]]]]),Pf=_(m('<div class="flex items-center gap-2"><a target="_blank" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md border border-violet-800/50 bg-violet-900/20 text-violet-400 hover:bg-violet-900/40 transition-colors"><i class="fa-solid fa-arrow-up-right-from-square"></i> </a></div>'),$t[u],[[438,32,[[439,36,[[444,40]]]]]]),jf=_(m('<div class="flex items-center gap-2 text-xs font-mono"><span class="px-1.5 py-0.5 rounded bg-violet-900/30 text-violet-300 border border-violet-800/40 min-w-[48px] text-center"> </span> <span class="text-text-muted"> </span></div>'),$t[u],[[457,44,[[458,48],[461,48]]]]),Of=_(m('<div><div class="text-xs font-semibold uppercase tracking-wider text-violet-400 mb-2"><i class="fa-solid fa-route mr-1"></i> </div> <div class="space-y-1"></div></div>'),$t[u],[[451,32,[[452,36,[[453,40]]],[455,36]]]]),Lf=_(m('<p class="text-sm text-text-subtle italic text-center py-4"> </p>'),$t[u],[[469,32]]),Rf=_(m('<div class="space-y-4"><!> <!> <!> <!></div>'),$t[u],[[417,24]]),Mf=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),$t[u],[[487,40]]),Nf=_(m('<i class="fa-solid fa-floppy-disk mr-1"></i> ',1),$t[u],[[489,40]]),If=_(m('<div class="text-xs text-error-400 mb-2 p-2 bg-error-500/10 border border-error-500/30 rounded"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div>'),$t[u],[[494,32,[[495,36]]]]),Df=_(m('<div class="text-xs text-success-500 mb-2 p-2 bg-success-500/10 border border-success-500/30 rounded"><i class="fa-solid fa-check mr-1"></i> </div>'),$t[u],[[499,32,[[500,36]]]]),Ff=_(m('<div><div class="flex justify-between items-center mb-2"><span class="text-xs text-text-muted"> </span> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors disabled:opacity-50"><!></button></div> <!> <!> <textarea spellcheck="false" class="w-full h-[320px] bg-background border border-border rounded-md p-3 text-[12px] font-mono text-text outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 resize-y leading-relaxed"></textarea></div>'),$t[u],[[476,24,[[477,28,[[478,32],[481,32]]],[503,28]]]]),Uf=_(m('<div class="flex border-b border-border"><button><i class="fa-solid fa-sliders mr-1"></i> </button> <button><i class="fa-solid fa-terminal mr-1"></i> </button> <button><i class="fa-solid fa-file-code mr-1"></i> </button> <!></div> <div class="p-4"><!></div>',1),$t[u],[[294,16,[[295,20,[[299,24]]],[301,20,[[305,24]]],[307,20,[[311,24]]]]],[324,16]]),zf=_(m('<div class="border-t border-border"><!> <div class="flex items-center gap-2 px-4 py-2 border-b border-border"><button><!></button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-rotate-right mr-1"></i> </button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i>Refresh</button> <div class="flex-1"></div> <button class="px-3 py-1.5 text-xs border border-error-500/40 rounded-md bg-surface text-error-400 hover:bg-error-500/10 hover:border-error-500 transition-colors disabled:opacity-50"><!></button></div> <!></div>'),$t[u],[[243,8,[[249,12,[[250,16],[260,16,[[264,20]]],[266,16,[[270,20]]],[272,16],[273,16]]]]]]),Bf=_(m('<div class="border border-border rounded-md mb-3 bg-surface-muted overflow-hidden"><button class="w-full p-4 flex justify-between items-center hover:bg-surface-elevated/40 transition-colors cursor-pointer text-left"><div class="flex items-center gap-2"><i></i> <span class="text-[15px] font-semibold"> </span></div> <div class="flex items-center gap-2"><!> <!> <!> <!></div></button> <!> <!></div>'),$t[u],[[190,0,[[192,4,[[196,8,[[197,12],[198,12]]],[200,8]]]]]]);function $t(r,i){wa(new.target),ga(i,!0,$t);let o=$c(i,"extension",3,null),d=S(P(!1),"expanded"),c=S(P(null),"detail"),f=S(P(!1),"detailLoading"),b=S(P(""),"detailError"),h=S(P("params"),"activeTab"),w=S(P(""),"logContent"),L=S(P(!1),"logLoading"),j=S(P(""),"manifestEdit"),A=S(P(!1),"manifestSaving"),k=S(P(""),"manifestError"),q=S(P(""),"manifestSuccess"),V=S(P(""),"newEnvKey"),X=S(P(""),"newEnvValue"),N=S(P(!1),"deleting");async function ne(){p(d,!e(d)),e(d)&&!e(c)&&(await M(je()))()}async function je(){p(f,!0),p(b,"");try{p(c,(await M(Nt("GET",`/api/skills/${encodeURIComponent(i.skill.name)}/detail`)))(),!0),p(j,e(c).manifest_raw,!0)}catch(F){p(b,F.message,!0)}finally{p(f,!1)}}async function we(){p(L,!0);try{const F=(await M(Nt("GET",`/api/skills/${encodeURIComponent(i.skill.name)}/log?lines=300`)))();p(w,F.log,!0)}catch(F){p(w,`Error loading log: ${F.message}`)}finally{p(L,!1)}}async function Te(){try{(await M(Nt("POST",`/api/skills/${encodeURIComponent(i.skill.name)}/restart`)))(),setTimeout(i.onrefresh,1e3)}catch(F){console.error(...Xt("error","restartSkill:",F)),alert(l("skills.restart_failed")+F.message)}}async function Ke(){const F=!i.skill.enabled;try{(await M(Nt("PUT",`/api/skills/${encodeURIComponent(i.skill.name)}/enabled`,{enabled:F})))(),setTimeout(i.onrefresh,500)}catch(he){console.error(...Xt("error","toggleEnabled:",he)),alert(l("skills.toggle_failed")+he.message)}}async function Ee(){p(A,!0),p(k,""),p(q,"");try{(await M(Nt("PUT",`/api/skills/${encodeURIComponent(i.skill.name)}/manifest`,{toml:e(j)})))(),p(q,l("skills.saved_restart"),!0),setTimeout(()=>{p(q,"")},5e3),(await M(je()))()}catch(F){p(k,F.message,!0)}finally{p(A,!1)}}async function te(){const F=e(V).trim(),he=e(X).trim();if(F)try{(await M(Nt("PUT",`/api/skills/${encodeURIComponent(i.skill.name)}/env`,{key:F,value:he})))(),p(V,""),p(X,""),(await M(je()))()}catch(Xe){alert(l("skills.env_failed")+Xe.message)}}async function _e(F){if(confirm(l("skills.remove_env_confirm",{key:F,skill:i.skill.name})))try{(await M(Nt("DELETE",`/api/skills/${encodeURIComponent(i.skill.name)}/env/${encodeURIComponent(F)}`)))(),(await M(je()))()}catch(he){alert(l("skills.delete_env_failed")+he.message)}}async function Ve(){if(confirm(l("skills.delete_confirm",{name:i.skill.name}))){p(N,!0);try{(await M(Nt("DELETE",`/api/skills/${encodeURIComponent(i.skill.name)}`)))(),i.onrefresh()}catch(F){console.error(...Xt("error","deleteSkill:",F)),alert(l("skills.delete_failed")+F.message)}finally{p(N,!1)}}}function K(F){p(h,F,!0),C(F,"logs")&&we()}let W=S(ma(()=>C(o(),null,!1)&&(on(o().ui.panel,null,!1)||on(o().ui.page,null,!1)||o().route_count>0)),"hasExtension");var Ue={...ka()},Ne=Bf(),Pe=a(Ne),R=a(Pe),ie=a(R),qe=s(ie,2),Se=a(qe),me=s(R,2),$=a(me);{var z=F=>{var he=of();v(F,he)},Z=F=>{var he=nf();v(F,he)};g(()=>y($,F=>{C(i.skill.skill_type,"daemon")?F(z):F(Z,!1)}),"if",$t,201,12)}var H=s($,2);{var Le=F=>{var he=lf();v(F,he)},O=F=>{var he=df();v(F,he)},B=F=>{var he=cf();v(F,he)};g(()=>y(H,F=>{i.skill.enabled?i.skill.running?F(O,1):F(B,!1):F(Le)}),"if",$t,211,12)}var ue=s(H,2);{var D=F=>{var he=vf();v(F,he)};g(()=>y(ue,F=>{e(W)&&F(D)}),"if",$t,225,12)}var T=s(ue,2);{var E=F=>{var he=uf(),Xe=a(he);x(()=>n(Xe,`PID ${i.skill.pid??""}`)),v(F,he)};g(()=>y(T,F=>{i.skill.pid&&F(E)}),"if",$t,231,12)}var U=s(Pe,2);{var J=F=>{var he=ff(),Xe=a(he);x(()=>n(Xe,i.skill.description)),v(F,he)};g(()=>y(U,F=>{i.skill.description&&!e(d)&&F(J)}),"if",$t,237,4)}var xe=s(U,2);{var fe=F=>{var he=zf(),Xe=a(he);{var yt=st=>{var De=pf(),lt=a(De);x(()=>n(lt,i.skill.description)),v(st,De)};g(()=>y(Xe,st=>{i.skill.description&&st(yt)}),"if",$t,244,12)}var ht=s(Xe,2),ct=a(ht),oe=a(ct);{var le=st=>{var De=_f(),lt=s(Ae(De),1,!0);x(Je=>n(lt,Je),[()=>l("skills.disable")]),v(st,De)},I=st=>{var De=mf(),lt=s(Ae(De),1,!0);x(Je=>n(lt,Je),[()=>l("skills.enable")]),v(st,De)};g(()=>y(oe,st=>{i.skill.enabled?st(le):st(I,!1)}),"if",$t,254,20)}var ae=s(ct,2),G=s(a(ae),1,!0),ee=s(ae,2),re=s(ee,4),ke=a(re);{var ve=st=>{var De=xf(),lt=s(Ae(De),1,!0);x(Je=>n(lt,Je),[()=>l("skills.deleting")]),v(st,De)},Q=st=>{var De=bf(),lt=s(Ae(De),1,!0);x(Je=>n(lt,Je),[()=>l("skills.delete")]),v(st,De)};g(()=>y(ke,st=>{e(N)?st(ve):st(Q,!1)}),"if",$t,278,20)}var $e=s(ht,2);{var Ie=st=>{var De=gf(),lt=s(a(De),1,!0);x(Je=>n(lt,Je),[()=>l("skills.loading_detail")]),v(st,De)},Re=st=>{var De=hf(),lt=a(De);x(()=>n(lt,e(b))),v(st,De)},Ct=st=>{var De=Uf(),lt=Ae(De),Je=a(lt),_t=s(a(Je),1,!0),ze=s(Je,2),be=s(a(ze),1,!0),ce=s(ze,2),pe=s(a(ce),1,!0),Oe=s(ce,2);{var Me=Fe=>{var ut=yf(),mt=s(a(ut),1,!0);x(Tt=>{Qe(ut,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${C(e(h),"plugin")?"text-violet-400 border-b-2 border-violet-400":"text-text-muted hover:text-text"}`),n(mt,Tt)},[()=>l("skills.extension")]),Y("click",ut,function(){return K("plugin")}),v(Fe,ut)};g(()=>y(Oe,Fe=>{e(W)&&Fe(Me)}),"if",$t,313,20)}var Ze=s(lt,2),Be=a(Ze);{var We=Fe=>{var ut=Tf(),mt=Ae(ut),Tt=a(mt),xt=a(Tt),se=s(Tt,2),ye=a(se),et=s(se,4),dt=a(et),tt=s(et,4),Ye=a(tt),at=s(tt,4),ft=a(at),wt=s(mt,2);{var Ge=Pt=>{var Et=kf(),jt=a(Et),Ft=s(a(jt)),Ht=s(jt,2);g(()=>Dt(Ht,17,()=>Object.entries(e(c).env),([pa,zt])=>pa,(pa,zt)=>{var da=ma(()=>vo(e(zt),2));let ia=()=>e(da)[0];ia();let aa=()=>e(da)[1];aa();var $a=wf(),gt=a($a),Ot=a(gt,!0);var Lt=s(gt,2),Mt=a(Lt,!0);var fa=s(Lt,2);x(Aa=>{n(Ot,ia()),St(Lt,"title",aa()),n(Mt,aa()),St(fa,"title",Aa)},[()=>l("common.delete")]),Y("click",fa,function(){return _e(ia())}),v(pa,$a)}),"each",$t,344,32);var Ut=s(Ht,2),Kt=a(Ut),na=s(Kt,2),ta=s(na,2),Ea=s(a(ta),1,!0);x((pa,zt)=>{n(Ft,` ${pa??""}`),n(Ea,zt)},[()=>l("skills.environment_vars"),()=>l("skills.add")]),ua(Kt,function(){return e(V)},function(zt){p(V,zt)}),ua(na,function(){return e(X)},function(zt){p(X,zt)}),Y("click",ta,te),v(Pt,Et)},bt=ma(()=>Object.keys(e(c).env).length>0||!0);g(()=>y(wt,Pt=>{e(bt)&&Pt(Ge)}),"if",$t,339,24)}var pt=s(wt,2);{var vt=Pt=>{var Et=$f(),jt=a(Et),Ft=s(a(jt)),Ht=s(jt,2);g(()=>Dt(Ht,17,()=>i.skill.credentials,Ut=>Ut.name,(Ut,Kt)=>{g(()=>xi(Ut,{get credential(){return e(Kt)},get skillName(){return i.skill.name},get onchange(){return i.onrefresh}}),"component",$t,389,36,{componentTag:"CredentialRow"})}),"each",$t,388,32),x(Ut=>n(Ft,` ${Ut??""}`),[()=>l("skills.credentials")]),v(Pt,Et)};g(()=>y(pt,Pt=>{var Et;(Et=i.skill.credentials)!=null&&Et.length&&Pt(vt)}),"if",$t,383,24)}x(Pt=>{n(xt,Pt),n(ye,e(c).entrypoint),St(et,"title",e(c).dir),n(dt,e(c).dir),n(Ye,e(c).skill_type),n(ft,e(c).enabled?"Yes":"No")},[()=>l("skills.entrypoint")]),v(Fe,ut)},it=Fe=>{var ut=Cf(),mt=a(ut),Tt=a(mt),xt=a(Tt),se=s(Tt,2),ye=s(a(se),1,!0),et=s(mt,2);{var dt=Ye=>{var at=Ef(),ft=s(a(at),1,!0);x(wt=>n(ft,wt),[()=>l("common.loading")]),v(Ye,at)},tt=Ye=>{var at=Sf(),ft=a(at);x(wt=>n(ft,wt),[()=>e(w)||l("skills.no_log")]),v(Ye,at)};g(()=>y(et,Ye=>{e(L)?Ye(dt):Ye(tt,!1)}),"if",$t,407,28)}x((Ye,at)=>{n(xt,Ye),n(ye,at)},[()=>l("skills.last_lines"),()=>l("common.refresh")]),Y("click",se,we),v(Fe,ut)},ot=Fe=>{var ut=Rf(),mt=a(ut);{var Tt=Ye=>{var at=Af(),ft=a(at),wt=s(a(ft)),Ge=s(ft,2),bt=a(Ge);x((pt,vt)=>{n(wt,` ${pt??""}`),St(bt,"src",`/skills/${vt??""}/ui/${o().ui.panel??""}`),St(bt,"title",`${i.skill.name??""} extension panel`)},[()=>l("skills.skill_panel"),()=>encodeURIComponent(i.skill.name)]),v(Ye,at)};g(()=>y(mt,Ye=>{o().ui.panel&&Ye(Tt)}),"if",$t,419,28)}var xt=s(mt,2);{var se=Ye=>{var at=Pf(),ft=a(at),wt=s(a(ft));x((Ge,bt)=>{St(ft,"href",`/skills/${Ge??""}/page`),n(wt,` ${bt??""}`)},[()=>encodeURIComponent(i.skill.name),()=>l("skills.open_full_page")]),v(Ye,at)};g(()=>y(xt,Ye=>{o().ui.page&&Ye(se)}),"if",$t,437,28)}var ye=s(xt,2);{var et=Ye=>{var at=Of(),ft=a(at),wt=s(a(ft)),Ge=s(ft,2);g(()=>Dt(Ge,21,()=>o().routes,la,(bt,pt)=>{var vt=jf(),Pt=a(vt),Et=a(Pt,!0);var jt=s(Pt,2),Ft=a(jt);x((Ht,Ut)=>{n(Et,Ht),n(Ft,`/api/skills/${i.skill.name??""}/ext${Ut??""}`)},[()=>e(pt).split(" ")[0],()=>e(pt).split(" ").slice(1).join(" ")]),v(bt,vt)}),"each",$t,456,40),x(bt=>n(wt,` ${bt??""} (${o().route_count??""})`),[()=>l("skills.registered_routes")]),v(Ye,at)};g(()=>y(ye,Ye=>{o().route_count>0&&Ye(et)}),"if",$t,450,28)}var dt=s(ye,2);{var tt=Ye=>{var at=Lf(),ft=a(at);x(wt=>n(ft,wt),[()=>l("skills.no_extension_ui")]),v(Ye,at)};g(()=>y(dt,Ye=>{!o().ui.panel&&C(o().route_count,0)&&Ye(tt)}),"if",$t,468,28)}v(Fe,ut)},rt=Fe=>{var ut=Ff(),mt=a(ut),Tt=a(mt),xt=a(Tt),se=s(Tt,2),ye=a(se);{var et=Ge=>{var bt=Mf(),pt=s(Ae(bt),1,!0);x(vt=>n(pt,vt),[()=>l("common.saving")]),v(Ge,bt)},dt=Ge=>{var bt=Nf(),pt=s(Ae(bt),1,!0);x(vt=>n(pt,vt),[()=>l("common.save")]),v(Ge,bt)};g(()=>y(ye,Ge=>{e(A)?Ge(et):Ge(dt,!1)}),"if",$t,486,36)}var tt=s(mt,2);{var Ye=Ge=>{var bt=If(),pt=s(a(bt),1,!0);x(()=>n(pt,e(k))),v(Ge,bt)};g(()=>y(tt,Ge=>{e(k)&&Ge(Ye)}),"if",$t,493,28)}var at=s(tt,2);{var ft=Ge=>{var bt=Df(),pt=s(a(bt),1,!0);x(()=>n(pt,e(q))),v(Ge,bt)};g(()=>y(at,Ge=>{e(q)&&Ge(ft)}),"if",$t,498,28)}var wt=s(at,2);x(Ge=>{n(xt,Ge),se.disabled=e(A)},[()=>l("skills.edit_manifest")]),Y("click",se,Ee),ua(wt,function(){return e(j)},function(bt){p(j,bt)}),v(Fe,ut)};g(()=>y(Be,Fe=>{C(e(h),"params")?Fe(We):C(e(h),"logs")?Fe(it,1):C(e(h),"plugin")&&o()?Fe(ot,2):C(e(h),"manifest")&&Fe(rt,3)}),"if",$t,325,20)}x((Fe,ut,mt)=>{Qe(Je,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${C(e(h),"params")?"text-primary-400 border-b-2 border-primary-400":"text-text-muted hover:text-text"}`),n(_t,Fe),Qe(ze,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${C(e(h),"logs")?"text-primary-400 border-b-2 border-primary-400":"text-text-muted hover:text-text"}`),n(be,ut),Qe(ce,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${C(e(h),"manifest")?"text-primary-400 border-b-2 border-primary-400":"text-text-muted hover:text-text"}`),n(pe,mt)},[()=>l("skills.parameters"),()=>l("skills.logs"),()=>l("skills.manifest")]),Y("click",Je,function(){return K("params")}),Y("click",ze,function(){return K("logs")}),Y("click",ce,function(){return K("manifest")}),v(st,De)};g(()=>y($e,st=>{e(f)?st(Ie):e(b)?st(Re,1):e(c)&&st(Ct,2)}),"if",$t,286,12)}x(st=>{Qe(ct,1,`px-3 py-1.5 text-xs border border-border rounded-md bg-surface transition-colors ${i.skill.enabled?"hover:bg-error-500/10 hover:border-error-500 text-error-400":"hover:bg-success-500/10 hover:border-success-500 text-success-500"}`),n(G,st),re.disabled=e(N)},[()=>l("skills.restart")]),Y("click",ct,Ke),Y("click",ae,Te),Y("click",ee,je),Y("click",re,Ve),v(F,he)};g(()=>y(xe,F=>{e(d)&&F(fe)}),"if",$t,242,4)}return x(()=>{Qe(ie,1,`fa-solid fa-chevron-right text-[10px] text-text-subtle transition-transform ${e(d)?"rotate-90":""}`),n(Se,i.skill.name)}),Y("click",Pe,ne),v(r,Ne),ha(Ue)}La(["click"]);za[u]="src/components/SkillMarketplace.svelte";var qf=_(m("<button> </button>"),za[u],[[153,16]]),Gf=_(m('<p class="text-text-subtle text-sm italic text-center py-4 col-span-full"> </p>'),za[u],[[170,12]]),Vf=_(m('<span class="text-[10px] px-1.5 py-0.5 rounded bg-surface-elevated border border-border/50 text-text-subtle"> </span>'),za[u],[[185,36]]),Hf=_(m('<span class="text-xs text-success-500 font-medium"><i class="fa-solid fa-check mr-1"></i> </span>'),za[u],[[192,28,[[193,32]]]]),Kf=_(m('<span class="text-xs text-error-500"> </span>'),za[u],[[196,28]]),Wf=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),za[u],[[204,36]]),Yf=_(m('<i class="fa-solid fa-download mr-1"></i> ',1),za[u],[[206,36]]),Jf=_(m('<button class="px-3 py-1 text-xs font-medium rounded border border-primary-600 text-primary-400 hover:bg-primary-900/30 transition-colors disabled:opacity-50"><!></button>'),za[u],[[198,28]]),Qf=_(m('<div class="p-3 rounded-lg border border-border bg-surface-muted hover:border-primary-500/30 transition-colors"><div class="flex items-start justify-between gap-2"><div class="min-w-0 flex-1"><div class="flex items-center gap-2"><i></i> <span class="text-sm font-semibold text-text"> </span></div> <p class="text-xs text-text-muted mt-1"> </p> <div class="flex items-center gap-2 mt-2"><span class="text-[10px] text-text-subtle"> </span> <div class="flex gap-1"></div></div></div> <div class="flex flex-col items-end gap-1 shrink-0"><!> <a target="_blank" rel="noopener noreferrer" class="text-[10px] text-text-subtle hover:text-primary-400 transition-colors"><i class="fa-brands fa-github mr-0.5"></i> </a></div></div></div>'),za[u],[[173,12,[[174,16,[[175,20,[[176,24,[[177,28],[178,28]]],[180,24],[181,24,[[182,28],[183,28]]]]],[190,20,[[210,24,[[216,28]]]]]]]]]]),Xf=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mt-4"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-store mr-1.5"></i> </h2> <a href="https://github.com/topics/safe-agent-skill" target="_blank" rel="noopener noreferrer" class="text-xs text-primary-400 hover:text-primary-300 pr-3 transition-colors"><i class="fa-brands fa-github mr-1"></i> </a></div> <div class="px-4 py-2 border-b border-border flex flex-col sm:flex-row gap-2"><input type="text" class="flex-1 px-2.5 py-1.5 border border-border rounded-md bg-background text-text text-sm outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900"/> <div class="flex gap-1 flex-wrap"></div></div> <div class="p-3 grid grid-cols-1 md:grid-cols-2 gap-3 max-h-[500px] overflow-y-auto custom-scroll"><!> <!></div></section>'),za[u],[[129,0,[[130,4,[[131,8,[[132,12]]],[134,8,[[140,12]]]]],[144,4,[[145,8],[151,8]]],[168,4]]]]);function za(r,i){wa(new.target),ga(i,!0,za);const o=[{name:"google-calendar",description:"Monitor and manage Google Calendar events with automatic reminders",author:"safe-agent",repo:"https://github.com/PegasusHeavyIndustries/safe-agent-skill-google-calendar",category:"productivity",tags:["calendar","google","reminders"],stars:0},{name:"web-monitor",description:"Monitor websites for changes and send notifications",author:"safe-agent",repo:"https://github.com/PegasusHeavyIndustries/safe-agent-skill-web-monitor",category:"data",tags:["monitoring","web","alerts"],stars:0},{name:"email-digest",description:"Summarize and categorize incoming emails with AI-powered triage",author:"safe-agent",repo:"https://github.com/PegasusHeavyIndustries/safe-agent-skill-email-digest",category:"communication",tags:["email","digest","summary"],stars:0},{name:"github-issues",description:"Track GitHub issues and PRs, auto-triage with labels",author:"safe-agent",repo:"https://github.com/PegasusHeavyIndustries/safe-agent-skill-github-issues",category:"development",tags:["github","issues","development"],stars:0},{name:"rss-reader",description:"Follow RSS/Atom feeds and get AI-summarized updates",author:"safe-agent",repo:"https://github.com/PegasusHeavyIndustries/safe-agent-skill-rss-reader",category:"data",tags:["rss","feeds","news"],stars:0},{name:"daily-briefing",description:"Generate a personalized morning briefing from your calendars, email, and news",author:"safe-agent",repo:"https://github.com/PegasusHeavyIndustries/safe-agent-skill-daily-briefing",category:"productivity",tags:["briefing","summary","daily"],stars:0}];let d=S(P(""),"searchQuery"),c=S(P("all"),"categoryFilter"),f=S(P(null),"installing"),b=S(P(Jt({})),"installStatus");const h=["all","productivity","development","communication","data"],w=S(ma(()=>o.filter(K=>{if(C(e(c),"all",!1)&&C(K.category,e(c),!1))return!1;if(e(d)){const W=e(d).toLowerCase();return K.name.toLowerCase().includes(W)||K.description.toLowerCase().includes(W)||K.tags.some(Ue=>Ue.includes(W))}return!0})),"filtered");function L(K){return{all:l("marketplace.category_all"),productivity:l("marketplace.category_productivity"),development:l("marketplace.category_development"),communication:l("marketplace.category_communication"),data:l("marketplace.category_data")}[K]??K}function j(K){return{productivity:"fa-briefcase",development:"fa-code",communication:"fa-envelope",data:"fa-chart-bar"}[K]??"fa-puzzle-piece"}async function A(K){p(f,K.name,!0);try{const W=(await M(Nt("POST","/api/skills/import",{source:"git",location:K.repo})))();p(b,{...e(b),[K.name]:W.ok?"ok":"error"},!0)}catch{p(b,{...e(b),[K.name]:"error"},!0)}p(f,null)}var k={...ka()},q=Xf(),V=a(q),X=a(V),N=s(a(X)),ne=s(X,2),je=s(a(ne)),we=s(V,2),Te=a(we),Ke=s(Te,2);g(()=>Dt(Ke,21,()=>h,la,(K,W)=>{var Ue=qf();let Ne;var Pe=a(Ue,!0);x(R=>{Ne=Qe(Ue,1,"px-2 py-1 text-xs rounded border transition-colors",null,Ne,{"bg-primary-600":C(e(c),e(W)),"text-white":C(e(c),e(W)),"border-primary-600":C(e(c),e(W)),"border-border":C(e(c),e(W),!1),"text-text-muted":C(e(c),e(W),!1)}),n(Pe,R)},[()=>L(e(W))]),Y("click",Ue,function(){return p(c,e(W),!0)}),v(K,Ue)}),"each",za,152,12);var Ee=s(we,2),te=a(Ee);{var _e=K=>{var W=Gf(),Ue=a(W);x(Ne=>n(Ue,Ne),[()=>l("marketplace.no_results")]),v(K,W)};g(()=>y(te,K=>{C(e(w).length,0)&&K(_e)}),"if",za,169,8)}var Ve=s(te,2);return g(()=>Dt(Ve,17,()=>e(w),K=>K.name,(K,W)=>{var Ue=Qf(),Ne=a(Ue),Pe=a(Ne),R=a(Pe),ie=a(R),qe=s(ie,2),Se=a(qe,!0);var me=s(R,2),$=a(me,!0);var z=s(me,2),Z=a(z),H=a(Z);var Le=s(Z,2);g(()=>Dt(Le,21,()=>e(W).tags.slice(0,3),la,(J,xe)=>{var fe=Vf(),F=a(fe,!0);x(()=>n(F,e(xe))),v(J,fe)}),"each",za,184,32);var O=s(Pe,2),B=a(O);{var ue=J=>{var xe=Hf(),fe=s(a(xe),1,!0);x(F=>n(fe,F),[()=>l("marketplace.installed")]),v(J,xe)},D=J=>{var xe=Kf(),fe=a(xe,!0);x(F=>n(fe,F),[()=>l("marketplace.failed")]),v(J,xe)},T=J=>{var xe=Jf(),fe=a(xe);{var F=Xe=>{var yt=Wf(),ht=s(Ae(yt),1,!0);x(ct=>n(ht,ct),[()=>l("marketplace.installing")]),v(Xe,yt)},he=Xe=>{var yt=Yf(),ht=s(Ae(yt),1,!0);x(ct=>n(ht,ct),[()=>l("marketplace.install")]),v(Xe,yt)};g(()=>y(fe,Xe=>{C(e(f),e(W).name)?Xe(F):Xe(he,!1)}),"if",za,203,32)}x(()=>xe.disabled=C(e(f),null,!1)),Y("click",xe,function(){return A(e(W))}),v(J,xe)};g(()=>y(B,J=>{C(e(b)[e(W).name],"ok")?J(ue):C(e(b)[e(W).name],"error")?J(D,1):J(T,!1)}),"if",za,191,24)}var E=s(B,2),U=s(a(E));x((J,xe,fe)=>{Qe(ie,1,`fa-solid ${J??""} text-primary-400 text-sm`),n(Se,e(W).name),n($,e(W).description),n(H,`${xe??""} ${e(W).author??""}`),St(E,"href",e(W).repo),n(U,` ${fe??""}`)},[()=>j(e(W).category),()=>l("marketplace.by"),()=>l("marketplace.repo")]),v(K,Ue)}),"each",za,172,8),x((K,W,Ue)=>{n(N,` ${K??""}`),n(je,` ${W??""}`),St(Te,"placeholder",Ue)},[()=>l("marketplace.title"),()=>l("marketplace.browse_github"),()=>l("marketplace.search")]),ua(Te,function(){return e(d)},function(W){p(d,W)}),v(r,q),ha(k)}La(["click"]);Fa[u]="src/components/SkillsTab.svelte";var Zf=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Fa[u],[[169,28]]),ep=_(m('<i class="fa-solid fa-download mr-1"></i> ',1),Fa[u],[[171,28]]),tp=_(m('<div class="mt-2 text-xs text-error-400 p-2 bg-error-500/10 border border-error-500/30 rounded"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div>'),Fa[u],[[178,16,[[179,20]]]]),ap=_(m('<div class="mt-2 text-xs text-success-500 p-2 bg-success-500/10 border border-success-500/30 rounded"><i class="fa-solid fa-check mr-1"></i> </div>'),Fa[u],[[183,16,[[184,20]]]]),rp=_(m('<div class="border-b border-border bg-surface-muted p-4"><div class="text-xs font-semibold uppercase tracking-wider text-primary-400 mb-3"><i class="fa-solid fa-file-import mr-1"></i> </div> <div class="flex items-center gap-1 mb-3"><button><i class="fa-brands fa-git-alt mr-1"></i> </button> <button><i class="fa-solid fa-globe mr-1"></i> </button> <button><i class="fa-solid fa-folder mr-1"></i> </button></div> <div class="flex flex-col gap-2"><input type="text" class="w-full px-3 py-2 text-sm border border-border rounded-md bg-background text-text font-mono outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 placeholder:text-text-subtle"/> <div class="flex items-center gap-2"><input type="text" class="flex-1 px-3 py-2 text-sm border border-border rounded-md bg-background text-text outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 placeholder:text-text-subtle"/> <button class="px-4 py-2 text-xs font-semibold border border-primary-500/50 rounded-md bg-primary-500/15 text-primary-400 hover:bg-primary-500/25 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"><!></button></div></div> <!> <!> <p class="mt-2 text-[11px] text-text-subtle"> </p></div>'),Fa[u],[[121,8,[[122,12,[[123,16]]],[127,12,[[128,16,[[132,20]]],[134,16,[[138,20]]],[140,16,[[144,20]]]]],[149,12,[[150,16],[156,16,[[157,20],[163,20]]]]],[188,12]]]]),sp=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Fa[u],[[196,12]]),ip=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Fa[u],[[198,12]]),op=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-puzzle-piece mr-1.5"></i> </h2> <div class="flex items-center gap-2 pr-3"><span class="text-xs text-text-muted"> </span> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-primary-500/10 hover:border-primary-500 text-primary-400 transition-colors"><i class="fa-solid fa-file-import mr-1"></i> Import</button> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div></div> <!> <div class="p-3"><!></div></section> <!>',1),Fa[u],[[95,0,[[96,4,[[97,8,[[98,12]]],[100,8,[[101,12],[104,12,[[108,16]]],[110,12,[[114,16]]]]]]],[194,4]]]]);function Fa(r,i){wa(new.target),ga(i,!0,Fa);let o=S(P(Jt([])),"skills"),d=S(P(!1),"error"),c=S(P(Jt([])),"extensions"),f=S(P(!1),"showImport"),b=S(P("git"),"importSource"),h=S(P(""),"importLocation"),w=S(P(""),"importName"),L=S(P(!1),"importing"),j=S(P(""),"importError"),A=S(P(""),"importSuccess");async function k(){p(d,!1);try{p(o,(await M(Nt("GET","/api/skills")))(),!0)}catch($){p(d,!0),console.error(...Xt("error","loadSkills:",$))}}async function q(){try{p(c,(await M(Nt("GET","/api/skills/extensions")))(),!0)}catch($){console.error(...Xt("error","loadExtensions:",$))}}function V($){return e(c).find(z=>C(z.skill_name,$))??null}async function X(){const $=e(h).trim();if($){p(L,!0),p(j,""),p(A,"");try{const z={source:e(b),location:$},Z=e(w).trim();Z&&(z.name=Z);const H=(await M(Nt("POST","/api/skills/import",z)))();H.ok?(p(A,H.message??"Skill imported successfully",!0),p(h,""),p(w,""),setTimeout(()=>{p(A,""),p(f,!1)},3e3),k(),q()):p(j,H.message??"Import failed",!0)}catch(z){p(j,z.message,!0)}finally{p(L,!1)}}}Ga(()=>{C(kt.currentTab,"skills")&&(kt.refreshCounter,k(),q())});var N={...ka()},ne=op(),je=Ae(ne),we=a(je),Te=a(we),Ke=s(a(Te)),Ee=s(Te,2),te=a(Ee),_e=a(te),Ve=s(te,2),K=s(Ve,2),W=s(a(K)),Ue=s(we,2);{var Ne=$=>{var z=rp(),Z=a(z),H=s(a(Z)),Le=s(Z,2),O=a(Le),B=s(a(O)),ue=s(O,2),D=s(a(ue)),T=s(ue,2),E=s(a(T)),U=s(Le,2),J=a(U),xe=s(J,2),fe=a(xe),F=s(fe,2),he=a(F);{var Xe=G=>{var ee=Zf(),re=s(Ae(ee));x(ke=>n(re,` ${ke??""}`),[()=>l("skills.importing")]),v(G,ee)},yt=G=>{var ee=ep(),re=s(Ae(ee));x(ke=>n(re,` ${ke??""}`),[()=>l("skills.import_skill")]),v(G,ee)};g(()=>y(he,G=>{e(L)?G(Xe):G(yt,!1)}),"if",Fa,168,24)}var ht=s(U,2);{var ct=G=>{var ee=tp(),re=s(a(ee),1,!0);x(()=>n(re,e(j))),v(G,ee)};g(()=>y(ht,G=>{e(j)&&G(ct)}),"if",Fa,177,12)}var oe=s(ht,2);{var le=G=>{var ee=ap(),re=s(a(ee),1,!0);x(()=>n(re,e(A))),v(G,ee)};g(()=>y(oe,G=>{e(A)&&G(le)}),"if",Fa,182,12)}var I=s(oe,2),ae=a(I);x((G,ee,re,ke,ve,Q,$e,Ie)=>{n(H,` ${G??""}`),Qe(O,1,`px-3 py-1.5 text-xs rounded-md transition-colors ${C(e(b),"git")?"bg-primary-500/20 text-primary-400 border border-primary-500/50":"border border-border text-text-muted hover:bg-surface-elevated"}`),n(B,` ${ee??""}`),Qe(ue,1,`px-3 py-1.5 text-xs rounded-md transition-colors ${C(e(b),"url")?"bg-primary-500/20 text-primary-400 border border-primary-500/50":"border border-border text-text-muted hover:bg-surface-elevated"}`),n(D,` ${re??""}`),Qe(T,1,`px-3 py-1.5 text-xs rounded-md transition-colors ${C(e(b),"path")?"bg-primary-500/20 text-primary-400 border border-primary-500/50":"border border-border text-text-muted hover:bg-surface-elevated"}`),n(E,` ${ke??""}`),St(J,"placeholder",ve),St(fe,"placeholder",Q),F.disabled=$e,n(ae,Ie)},[()=>l("skills.import_skill"),()=>l("skills.git_repo"),()=>l("skills.archive_url"),()=>l("skills.local_path"),()=>C(e(b),"git")?l("skills.git_placeholder"):C(e(b),"url")?l("skills.url_placeholder"):l("skills.path_placeholder"),()=>l("skills.name_placeholder"),()=>e(L)||!e(h).trim(),()=>l("skills.import_desc")]),Y("click",O,function(){return p(b,"git")}),Y("click",ue,function(){return p(b,"url")}),Y("click",T,function(){return p(b,"path")}),ua(J,function(){return e(h)},function(ee){p(h,ee)}),ua(fe,function(){return e(w)},function(ee){p(w,ee)}),Y("click",F,X),v($,z)};g(()=>y(Ue,$=>{e(f)&&$(Ne)}),"if",Fa,120,4)}var Pe=s(Ue,2),R=a(Pe);{var ie=$=>{var z=sp(),Z=a(z);x(H=>n(Z,H),[()=>l("skills.error_loading")]),v($,z)},qe=$=>{var z=ip(),Z=a(z);x(H=>n(Z,H),[()=>l("skills.no_skills_import")]),v($,z)},Se=$=>{var z=Oa(),Z=Ae(z);g(()=>Dt(Z,17,()=>e(o),H=>H.name,(H,Le)=>{{let O=ma(()=>V(e(Le).name));g(()=>$t(H,{get skill(){return e(Le)},onrefresh:k,get extension(){return e(O)}}),"component",Fa,203,16,{componentTag:"SkillCard"})}}),"each",Fa,202,12),v($,z)};g(()=>y(R,$=>{e(d)?$(ie):C(e(o).length,0)?$(qe,1):$(Se,!1)}),"if",Fa,195,8)}var me=s(je,2);return g(()=>za(me,{}),"component",Fa,209,0,{componentTag:"SkillMarketplace"}),x(($,z,Z)=>{n(Ke,` ${$??""}`),n(_e,z),n(W,` ${Z??""}`)},[()=>l("skills.title"),()=>l("skills.count",{count:e(o).length}),()=>l("common.refresh")]),Y("click",Ve,function(){p(f,!e(f)),p(j,""),p(A,"")}),Y("click",K,k),v(r,ne),ha(N)}La(["click"]);ar[u]="src/components/KnowledgeGraphViz.svelte";var np=_(m('<div class="absolute inset-0 flex items-center justify-center bg-surface/80 z-10 rounded-lg"><p class="text-text-muted text-sm"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </p></div>'),ar[u],[[295,8,[[296,12,[[297,16]]]]]]),lp=_(m('<div class="flex items-center gap-1 text-[10px] text-text-muted"><span class="inline-block w-2.5 h-2.5 rounded-full"></span> </div>'),ar[u],[[330,12,[[331,16]]]]),dp=_(m('<div class="text-xs text-text-muted"><span class="text-accent-500"> </span> </div>'),ar[u],[[349,28,[[350,32]]]]),cp=_(m('<div class="mt-2 space-y-1"></div>'),ar[u],[[345,16]]),vp=_(m('<div class="mt-3 p-3 rounded-lg bg-surface-elevated border border-border"><div class="flex items-center justify-between mb-1"><span class="text-sm font-semibold text-text"> </span> <span class="text-[10px] px-1.5 py-0.5 rounded-full border border-border text-text-muted"> </span></div> <!></div>'),ar[u],[[339,8,[[340,12,[[341,16],[342,16]]]]]]),up=_(m('<div class="relative"><!> <div class="flex items-center justify-between mb-2"><p class="text-xs text-text-subtle"> </p> <div class="flex gap-1"><button class="px-2 py-1 text-xs border border-border rounded bg-surface hover:bg-surface-elevated"><i class="fa-solid fa-plus"></i></button> <button class="px-2 py-1 text-xs border border-border rounded bg-surface hover:bg-surface-elevated"><i class="fa-solid fa-minus"></i></button> <button class="px-2 py-1 text-xs border border-border rounded bg-surface hover:bg-surface-elevated"><i class="fa-solid fa-arrows-to-dot"></i></button></div></div> <canvas class="kg-canvas bg-surface-muted border border-border"></canvas> <div class="flex flex-wrap gap-3 mt-2"></div> <!></div>'),ar[u],[[293,0,[[302,4,[[303,8],[304,8,[[305,12,[[306,16]]],[308,12,[[309,16]]],[311,12,[[312,16]]]]]]],[317,4],[328,4]]]]);function ar(r,i){wa(new.target),ga(i,!0,ar);let o,d=S(P(Jt([])),"nodes"),c=S(P(Jt([])),"edges"),f=S(P(null),"selectedNode"),b=S(P(!0),"loading"),h=S(P(1),"zoom"),w=S(P(0),"panX"),L=S(P(0),"panY"),j=S(P(!1),"dragging"),A=null,k={x:0,y:0},q;const V={person:"#ff9800",concept:"#2196f3",event:"#9c27b0",place:"#4caf50",bookmark:"#e91e63",tag:"#00bcd4",fact:"#ff5722",entity:"#607d8b"};function X(O){return V[O.toLowerCase()]??"#a89c90"}async function N(){p(b,!0);try{const O=(await M(Nt("GET","/api/knowledge/nodes?limit=200")))(),B=(o==null?void 0:o.width)??800,ue=(o==null?void 0:o.height)??500;p(d,O.map((J,xe)=>{var fe;return{id:J.id,label:J.label,type:J.node_type??"node",x:B/2+(Math.random()-.5)*B*.6,y:ue/2+(Math.random()-.5)*ue*.6,vx:0,vy:0,radius:Math.min(8+(((fe=J.content)==null?void 0:fe.length)??0)/50,20)}}),!0);const D=new Set,T=[],E=e(d).slice(0,80).map(J=>J.id),U=10;for(let J=0;J<E.length;J+=U){const xe=E.slice(J,J+U),fe=(await M(Promise.all(xe.map(F=>Nt("GET",`/api/knowledge/nodes/${F}/neighbors`).then(he=>({id:F,neighbors:he})).catch(()=>({id:F,neighbors:[]}))))))();for(const{id:F,neighbors:he}of fe)for(const Xe of he){const yt=e(d).find(ct=>C(ct.label,Xe.node.label));if(!yt)continue;const ht=[Math.min(F,yt.id),Math.max(F,yt.id)].join("-");D.has(ht)||(D.add(ht),T.push({source:F,target:yt.id,relation:Xe.edge.relation}))}}p(c,T,!0)}catch(O){console.error(...Xt("error","loadGraph:",O))}p(b,!1)}function ne(){const T=new Map(e(d).map(E=>[E.id,E]));for(const E of e(d)){for(const xe of e(d)){if(C(E.id,xe.id))continue;const fe=E.x-xe.x,F=E.y-xe.y,he=Math.max(Math.sqrt(fe*fe+F*F),1),Xe=2e3/(he*he);E.vx+=fe/he*Xe*.3,E.vy+=F/he*Xe*.3}const U=((o==null?void 0:o.width)??800)/2,J=((o==null?void 0:o.height)??500)/2;E.vx+=(U-E.x)*.001,E.vy+=(J-E.y)*.001}for(const E of e(c)){const U=T.get(E.source),J=T.get(E.target);if(!U||!J)continue;const xe=J.x-U.x,fe=J.y-U.y,he=Math.sqrt(xe*xe+fe*fe)*.005;U.vx+=xe*he,U.vy+=fe*he,J.vx-=xe*he,J.vy-=fe*he}for(const E of e(d))A&&C(E.id,A.id)||(E.vx*=.85,E.vy*=.85,E.x+=E.vx,E.y+=E.vy)}function je(){var E;if(!o)return;const O=o.getContext("2d");if(!O)return;const B=o.width,ue=o.height,D=C(document.documentElement.getAttribute("data-theme"),"light",!1);O.clearRect(0,0,B,ue),O.save(),O.translate(e(w),e(L)),O.scale(e(h),e(h)),O.lineWidth=1;const T=new Map(e(d).map(U=>[U.id,U]));for(const U of e(c)){const J=T.get(U.source),xe=T.get(U.target);!J||!xe||(O.beginPath(),O.moveTo(J.x,J.y),O.lineTo(xe.x,xe.y),O.strokeStyle=D?"rgba(168,156,144,0.2)":"rgba(107,97,88,0.2)",O.stroke())}for(const U of e(d)){O.beginPath(),O.arc(U.x,U.y,U.radius,0,Math.PI*2),O.fillStyle=X(U.type),C((E=e(f))==null?void 0:E.id,U.id)&&(O.shadowColor=X(U.type),O.shadowBlur=15),O.fill(),O.shadowBlur=0,O.fillStyle=D?"#f5f0eb":"#1a1410",O.font='10px "Fira Sans", sans-serif',O.textAlign="center";const J=U.label.length>18?U.label.slice(0,16)+"…":U.label;O.fillText(J,U.x,U.y+U.radius+12)}O.restore(),ne(),q=requestAnimationFrame(je)}function we(O,B){const ue=(O-e(w))/e(h),D=(B-e(L))/e(h);for(const T of e(d)){const E=T.x-ue,U=T.y-D;if(E*E+U*U<(T.radius+4)*(T.radius+4))return T}return null}function Te(O){const B=o.getBoundingClientRect(),ue=O.clientX-B.left,D=O.clientY-B.top,T=we(ue,D);T?(A=T,p(f,T,!0)):p(j,!0),k={x:O.clientX,y:O.clientY}}function Ke(O){if(A){const B=o.getBoundingClientRect();A.x=(O.clientX-B.left-e(w))/e(h),A.y=(O.clientY-B.top-e(L))/e(h),A.vx=0,A.vy=0}else e(j)&&(p(w,e(w)+(O.clientX-k.x)),p(L,e(L)+(O.clientY-k.y)));k={x:O.clientX,y:O.clientY}}function Ee(){A=null,p(j,!1)}function te(O){O.preventDefault();const B=O.deltaY>0?.9:1.1;p(h,Math.max(.2,Math.min(5,e(h)*B)),!0)}function _e(){p(h,1),p(w,0),p(L,0),p(f,null)}Es(()=>{const O=()=>{if(o){const B=o.parentElement.getBoundingClientRect();o.width=B.width,o.height=500}};return O(),window.addEventListener("resize",O),N().then(()=>{q=requestAnimationFrame(je)}),()=>{cancelAnimationFrame(q),window.removeEventListener("resize",O)}});const Ve=S(ma(()=>e(f)?e(c).filter(O=>C(O.source,e(f).id)||C(O.target,e(f).id)):[]),"selectedEdges");var K={...ka()},W=up(),Ue=a(W);{var Ne=O=>{var B=np(),ue=a(B),D=s(a(ue));x(T=>n(D,` ${T??""}`),[()=>l("knowledge.loading_graph")]),v(O,B)};g(()=>y(Ue,O=>{e(b)&&O(Ne)}),"if",ar,294,4)}var Pe=s(Ue,2),R=a(Pe),ie=a(R),qe=s(R,2),Se=a(qe),me=s(Se,2),$=s(me,2),z=s(Pe,2);ml(z,O=>o=O,()=>o);var Z=s(z,2);g(()=>Dt(Z,21,()=>Object.entries(V),la,(O,B)=>{var ue=ma(()=>vo(e(B),2));let D=()=>e(ue)[0];D();let T=()=>e(ue)[1];T();var E=lp(),U=a(E),J=s(U);x(()=>{Ds(U,`background:${T()??""}`),n(J,` ${D()??""}`)}),v(O,E)}),"each",ar,329,8);var H=s(Z,2);{var Le=O=>{var B=vp(),ue=a(B),D=a(ue),T=a(D),E=s(D,2),U=a(E),J=s(ue,2);{var xe=fe=>{var F=cp();g(()=>Dt(F,21,()=>e(Ve),la,(he,Xe)=>{const yt=S(ma(()=>e(d).find(le=>C(le.id,C(e(Xe).source,e(f).id)?e(Xe).target:e(Xe).source))),"other");e(yt);var ht=Oa(),ct=Ae(ht);{var oe=le=>{var I=dp(),ae=a(I),G=a(ae,!0);var ee=s(ae);x(()=>{n(G,e(Xe).relation),n(ee,` → ${e(yt).label??""}`)}),v(le,I)};g(()=>y(ct,le=>{e(yt)&&le(oe)}),"if",ar,348,24)}v(he,ht)}),"each",ar,346,20),v(fe,F)};g(()=>y(J,fe=>{e(Ve).length>0&&fe(xe)}),"if",ar,344,12)}x(()=>{n(T,e(f).label),n(U,e(f).type)}),v(O,B)};g(()=>y(H,O=>{e(f)&&O(Le)}),"if",ar,338,4)}return x((O,B,ue,D)=>{n(ie,O),St(Se,"title",B),St(me,"title",ue),St($,"title",D)},[()=>l("knowledge.graph_hint"),()=>l("knowledge.zoom_in"),()=>l("knowledge.zoom_out"),()=>l("knowledge.reset_view")]),Y("click",Se,function(){return p(h,Math.min(5,e(h)*1.3),!0)}),Y("click",me,function(){return p(h,Math.max(.2,e(h)*.7),!0)}),Y("click",$,_e),Y("mousedown",z,Te),Y("mousemove",z,Ke),Y("mouseup",z,Ee),jo("mouseleave",z,Ee),jo("wheel",z,te),v(r,W),ha(K)}La(["click","mousedown","mousemove","mouseup"]);rr[u]="src/components/KnowledgeTab.svelte";var fp=_(m('<div class="p-3"><!></div>'),rr[u],[[117,8]]),pp=_(m('<div class="p-3 border border-border rounded-md mb-2 bg-surface-muted"><div class="text-xs uppercase tracking-wider text-accent-500 font-semibold mb-1"><i class="fa-solid fa-arrow-right-arrow-left mr-1"></i> </div> <div class="text-sm"> <span class="text-text-muted text-[11px]"> </span></div></div>'),rr[u],[[139,20,[[140,24,[[141,28]]],[143,24,[[145,28]]]]]]),_p=_(m('<button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors mb-3"><i class="fa-solid fa-arrow-left mr-1"></i> </button> <!>',1),rr[u],[[132,16,[[136,20]]]]),mp=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),rr[u],[[150,16]]),xp=_(m('<button class="w-full text-left p-3 border border-border rounded-md mb-2 bg-surface-muted cursor-pointer hover:border-primary-500/50 transition-colors"><div class="text-xs uppercase tracking-wider text-primary-500 font-semibold mb-1"><i class="fa-solid fa-tag mr-1"></i> </div> <div class="text-sm font-semibold mb-1"> </div> <div class="text-xs text-text-muted"> </div> <div class="text-[11px] text-text-subtle mt-1"> </div></button>'),rr[u],[[153,20,[[157,24,[[158,28]]],[160,24],[161,24],[162,24]]]]),bp=_(m('<div class="px-4 py-2 border-b border-border"><input type="text" class="w-full px-2.5 py-1.5 border border-border rounded-md bg-background text-text text-sm outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 font-sans"/></div> <div class="p-3 max-h-[600px] overflow-y-auto custom-scroll"><!></div>',1),rr[u],[[121,8,[[122,12]]],[130,8]]),gp=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-diagram-project mr-1.5"></i> </h2> <div class="flex items-center gap-2 pr-3"><span class="text-xs text-text-muted"><i class="fa-solid fa-circle-nodes mr-1"></i> </span> <div class="flex border border-border rounded overflow-hidden ml-2"><button><i class="fa-solid fa-list"></i></button> <button><i class="fa-solid fa-project-diagram"></i></button></div></div></div> <!></section>'),rr[u],[[79,0,[[80,4,[[81,8,[[82,12]]],[84,8,[[85,12,[[86,16]]],[89,12,[[90,16,[[99,20]]],[101,16,[[110,20]]]]]]]]]]]]);function rr(r,i){wa(new.target),ga(i,!0,rr);let o=S(P(Jt({nodes:0,edges:0})),"stats"),d=S(P(Jt([])),"nodes"),c=S(P(Jt([])),"neighbors"),f=S(P(!1),"viewingNeighbors"),b=S(P(""),"searchQuery"),h=S(P("list"),"viewMode");async function w(){try{const[Ne,Pe]=(await M(Promise.all([Nt("GET","/api/knowledge/stats"),Nt("GET","/api/knowledge/nodes?limit=100")])))();p(o,Ne,!0),p(d,Pe,!0),p(f,!1)}catch(Ne){console.error(...Xt("error","loadKnowledge:",Ne))}}async function L(){if(!e(b)){w();return}try{p(d,(await M(Nt("GET",`/api/knowledge/search?q=${encodeURIComponent(e(b))}`)))(),!0),p(f,!1)}catch(Ne){console.error(...Xt("error","searchKnowledge:",Ne))}}async function j(Ne){try{const Pe=(await M(Nt("GET",`/api/knowledge/nodes/${Ne}/neighbors`)))();if(!Pe.length){alert(l("knowledge.no_neighbors"));return}p(c,Pe,!0),p(f,!0)}catch(Pe){console.error(...Xt("error","loadNodeNeighbors:",Pe))}}function A(){p(f,!1)}function k(Ne){C(Ne.key,"Enter")&&L()}Ga(()=>{C(kt.currentTab,"knowledge")&&(kt.refreshCounter,w())});var q={...ka()},V=gp(),X=a(V),N=a(X),ne=s(a(N)),je=s(N,2),we=a(je),Te=s(a(we),1,!0),Ke=s(we,2),Ee=a(Ke);let te;var _e=s(Ee,2);let Ve;var K=s(X,2);{var W=Ne=>{var Pe=fp(),R=a(Pe);g(()=>ar(R,{}),"component",rr,118,12,{componentTag:"KnowledgeGraphViz"}),v(Ne,Pe)},Ue=Ne=>{var Pe=bp(),R=Ae(Pe),ie=a(R),qe=s(R,2),Se=a(qe);{var me=Z=>{var H=_p(),Le=Ae(H),O=s(a(Le)),B=s(Le,2);g(()=>Dt(B,17,()=>e(c),la,(ue,D)=>{var T=pp(),E=a(T),U=s(a(E),1,!0);var J=s(E,2),xe=a(J),fe=s(xe),F=a(fe);x(()=>{n(U,e(D).edge.relation),n(xe,`${e(D).node.label??""} `),n(F,`(${e(D).node.node_type??""})`)}),v(ue,T)}),"each",rr,138,16),x(ue=>n(O,` ${ue??""}`),[()=>l("knowledge.back")]),Y("click",Le,A),v(Z,H)},$=Z=>{var H=mp(),Le=a(H);x(O=>n(Le,O),[()=>l("knowledge.no_nodes")]),v(Z,H)},z=Z=>{var H=Oa(),Le=Ae(H);g(()=>Dt(Le,17,()=>e(d),O=>O.id,(O,B)=>{var ue=xp(),D=a(ue),T=s(a(D),1,!0);var E=s(D,2),U=a(E,!0);var J=s(E,2),xe=a(J,!0);var fe=s(J,2),F=a(fe);x((he,Xe,yt,ht)=>{n(T,e(B).node_type??"node"),n(U,e(B).label),n(xe,he),n(F,`${Xe??""} ${yt??""} · ${ht??""}`)},[()=>e(B).content.slice(0,200),()=>l("knowledge.confidence"),()=>(e(B).confidence??1).toFixed(2),()=>Zr(e(B).updated_at)]),Y("click",ue,function(){return j(e(B).id)}),v(O,ue)}),"each",rr,152,16),v(Z,H)};g(()=>y(Se,Z=>{e(f)?Z(me):C(e(d).length,0)?Z($,1):Z(z,!1)}),"if",rr,131,12)}x(Z=>St(ie,"placeholder",Z),[()=>l("knowledge.search_placeholder")]),Y("keyup",ie,k),ua(ie,function(){return e(b)},function(H){p(b,H)}),v(Ne,Pe)};g(()=>y(K,Ne=>{C(e(h),"graph")?Ne(W):Ne(Ue,!1)}),"if",rr,116,4)}return x((Ne,Pe,R,ie)=>{n(ne,` ${Ne??""}`),n(Te,Pe),te=Qe(Ee,1,"px-2 py-1 text-xs transition-colors",null,te,{"bg-primary-600":C(e(h),"list"),"text-white":C(e(h),"list"),"text-text-muted":C(e(h),"list",!1),"hover:text-text":C(e(h),"list",!1)}),St(Ee,"title",R),Ve=Qe(_e,1,"px-2 py-1 text-xs transition-colors",null,Ve,{"bg-primary-600":C(e(h),"graph"),"text-white":C(e(h),"graph"),"text-text-muted":C(e(h),"graph",!1),"hover:text-text":C(e(h),"graph",!1)}),St(_e,"title",ie)},[()=>l("knowledge.title"),()=>l("knowledge.summary",{nodes:e(o).nodes,edges:e(o).edges}),()=>l("knowledge.list_view"),()=>l("knowledge.graph_view")]),Y("click",Ee,function(){return p(h,"list")}),Y("click",_e,function(){return p(h,"graph")}),v(r,V),ha(q)}La(["click","keyup"]);Ts[u]="src/components/ToolsTab.svelte";var hp=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Ts[u],[[31,12]]),yp=_(m('<div class="p-3 border border-border rounded-md mb-2 bg-surface-muted"><div class="text-xs uppercase tracking-wider text-primary-500 font-semibold mb-1"><i class="fa-solid fa-wrench mr-1"></i> </div> <div class="text-sm text-text-muted"> </div></div>'),Ts[u],[[34,16,[[35,20,[[36,24]]],[38,20]]]]),wp=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-screwdriver-wrench mr-1.5"></i> </h2> <div class="p-3 max-h-[600px] overflow-y-auto custom-scroll"><!></div></section>'),Ts[u],[[25,0,[[26,4,[[27,8]]],[29,4]]]]);function Ts(r,i){wa(new.target),ga(i,!0,Ts);let o=S(P(Jt([])),"tools");async function d(){try{p(o,(await M(Nt("GET","/api/tools")))(),!0)}catch(k){console.error(...Xt("error","loadTools:",k))}}Ga(()=>{C(kt.currentTab,"tools")&&(kt.refreshCounter,d())});var c={...ka()},f=wp(),b=a(f),h=s(a(b)),w=s(b,2),L=a(w);{var j=k=>{var q=hp(),V=a(q);x(X=>n(V,X),[()=>l("tools.no_tools")]),v(k,q)},A=k=>{var q=Oa(),V=Ae(q);g(()=>Dt(V,17,()=>e(o),X=>X.name,(X,N,ne,je)=>{var we=yp(),Te=a(we),Ke=s(a(Te),1,!0);var Ee=s(Te,2),te=a(Ee,!0);x(()=>{n(Ke,e(N).name),n(te,e(N).description)}),v(X,we)}),"each",Ts,33,12),v(k,q)};g(()=>y(L,k=>{C(e(o).length,0)?k(j):k(A,!1)}),"if",Ts,30,8)}return x(k=>n(h,` ${k??""}`),[()=>l("tools.title")]),v(r,f),ha(c)}Pa[u]="src/components/TrashTab.svelte";var kp=_(m('<button class="text-xs px-3 py-1.5 rounded bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-400 hover:text-red-300 transition-colors"><i class="fa-solid fa-trash mr-1"></i> </button>'),Pa[u],[[164,24,[[168,28]]]]),$p=_(m('<div class="flex items-center gap-1.5"><span class="text-xs text-red-400"> </span> <button class="text-xs px-2 py-1 rounded bg-red-600 hover:bg-red-700 text-white transition-colors">Yes</button> <button class="text-xs px-2 py-1 rounded bg-surface-muted hover:bg-surface border border-border text-text-muted transition-colors">No</button></div>'),Pa[u],[[171,24,[[172,28],[173,28],[177,28]]]]),Tp=_(m('<div class="bg-red-500/10 border border-red-500/30 text-red-400 text-sm rounded-lg px-4 py-2"><i class="fa-solid fa-circle-exclamation mr-1.5"></i> </div>'),Pa[u],[[190,8,[[191,12]]]]),Ep=_(m('<div class="bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 text-sm rounded-lg px-4 py-2"><i class="fa-solid fa-check-circle mr-1.5"></i> </div>'),Pa[u],[[195,8,[[196,12]]]]),Sp=_(m('<div class="relative"><i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle text-xs"></i> <input type="text" class="w-full pl-9 pr-3 py-2 text-sm bg-surface border border-border rounded-lg text-text placeholder:text-text-subtle focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"/></div>'),Pa[u],[[202,8,[[203,12],[204,12]]]]),Cp=_(m('<div class="p-8 text-center text-text-subtle text-sm"><i class="fa-solid fa-spinner fa-spin mr-1.5"></i> </div>'),Pa[u],[[216,12,[[217,16]]]]),Ap=_(m('<i class="fa-solid fa-search mr-1.5"></i> ',1),Pa[u],[[222,20]]),Pp=_(m('<i class="fa-solid fa-trash-can mr-1.5 opacity-40"></i> <p class="mt-1"> </p> <p class="text-xs mt-1 text-text-subtle opacity-70"> </p>',1),Pa[u],[[224,20],[225,20],[226,20]]),jp=_(m('<div class="p-8 text-center text-text-subtle text-sm"><!></div>'),Pa[u],[[220,12]]),Op=_(m('<div class="p-3 hover:bg-surface-muted/50 transition-colors group"><div class="flex items-start justify-between gap-3"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><i></i> <span class="text-sm font-medium text-text truncate"> </span> <span class="text-xs text-text-subtle bg-surface-muted px-1.5 py-0.5 rounded"> </span></div> <div class="text-xs text-text-subtle truncate pl-6"> </div> <div class="flex items-center gap-3 mt-1 pl-6"><span class="text-xs text-text-subtle"><i class="fa-regular fa-clock mr-0.5"></i> </span> <span class="text-xs text-text-subtle"><i class="fa-solid fa-tag mr-0.5"></i> </span></div></div> <div class="flex items-center gap-1.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"><button class="text-xs px-2.5 py-1.5 rounded bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/30 text-emerald-400 hover:text-emerald-300 transition-colors"><i class="fa-solid fa-rotate-left mr-1"></i> </button> <button class="text-xs px-2.5 py-1.5 rounded bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-400 hover:text-red-300 transition-colors"><i class="fa-solid fa-xmark"></i></button></div></div></div>'),Pa[u],[[234,20,[[235,24,[[236,28,[[237,32,[[238,36],[239,36],[240,36]]],[244,32],[247,32,[[248,36,[[249,40]]],[251,36,[[252,40]]]]]]],[256,28,[[257,32,[[262,36]]],[264,32,[[269,36]]]]]]]]]]),Lp=_(m('<div class="max-h-[600px] overflow-y-auto custom-scroll divide-y divide-border"></div>'),Pa[u],[[232,12]]),Rp=_(m('<section class="space-y-4"><div class="bg-surface border border-border rounded-lg shadow-sm p-4"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><h2 class="text-xs font-semibold uppercase tracking-wider text-text-muted"><i class="fa-solid fa-trash-can mr-1.5"></i> </h2> <span class="text-xs text-text-subtle bg-surface-muted px-2 py-0.5 rounded-full"> </span></div> <div class="flex items-center gap-2"><button class="text-xs px-3 py-1.5 rounded bg-surface-muted hover:bg-surface border border-border text-text-muted hover:text-text transition-colors"><i></i> </button> <!></div></div></div> <!> <!> <!> <div class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><!></div></section>'),Pa[u],[[142,0,[[144,4,[[145,8,[[146,12,[[147,16,[[148,20]]],[150,16]]],[154,12,[[155,16,[[160,20]]]]]]]]],[214,4]]]]);function Pa(r,i){wa(new.target),ga(i,!0,Pa);let o=S(P(Jt([])),"items"),d=S(P(Jt({count:0,total_bytes:0})),"stats"),c=S(P(!1),"loading"),f=S(P(""),"error"),b=S(P(""),"successMsg"),h=S(P(!1),"confirmEmpty"),w=S(P(""),"searchQuery");async function L(){p(c,!0),p(f,"");try{const D=(await M(Nt("GET","/api/trash")))();p(o,D.items,!0),p(d,D.stats,!0)}catch(D){p(f,(D==null?void 0:D.message)||l("trash.load_failed"),!0),console.error(...Xt("error","loadTrash:",D))}finally{p(c,!1)}}async function j(D){try{const T=(await M(Nt("POST",`/api/trash/${D}/restore`)))();p(b,T.message||l("trash.restored"),!0),(await M(L()))(),setTimeout(()=>p(b,""),3e3)}catch(T){p(f,(T==null?void 0:T.message)||l("trash.restore_failed"),!0)}}async function A(D,T){if(confirm(l("trash.permanent_confirm",{name:T})))try{const E=(await M(Nt("DELETE",`/api/trash/${D}`)))();p(b,E.message||l("trash.deleted"),!0),(await M(L()))(),setTimeout(()=>p(b,""),3e3)}catch(E){p(f,(E==null?void 0:E.message)||l("trash.delete_failed"),!0)}}async function k(){try{const D=(await M(Nt("POST","/api/trash/empty")))();p(b,D.message||l("trash.emptied"),!0),p(h,!1),(await M(L()))(),setTimeout(()=>p(b,""),3e3)}catch(D){p(f,(D==null?void 0:D.message)||l("trash.empty_failed"),!0)}}function q(D){if(C(D,0))return"0 B";const T=["B","KB","MB","GB"],E=Math.min(Math.floor(Math.log(D)/Math.log(1024)),T.length-1);return`${(D/Math.pow(1024,E)).toFixed(C(E,0)?0:1)} ${T[E]}`}function V(D){try{const T=new Date(D),U=new Date().getTime()-T.getTime(),J=Math.floor(U/6e4),xe=Math.floor(U/36e5),fe=Math.floor(U/864e5);return J<1?"just now":J<60?`${J}m ago`:xe<24?`${xe}h ago`:fe<7?`${fe}d ago`:T.toLocaleDateString()}catch{return D}}function X(D){return D.startsWith("tool:")?D.replace("tool:",""):D.startsWith("shell:")?D.replace("shell:","")+" (shell)":D.startsWith("rhai:")?D.replace("rhai:","")+" (skill)":D}let N=S(ma(()=>e(w).trim()?e(o).filter(D=>D.name.toLowerCase().includes(e(w).toLowerCase())||D.original_path.toLowerCase().includes(e(w).toLowerCase())||D.source.toLowerCase().includes(e(w).toLowerCase())):e(o)),"filtered");Ga(()=>{C(kt.currentTab,"trash")&&(kt.refreshCounter,L())});var ne={...ka()},je=Rp(),we=a(je),Te=a(we),Ke=a(Te),Ee=a(Ke),te=s(a(Ee)),_e=s(Ee,2),Ve=a(_e),K=s(Ke,2),W=a(K),Ue=a(W);let Ne;var Pe=s(Ue),R=s(W,2);{var ie=D=>{var T=Oa(),E=Ae(T);{var U=xe=>{var fe=kp(),F=s(a(fe));x(he=>n(F,` ${he??""}`),[()=>l("trash.empty_trash")]),Y("click",fe,function(){return p(h,!0)}),v(xe,fe)},J=xe=>{var fe=$p(),F=a(fe),he=a(F),Xe=s(F,2),yt=s(Xe,2);x(ht=>n(he,ht),[()=>l("trash.delete_all")]),Y("click",Xe,k),Y("click",yt,function(){return p(h,!1)}),v(xe,fe)};g(()=>y(E,xe=>{e(h)?xe(J,!1):xe(U)}),"if",Pa,163,20)}v(D,T)};g(()=>y(R,D=>{e(d).count>0&&D(ie)}),"if",Pa,162,16)}var qe=s(we,2);{var Se=D=>{var T=Tp(),E=s(a(T));x(()=>n(E,` ${e(f)??""}`)),v(D,T)};g(()=>y(qe,D=>{e(f)&&D(Se)}),"if",Pa,189,4)}var me=s(qe,2);{var $=D=>{var T=Ep(),E=s(a(T));x(()=>n(E,` ${e(b)??""}`)),v(D,T)};g(()=>y(me,D=>{e(b)&&D($)}),"if",Pa,194,4)}var z=s(me,2);{var Z=D=>{var T=Sp(),E=s(a(T),2);x(U=>St(E,"placeholder",U),[()=>l("trash.search_placeholder")]),ua(E,function(){return e(w)},function(J){p(w,J)}),v(D,T)};g(()=>y(z,D=>{e(o).length>0&&D(Z)}),"if",Pa,201,4)}var H=s(z,2),Le=a(H);{var O=D=>{var T=Cp(),E=s(a(T));x(U=>n(E,` ${U??""}`),[()=>l("common.loading")]),v(D,T)},B=D=>{var T=jp(),E=a(T);{var U=fe=>{var F=Ap(),he=s(Ae(F));x(Xe=>n(he,` ${Xe??""}`),[()=>l("trash.no_match",{query:e(w)})]),v(fe,F)},J=ma(()=>e(w).trim()),xe=fe=>{var F=Pp(),he=s(Ae(F),2),Xe=a(he),yt=s(he,2),ht=a(yt);x((ct,oe)=>{n(Xe,ct),n(ht,oe)},[()=>l("trash.empty"),()=>l("trash.empty_hint")]),v(fe,F)};g(()=>y(E,fe=>{e(J)?fe(U):fe(xe,!1)}),"if",Pa,221,16)}v(D,T)},ue=D=>{var T=Lp();g(()=>Dt(T,21,()=>e(N),E=>E.id,(E,U)=>{var J=Op(),xe=a(J),fe=a(xe),F=a(fe),he=a(F),Xe=s(he,2),yt=a(Xe,!0);var ht=s(Xe,2),ct=a(ht,!0);var oe=s(F,2),le=a(oe,!0);var I=s(oe,2),ae=a(I),G=s(a(ae));var ee=s(ae,2),re=s(a(ee));var ke=s(fe,2),ve=a(ke),Q=s(a(ve));var $e=s(ve,2);x((Ie,Re,Ct,st,De,lt)=>{Qe(he,1,`fa-solid ${e(U).is_dir?"fa-folder text-amber-400":"fa-file text-blue-400"} text-sm`),n(yt,e(U).name),n(ct,Ie),St(oe,"title",e(U).original_path),n(le,e(U).original_path),St(ae,"title",e(U).trashed_at),n(G,` ${Re??""}`),n(re,` ${Ct??""}`),St(ve,"title",st),n(Q,` ${De??""}`),St($e,"title",lt)},[()=>q(e(U).size_bytes),()=>V(e(U).trashed_at),()=>X(e(U).source),()=>l("trash.restore_title"),()=>l("trash.restore"),()=>l("trash.delete_permanent_title")]),Y("click",ve,function(){return j(e(U).id)}),Y("click",$e,function(){return A(e(U).id,e(U).name)}),v(E,J)}),"each",Pa,233,16),v(D,T)};g(()=>y(Le,D=>{e(c)&&C(e(o).length,0)?D(O):C(e(N).length,0)?D(B,1):D(ue,!1)}),"if",Pa,215,8)}return x((D,T,E,U)=>{n(te,` ${D??""}`),n(Ve,`${T??""} · ${E??""}`),W.disabled=e(c),Ne=Qe(Ue,1,"fa-solid fa-arrows-rotate mr-1",null,Ne,{"fa-spin":e(c)}),n(Pe,` ${U??""}`)},[()=>l("trash.title"),()=>l("trash.items_count",{count:e(d).count}),()=>q(e(d).total_bytes),()=>l("common.refresh")]),Y("click",W,L),v(r,je),ha(ne)}La(["click"]);Rt[u]="src/components/SecurityTab.svelte";var Mp=_(m("<button><i></i> </button>"),Rt[u],[[206,12,[[214,16]]]]),Np=_(m('<div class="grid grid-cols-2 md:grid-cols-4 gap-3"><div class="card p-3 text-center"><div class="text-2xl font-bold text-heading"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-2xl font-bold text-blue-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div> </div> <div class="text-xs text-muted"> <!></div></div> <div class="card p-3 text-center"><div> </div> <div class="text-xs text-muted"> </div></div></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-3"><div class="card p-3 text-center"><div class="text-lg font-bold text-green-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-lg font-bold text-red-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-lg font-bold text-orange-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-lg font-bold text-red-500"> </div> <div class="text-xs text-muted"> </div></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3"><div class="card p-4"><h3 class="text-sm font-semibold text-heading mb-2"><i class="fa-solid fa-dollar-sign mr-1"></i>Cost Summary</h3> <div class="space-y-1 text-sm"><div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Requests Today</span><span> </span></div></div></div> <div class="card p-4"><h3 class="text-sm font-semibold text-heading mb-2"><i class="fa-solid fa-gauge-high mr-1"></i>Rate Limits</h3> <div class="space-y-1 text-sm"><div class="flex justify-between"><span class="text-muted">Per Minute</span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Per Hour</span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Status</span> <span> </span></div> <div class="flex justify-between"><span class="text-muted">2FA Challenges</span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Permission Denials</span><span> </span></div></div></div></div>',1),Rt[u],[[222,12,[[223,16,[[224,20],[225,20]]],[227,16,[[228,20],[229,20]]],[231,16,[[232,20],[235,20]]],[242,16,[[243,20],[246,20]]]]],[250,12,[[251,16,[[252,20],[253,20]]],[255,16,[[256,20],[257,20]]],[259,16,[[260,20],[261,20]]],[263,16,[[264,20],[265,20]]]]],[269,12,[[270,16,[[271,20,[[271,72]]],[272,20,[[273,24,[[273,58],[273,117]]],[274,24,[[274,58],[274,116]]],[275,24,[[275,58],[275,116]]],[276,24,[[276,58],[276,112]]],[277,24,[[277,58],[277,118]]],[278,24,[[278,58],[278,104]]]]]]],[281,16,[[282,20,[[282,72]]],[283,20,[[284,24,[[284,58],[284,100]]],[285,24,[[285,58],[285,98]]],[286,24,[[287,28],[288,28]]],[292,24,[[292,58],[292,104]]],[293,24,[[293,58],[293,108]]]]]]]]]]),Ip=_(m('<p class="text-muted text-sm"> </p>'),Rt[u],[[298,12]]),Dp=_(m('<p class="text-muted text-sm"> </p>'),Rt[u],[[326,12]]),Fp=_(m('<span class="text-xs bg-card-hover px-1.5 py-0.5 rounded"> </span>'),Rt[u],[[336,36]]),Up=_(m('<span class="text-xs text-muted"> </span>'),Rt[u],[[339,36]]),zp=_(m("<span> </span>"),Rt[u],[[342,36]]),Bp=_(m('<div class="text-xs text-muted mt-0.5 truncate"> </div>'),Rt[u],[[349,32]]),qp=_(m('<div class="text-xs text-muted mt-0.5 truncate"> </div>'),Rt[u],[[352,32]]),Gp=_(m('<div class="card p-2 flex items-start gap-2 text-sm"><i></i> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span> </span> <!> <!> <!> <span class="text-xs text-muted ml-auto"> </span></div> <!> <!> <div class="text-xs text-muted mt-0.5 flex justify-between"><span> </span> <button class="text-blue-400 hover:text-blue-300" title="Explain this action"><i class="fa-solid fa-magnifying-glass"></i> </button></div></div></div>'),Rt[u],[[330,20,[[331,24],[332,24,[[333,28,[[334,32],[346,32]]],[354,28,[[355,32],[356,32,[[357,36]]]]]]]]]]),Vp=_(m('<div class="space-y-1"></div>'),Rt[u],[[328,12]]),Hp=_(m('<p class="text-muted text-sm"> </p>'),Rt[u],[[377,24]]),Kp=_(m('<span class="text-muted"> </span>'),Rt[u],[[384,55]]),Wp=_(m('<div class="text-sm mt-1"><span class="text-muted">Reasoning:</span> </div>'),Rt[u],[[387,40,[[387,66]]]]),Yp=_(m('<div class="text-xs text-muted mt-1"> </div>'),Rt[u],[[390,40]]),Jp=_(m('<div class="text-xs text-muted mt-1"> </div>'),Rt[u],[[393,40]]),Qp=_(m('<div><div> <!></div> <!> <!> <!> <div class="text-xs text-muted"> </div></div>'),Rt[u],[[381,32,[[382,36],[395,36]]]]),Xp=_(m('<div class="space-y-2"></div>'),Rt[u],[[379,24]]),Zp=_(m('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50" role="dialog"><div class="card p-4 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto" role="document"><div class="flex justify-between items-center mb-3"><h3 class="text-lg font-bold text-heading"><i class="fa-solid fa-lightbulb mr-2"></i> </h3> <button class="text-muted hover:text-heading"><i class="fa-solid fa-xmark"></i></button></div> <!></div></div>'),Rt[u],[[368,12,[[369,16,[[370,20,[[371,24,[[371,67]]],[372,24,[[373,28]]]]]]]]]]),e_=_(m('<div class="flex gap-2 mb-3"><select class="bg-bg border border-border rounded px-2 py-1 text-sm"><option> </option><option>Tool Calls</option><option>Approvals</option><option>Rate Limits</option><option>PII Detected</option><option>2FA</option><option>Permission Denied</option></select> <input type="text" class="bg-bg border border-border rounded px-2 py-1 text-sm flex-1"/> <button class="btn btn-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div> <!> <!>',1),Rt[u],[[303,8,[[304,12,[[305,16],[306,16],[307,16],[308,16],[309,16],[310,16],[311,16]]],[313,12],[320,12,[[321,16]]]]]]),t_=_(m('<div class="mt-2 w-full bg-bg rounded-full h-2"><div></div></div> <div class="text-xs text-muted mt-1"> </div>',1),Rt[u],[[414,24,[[415,28]]],[422,24]]),a_=_(m('<div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-4"><div class="card p-4 text-center"><div> </div> <div class="text-xs text-muted"> </div> <!></div> <div class="card p-4 text-center"><div class="text-3xl font-bold text-heading"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-4 text-center"><div class="text-3xl font-bold text-heading"> </div> <div class="text-xs text-muted"> </div></div></div> <div class="grid grid-cols-3 gap-3"><div class="card p-3 text-center"><div class="text-xl font-bold"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-xl font-bold"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-xl font-bold"> </div> <div class="text-xs text-muted">Requests Today</div></div></div>',1),Rt[u],[[407,12,[[408,16,[[409,20],[412,20]]],[425,16,[[426,20],[427,20]]],[429,16,[[430,20],[431,20]]]]],[434,12,[[435,16,[[436,20],[437,20]]],[439,16,[[440,20],[441,20]]],[443,16,[[444,20],[445,20]]]]]]),r_=_(m('<p class="text-muted text-sm"> </p>'),Rt[u],[[449,12]]),s_=_(m('<div class="w-full bg-bg rounded-full h-3"><div></div></div>'),Rt[u],[[464,28,[[465,32]]]]),i_=_(m('<div class="w-full bg-bg rounded-full h-3"><div></div></div>'),Rt[u],[[481,28,[[482,32]]]]),o_=_(m('<div class="card p-6 max-w-md"><h3 class="text-lg font-bold text-heading mb-4"><i class="fa-solid fa-gauge-high mr-2"></i>Rate Limit Status</h3> <div class="space-y-4"><div><div class="flex justify-between text-sm mb-1"><span class="text-muted">Per Minute</span> <span> </span></div> <!></div> <div><div class="flex justify-between text-sm mb-1"><span class="text-muted">Per Hour</span> <span> </span></div> <!></div> <div class="text-center p-3 rounded"><span> </span></div></div></div>'),Rt[u],[[455,12,[[456,16,[[456,64]]],[457,16,[[458,20,[[459,24,[[460,28],[461,28]]]]],[475,20,[[476,24,[[477,28],[478,28]]]]],[492,20,[[493,24]]]]]]]]),n_=_(m('<p class="text-muted text-sm"> </p>'),Rt[u],[[500,12]]),l_=_(m(`<div class="card p-6 text-center"><i class="fa-solid fa-shield-check text-3xl text-green-400 mb-2"></i> <p class="text-muted"> </p> <p class="text-xs text-muted mt-1">When the agent attempts a dangerous operation (like executing shell commands),
                        a 2FA challenge will appear here for your confirmation.</p></div>`),Rt[u],[[514,16,[[515,20],[516,20],[517,20]]]]),d_=_(m('<div class="card p-4"><div class="flex items-start gap-3"><i class="fa-solid fa-lock text-purple-400 text-lg mt-1"></i> <div class="flex-1"><div class="flex items-center gap-2"><span class="font-semibold text-heading"> </span> <span class="text-xs bg-card-hover px-1.5 py-0.5 rounded"> </span> <span class="text-xs text-muted"> </span></div> <p class="text-sm text-muted mt-1"> </p> <div class="flex gap-2 mt-2"><button class="btn btn-sm bg-green-600 hover:bg-green-500 text-white"><i class="fa-solid fa-check mr-1"></i> </button> <button class="btn btn-sm bg-red-600 hover:bg-red-500 text-white"><i class="fa-solid fa-xmark mr-1"></i> </button></div></div></div></div>'),Rt[u],[[524,20,[[525,24,[[526,28],[527,28,[[528,32,[[529,36],[530,36],[531,36]]],[533,32],[534,32,[[535,36,[[536,40]]],[538,36,[[539,40]]]]]]]]]]]]),c_=_(m('<div class="space-y-3"><div class="flex items-center justify-between mb-2"><h3 class="text-lg font-bold text-heading"><i class="fa-solid fa-lock mr-2"></i> </h3> <button class="btn btn-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div> <!></div>'),Rt[u],[[505,8,[[506,12,[[507,16,[[507,59]]],[508,16,[[509,20]]]]]]]]),v_=_(m('<div class="space-y-4"><div class="flex items-center gap-3 mb-4"><h2 class="text-xl font-bold text-heading"><i class="fa-solid fa-shield-halved mr-2"></i> </h2></div> <div class="flex gap-1 border-b border-border pb-1 mb-4"></div> <!></div>'),Rt[u],[[192,0,[[193,4,[[194,8,[[194,51]]]]],[198,4]]]]);function Rt(r,i){wa(new.target),ga(i,!0,Rt);let o=S(P(null),"auditSummary"),d=S(P(null),"costSummary"),c=S(P(null),"rateStatus"),f=S(P(Jt([])),"challenges"),b=S(P(Jt([])),"auditEntries"),h=S(P(Jt([])),"explanationChain"),w=S(P(!1),"showExplanation"),L=S(P("overview"),"activeSection"),j=yi(Jt({event_type:"",tool:""}),"auditFilter");async function A(){try{const $=(await M(fetch("/api/security/overview")))(),z=(await M($.json()))();p(o,z.audit,!0),p(d,z.cost,!0),p(c,z.rate_limit,!0),p(f,[],!0)}catch($){console.error(...Xt("error","Failed to load security overview",$))}}async function k(){try{const $=new URLSearchParams({limit:"50"});j.event_type&&$.set("event_type",j.event_type),j.tool&&$.set("tool",j.tool);const z=(await M(fetch(`/api/security/audit?${$}`)))();p(b,(await M(z.json()))(),!0)}catch($){console.error(...Xt("error","Failed to load audit log",$))}}async function q(){try{const $=(await M(fetch("/api/security/cost")))();p(d,(await M($.json()))(),!0)}catch($){console.error(...Xt("error","Failed to load cost summary",$))}}async function V(){try{const $=(await M(fetch("/api/security/rate-limit")))();p(c,(await M($.json()))(),!0)}catch($){console.error(...Xt("error","Failed to load rate limit status",$))}}async function X(){try{const $=(await M(fetch("/api/security/2fa")))();p(f,(await M($.json()))(),!0)}catch($){console.error(...Xt("error","Failed to load 2FA challenges",$))}}async function N($){(await M(fetch(`/api/security/2fa/${$}/confirm`,{method:"POST"})))(),(await M(X()))()}async function ne($){(await M(fetch(`/api/security/2fa/${$}/reject`,{method:"POST"})))(),(await M(X()))()}async function je($){try{const z=(await M(fetch(`/api/security/audit/${$}/explain`)))();p(h,(await M(z.json()))(),!0),p(w,!0)}catch(z){console.error(...Xt("error","Failed to load explanation",z))}}function we($){p(L,$,!0),C($,"overview")?A():C($,"audit")?k():C($,"cost")?q():C($,"rate")?V():C($,"2fa")&&X()}function Te($){return`$${$.toFixed(4)}`}function Ke($){return $>=1e6?`${($/1e6).toFixed(1)}M`:$>=1e3?`${($/1e3).toFixed(1)}K`:$.toString()}function Ee($){switch($){case"tool_call":return"text-blue-400";case"approval":return"text-yellow-400";case"rate_limit":return"text-orange-400";case"pii_detected":return"text-red-400";case"2fa":return"text-purple-400";case"permission_denied":return"text-red-500";default:return"text-muted"}}function te($){switch($){case"tool_call":return"fa-wrench";case"approval":return"fa-check-double";case"rate_limit":return"fa-gauge-high";case"pii_detected":return"fa-user-shield";case"2fa":return"fa-lock";case"permission_denied":return"fa-ban";default:return"fa-circle-info"}}Ga(()=>{kt.refreshCounter,A()});var _e={...ka()},Ve=v_(),K=a(Ve),W=a(K),Ue=s(a(W),1,!0),Ne=s(K,2);g(()=>Dt(Ne,21,()=>[{id:"overview",label:l("security.overview"),icon:"fa-chart-pie"},{id:"audit",label:l("security.audit_trail"),icon:"fa-scroll"},{id:"cost",label:l("security.cost_tracking"),icon:"fa-dollar-sign"},{id:"rate",label:l("security.rate_limits"),icon:"fa-gauge-high"},{id:"2fa",label:l("security.twofa"),icon:"fa-lock"}],la,($,z)=>{var Z=Mp();let H;var Le=a(Z),O=s(Le,1,!0);x(()=>{H=Qe(Z,1,"px-3 py-1.5 text-sm rounded-t transition-colors",null,H,{"bg-card":C(e(L),e(z).id),"text-heading":C(e(L),e(z).id),"text-muted":C(e(L),e(z).id,!1),"hover:text-heading":C(e(L),e(z).id,!1)}),Qe(Le,1,`fa-solid ${e(z).icon??""} mr-1`),n(O,e(z).label)}),Y("click",Z,function(){return we(e(z).id)}),v($,Z)}),"each",Rt,199,8);var Pe=s(Ne,2);{var R=$=>{var z=Oa(),Z=Ae(z);{var H=O=>{var B=Np(),ue=Ae(B),D=a(ue),T=a(D),E=a(T),U=s(T,2),J=a(U),xe=s(D,2),fe=a(xe),F=a(fe),he=s(fe,2),Xe=a(he),yt=s(xe,2),ht=a(yt);let ct;var oe=a(ht),le=s(ht,2),I=a(le),ae=s(I);{var G=Za=>{var qt=Jr();x(Wt=>n(qt,`/ ${Wt??""}`),[()=>Te(e(d).daily_limit_usd)]),v(Za,qt)};g(()=>y(ae,Za=>{e(d).daily_limit_usd>0&&Za(G)}),"if",Rt,237,24)}var ee=s(yt,2),re=a(ee);let ke;var ve=a(re),Q=s(re,2),$e=a(Q),Ie=s(ue,2),Re=a(Ie),Ct=a(Re),st=a(Ct),De=s(Ct,2),lt=a(De),Je=s(Re,2),_t=a(Je),ze=a(_t),be=s(_t,2),ce=a(be),pe=s(Je,2),Oe=a(pe),Me=a(Oe),Ze=s(Oe,2),Be=a(Ze),We=s(pe,2),it=a(We),ot=a(it),rt=s(it,2),Fe=a(rt),ut=s(Ie,2),mt=a(ut),Tt=s(a(mt),2),xt=a(Tt),se=a(xt),ye=a(se),et=s(se),dt=a(et),tt=s(xt,2),Ye=a(tt),at=a(Ye),ft=s(Ye),wt=a(ft),Ge=s(tt,2),bt=a(Ge),pt=a(bt),vt=s(bt),Pt=a(vt),Et=s(Ge,2),jt=a(Et),Ft=a(jt),Ht=s(jt),Ut=a(Ht),Kt=s(Et,2),na=a(Kt),ta=a(na),Ea=s(na),pa=a(Ea),zt=s(Kt,2),da=s(a(zt)),ia=a(da),aa=s(mt,2),$a=s(a(aa),2),gt=a($a),Ot=s(a(gt)),Lt=a(Ot),Mt=s(gt,2),fa=s(a(Mt)),Aa=a(fa),Ra=s(Mt,2),Zt=s(a(Ra),2);let Ya;var vr=a(Zt),sr=s(Ra,2),ir=s(a(sr)),br=a(ir),Er=s(sr,2),or=s(a(Er)),Dr=a(or);x((Za,qt,Wt,xa,ba,rs,Sr,Cr,Fr,Ur,Ss,er,fs,zr,Cs,He,nt,It,Gt)=>{n(E,e(o).total_events),n(J,Za),n(F,e(o).tool_calls),n(Xe,qt),ct=Qe(ht,1,"text-2xl font-bold",null,ct,{"text-red-400":e(d).limit_exceeded,"text-green-400":!e(d).limit_exceeded}),n(oe,Wt),n(I,`${xa??""} `),ke=Qe(re,1,"text-2xl font-bold",null,ke,{"text-orange-400":e(c).is_limited,"text-green-400":!e(c).is_limited}),n(ve,`${e(c).calls_last_minute??""}/${(e(c).limit_per_minute||"∞")??""}`),n($e,ba),n(st,e(o).approvals),n(lt,rs),n(ze,e(o).rejections),n(ce,Sr),n(Me,e(o).rate_limits),n(Be,Cr),n(ot,e(o).pii_detections),n(Fe,Fr),n(ye,Ur),n(dt,Ss),n(at,er),n(wt,fs),n(pt,zr),n(Pt,Cs),n(Ft,He),n(Ut,nt),n(ta,It),n(pa,Gt),n(ia,e(d).today_requests),n(Lt,`${e(c).calls_last_minute??""} / ${(e(c).limit_per_minute||"∞")??""}`),n(Aa,`${e(c).calls_last_hour??""} / ${(e(c).limit_per_hour||"∞")??""}`),Ya=Qe(Zt,1,"",null,Ya,{"text-red-400":e(c).is_limited,"text-green-400":!e(c).is_limited}),n(vr,e(c).is_limited?"RATE LIMITED":"OK"),n(br,e(o).twofa_challenges),n(Dr,e(o).permission_denials)},[()=>l("security.total_events"),()=>l("security.tool_calls"),()=>Te(e(d).today_usd),()=>l("security.todays_cost"),()=>l("security.calls_per_min"),()=>l("security.approvals"),()=>l("security.rejections"),()=>l("security.rate_limits"),()=>l("security.pii_detections"),()=>l("security.todays_cost"),()=>Te(e(d).today_usd),()=>l("security.month_cost"),()=>Te(e(d).month_usd),()=>l("security.total_cost"),()=>Te(e(d).total_usd),()=>l("security.tokens"),()=>Ke(e(d).today_tokens),()=>l("security.total_tokens"),()=>Ke(e(d).total_tokens)]),v(O,B)},Le=O=>{var B=Ip(),ue=a(B);x(D=>n(ue,D),[()=>l("common.loading")]),v(O,B)};g(()=>y(Z,O=>{e(o)&&e(d)&&e(c)?O(H):O(Le,!1)}),"if",Rt,221,8)}v($,z)},ie=$=>{var z=e_(),Z=Ae(z),H=a(Z),Le=a(H),O=a(Le);Le.value=Le.__value="";var B=s(Le);B.value=B.__value="tool_call";var ue=s(B);ue.value=ue.__value="approval";var D=s(ue);D.value=D.__value="rate_limit";var T=s(D);T.value=T.__value="pii_detected";var E=s(T);E.value=E.__value="2fa";var U=s(E);U.value=U.__value="permission_denied",xn("bind:value={auditFilter.event_type}",[],()=>j,()=>"event_type",304,81);var J=s(H,2);xn("bind:value={auditFilter.tool}",[],()=>j,()=>"tool",317,16);var xe=s(J,2),fe=s(a(xe),1,!0),F=s(Z,2);{var he=ct=>{var oe=Dp(),le=a(oe);x(I=>n(le,I),[()=>l("security.no_events")]),v(ct,oe)},Xe=ct=>{var oe=Vp();g(()=>Dt(oe,21,()=>e(b),la,(le,I)=>{var ae=Gp(),G=a(ae),ee=s(G,2),re=a(ee),ke=a(re),ve=a(ke,!0);var Q=s(ke,2);{var $e=Be=>{var We=Fp(),it=a(We,!0);x(()=>n(it,e(I).tool)),v(Be,We)};g(()=>y(Q,Be=>{e(I).tool&&Be($e)}),"if",Rt,335,32)}var Ie=s(Q,2);{var Re=Be=>{var We=Up(),it=a(We,!0);x(()=>n(it,e(I).action)),v(Be,We)};g(()=>y(Ie,Be=>{e(I).action&&Be(Re)}),"if",Rt,338,32)}var Ct=s(Ie,2);{var st=Be=>{var We=zp();let it;var ot=a(We,!0);x(()=>{it=Qe(We,1,"text-xs",null,it,{"text-green-400":e(I).success,"text-red-400":!e(I).success}),n(ot,e(I).success?"✓":"✗")}),v(Be,We)};g(()=>y(Ct,Be=>{C(e(I).success,null,!1)&&Be(st)}),"if",Rt,341,32)}var De=s(Ct,2),lt=a(De,!0);var Je=s(re,2);{var _t=Be=>{var We=Bp(),it=a(We);x(()=>n(it,`Reasoning: ${e(I).reasoning??""}`)),v(Be,We)};g(()=>y(Je,Be=>{e(I).reasoning&&Be(_t)}),"if",Rt,348,28)}var ze=s(Je,2);{var be=Be=>{var We=qp(),it=a(We);x(()=>n(it,`Result: ${e(I).result??""}`)),v(Be,We)};g(()=>y(ze,Be=>{e(I).result&&Be(be)}),"if",Rt,351,28)}var ce=s(ze,2),pe=a(ce),Oe=a(pe,!0);var Me=s(pe,2),Ze=s(a(Me));x((Be,We,it,ot,rt)=>{Qe(G,1,`fa-solid ${Be??""} ${We??""} mt-0.5`),Qe(ke,1,`font-semibold ${it??""}`),n(ve,e(I).event_type),n(lt,e(I).source),n(Oe,ot),n(Ze,` ${rt??""}`)},[()=>te(e(I).event_type),()=>Ee(e(I).event_type),()=>Ee(e(I).event_type),()=>Zr(e(I).created_at),()=>l("security.why")]),Y("click",Me,function(){return je(e(I).id)}),v(le,ae)}),"each",Rt,329,16),v(ct,oe)};g(()=>y(F,ct=>{C(e(b).length,0)?ct(he):ct(Xe,!1)}),"if",Rt,325,8)}var yt=s(F,2);{var ht=ct=>{var oe=Zp(),le=a(oe),I=a(le),ae=a(I),G=s(a(ae),1,!0),ee=s(ae,2),re=s(I,2);{var ke=Q=>{var $e=Hp(),Ie=a($e);x(Re=>n(Ie,Re),[()=>l("security.no_explanation")]),v(Q,$e)},ve=Q=>{var $e=Xp();g(()=>Dt($e,21,()=>e(h),la,(Ie,Re,Ct)=>{var st=Qp();let De;var lt=a(st),Je=a(lt),_t=s(Je);{var ze=it=>{var ot=Kp(),rt=a(ot);x(()=>n(rt,`(${e(Re).tool??""})`)),v(it,ot)};g(()=>y(_t,it=>{e(Re).tool&&it(ze)}),"if",Rt,384,40)}var be=s(lt,2);{var ce=it=>{var ot=Wp(),rt=s(a(ot));x(()=>n(rt,` ${e(Re).reasoning??""}`)),v(it,ot)};g(()=>y(be,it=>{e(Re).reasoning&&it(ce)}),"if",Rt,386,36)}var pe=s(be,2);{var Oe=it=>{var ot=Yp(),rt=a(ot);x(()=>n(rt,`Context: ${e(Re).user_context??""}`)),v(it,ot)};g(()=>y(pe,it=>{e(Re).user_context&&it(Oe)}),"if",Rt,389,36)}var Me=s(pe,2);{var Ze=it=>{var ot=Jp(),rt=a(ot);x(()=>n(rt,`Result: ${e(Re).result??""}`)),v(it,ot)};g(()=>y(Me,it=>{e(Re).result&&it(Ze)}),"if",Rt,392,36)}var Be=s(Me,2),We=a(Be,!0);x((it,ot,rt)=>{De=Qe(st,1,"border-l-2 pl-3",null,De,it),Qe(lt,1,`text-sm font-semibold ${ot??""}`),n(Je,`Step ${Ct+1}: ${e(Re).event_type??""} `),n(We,rt)},[()=>({"border-blue-400":C(e(Re).event_type,"tool_call"),"border-yellow-400":C(e(Re).event_type,"approval"),"border-red-400":C(e(Re).event_type,"pii_detected")||C(e(Re).event_type,"permission_denied"),"border-border":!["tool_call","approval","pii_detected","permission_denied"].includes(e(Re).event_type)}),()=>Ee(e(Re).event_type),()=>Zr(e(Re).created_at)]),v(Ie,st)}),"each",Rt,380,28),v(Q,$e)};g(()=>y(re,Q=>{C(e(h).length,0)?Q(ke):Q(ve,!1)}),"if",Rt,376,20)}x((Q,$e)=>{n(G,Q),St(ee,"title",$e)},[()=>l("security.action_explanation"),()=>l("common.close")]),Y("click",oe,function(){return p(w,!1)}),Y("click",le,function($e){return $e.stopPropagation()}),Y("click",ee,function(){return p(w,!1)}),v(ct,oe)};g(()=>y(yt,ct=>{e(w)&&ct(ht)}),"if",Rt,367,8)}x((ct,oe,le)=>{n(O,ct),St(J,"placeholder",oe),n(fe,le)},[()=>l("security.all_types"),()=>l("security.filter"),()=>l("common.refresh")]),Y("change",H,function(){return k()}),Gi(H,function(){return j.event_type},function(oe){j.event_type=oe}),Y("keyup",J,function(oe){C(oe.key,"Enter")&&k()}),ua(J,function(){return j.tool},function(oe){j.tool=oe}),Y("click",xe,function(){return k()}),v($,z)},qe=$=>{var z=Oa(),Z=Ae(z);{var H=O=>{var B=a_(),ue=Ae(B),D=a(ue),T=a(D);let E;var U=a(T),J=s(T,2),xe=a(J),fe=s(J,2);{var F=ze=>{var be=t_(),ce=Ae(be),pe=a(ce);let Oe;var Me=s(ce,2),Ze=a(Me);x((Be,We)=>{Oe=Qe(pe,1,"h-2 rounded-full transition-all",null,Oe,{"bg-green-400":!e(d).limit_exceeded,"bg-red-400":e(d).limit_exceeded}),Ds(pe,`width: ${Be??""}%`),n(Ze,`Limit: ${We??""}`)},[()=>Math.min(100,e(d).today_usd/e(d).daily_limit_usd*100),()=>Te(e(d).daily_limit_usd)]),v(ze,be)};g(()=>y(fe,ze=>{e(d).daily_limit_usd>0&&ze(F)}),"if",Rt,413,20)}var he=s(D,2),Xe=a(he),yt=a(Xe),ht=s(Xe,2),ct=a(ht),oe=s(he,2),le=a(oe),I=a(le),ae=s(le,2),G=a(ae),ee=s(ue,2),re=a(ee),ke=a(re),ve=a(ke),Q=s(ke,2),$e=a(Q),Ie=s(re,2),Re=a(Ie),Ct=a(Re),st=s(Re,2),De=a(st),lt=s(Ie,2),Je=a(lt),_t=a(Je);x((ze,be,ce,pe,Oe,Me,Ze,Be,We,it)=>{E=Qe(T,1,"text-3xl font-bold",null,E,{"text-red-400":e(d).limit_exceeded,"text-green-400":!e(d).limit_exceeded}),n(U,ze),n(xe,be),n(yt,ce),n(ct,pe),n(I,Oe),n(G,Me),n(ve,Ze),n($e,Be),n(Ct,We),n(De,it),n(_t,e(d).today_requests)},[()=>Te(e(d).today_usd),()=>l("security.todays_cost"),()=>Te(e(d).month_usd),()=>l("security.month_cost"),()=>Te(e(d).total_usd),()=>l("security.total_cost"),()=>Ke(e(d).today_tokens),()=>l("security.tokens"),()=>Ke(e(d).total_tokens),()=>l("security.total_tokens")]),v(O,B)},Le=O=>{var B=r_(),ue=a(B);x(D=>n(ue,D),[()=>l("common.loading")]),v(O,B)};g(()=>y(Z,O=>{e(d)?O(H):O(Le,!1)}),"if",Rt,406,8)}v($,z)},Se=$=>{var z=Oa(),Z=Ae(z);{var H=O=>{var B=o_(),ue=s(a(B),2),D=a(ue),T=a(D),E=s(a(T),2),U=a(E),J=s(T,2);{var xe=ae=>{var G=s_(),ee=a(G);let re;x(ke=>{re=Qe(ee,1,"h-3 rounded-full transition-all",null,re,{"bg-green-400":e(c).calls_last_minute/e(c).limit_per_minute<.8,"bg-yellow-400":e(c).calls_last_minute/e(c).limit_per_minute>=.8&&e(c).calls_last_minute/e(c).limit_per_minute<1,"bg-red-400":e(c).calls_last_minute/e(c).limit_per_minute>=1}),Ds(ee,`width: ${ke??""}%`)},[()=>Math.min(100,e(c).calls_last_minute/e(c).limit_per_minute*100)]),v(ae,G)};g(()=>y(J,ae=>{e(c).limit_per_minute>0&&ae(xe)}),"if",Rt,463,24)}var fe=s(D,2),F=a(fe),he=s(a(F),2),Xe=a(he),yt=s(F,2);{var ht=ae=>{var G=i_(),ee=a(G);let re;x(ke=>{re=Qe(ee,1,"h-3 rounded-full transition-all",null,re,{"bg-green-400":e(c).calls_last_hour/e(c).limit_per_hour<.8,"bg-yellow-400":e(c).calls_last_hour/e(c).limit_per_hour>=.8&&e(c).calls_last_hour/e(c).limit_per_hour<1,"bg-red-400":e(c).calls_last_hour/e(c).limit_per_hour>=1}),Ds(ee,`width: ${ke??""}%`)},[()=>Math.min(100,e(c).calls_last_hour/e(c).limit_per_hour*100)]),v(ae,G)};g(()=>y(yt,ae=>{e(c).limit_per_hour>0&&ae(ht)}),"if",Rt,480,24)}var ct=s(fe,2),oe=a(ct);let le;var I=a(oe);x(()=>{n(U,`${e(c).calls_last_minute??""} / ${(e(c).limit_per_minute||"∞")??""}`),n(Xe,`${e(c).calls_last_hour??""} / ${(e(c).limit_per_hour||"∞")??""}`),Ds(ct,`background-color: ${e(c).is_limited?"rgba(248,113,113,0.1)":"rgba(74,222,128,0.1)"}`),le=Qe(oe,1,"text-lg font-bold",null,le,{"text-green-400":!e(c).is_limited,"text-red-400":e(c).is_limited}),n(I,e(c).is_limited?"RATE LIMITED":"Within Limits")}),v(O,B)},Le=O=>{var B=n_(),ue=a(B);x(D=>n(ue,D),[()=>l("common.loading")]),v(O,B)};g(()=>y(Z,O=>{e(c)?O(H):O(Le,!1)}),"if",Rt,454,8)}v($,z)},me=$=>{var z=c_(),Z=a(z),H=a(Z),Le=s(a(H),1,!0),O=s(H,2),B=s(a(O),1,!0),ue=s(Z,2);{var D=E=>{var U=l_(),J=s(a(U),2),xe=a(J);x(fe=>n(xe,fe),[()=>l("security.no_challenges")]),v(E,U)},T=E=>{var U=Oa(),J=Ae(U);g(()=>Dt(J,17,()=>e(f),la,(xe,fe)=>{var F=d_(),he=a(F),Xe=s(a(he),2),yt=a(Xe),ht=a(yt),ct=a(ht,!0);var oe=s(ht,2),le=a(oe,!0);var I=s(oe,2),ae=a(I);var G=s(yt,2),ee=a(G,!0);var re=s(G,2),ke=a(re),ve=s(a(ke),1,!0);var Q=s(ke,2),$e=s(a(Q),1,!0);x((Ie,Re)=>{n(ct,e(fe).tool),n(le,e(fe).source),n(ae,`${e(fe).age_secs??""}s ago`),n(ee,e(fe).description),n(ve,Ie),n($e,Re)},[()=>l("common.confirm"),()=>l("security.reject")]),Y("click",ke,function(){return N(e(fe).id)}),Y("click",Q,function(){return ne(e(fe).id)}),v(xe,F)}),"each",Rt,523,16),v(E,U)};g(()=>y(ue,E=>{C(e(f).length,0)?E(D):E(T,!1)}),"if",Rt,513,12)}x((E,U)=>{n(Le,E),n(B,U)},[()=>l("security.pending_challenges"),()=>l("common.refresh")]),Y("click",O,function(){return X()}),v($,z)};g(()=>y(Pe,$=>{C(e(L),"overview")?$(R):C(e(L),"audit")?$(ie,1):C(e(L),"cost")?$(qe,2):C(e(L),"rate")?$(Se,3):C(e(L),"2fa")&&$(me,4)}),"if",Rt,220,4)}return x($=>n(Ue,$),[()=>l("security.title")]),v(r,Ve),ha(_e)}La(["click","change","keyup"]);Ce[u]="src/components/OperationsTab.svelte";var u_=_(m("<button><i></i> </button>"),Ce[u],[[271,12,[[275,16]]]]),f_=_(m('<p class="text-muted"> </p>'),Ce[u],[[287,16]]),p_=_(m('<div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3"><div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div></div></div>'),Ce[u],[[298,24,[[299,28,[[300,32],[301,32]]],[305,28,[[306,32],[307,32]]],[311,28,[[312,32],[313,32]]]]]]),__=_(m('<div class="space-y-3"><div class="flex items-center gap-3"><span> </span> <span class="text-muted text-sm"> </span></div> <!> <button class="btn-secondary text-sm mt-2"><i class="fa-solid fa-rotate mr-1"></i> </button></div>'),Ce[u],[[289,16,[[290,20,[[291,24],[294,24]]],[318,20,[[319,24]]]]]]),m_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-heart-pulse mr-1"></i> </h3> <!></div> <div class="card"><h3 class="text-lg font-semibold mb-2"><i class="fa-solid fa-chart-bar mr-1"></i> </h3> <p class="text-sm text-muted mb-2"> </p> <p class="text-sm text-muted"> </p> <div class="mt-2"><button class="btn-secondary text-sm"><i class="fa-solid fa-arrow-up-right-from-square mr-1"></i> </button></div></div>',1),Ce[u],[[282,8,[[283,12,[[284,16]]]]],[326,8,[[327,12,[[328,16]]],[330,12],[333,12],[336,12,[[337,16,[[338,20]]]]]]]]),x_=_(m('<span class="text-sm text-muted">&rarr;</span> <span class="font-mono text-green-400"> </span> <span class="bg-green-500/20 text-green-400 text-xs px-2 py-0.5 rounded"> </span>',1),Ce[u],[[356,28],[357,28],[358,28]]),b_=_(m('<span class="bg-surface text-muted text-xs px-2 py-0.5 rounded"> </span>'),Ce[u],[[360,28]]),g_=_(m('<div class="bg-surface rounded p-3 text-sm"><div class="text-xs text-muted mb-1"> </div> <pre class="whitespace-pre-wrap text-fg"> </pre></div>'),Ce[u],[[365,24,[[366,28],[367,28]]]]),h_=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Ce[u],[[375,36]]),y_=_(m('<i class="fa-solid fa-rocket mr-1"></i> ',1),Ce[u],[[377,36]]),w_=_(m('<a target="_blank" class="btn-secondary text-sm"><i class="fa-solid fa-arrow-up-right-from-square mr-1"></i> </a>'),Ce[u],[[381,32,[[382,36]]]]),k_=_(m('<div class="flex gap-2"><button class="btn-primary text-sm"><!></button> <!></div>'),Ce[u],[[372,24,[[373,28]]]]),$_=_(m('<div class="flex items-center gap-3 flex-wrap"><span class="text-sm text-muted"> </span> <span class="font-mono text-fg"> </span> <!></div> <!> <!>',1),Ce[u],[[352,20,[[353,24],[354,24]]]]),T_=_(m('<div class="bg-surface rounded p-2 text-sm text-muted"> </div>'),Ce[u],[[390,20]]),E_=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Ce[u],[[395,24]]),S_=_(m('<i class="fa-solid fa-magnifying-glass mr-1"></i> ',1),Ce[u],[[397,24]]),C_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-download mr-1"></i> </h3> <div class="space-y-3"><!> <!> <button class="btn-secondary text-sm"><!></button></div></div>'),Ce[u],[[346,8,[[347,12,[[348,16]]],[350,12,[[393,16]]]]]]),A_=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Ce[u],[[418,28]]),P_=_(m('<i class="fa-solid fa-download mr-1"></i> ',1),Ce[u],[[420,28]]),j_=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Ce[u],[[434,28]]),O_=_(m('<i class="fa-solid fa-upload mr-1"></i> ',1),Ce[u],[[436,28]]),L_=_(m('<div class="bg-surface rounded p-2 text-sm text-muted mt-2"> </div>'),Ce[u],[[441,24]]),R_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-box-archive mr-1"></i> </h3> <div class="space-y-4"><div><h4 class="text-sm font-medium mb-2"> </h4> <p class="text-xs text-muted mb-2">Download a JSON export of all agent data (memory, activity, goals, cron jobs, stats).</p> <button class="btn-primary text-sm"><!></button></div> <hr class="border-border"/> <div><h4 class="text-sm font-medium mb-2"> </h4> <p class="text-xs text-muted mb-2">Upload a previously exported backup file. Existing data will be merged (INSERT OR REPLACE).</p> <label><!> <input type="file" accept=".json" class="hidden"/></label> <!></div></div></div>'),Ce[u],[[406,8,[[407,12,[[408,16]]],[410,12,[[411,16,[[412,20],[413,20],[416,20]]],[425,16],[427,16,[[428,20],[429,20],[432,20,[[438,24]]]]]]]]]]),M_=_(m('<p class="text-muted"> </p>'),Ce[u],[[456,16]]),N_=_(m('<span class="text-sm text-muted">Node:</span> <span class="font-mono text-sm text-fg"> </span> <span class="text-xs text-muted font-mono"> </span>',1),Ce[u],[[464,28],[465,28],[466,28]]),I_=_(m('<p class="text-sm text-muted"> </p>'),Ce[u],[[471,24]]),D_=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i>'),Ce[u],[[488,36]]),F_=_(m('<i class="fa-solid fa-plus mr-1"></i>'),Ce[u],[[490,36]]),U_=_(m('<div class="text-sm text-muted"> </div>'),Ce[u],[[496,28]]),z_=_(m('<div class="bg-surface rounded p-3 flex items-center justify-between"><div><span class="font-mono text-sm text-fg"> </span> <span class="text-xs text-muted ml-2"> </span> <span> </span> <span class="text-xs text-muted ml-2"> </span></div> <button class="text-red-400 hover:text-red-300 text-sm"><i class="fa-solid fa-xmark"></i></button></div>'),Ce[u],[[504,36,[[505,40,[[506,44],[507,44],[508,44],[511,44]]],[513,40,[[514,44]]]]]]),B_=_(m('<div class="space-y-2"></div>'),Ce[u],[[502,28]]),q_=_(m('<p class="text-sm text-muted"> </p>'),Ce[u],[[520,28]]),G_=_(m('<div class="flex gap-2 items-end"><div class="flex-1"><label class="text-xs text-muted block mb-1"> </label> <input type="text" class="w-full bg-surface border border-border rounded px-3 py-1.5 text-sm font-mono"/></div> <button class="btn-primary text-sm"><!> </button></div> <!> <h4 class="text-sm font-medium"> </h4> <!>',1),Ce[u],[[476,24,[[477,28,[[478,32],[479,32]]],[486,28]]],[500,24]]),V_=_(m('<div class="space-y-4"><div class="flex items-center gap-3"><span> </span> <!></div> <!> <button class="btn-secondary text-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div>'),Ce[u],[[458,16,[[459,20,[[460,24]]],[524,20,[[525,24]]]]]]),H_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-network-wired mr-1"></i> </h3> <!></div>'),Ce[u],[[450,8,[[451,12,[[452,16]]]]]]),K_=_(m('<p class="text-muted"> </p>'),Ce[u],[[540,16]]),W_=_(m('<div><i></i> <span class="font-mono text-sm"> </span></div>'),Ce[u],[[552,28,[[553,32],[554,32]]]]),Y_=_(m('<div class="space-y-3"><div class="flex items-center gap-3"><span class="text-sm text-muted"> </span> <span class="bg-accent/20 text-accent px-2 py-1 rounded font-mono text-sm"> </span> <span class="text-sm text-muted"> </span></div> <h4 class="text-sm font-medium mt-3"> </h4> <div class="grid grid-cols-2 sm:grid-cols-3 gap-2"></div> <p class="text-xs text-muted mt-2"> </p> <button class="btn-secondary text-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div>'),Ce[u],[[542,16,[[543,20,[[544,24],[545,24],[546,24]]],[549,20],[550,20],[559,20],[563,20,[[564,24]]]]]]),J_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-brain mr-1"></i> </h3> <!></div>'),Ce[u],[[534,8,[[535,12,[[536,16]]]]]]),Q_=_(m('<p class="text-muted"> </p>'),Ce[u],[[579,16]]),X_=_(m('<div class="font-mono text-fg"> </div> <div class="text-xs text-muted truncate"> </div>',1),Ce[u],[[595,28],[596,28]]),Z_=_(m('<div class="font-mono text-muted"> </div>'),Ce[u],[[598,28]]),em=_(m('<div class="text-xs text-green-400"> </div>'),Ce[u],[[605,28]]),tm=_(m('<div class="grid grid-cols-2 sm:grid-cols-4 gap-3"><div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div> <div class="text-xs text-muted"> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div> <div class="text-xs text-muted truncate"> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <!></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div> <!></div></div>'),Ce[u],[[581,16,[[582,20,[[583,24],[584,24],[585,24]]],[587,20,[[588,24],[589,24],[590,24]]],[592,20,[[593,24]]],[601,20,[[602,24],[603,24]]]]]]),am=_(m('<button class="btn-primary text-sm"><i class="fa-solid fa-wand-magic-sparkles mr-1"></i> </button>'),Ce[u],[[610,16,[[611,20]]]]),rm=_(m('<p class="text-muted"> </p>'),Ce[u],[[622,16]]),sm=_(m('<span class="text-xs text-muted"> </span>'),Ce[u],[[628,24]]),im=_(m('<span class="bg-surface px-2 py-1 rounded text-xs font-mono"> </span>'),Ce[u],[[634,28]]),om=_(m('<div class="flex flex-wrap gap-2"></div>'),Ce[u],[[632,20]]),nm=_(m('<p class="text-xs text-muted mt-2"> </p>'),Ce[u],[[639,20]]),lm=_(m('<div class="flex items-center gap-3 mb-3"><span></span> <span class="text-sm"> </span> <!></div> <!> <!>',1),Ce[u],[[624,16,[[625,20],[626,20]]]]),dm=_(m('<p class="text-muted text-sm"> </p>'),Ce[u],[[642,16]]),cm=_(m('<div class="bg-green-500/10 border border-green-500/30 rounded p-3 text-sm text-green-400"> </div>'),Ce[u],[[647,12]]),vm=_(m('<p class="text-muted"> </p>'),Ce[u],[[679,20]]),um=_(m('<button class="bg-accent/20 text-accent px-2 py-1 rounded text-xs hover:bg-accent/30 transition-colors"> </button>'),Ce[u],[[726,48]]),fm=_(m('<span class="text-xs text-muted"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </span>'),Ce[u],[[734,52,[[735,56]]]]),pm=_(m('<button class="bg-surface text-fg px-2 py-1 rounded text-xs hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-download mr-1"></i> </button>'),Ce[u],[[738,52,[[742,56]]]]),_m=_(m('<span class="text-xs text-muted">—</span>'),Ce[u],[[746,48]]),mm=_(m('<tr class="border-b border-border/30 hover:bg-surface/50"><td class="py-2 pr-3"><div class="font-mono text-fg"> </div> <div class="text-xs text-muted"> </div></td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2 pr-3"><div class="flex items-center gap-1"><div class="w-16 h-2 bg-surface rounded-full overflow-hidden"><div></div></div> <span class="text-xs font-mono"> </span></div></td><td class="py-2 pr-3"><span> </span></td><td class="py-2 pr-3 text-xs"> </td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2"><!></td></tr>'),Ce[u],[[698,36,[[699,40,[[700,44],[701,44]]],[703,40],[704,40,[[705,44,[[706,48,[[707,52]]],[712,48]]]]],[715,40,[[716,44]]],[720,40],[721,40],[722,40],[723,40],[724,40]]]]),xm=_(m('<div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="text-left text-xs text-muted border-b border-border"><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2"> </th></tr></thead><tbody></tbody></table></div>'),Ce[u],[[681,20,[[682,24,[[683,28,[[684,32,[[685,36],[686,36],[687,36],[688,36],[689,36],[690,36],[691,36],[692,36],[693,36]]]]],[696,28]]]]]]),bm=_(m('<p class="text-muted text-sm"> </p>'),Ce[u],[[755,20]]),gm=_(m('<div class="card"><div class="flex items-center justify-between mb-3 flex-wrap gap-2"><h3 class="text-lg font-semibold"><i class="fa-solid fa-ranking-star mr-1"></i> </h3> <div class="flex items-center gap-2"><select class="bg-surface border border-border rounded px-2 py-1 text-sm"><option> </option><option> </option><option> </option><option> </option><option> </option><option> </option></select> <button class="btn-secondary text-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div></div> <!></div>'),Ce[u],[[654,12,[[655,16,[[656,20,[[657,24]]],[659,20,[[660,24,[[665,28],[666,28],[667,28],[668,28],[669,28],[670,28]]],[672,24,[[673,28]]]]]]]]]]),hm=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-microchip mr-1"></i> </h3> <!></div> <div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-server mr-1"></i> </h3> <!></div> <!> <!>',1),Ce[u],[[574,8,[[575,12,[[576,16]]]]],[617,8,[[618,12,[[619,16]]]]]]),ym=_(m('<div class="space-y-4"><div class="flex gap-2 mb-4 flex-wrap"></div> <!> <!> <!> <!> <!> <!></div>'),Ce[u],[[268,0,[[269,4]]]]);function Ce(r,i){wa(new.target),ga(i,!0,Ce);let o=S(P("health"),"activeSection"),d=S(P(null),"health"),c=S(P(!0),"healthLoading"),f=S(P(null),"updateInfo"),b=S(P(!1),"updateLoading"),h=S(P(!1),"updateApplying"),w=S(P(""),"updateMessage"),L=S(P(!1),"backupLoading"),j=S(P(!1),"restoreLoading"),A=S(P(""),"restoreMessage"),k=S(P(null),"fedStatus"),q=S(P(!0),"fedLoading"),V=S(P(""),"addPeerAddress"),X=S(P(!1),"addPeerLoading"),N=S(P(""),"addPeerMessage"),ne=S(P(null),"backends"),je=S(P(!0),"backendsLoading"),we=S(P(null),"systemSpecs"),Te=S(P(!1),"specsLoading"),Ke=S(P(Jt([])),"recommendations"),Ee=S(P(!1),"recsLoading"),te=S(P(""),"useCaseFilter"),_e=S(P(null),"ollamaStatus"),Ve=S(P(!1),"ollamaLoading"),K=S(P(""),"pullingModel"),W=S(P(""),"pullStatus"),Ue=S(P(""),"configureMsg");async function Ne(){p(c,!0);try{const I=(await M(fetch("/healthz")))();p(d,(await M(I.json()))(),!0)}catch{p(d,{status:"error",checks:{}},!0)}p(c,!1)}async function Pe(){p(b,!0),p(w,"");try{const I=(await M(fetch("/api/update/check")))();p(f,(await M(I.json()))(),!0)}catch{p(w,"Failed to check for updates")}p(b,!1)}async function R(){p(h,!0),p(w,"");try{const I=(await M(fetch("/api/update/apply",{method:"POST"})))(),ae=(await M(I.json()))();p(w,ae.message||(ae.ok?"Update applied":"Update failed"),!0)}catch{p(w,"Failed to apply update")}p(h,!1)}async function ie(){p(L,!0);try{const I=(await M(fetch("/api/backup")))(),ae=(await M(I.blob()))(),G=URL.createObjectURL(ae),ee=document.createElement("a");ee.href=G,ee.download=`safe-agent-backup-${new Date().toISOString().slice(0,10)}.json`,ee.click(),URL.revokeObjectURL(G)}catch(I){console.error(...Xt("error","Backup download failed",I))}p(L,!1)}async function qe(I){var G;const ae=I.target;if((G=ae.files)!=null&&G.length){p(j,!0),p(A,"");try{const ee=(await M(ae.files[0].text()))(),re=JSON.parse(ee),ke=(await M(fetch("/api/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)})))(),ve=(await M(ke.json()))();p(A,ve.message||(ve.ok?"Restore complete":"Restore failed"),!0)}catch{p(A,"Failed to restore backup")}p(j,!1),ae.value=""}}async function Se(){p(q,!0);try{const I=(await M(fetch("/api/federation/status")))();p(k,(await M(I.json()))(),!0)}catch{p(k,{enabled:!1,peers:[]},!0)}p(q,!1)}async function me(){if(e(V).trim()){p(X,!0),p(N,"");try{const I=(await M(fetch("/api/federation/peers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e(V)})})))(),ae=(await M(I.json()))();p(N,ae.message||(ae.ok?"Peer added":"Failed"),!0),ae.ok&&(p(V,""),Se())}catch{p(N,"Failed to add peer")}p(X,!1)}}async function $(I){try{(await M(fetch(`/api/federation/peers/${I}`,{method:"DELETE"})))(),Se()}catch(ae){console.error(...Xt("error","Failed to remove peer",ae))}}async function z(){p(je,!0);try{const I=(await M(fetch("/api/llm/backends")))();p(ne,(await M(I.json()))(),!0)}catch{p(ne,{active:"unknown",available:[]},!0)}p(je,!1)}async function Z(){p(Te,!0);try{const I=(await M(fetch("/api/llm/advisor/system")))();p(we,(await M(I.json()))(),!0)}catch{p(we,null)}p(Te,!1)}async function H(){p(Ee,!0);try{const I=new URLSearchParams;e(te)&&I.set("use_case",e(te)),I.set("limit","20");const ae=(await M(fetch(`/api/llm/advisor/recommend?${I}`)))(),G=(await M(ae.json()))();p(Ke,G.models||[],!0)}catch{p(Ke,[],!0)}p(Ee,!1)}async function Le(){p(Ve,!0);try{const I=(await M(fetch("/api/llm/ollama/status")))();p(_e,(await M(I.json()))(),!0)}catch{p(_e,{available:!1,installed_models:[]},!0)}p(Ve,!1)}async function O(I){p(K,I,!0),p(W,l("ops.advisor_pulling"),!0);try{const ae=(await M(fetch("/api/llm/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:I})})))(),G=(await M(ae.json()))();G.ok?(p(W,l("ops.advisor_pull_complete"),!0),Le(),H()):p(W,G.error||"Pull failed",!0)}catch{p(W,"Pull failed")}setTimeout(()=>{p(K,""),p(W,"")},3e3)}async function B(I){p(Ue,"");try{const ae=(await M(fetch("/api/llm/ollama/configure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:I})})))(),G=(await M(ae.json()))();p(Ue,G.ok?l("ops.advisor_configured",{model:I}):G.error||"Failed",!0),z()}catch{p(Ue,"Configuration failed")}setTimeout(()=>{p(Ue,"")},5e3)}Es(()=>{Ne(),Se(),z()});const ue=[{id:"health",label:l("ops.health"),icon:"fa-heart-pulse"},{id:"update",label:l("ops.updates"),icon:"fa-download"},{id:"backup",label:l("ops.backup"),icon:"fa-box-archive"},{id:"federation",label:l("ops.federation"),icon:"fa-network-wired"},{id:"backends",label:l("ops.llm_backends"),icon:"fa-brain"},{id:"advisor",label:l("ops.model_advisor"),icon:"fa-microchip"}];var D={...ka()},T=ym(),E=a(T);g(()=>Dt(E,21,()=>ue,la,(I,ae)=>{var G=u_(),ee=a(G),re=s(ee);x(()=>{Qe(G,1,`px-3 py-1.5 rounded text-sm transition-colors ${C(e(o),e(ae).id)?"bg-accent text-white":"bg-surface text-muted hover:text-fg"}`),Qe(ee,1,`fa-solid ${e(ae).icon??""} mr-1`),n(re,` ${e(ae).label??""}`)}),Y("click",G,function(){return p(o,e(ae).id,!0)}),v(I,G)}),"each",Ce,270,8);var U=s(E,2);{var J=I=>{var ae=m_(),G=Ae(ae),ee=a(G),re=s(a(ee)),ke=s(ee,2);{var ve=be=>{var ce=f_(),pe=a(ce);x(Oe=>n(pe,Oe),[()=>l("ops.checking_health")]),v(be,ce)},Q=be=>{var ce=__(),pe=a(ce),Oe=a(pe),Me=a(Oe),Ze=s(Oe,2),Be=a(Ze),We=s(pe,2);{var it=Fe=>{var ut=p_(),mt=a(ut),Tt=a(mt),xt=a(Tt),se=s(Tt,2),ye=a(se),et=s(mt,2),dt=a(et),tt=a(dt),Ye=s(dt,2),at=a(Ye),ft=s(et,2),wt=a(ft),Ge=a(wt),bt=s(wt,2),pt=a(bt);x((vt,Pt,Et)=>{n(xt,vt),Qe(se,1,`font-mono ${C(e(d).checks.database,"ok")?"text-green-400":"text-red-400"}`),n(ye,e(d).checks.database),n(tt,Pt),Qe(Ye,1,`font-mono ${C(e(d).checks.agent,"running")?"text-green-400":"text-yellow-400"}`),n(at,e(d).checks.agent),n(Ge,Et),n(pt,e(d).checks.tools)},[()=>l("ops.database"),()=>l("ops.agent"),()=>l("ops.tools")]),v(Fe,ut)};g(()=>y(We,Fe=>{e(d).checks&&Fe(it)}),"if",Ce,297,20)}var ot=s(We,2),rt=s(a(ot));x((Fe,ut)=>{Qe(Oe,1,`px-3 py-1 rounded text-sm font-mono font-bold ${C(e(d).status,"healthy")?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),n(Me,Fe),n(Be,`v${e(d).version??""}`),n(rt,` ${ut??""}`)},[()=>{var Fe;return(Fe=e(d).status)==null?void 0:Fe.toUpperCase()},()=>l("common.refresh")]),Y("click",ot,Ne),v(be,ce)};g(()=>y(ke,be=>{e(c)?be(ve):e(d)&&be(Q,1)}),"if",Ce,286,12)}var $e=s(G,2),Ie=a($e),Re=s(a(Ie)),Ct=s(Ie,2),st=a(Ct),De=s(Ct,2),lt=a(De),Je=s(De,2),_t=a(Je),ze=s(a(_t));x((be,ce,pe,Oe,Me)=>{n(re,` ${be??""}`),n(Re,` ${ce??""}`),n(st,pe),n(lt,Oe),n(ze,` ${Me??""}`)},[()=>l("ops.health_check"),()=>l("ops.prometheus"),()=>l("ops.prometheus_desc"),()=>l("ops.prometheus_hint"),()=>l("ops.view_raw_metrics")]),Y("click",_t,function(){return window.open("/metrics","_blank")}),v(I,ae)};g(()=>y(U,I=>{C(e(o),"health")&&I(J)}),"if",Ce,281,4)}var xe=s(U,2);{var fe=I=>{var ae=C_(),G=a(ae),ee=s(a(G)),re=s(G,2),ke=a(re);{var ve=De=>{var lt=$_(),Je=Ae(lt),_t=a(Je),ze=a(_t),be=s(_t,2),ce=a(be),pe=s(be,2);{var Oe=ot=>{var rt=x_(),Fe=s(Ae(rt),2),ut=a(Fe),mt=s(Fe,2),Tt=a(mt);x(xt=>{n(ut,`v${e(f).latest_version??""}`),n(Tt,xt)},[()=>l("ops.update_available")]),v(ot,rt)},Me=ot=>{var rt=b_(),Fe=a(rt);x(ut=>n(Fe,ut),[()=>l("ops.up_to_date")]),v(ot,rt)};g(()=>y(pe,ot=>{e(f).update_available?ot(Oe):ot(Me,!1)}),"if",Ce,355,24)}var Ze=s(Je,2);{var Be=ot=>{var rt=g_(),Fe=a(rt),ut=a(Fe),mt=s(Fe,2),Tt=a(mt);x(xt=>{n(ut,xt),n(Tt,e(f).release_notes)},[()=>l("ops.release_notes")]),v(ot,rt)};g(()=>y(Ze,ot=>{e(f).update_available&&e(f).release_notes&&ot(Be)}),"if",Ce,364,20)}var We=s(Ze,2);{var it=ot=>{var rt=k_(),Fe=a(rt),ut=a(Fe);{var mt=ye=>{var et=h_(),dt=s(Ae(et));x(tt=>n(dt,` ${tt??""}`),[()=>l("ops.applying")]),v(ye,et)},Tt=ye=>{var et=y_(),dt=s(Ae(et));x(tt=>n(dt,` ${tt??""}`),[()=>l("ops.apply_update")]),v(ye,et)};g(()=>y(ut,ye=>{e(h)?ye(mt):ye(Tt,!1)}),"if",Ce,374,32)}var xt=s(Fe,2);{var se=ye=>{var et=w_(),dt=s(a(et));x(tt=>{St(et,"href",e(f).release_url),n(dt,` ${tt??""}`)},[()=>l("ops.view_release")]),v(ye,et)};g(()=>y(xt,ye=>{e(f).release_url&&ye(se)}),"if",Ce,380,28)}x(()=>Fe.disabled=e(h)),Y("click",Fe,R),v(ot,rt)};g(()=>y(We,ot=>{e(f).update_available&&ot(it)}),"if",Ce,371,20)}x(ot=>{n(ze,ot),n(ce,`v${e(f).current_version??""}`)},[()=>l("ops.current_version")]),v(De,lt)};g(()=>y(ke,De=>{e(f)&&De(ve)}),"if",Ce,351,16)}var Q=s(ke,2);{var $e=De=>{var lt=T_(),Je=a(lt);x(()=>n(Je,e(w))),v(De,lt)};g(()=>y(Q,De=>{e(w)&&De($e)}),"if",Ce,389,16)}var Ie=s(Q,2),Re=a(Ie);{var Ct=De=>{var lt=E_(),Je=s(Ae(lt));x(_t=>n(Je,` ${_t??""}`),[()=>l("ops.checking")]),v(De,lt)},st=De=>{var lt=S_(),Je=s(Ae(lt));x(_t=>n(Je,` ${_t??""}`),[()=>l("ops.check_updates")]),v(De,lt)};g(()=>y(Re,De=>{e(b)?De(Ct):De(st,!1)}),"if",Ce,394,20)}x(De=>{n(ee,` ${De??""}`),Ie.disabled=e(b)},[()=>l("ops.auto_update")]),Y("click",Ie,Pe),v(I,ae)};g(()=>y(xe,I=>{C(e(o),"update")&&I(fe)}),"if",Ce,345,4)}var F=s(xe,2);{var he=I=>{var ae=R_(),G=a(ae),ee=s(a(G)),re=s(G,2),ke=a(re),ve=a(ke),Q=a(ve),$e=s(ve,4),Ie=a($e);{var Re=Me=>{var Ze=A_(),Be=s(Ae(Ze));x(We=>n(Be,` ${We??""}`),[()=>l("ops.exporting")]),v(Me,Ze)},Ct=Me=>{var Ze=P_(),Be=s(Ae(Ze));x(We=>n(Be,` ${We??""}`),[()=>l("ops.download_backup")]),v(Me,Ze)};g(()=>y(Ie,Me=>{e(L)?Me(Re):Me(Ct,!1)}),"if",Ce,417,24)}var st=s(ke,4),De=a(st),lt=a(De),Je=s(De,4),_t=a(Je);{var ze=Me=>{var Ze=j_(),Be=s(Ae(Ze));x(We=>n(Be,` ${We??""}`),[()=>l("ops.restoring")]),v(Me,Ze)},be=Me=>{var Ze=O_(),Be=s(Ae(Ze));x(We=>n(Be,` ${We??""}`),[()=>l("ops.upload_backup")]),v(Me,Ze)};g(()=>y(_t,Me=>{e(j)?Me(ze):Me(be,!1)}),"if",Ce,433,24)}var ce=s(_t,2),pe=s(Je,2);{var Oe=Me=>{var Ze=L_(),Be=a(Ze);x(()=>n(Be,e(A))),v(Me,Ze)};g(()=>y(pe,Me=>{e(A)&&Me(Oe)}),"if",Ce,440,20)}x((Me,Ze,Be)=>{n(ee,` ${Me??""}`),n(Q,Ze),$e.disabled=e(L),n(lt,Be),Qe(Je,1,`btn-secondary text-sm inline-flex items-center cursor-pointer ${e(j)?"opacity-50":""}`),ce.disabled=e(j)},[()=>l("ops.backup_restore"),()=>l("ops.export_backup"),()=>l("ops.restore_backup")]),Y("click",$e,ie),Y("change",ce,qe),v(I,ae)};g(()=>y(F,I=>{C(e(o),"backup")&&I(he)}),"if",Ce,405,4)}var Xe=s(F,2);{var yt=I=>{var ae=H_(),G=a(ae),ee=s(a(G)),re=s(G,2);{var ke=Q=>{var $e=M_(),Ie=a($e);x(Re=>n(Ie,Re),[()=>l("ops.federation_loading")]),v(Q,$e)},ve=Q=>{var $e=V_(),Ie=a($e),Re=a(Ie),Ct=a(Re),st=s(Re,2);{var De=ce=>{var pe=N_(),Oe=s(Ae(pe),2),Me=a(Oe),Ze=s(Oe,2),Be=a(Ze);x(We=>{n(Me,e(k).node.name),n(Be,`(${We??""}...)`)},[()=>e(k).node.node_id.slice(0,8)]),v(ce,pe)};g(()=>y(st,ce=>{e(k).node&&ce(De)}),"if",Ce,463,24)}var lt=s(Ie,2);{var Je=ce=>{var pe=I_(),Oe=a(pe);x(Me=>n(Oe,Me),[()=>l("ops.federation_disabled")]),v(ce,pe)},_t=ce=>{var pe=G_(),Oe=Ae(pe),Me=a(Oe),Ze=a(Me),Be=a(Ze),We=s(Ze,2),it=s(Me,2),ot=a(it);{var rt=tt=>{var Ye=D_();v(tt,Ye)},Fe=tt=>{var Ye=F_();v(tt,Ye)};g(()=>y(ot,tt=>{e(X)?tt(rt):tt(Fe,!1)}),"if",Ce,487,32)}var ut=s(ot),mt=s(Oe,2);{var Tt=tt=>{var Ye=U_(),at=a(Ye);x(()=>n(at,e(N))),v(tt,Ye)};g(()=>y(mt,tt=>{e(N)&&tt(Tt)}),"if",Ce,495,24)}var xt=s(mt,2),se=a(xt),ye=s(xt,2);{var et=tt=>{var Ye=B_();g(()=>Dt(Ye,21,()=>e(k).peers,la,(at,ft)=>{var wt=z_(),Ge=a(wt),bt=a(Ge),pt=a(bt,!0);var vt=s(bt,2),Pt=a(vt,!0);var Et=s(vt,2),jt=a(Et,!0);var Ft=s(Et,2),Ht=a(Ft);var Ut=s(Ge,2);x(Kt=>{n(pt,e(ft).name),n(Pt,e(ft).address),Qe(Et,1,`ml-2 px-1.5 py-0.5 rounded text-xs ${C(e(ft).status,"online")?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),n(jt,e(ft).status),n(Ht,`v${e(ft).version??""}`),St(Ut,"title",Kt)},[()=>l("ops.remove_peer_title")]),Y("click",Ut,function(){return $(e(ft).node_id)}),v(at,wt)}),"each",Ce,503,32),v(tt,Ye)},dt=tt=>{var Ye=q_(),at=a(Ye);x(ft=>n(at,ft),[()=>l("ops.no_peers")]),v(tt,Ye)};g(()=>y(ye,tt=>{var Ye;(Ye=e(k).peers)!=null&&Ye.length?tt(et):tt(dt,!1)}),"if",Ce,501,24)}x((tt,Ye,at,ft)=>{n(Be,tt),St(We,"placeholder",Ye),it.disabled=e(X),n(ut,` ${at??""}`),n(se,ft)},[()=>l("ops.add_peer"),()=>l("ops.peer_placeholder"),()=>l("ops.add"),()=>l("ops.peers_count",{count:e(k).peer_count||0})]),ua(We,function(){return e(V)},function(Ye){p(V,Ye)}),Y("click",it,me),v(ce,pe)};g(()=>y(lt,ce=>{e(k).enabled?ce(_t,!1):ce(Je)}),"if",Ce,470,20)}var ze=s(lt,2),be=s(a(ze));x(ce=>{Qe(Re,1,`px-2 py-1 rounded text-xs font-semibold ${e(k).enabled?"bg-green-500/20 text-green-400":"bg-surface text-muted"}`),n(Ct,e(k).enabled?"ENABLED":"DISABLED"),n(be,` ${ce??""}`)},[()=>l("common.refresh")]),Y("click",ze,Se),v(Q,$e)};g(()=>y(re,Q=>{e(q)?Q(ke):e(k)&&Q(ve,1)}),"if",Ce,455,12)}x(Q=>n(ee,` ${Q??""}`),[()=>l("ops.federation_title")]),v(I,ae)};g(()=>y(Xe,I=>{C(e(o),"federation")&&I(yt)}),"if",Ce,449,4)}var ht=s(Xe,2);{var ct=I=>{var ae=J_(),G=a(ae),ee=s(a(G)),re=s(G,2);{var ke=Q=>{var $e=K_(),Ie=a($e);x(Re=>n(Ie,Re),[()=>l("ops.loading_backends")]),v(Q,$e)},ve=Q=>{var $e=Y_(),Ie=a($e),Re=a(Ie),Ct=a(Re),st=s(Re,2),De=a(st),lt=s(st,2),Je=a(lt),_t=s(Ie,2),ze=a(_t),be=s(_t,2);g(()=>Dt(be,21,()=>e(ne).available,la,(Ze,Be)=>{var We=W_(),it=a(We),ot=s(it,2),rt=a(ot,!0);x(()=>{Qe(We,1,`bg-surface rounded p-3 flex items-center gap-2 ${C(e(Be),e(ne).active)?"ring-1 ring-accent":""}`),Qe(it,1,`fa-solid ${C(e(Be),e(ne).active)?"fa-circle-check text-accent":"fa-circle text-muted"} text-xs`),n(rt,e(Be))}),v(Ze,We)}),"each",Ce,551,24);var ce=s(be,2),pe=a(ce),Oe=s(ce,2),Me=s(a(Oe));x((Ze,Be,We,it)=>{n(Ct,Ze),n(De,e(ne).active),n(Je,`(${e(ne).active_info??""})`),n(ze,Be),n(pe,We),n(Me,` ${it??""}`)},[()=>l("ops.active_backend"),()=>l("ops.available_backends"),()=>l("ops.switch_backend_hint"),()=>l("common.refresh")]),Y("click",Oe,z),v(Q,$e)};g(()=>y(re,Q=>{e(je)?Q(ke):e(ne)&&Q(ve,1)}),"if",Ce,539,12)}x(Q=>n(ee,` ${Q??""}`),[()=>l("ops.llm_plugins")]),v(I,ae)};g(()=>y(ht,I=>{C(e(o),"backends")&&I(ct)}),"if",Ce,533,4)}var oe=s(ht,2);{var le=I=>{var ae=hm(),G=Ae(ae),ee=a(G),re=s(a(ee)),ke=s(ee,2);{var ve=pe=>{var Oe=Q_(),Me=a(Oe);x(Ze=>n(Me,Ze),[()=>l("common.loading")]),v(pe,Oe)},Q=pe=>{var Oe=tm(),Me=a(Oe),Ze=a(Me),Be=a(Ze),We=s(Ze,2),it=a(We),ot=s(We,2),rt=a(ot),Fe=s(Me,2),ut=a(Fe),mt=a(ut),Tt=s(ut,2),xt=a(Tt),se=s(Tt,2),ye=a(se),et=s(Fe,2),dt=a(et),tt=a(dt),Ye=s(dt,2);{var at=jt=>{var Ft=X_(),Ht=Ae(Ft),Ut=a(Ht),Kt=s(Ht,2),na=a(Kt);x(ta=>{n(Ut,`${ta??""} GB VRAM`),St(Kt,"title",e(we).gpu_name),n(na,`${(e(we).gpu_name||"GPU")??""}${e(we).gpu_count>1?` (×${e(we).gpu_count})`:""}`)},[()=>{var ta;return((ta=e(we).gpu_vram_gb)==null?void 0:ta.toFixed(1))??"?"}]),v(jt,Ft)},ft=jt=>{var Ft=Z_(),Ht=a(Ft);x(Ut=>n(Ht,Ut),[()=>l("ops.advisor_no_gpu")]),v(jt,Ft)};g(()=>y(Ye,jt=>{e(we).has_gpu?jt(at):jt(ft,!1)}),"if",Ce,594,24)}var wt=s(et,2),Ge=a(wt),bt=a(Ge),pt=s(Ge,2),vt=a(pt),Pt=s(pt,2);{var Et=jt=>{var Ft=em(),Ht=a(Ft);x(Ut=>n(Ht,Ut),[()=>l("ops.advisor_unified")]),v(jt,Ft)};g(()=>y(Pt,jt=>{e(we).unified_memory&&jt(Et)}),"if",Ce,604,24)}x((jt,Ft,Ht,Ut,Kt,na,ta,Ea)=>{n(Be,jt),n(it,`${Ft??""} GB`),n(rt,`${Ht??""} GB ${Ut??""}`),n(mt,Kt),n(xt,`${e(we).cpu_cores??""} ${na??""}`),St(se,"title",e(we).cpu_name),n(ye,e(we).cpu_name),n(tt,ta),n(bt,Ea),n(vt,e(we).backend)},[()=>l("ops.advisor_ram"),()=>{var jt;return(jt=e(we).total_ram_gb)==null?void 0:jt.toFixed(1)},()=>{var jt;return(jt=e(we).available_ram_gb)==null?void 0:jt.toFixed(1)},()=>l("ops.advisor_available"),()=>l("ops.advisor_cpu"),()=>l("ops.advisor_cores"),()=>l("ops.advisor_gpu"),()=>l("ops.advisor_backend_accel")]),v(pe,Oe)},$e=pe=>{var Oe=am(),Me=s(a(Oe));x(Ze=>n(Me,` ${Ze??""}`),[()=>l("ops.advisor_detect")]),Y("click",Oe,function(){Z(),H(),Le()}),v(pe,Oe)};g(()=>y(ke,pe=>{e(Te)?pe(ve):e(we)?pe(Q,1):pe($e,!1)}),"if",Ce,578,12)}var Ie=s(G,2),Re=a(Ie),Ct=s(a(Re)),st=s(Re,2);{var De=pe=>{var Oe=rm(),Me=a(Oe);x(Ze=>n(Me,Ze),[()=>l("common.loading")]),v(pe,Oe)},lt=pe=>{var Oe=lm(),Me=Ae(Oe),Ze=a(Me),Be=s(Ze,2),We=a(Be),it=s(Be,2);{var ot=Tt=>{var xt=sm(),se=a(xt);x(ye=>n(se,`(${e(_e).installed_models.length??""} ${ye??""})`),[()=>l("ops.advisor_models_installed")]),v(Tt,xt)};g(()=>y(it,Tt=>{var xt;e(_e).available&&((xt=e(_e).installed_models)!=null&&xt.length)&&Tt(ot)}),"if",Ce,627,20)}var rt=s(Me,2);{var Fe=Tt=>{var xt=om();g(()=>Dt(xt,21,()=>e(_e).installed_models,la,(se,ye)=>{var et=im(),dt=a(et,!0);x(()=>n(dt,e(ye))),v(se,et)}),"each",Ce,633,24),v(Tt,xt)};g(()=>y(rt,Tt=>{var xt;e(_e).available&&((xt=e(_e).installed_models)!=null&&xt.length)&&Tt(Fe)}),"if",Ce,631,16)}var ut=s(rt,2);{var mt=Tt=>{var xt=nm(),se=a(xt);x(ye=>n(se,ye),[()=>l("ops.ollama_install_hint")]),v(Tt,xt)};g(()=>y(ut,Tt=>{e(_e).available||Tt(mt)}),"if",Ce,638,16)}x(Tt=>{Qe(Ze,1,`w-3 h-3 rounded-full ${e(_e).available?"bg-green-500":"bg-red-500"}`),n(We,Tt)},[()=>e(_e).available?l("ops.ollama_running"):l("ops.ollama_not_running")]),v(pe,Oe)},Je=pe=>{var Oe=dm(),Me=a(Oe);x(Ze=>n(Me,Ze),[()=>l("ops.advisor_detect_first")]),v(pe,Oe)};g(()=>y(st,pe=>{e(Ve)?pe(De):e(_e)?pe(lt,1):pe(Je,!1)}),"if",Ce,621,12)}var _t=s(Ie,2);{var ze=pe=>{var Oe=cm(),Me=a(Oe);x(()=>n(Me,e(Ue))),v(pe,Oe)};g(()=>y(_t,pe=>{e(Ue)&&pe(ze)}),"if",Ce,646,8)}var be=s(_t,2);{var ce=pe=>{var Oe=gm(),Me=a(Oe),Ze=a(Me),Be=s(a(Ze)),We=s(Ze,2),it=a(We),ot=a(it),rt=a(ot);ot.value=ot.__value="";var Fe=s(ot),ut=a(Fe);Fe.value=Fe.__value="general";var mt=s(Fe),Tt=a(mt);mt.value=mt.__value="coding";var xt=s(mt),se=a(xt);xt.value=xt.__value="reasoning";var ye=s(xt),et=a(ye);ye.value=ye.__value="chat";var dt=s(ye),tt=a(dt);dt.value=dt.__value="multimodal";var Ye=s(it,2),at=s(a(Ye)),ft=s(Me,2);{var wt=pt=>{var vt=vm(),Pt=a(vt);x(Et=>n(Pt,Et),[()=>l("ops.advisor_analyzing")]),v(pt,vt)},Ge=pt=>{var vt=xm(),Pt=a(vt),Et=a(Pt),jt=a(Et),Ft=a(jt),Ht=a(Ft),Ut=s(Ft),Kt=a(Ut),na=s(Ut),ta=a(na),Ea=s(na),pa=a(Ea),zt=s(Ea),da=a(zt),ia=s(zt),aa=a(ia),$a=s(ia),gt=a($a),Ot=s($a),Lt=a(Ot),Mt=s(Ot),fa=a(Mt),Aa=s(Et);g(()=>Dt(Aa,21,()=>e(Ke),la,(Ra,Zt)=>{var Ya=mm(),vr=a(Ya),sr=a(vr),ir=a(sr,!0);var br=s(sr,2),Er=a(br);var or=s(vr),Dr=a(or);var Za=s(or),qt=a(Za),Wt=a(qt),xa=a(Wt);var ba=s(Wt,2),rs=a(ba,!0);var Sr=s(Za),Cr=a(Sr),Fr=a(Cr,!0);var Ur=s(Sr),Ss=a(Ur,!0);var er=s(Ur),fs=a(er,!0);var zr=s(er),Cs=a(zr,!0);var He=s(zr),nt=a(He);var It=s(He),Gt=a(It);{var Ma=Bt=>{var Ta=um(),tr=a(Ta,!0);x(Br=>n(tr,Br),[()=>l("ops.advisor_use")]),Y("click",Ta,function(){return B(e(Zt).ollama_tag||e(Zt).name)}),v(Bt,Ta)},ur=Bt=>{var Ta=Oa(),tr=Ae(Ta);{var Br=ss=>{var qr=fm(),ki=s(a(qr),1,!0);x(()=>n(ki,e(W))),v(ss,qr)},As=ss=>{var qr=pm(),ki=s(a(qr),1,!0);x($i=>n(ki,$i),[()=>l("ops.advisor_install")]),Y("click",qr,function(){return O(e(Zt).ollama_tag)}),v(ss,qr)};g(()=>y(tr,ss=>{C(e(K),e(Zt).ollama_tag)?ss(Br):ss(As,!1)}),"if",Ce,733,48)}v(Bt,Ta)},Na=Bt=>{var Ta=_m();v(Bt,Ta)};g(()=>y(Gt,Bt=>{var Ta;e(Zt).installed?Bt(Ma):e(Zt).ollama_tag&&((Ta=e(_e))!=null&&Ta.available)?Bt(ur,1):Bt(Na,!1)}),"if",Ce,725,44)}x((Bt,Ta,tr,Br,As)=>{n(ir,e(Zt).name),n(Er,`${e(Zt).provider??""} · ${e(Zt).use_case??""}`),n(Dr,`${Bt??""}B`),Qe(xa,1,`h-full rounded-full ${e(Zt).score>=70?"bg-green-500":e(Zt).score>=40?"bg-yellow-500":"bg-red-500"}`),Ds(xa,`width: ${Ta??""}%`),n(rs,tr),Qe(Cr,1,`px-1.5 py-0.5 rounded text-xs ${C(e(Zt).fit_level,"Perfect")?"bg-green-500/20 text-green-400":C(e(Zt).fit_level,"Good")?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`),n(Fr,e(Zt).fit_level),n(Ss,e(Zt).run_mode),n(fs,e(Zt).best_quant),n(Cs,Br),n(nt,`${As??""} GB`)},[()=>{var Bt;return(Bt=e(Zt).params_b)==null?void 0:Bt.toFixed(1)},()=>Math.min(e(Zt).score,100),()=>{var Bt;return(Bt=e(Zt).score)==null?void 0:Bt.toFixed(0)},()=>{var Bt;return(Bt=e(Zt).estimated_tps)==null?void 0:Bt.toFixed(1)},()=>{var Bt;return(Bt=e(Zt).memory_required_gb)==null?void 0:Bt.toFixed(1)}]),v(Ra,Ya)}),"each",Ce,697,32),x((Ra,Zt,Ya,vr,sr,ir,br,Er,or)=>{n(Ht,Ra),n(Kt,Zt),n(ta,Ya),n(pa,vr),n(da,sr),n(aa,ir),n(gt,br),n(Lt,Er),n(fa,or)},[()=>l("ops.advisor_col_name"),()=>l("ops.advisor_col_params"),()=>l("ops.advisor_col_score"),()=>l("ops.advisor_col_fit"),()=>l("ops.advisor_col_mode"),()=>l("ops.advisor_col_quant"),()=>l("ops.advisor_col_tps"),()=>l("ops.advisor_col_mem"),()=>l("ops.advisor_col_action")]),v(pt,vt)},bt=pt=>{var vt=bm(),Pt=a(vt);x(Et=>n(Pt,Et),[()=>l("ops.advisor_no_models")]),v(pt,vt)};g(()=>y(ft,pt=>{e(Ee)?pt(wt):e(Ke).length?pt(Ge,1):pt(bt,!1)}),"if",Ce,678,16)}x((pt,vt,Pt,Et,jt,Ft,Ht,Ut)=>{n(Be,` ${pt??""}`),n(rt,vt),n(ut,Pt),n(Tt,Et),n(se,jt),n(et,Ft),n(tt,Ht),n(at,` ${Ut??""}`)},[()=>l("ops.recommended_models"),()=>l("ops.advisor_all_use_cases"),()=>l("ops.advisor_uc_general"),()=>l("ops.advisor_uc_coding"),()=>l("ops.advisor_uc_reasoning"),()=>l("ops.advisor_uc_chat"),()=>l("ops.advisor_uc_multimodal"),()=>l("common.refresh")]),Y("change",it,function(){return H()}),Gi(it,function(){return e(te)},function(vt){p(te,vt)}),Y("click",Ye,H),v(pe,Oe)};g(()=>y(be,pe=>{e(we)&&pe(ce)}),"if",Ce,653,8)}x((pe,Oe)=>{n(re,` ${pe??""}`),n(Ct,` ${Oe??""}`)},[()=>l("ops.system_specs"),()=>l("ops.ollama_status")]),v(I,ae)};g(()=>y(oe,I=>{C(e(o),"advisor")&&I(le)}),"if",Ce,572,4)}return v(r,T),ha(D)}La(["click","change"]);ya[u]="src/components/UsersPanel.svelte";var wm=_(m('<button class="btn-primary text-sm"><i class="fa-solid fa-plus mr-1"></i> </button>'),ya[u],[[143,12,[[144,16]]]]),km=_(m('<div class="bg-surface rounded p-2 text-sm text-muted mb-3"> </div>'),ya[u],[[150,8]]),$m=_(m('<div class="bg-surface rounded p-4 mb-4 space-y-3"><h4 class="text-sm font-medium"> </h4> <div class="grid grid-cols-1 sm:grid-cols-2 gap-3"><div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="jdoe" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="Jane Doe" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <select class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"><option>Admin</option><option>User</option><option>Viewer</option></select></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="password" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="email" placeholder="jane@example.com" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="123456789" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="+15551234567" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div></div> <div class="flex gap-2"><button class="btn-primary text-sm"><i class="fa-solid fa-check mr-1"></i> </button> <button class="btn-secondary text-sm"> </button></div></div>'),ya[u],[[155,8,[[156,12],[157,12,[[158,16,[[159,20],[160,20]]],[162,16,[[163,20],[164,20]]],[166,16,[[167,20],[168,20,[[169,24],[170,24],[171,24]]]]],[174,16,[[175,20],[176,20]]],[178,16,[[179,20],[180,20]]],[182,16,[[183,20],[184,20]]],[186,16,[[187,20],[188,20]]]]],[191,12,[[192,16,[[193,20]]],[195,16]]]]]]),Tm=_(m('<p class="text-muted text-sm"> </p>'),ya[u],[[202,8]]),Em=_(m('<p class="text-muted text-sm"> </p>'),ya[u],[[204,8]]),Sm=_(m('<span class="px-1.5 py-0.5 rounded text-xs bg-red-500/20 text-red-400"> </span>'),ya[u],[[219,36]]),Cm=_(m('<span><i class="fa-solid fa-envelope mr-0.5"></i> </span>'),ya[u],[[224,36,[[224,42]]]]),Am=_(m('<span><i class="fa-brands fa-telegram mr-0.5"></i> </span>'),ya[u],[[227,36,[[227,42]]]]),Pm=_(m('<span><i class="fa-brands fa-whatsapp mr-0.5"></i> </span>'),ya[u],[[230,36,[[230,42]]]]),jm=_(m('<div class="flex items-center gap-2 flex-shrink-0"><select class="bg-bg border border-border rounded px-2 py-1 text-xs"><option>Admin</option><option>User</option><option>Viewer</option></select> <button> </button> <button class="text-xs px-2 py-1 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30"><i class="fa-solid fa-trash"></i></button></div>'),ya[u],[[238,24,[[239,28,[[244,32],[245,32],[246,32]]],[248,28],[255,28,[[260,32]]]]]]),Om=_(m('<div class="bg-surface rounded p-3 flex items-center justify-between gap-3 flex-wrap"><div class="flex items-center gap-3 min-w-0"><div class="w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center text-accent font-bold text-sm flex-shrink-0"> </div> <div class="min-w-0"><div class="flex items-center gap-2"><span class="font-medium text-fg truncate"> </span> <span class="text-xs text-muted font-mono"> </span> <span> </span> <!></div> <div class="flex gap-3 text-xs text-muted mt-0.5"><!> <!> <!> <span> </span></div></div></div> <!></div>'),ya[u],[[208,16,[[209,20,[[210,24],[213,24,[[214,28,[[215,32],[216,32],[217,32]]],[222,28,[[232,32]]]]]]]]]]),Lm=_(m('<div class="space-y-2"></div>'),ya[u],[[206,8]]),Rm=_(m('<div class="card"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"><i class="fa-solid fa-users mr-1"></i> </h3> <!></div> <!> <!> <!></div>'),ya[u],[[137,0,[[138,4,[[139,8,[[140,12]]]]]]]]);function ya(r,i){wa(new.target),ga(i,!0,ya);let o=S(P(Jt([])),"users"),d=S(P(!0),"loading"),c=S(P(!1),"showCreateForm"),f=S(P(""),"message"),b=S(P(""),"newUsername"),h=S(P(""),"newDisplayName"),w=S(P("user"),"newRole"),L=S(P(""),"newPassword"),j=S(P(""),"newEmail"),A=S(P(""),"newTelegramId"),k=S(P(""),"newWhatsappId");async function q(){p(d,!0);try{const $=(await M(fetch("/api/users")))(),z=(await M($.json()))();p(o,z.users||[],!0)}catch{p(o,[],!0)}p(d,!1)}async function V(){p(f,"");const $={username:e(b),display_name:e(h)||e(b),role:e(w),password:e(L)};e(j)&&($.email=e(j)),e(A)&&($.telegram_id=parseInt(e(A))),e(k)&&($.whatsapp_id=e(k));try{(await M(fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)})))().ok?(p(f,l("users.created",{username:e(b)}),!0),p(b,""),p(h,""),p(w,"user"),p(L,""),p(j,""),p(A,""),p(k,""),p(c,!1),q()):p(f,l("users.failed_create"),!0)}catch{p(f,l("users.error_create"),!0)}}async function X($){try{(await M(fetch(`/api/users/${$.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!$.enabled})})))(),q()}catch{p(f,l("users.failed_update"),!0)}}async function N($,z){try{(await M(fetch(`/api/users/${$.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:z})})))(),q()}catch{p(f,l("users.failed_role"),!0)}}async function ne($){if(confirm(l("users.delete_confirm",{username:$.username})))try{(await M(fetch(`/api/users/${$.id}`,{method:"DELETE"})))(),q()}catch{p(f,l("users.failed_delete"),!0)}}function je($){switch($){case"admin":return"bg-red-500/20 text-red-400";case"viewer":return"bg-blue-500/20 text-blue-400";default:return"bg-green-500/20 text-green-400"}}function we($){if(!$)return l("users.never");const z=new Date($+"Z"),Z=Date.now()-z.getTime();return Z<6e4?l("users.just_now"):Z<36e5?`${Math.floor(Z/6e4)}m ago`:Z<864e5?`${Math.floor(Z/36e5)}h ago`:`${Math.floor(Z/864e5)}d ago`}Es(q);const Te=S(ma(()=>C(va.role,"admin")||!va.userId),"isAdmin");var Ke={...ka()},Ee=Rm(),te=a(Ee),_e=a(te),Ve=s(a(_e)),K=s(_e,2);{var W=$=>{var z=wm(),Z=s(a(z));x(H=>n(Z,` ${H??""}`),[()=>l("users.add_user")]),Y("click",z,function(){return p(c,!e(c))}),v($,z)};g(()=>y(K,$=>{e(Te)&&$(W)}),"if",ya,142,8)}var Ue=s(te,2);{var Ne=$=>{var z=km(),Z=a(z);x(()=>n(Z,e(f))),v($,z)};g(()=>y(Ue,$=>{e(f)&&$(Ne)}),"if",ya,149,4)}var Pe=s(Ue,2);{var R=$=>{var z=$m(),Z=a(z),H=a(Z),Le=s(Z,2),O=a(Le),B=a(O),ue=a(B),D=s(B,2),T=s(O,2),E=a(T),U=a(E),J=s(E,2),xe=s(T,2),fe=a(xe),F=a(fe),he=s(fe,2),Xe=a(he);Xe.value=Xe.__value="admin";var yt=s(Xe);yt.value=yt.__value="user";var ht=s(yt);ht.value=ht.__value="viewer";var ct=s(xe,2),oe=a(ct),le=a(oe),I=s(oe,2),ae=s(ct,2),G=a(ae),ee=a(G),re=s(G,2),ke=s(ae,2),ve=a(ke),Q=a(ve),$e=s(ve,2),Ie=s(ke,2),Re=a(Ie),Ct=a(Re),st=s(Re,2),De=s(Le,2),lt=a(De),Je=s(a(lt)),_t=s(lt,2),ze=a(_t);x((be,ce,pe,Oe,Me,Ze,Be,We,it,ot,rt)=>{n(H,be),n(ue,`${ce??""} *`),n(U,pe),n(F,Oe),n(le,Me),n(ee,Ze),n(Q,Be),n(Ct,We),lt.disabled=it,n(Je,` ${ot??""}`),n(ze,rt)},[()=>l("users.create_user"),()=>l("users.username"),()=>l("users.display_name"),()=>l("users.role"),()=>l("users.password"),()=>l("users.email"),()=>l("users.telegram_id"),()=>l("users.whatsapp_id"),()=>!e(b).trim(),()=>l("users.create"),()=>l("common.cancel")]),ua(D,function(){return e(b)},function(ce){p(b,ce)}),ua(J,function(){return e(h)},function(ce){p(h,ce)}),Gi(he,function(){return e(w)},function(ce){p(w,ce)}),ua(I,function(){return e(L)},function(ce){p(L,ce)}),ua(re,function(){return e(j)},function(ce){p(j,ce)}),ua($e,function(){return e(A)},function(ce){p(A,ce)}),ua(st,function(){return e(k)},function(ce){p(k,ce)}),Y("click",lt,V),Y("click",_t,function(){return p(c,!1)}),v($,z)};g(()=>y(Pe,$=>{e(c)&&e(Te)&&$(R)}),"if",ya,154,4)}var ie=s(Pe,2);{var qe=$=>{var z=Tm(),Z=a(z);x(H=>n(Z,H),[()=>l("users.loading")]),v($,z)},Se=$=>{var z=Em(),Z=a(z);x(H=>n(Z,H),[()=>l("users.no_users_desc")]),v($,z)},me=$=>{var z=Lm();g(()=>Dt(z,21,()=>e(o),la,(Z,H)=>{var Le=Om(),O=a(Le),B=a(O),ue=a(B,!0);var D=s(B,2),T=a(D),E=a(T),U=a(E,!0);var J=s(E,2),xe=a(J);var fe=s(J,2),F=a(fe,!0);var he=s(fe,2);{var Xe=ve=>{var Q=Sm(),$e=a(Q,!0);x(Ie=>n($e,Ie),[()=>l("users.disabled")]),v(ve,Q)};g(()=>y(he,ve=>{e(H).enabled||ve(Xe)}),"if",ya,218,32)}var yt=s(T,2),ht=a(yt);{var ct=ve=>{var Q=Cm(),$e=s(a(Q));x(()=>n($e,` ${e(H).email??""}`)),v(ve,Q)};g(()=>y(ht,ve=>{e(H).email&&ve(ct)}),"if",ya,223,32)}var oe=s(ht,2);{var le=ve=>{var Q=Am(),$e=s(a(Q));x(()=>n($e,` ${e(H).telegram_id??""}`)),v(ve,Q)};g(()=>y(oe,ve=>{e(H).telegram_id&&ve(le)}),"if",ya,226,32)}var I=s(oe,2);{var ae=ve=>{var Q=Pm(),$e=s(a(Q));x(()=>n($e,` ${e(H).whatsapp_id??""}`)),v(ve,Q)};g(()=>y(I,ve=>{e(H).whatsapp_id&&ve(ae)}),"if",ya,229,32)}var G=s(I,2),ee=a(G);var re=s(O,2);{var ke=ve=>{var Q=jm(),$e=a(Q),Ie=a($e);Ie.value=Ie.__value="admin";var Re=s(Ie);Re.value=Re.__value="user";var Ct=s(Re);Ct.value=Ct.__value="viewer";var st;Wo($e);var De=s($e,2),lt=a(De,!0);var Je=s(De,2);x((_t,ze,be)=>{st!==(st=e(H).role)&&($e.value=($e.__value=e(H).role)??"",mo($e,e(H).role)),Qe(De,1,`text-xs px-2 py-1 rounded ${e(H).enabled?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`),St(De,"title",_t),n(lt,ze),St(Je,"title",be)},[()=>e(H).enabled?l("users.disable_user"):l("users.enable_user"),()=>e(H).enabled?l("users.disable"):l("users.enable"),()=>l("users.delete_user")]),Y("change",$e,function(ze){return N(e(H),ze.target.value)}),Y("click",De,function(){return X(e(H))}),Y("click",Je,function(){return ne(e(H))}),v(ve,Q)};g(()=>y(re,ve=>{e(Te)&&ve(ke)}),"if",ya,237,20)}x((ve,Q,$e,Ie)=>{n(ue,ve),n(U,e(H).display_name||e(H).username),n(xe,`@${e(H).username??""}`),Qe(fe,1,`px-1.5 py-0.5 rounded text-xs font-semibold ${Q??""}`),n(F,e(H).role),n(ee,`${$e??""} ${Ie??""}`)},[()=>{var ve,Q;return((Q=(ve=e(H).display_name)==null?void 0:ve.charAt(0))==null?void 0:Q.toUpperCase())||e(H).username.charAt(0).toUpperCase()},()=>je(e(H).role),()=>l("users.last_seen"),()=>we(e(H).last_seen_at)]),v(Z,Le)}),"each",ya,207,12),v($,z)};g(()=>y(ie,$=>{e(d)?$(qe):C(e(o).length,0)?$(Se,1):$(me,!1)}),"if",ya,201,4)}return x($=>n(Ve,` ${$??""}`),[()=>l("users.title")]),v(r,Ee),ha(Ke)}La(["click","change"]);sa[u]="src/components/TwoFactorPanel.svelte";var Mm=_(m('<div class="card"><p class="text-text-muted text-sm"><i class="fa-solid fa-circle-info mr-1"></i> </p></div>'),sa[u],[[243,4,[[244,8,[[245,12]]]]]]),Nm=_(m('<div class="card"><p class="text-text-muted text-sm"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </p></div>'),sa[u],[[250,4,[[251,8,[[251,43]]]]]]),Im=_(m("<div><i></i> </div>"),sa[u],[[256,12,[[257,16]]]]),Dm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),sa[u],[[273,20]]),Fm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),sa[u],[[275,20]]),Um=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i>'),sa[u],[[301,32]]),zm=_(m('<p class="text-sm text-text-subtle mb-3"> </p> <div class="flex gap-2 items-end"><div><label class="text-xs text-text-muted block mb-1"> </label> <input type="text" maxlength="6" placeholder="000000" class="w-32 bg-bg border border-border rounded px-3 py-1.5 text-sm font-mono tracking-widest text-center"/></div> <button class="px-3 py-1.5 text-sm rounded bg-red-600/80 text-white hover:bg-red-500 transition-colors disabled:opacity-50"><!> </button></div>',1),sa[u],[[281,20],[284,20,[[285,24,[[286,28],[287,28]]],[295,24]]]]),Bm=_(m('<p class="text-sm text-text-subtle mb-3"> </p> <button class="px-4 py-2 text-sm rounded bg-primary-600 text-white hover:bg-primary-500 transition-colors"><i class="fa-solid fa-shield-halved mr-1"></i> </button>',1),sa[u],[[308,20],[311,20,[[315,24]]]]),qm=_(m('<div class="px-2 py-1 rounded bg-bg border border-border"><span class="text-text-muted mr-1"></span> </div>'),sa[u],[[350,40,[[351,44]]]]),Gm=_(m('<div class="grid grid-cols-2 gap-1 font-mono text-xs"></div>'),sa[u],[[348,32]]),Vm=_(m('<div class="space-y-4"><div class="p-4 rounded-lg bg-surface border border-border"><p class="text-sm text-text mb-2 font-medium"> </p> <div class="bg-white p-4 rounded-lg inline-block"><img alt="TOTP QR Code" class="w-48 h-48"/></div> <p class="text-xs text-text-muted mt-3"> </p> <code class="block mt-1 px-3 py-2 rounded bg-bg border border-border text-sm font-mono break-all select-all"> </code></div> <div class="p-4 rounded-lg bg-surface border border-border"><p class="text-sm text-text mb-2 font-medium"> </p> <p class="text-xs text-text-subtle mb-2"> </p> <button class="text-xs text-primary-400 hover:text-primary-300 mb-2"> </button> <!></div> <div class="p-4 rounded-lg bg-surface border border-border"><p class="text-sm text-text mb-2 font-medium"> </p> <p class="text-xs text-text-subtle mb-2"> </p> <div class="flex gap-2"><input type="text" maxlength="6" placeholder="000000" class="w-32 bg-bg border border-border rounded px-3 py-1.5 text-sm font-mono tracking-widest text-center"/> <button class="px-4 py-1.5 text-sm rounded bg-green-600 text-white hover:bg-green-500 transition-colors disabled:opacity-50"><i class="fa-solid fa-check mr-1"></i> </button> <button class="px-3 py-1.5 text-sm rounded border border-border text-text-muted hover:bg-surface-elevated transition-colors"> </button></div></div></div>'),sa[u],[[319,20,[[320,24,[[321,28],[322,28,[[324,32]]],[330,28],[331,28]]],[336,24,[[337,28],[338,28],[341,28]]],[358,24,[[359,28],[360,28],[361,28,[[362,32],[370,32,[[375,36]]],[377,32]]]]]]]]),Hm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),sa[u],[[402,24]]),Km=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),sa[u],[[406,24]]),Wm=_(m('<div class="flex items-center justify-between p-2.5 rounded-md bg-surface border border-border/50"><div class="flex items-center gap-2.5"><i class="fa-solid fa-key text-text-muted"></i> <div><span class="text-sm text-text"> </span> <span class="text-xs text-text-subtle ml-2"> </span></div></div> <button class="text-xs px-2 py-1 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors"><i class="fa-solid fa-trash"></i></button></div>'),sa[u],[[414,32,[[415,36,[[416,40],[417,40,[[418,44],[419,44]]]]],[422,36,[[427,40]]]]]]),Ym=_(m('<div class="space-y-2 mb-4"></div>'),sa[u],[[412,24]]),Jm=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),sa[u],[[451,32]]),Qm=_(m('<i class="fa-solid fa-plus mr-1"></i> ',1),sa[u],[[453,32]]),Xm=_(m('<p class="text-xs text-text-subtle mt-3"><i class="fa-solid fa-circle-info mr-1"></i> </p>'),sa[u],[[459,24,[[460,28]]]]),Zm=_(m('<div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-fingerprint text-amber-400"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-4"><!> <div class="flex items-end gap-2"><div class="flex-1"><label class="text-xs text-text-muted block mb-1"> </label> <input type="text" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <button class="px-4 py-1.5 text-sm rounded bg-primary-600 text-white hover:bg-primary-500 transition-colors disabled:opacity-50 whitespace-nowrap"><!></button></div> <!></div></div>'),sa[u],[[392,12,[[393,16,[[394,20,[[395,24],[396,24,[[397,24],[398,24]]]]]]],[409,16,[[435,20,[[436,24,[[437,28],[438,28]]],[445,24]]]]]]]]),e2=_(m('<div class="space-y-4"><!> <div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-clock text-primary-400"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-4"><!></div></div> <!> <div class="p-3 rounded-lg bg-surface-elevated border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> <!></p></div></div>'),sa[u],[[254,4,[[263,8,[[264,12,[[265,16,[[266,20],[267,20,[[268,24],[269,24]]]]]]],[278,12]]],[469,8,[[470,12,[[471,16]]]]]]]]);function sa(r,i){wa(new.target),ga(i,!0,sa);let o=S(P(null),"status"),d=S(P(Jt([])),"passkeys"),c=S(P(!0),"loading"),f=S(P(""),"message"),b=S(P("success"),"messageType"),h=S(P("idle"),"setupStep"),w=S(P(""),"totpSecret"),L=S(P(""),"otpauthUri"),j=S(P(Jt([])),"recoveryCodes"),A=S(P(""),"verifyCode"),k=S(P(!1),"showRecoveryCodes"),q=S(P(""),"passkeyName"),V=S(P(!1),"registeringPasskey"),X=S(P(""),"disableCode"),N=S(P(!1),"disabling");async function ne(){p(c,!0);try{const[Se,me]=(await M(Promise.all([fetch("/api/auth/2fa/status"),fetch("/api/auth/passkeys")])))();p(o,(await M(Se.json()))(),!0);const $=(await M(me.json()))();p(d,$.passkeys||[],!0)}catch{je(l("twofa.load_failed"),"error")}p(c,!1)}function je(Se,me="success"){p(f,Se,!0),p(b,me,!0),Se&&setTimeout(()=>{p(f,"")},5e3)}async function we(){try{const Se=(await M(fetch("/api/auth/2fa/setup",{method:"POST"})))(),me=(await M(Se.json()))();me.ok?(p(w,me.secret,!0),p(L,me.otpauth_uri,!0),p(j,me.recovery_codes,!0),p(h,"showing_secret")):je(me.error||"Failed to set up TOTP","error")}catch{je("Failed to set up TOTP","error")}}async function Te(){if(e(A).trim())try{const Se=(await M(fetch("/api/auth/2fa/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e(A).trim()})})))(),me=(await M(Se.json()))();me.ok?(je("TOTP 2FA enabled successfully"),p(h,"idle"),p(A,""),p(w,""),p(L,""),(await M(ne()))()):je(me.error||"Invalid code","error")}catch{je("Failed to enable TOTP","error")}}async function Ke(){if(e(X).trim()){p(N,!0);try{const Se=(await M(fetch("/api/auth/2fa/disable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e(X).trim()})})))(),me=(await M(Se.json()))();me.ok?(je("TOTP 2FA disabled"),p(X,""),(await M(ne()))()):je(me.error||"Invalid code","error")}catch{je("Failed to disable TOTP","error")}p(N,!1)}}async function Ee(){p(V,!0);try{const Se=(await M(fetch("/api/auth/passkey/register/start",{method:"POST"})))(),me=(await M(Se.json()))();if(!me.ok){je(me.error||"Failed to start passkey registration","error"),p(V,!1);return}const $=me.options;if($.publicKey.challenge=_e($.publicKey.challenge),$.publicKey.user.id=_e($.publicKey.user.id),$.publicKey.excludeCredentials)for(const B of $.publicKey.excludeCredentials)B.id=_e(B.id);const z=(await M(navigator.credentials.create($)))();if(!z){je("Passkey creation was cancelled","error"),p(V,!1);return}const Z=z.response,H={credential:{id:z.id,rawId:Ve(z.rawId),response:{attestationObject:Ve(Z.attestationObject),clientDataJSON:Ve(Z.clientDataJSON)},type:z.type},name:e(q)||"Passkey"},Le=(await M(fetch("/api/auth/passkey/register/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)})))(),O=(await M(Le.json()))();O.ok?(je("Passkey registered successfully"),p(q,""),(await M(ne()))()):je(O.error||"Failed to register passkey","error")}catch(Se){C(Se.name,"NotAllowedError")?je("Passkey creation was cancelled or timed out","error"):je(`Passkey registration failed: ${Se.message}`,"error")}p(V,!1)}async function te(Se){if(confirm(`Delete passkey "${Se.name}"?`))try{const me=(await M(fetch(`/api/auth/passkeys/${Se.id}`,{method:"DELETE"})))(),$=(await M(me.json()))();$.ok?(je("Passkey deleted"),(await M(ne()))()):je($.error||"Failed to delete passkey","error")}catch{je("Failed to delete passkey","error")}}function _e(Se){const me=Se.replace(/-/g,"+").replace(/_/g,"/"),$=me+"=".repeat((4-me.length%4)%4),z=atob($),Z=new ArrayBuffer(z.length),H=new Uint8Array(Z);for(let Le=0;Le<z.length;Le++)H[Le]=z.charCodeAt(Le);return Z}function Ve(Se){const me=new Uint8Array(Se);let $="";for(const z of me)$+=String.fromCharCode(z);return btoa($).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function K(Se){const me=new Date(Se+"Z"),$=Date.now()-me.getTime();return $<6e4?"Just now":$<36e5?`${Math.floor($/6e4)}m ago`:$<864e5?`${Math.floor($/36e5)}h ago`:`${Math.floor($/864e5)}d ago`}const W=S(ma(()=>!!va.userId),"hasUserId");Es(()=>{e(W)&&ne()});var Ue={...ka()},Ne=Oa(),Pe=Ae(Ne);{var R=Se=>{var me=Mm(),$=a(me),z=s(a($));x(Z=>n(z,` ${Z??""}`),[()=>l("twofa.multi_user_only")]),v(Se,me)},ie=Se=>{var me=Nm(),$=a(me),z=s(a($));x(Z=>n(z,` ${Z??""}`),[()=>l("twofa.loading_status")]),v(Se,me)},qe=Se=>{var me=e2(),$=a(me);{var z=G=>{var ee=Im(),re=a(ee),ke=s(re);x(()=>{Qe(ee,1,`px-3 py-2 rounded-md text-sm ${C(e(b),"error")?"bg-red-900/20 border border-red-800/40 text-red-400":"bg-green-900/20 border border-green-800/40 text-green-400"}`),Qe(re,1,`fa-solid ${C(e(b),"error")?"fa-circle-exclamation":"fa-check-circle"} mr-1`),n(ke,` ${e(f)??""}`)}),v(G,ee)};g(()=>y($,G=>{e(f)&&G(z)}),"if",sa,255,8)}var Z=s($,2),H=a(Z),Le=a(H),O=s(a(Le),2),B=a(O),ue=a(B),D=s(B,2),T=a(D),E=s(Le,2);{var U=G=>{var ee=Dm(),re=a(ee);x(ke=>n(re,ke),[()=>l("twofa.enabled_badge")]),v(G,ee)},J=G=>{var ee=Fm(),re=a(ee);x(ke=>n(re,ke),[()=>l("twofa.disabled_badge")]),v(G,ee)};g(()=>y(E,G=>{e(o).totp_enabled?G(U):G(J,!1)}),"if",sa,272,16)}var xe=s(H,2),fe=a(xe);{var F=G=>{var ee=zm(),re=Ae(ee),ke=a(re),ve=s(re,2),Q=a(ve),$e=a(Q),Ie=a($e),Re=s($e,2),Ct=s(Q,2),st=a(Ct);{var De=Je=>{var _t=Um();v(Je,_t)};g(()=>y(st,Je=>{e(N)&&Je(De)}),"if",sa,300,28)}var lt=s(st);x((Je,_t,ze,be)=>{n(ke,Je),n(Ie,_t),Ct.disabled=ze,n(lt,` ${be??""}`)},[()=>l("twofa.totp_enabled"),()=>l("twofa.totp_code"),()=>e(N)||C(e(X).trim().length,6,!1),()=>l("twofa.disable_2fa")]),ua(Re,function(){return e(X)},function(_t){p(X,_t)}),Y("click",Ct,Ke),v(G,ee)},he=G=>{var ee=Bm(),re=Ae(ee),ke=a(re),ve=s(re,2),Q=s(a(ve));x(($e,Ie)=>{n(ke,$e),n(Q,` ${Ie??""}`)},[()=>l("twofa.setup_desc"),()=>l("twofa.setup_authenticator")]),Y("click",ve,we),v(G,ee)},Xe=G=>{var ee=Vm(),re=a(ee),ke=a(re),ve=a(ke),Q=s(ke,2),$e=a(Q),Ie=s(Q,2),Re=a(Ie),Ct=s(Ie,2),st=a(Ct),De=s(re,2),lt=a(De),Je=a(lt),_t=s(lt,2),ze=a(_t),be=s(_t,2),ce=a(be),pe=s(be,2);{var Oe=xt=>{var se=Gm();g(()=>Dt(se,21,()=>e(j),la,(ye,et,dt)=>{var tt=qm(),Ye=a(tt);Ye.textContent=`${dt+1}.`;var at=s(Ye);x(()=>n(at,` ${e(et)??""}`)),v(ye,tt)}),"each",sa,349,36),v(xt,se)};g(()=>y(pe,xt=>{e(k)&&xt(Oe)}),"if",sa,347,28)}var Me=s(De,2),Ze=a(Me),Be=a(Ze),We=s(Ze,2),it=a(We),ot=s(We,2),rt=a(ot),Fe=s(rt,2),ut=s(a(Fe)),mt=s(Fe,2),Tt=a(mt);x((xt,se,ye,et,dt,tt,Ye,at,ft,wt,Ge)=>{n(ve,xt),St($e,"src",`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${se??""}`),n(Re,ye),n(st,e(w)),n(Je,et),n(ze,dt),n(ce,tt),n(Be,Ye),n(it,at),Fe.disabled=ft,n(ut,` ${wt??""}`),n(Tt,Ge)},[()=>l("twofa.scan_step"),()=>encodeURIComponent(e(L)),()=>l("twofa.manual_key"),()=>l("twofa.save_recovery"),()=>l("twofa.recovery_hint"),()=>e(k)?l("twofa.hide_codes"):l("twofa.show_codes"),()=>l("twofa.verify_step"),()=>l("twofa.verify_hint"),()=>C(e(A).trim().length,6,!1),()=>l("twofa.verify_enable"),()=>l("common.cancel")]),Y("click",be,function(){return p(k,!e(k))}),Y("keydown",rt,function(se){C(se.key,"Enter")&&Te()}),ua(rt,function(){return e(A)},function(se){p(A,se)}),Y("click",Fe,Te),Y("click",mt,function(){p(h,"idle"),p(w,""),p(L,"")}),v(G,ee)};g(()=>y(fe,G=>{e(o).totp_enabled?G(F):C(e(h),"idle")?G(he,1):C(e(h),"showing_secret")&&G(Xe,2)}),"if",sa,279,16)}var yt=s(Z,2);{var ht=G=>{var ee=Zm(),re=a(ee),ke=a(re),ve=s(a(ke),2),Q=a(ve),$e=a(Q),Ie=s(Q,2),Re=a(Ie),Ct=s(ke,2);{var st=rt=>{var Fe=Hm(),ut=a(Fe);x(mt=>n(ut,mt),[()=>l("twofa.registered",{count:e(o).passkey_count})]),v(rt,Fe)},De=rt=>{var Fe=Km(),ut=a(Fe);x(mt=>n(ut,mt),[()=>l("twofa.none_badge")]),v(rt,Fe)};g(()=>y(Ct,rt=>{e(o).passkey_count>0?rt(st):rt(De,!1)}),"if",sa,401,20)}var lt=s(re,2),Je=a(lt);{var _t=rt=>{var Fe=Ym();g(()=>Dt(Fe,21,()=>e(d),la,(ut,mt)=>{var Tt=Wm(),xt=a(Tt),se=s(a(xt),2),ye=a(se),et=a(ye,!0);var dt=s(ye,2),tt=a(dt);var Ye=s(xt,2);x((at,ft,wt)=>{n(et,e(mt).name),n(tt,`${at??""} ${ft??""}`),St(Ye,"title",wt)},[()=>l("twofa.added_label"),()=>K(e(mt).created_at),()=>l("twofa.delete_passkey")]),Y("click",Ye,function(){return te(e(mt))}),v(ut,Tt)}),"each",sa,413,28),v(rt,Fe)};g(()=>y(Je,rt=>{e(d).length>0&&rt(_t)}),"if",sa,411,20)}var ze=s(Je,2),be=a(ze),ce=a(be),pe=a(ce),Oe=s(ce,2),Me=s(be,2),Ze=a(Me);{var Be=rt=>{var Fe=Jm(),ut=s(Ae(Fe));x(mt=>n(ut,` ${mt??""}`),[()=>l("twofa.registering")]),v(rt,Fe)},We=rt=>{var Fe=Qm(),ut=s(Ae(Fe));x(mt=>n(ut,` ${mt??""}`),[()=>l("twofa.add_passkey")]),v(rt,Fe)};g(()=>y(Ze,rt=>{e(V)?rt(Be):rt(We,!1)}),"if",sa,450,28)}var it=s(ze,2);{var ot=rt=>{var Fe=Xm(),ut=s(a(Fe));x(mt=>n(ut,` ${mt??""}`),[()=>l("twofa.passkey_info")]),v(rt,Fe)};g(()=>y(it,rt=>{C(e(d).length,0)&&rt(ot)}),"if",sa,458,20)}x((rt,Fe,ut,mt)=>{n($e,rt),n(Re,Fe),n(pe,ut),St(Oe,"placeholder",mt),Me.disabled=e(V)},[()=>l("twofa.passkeys"),()=>l("twofa.passkeys_desc"),()=>l("twofa.passkey_name"),()=>l("twofa.passkey_placeholder")]),ua(Oe,function(){return e(q)},function(Fe){p(q,Fe)}),Y("click",Me,Ee),v(G,ee)};g(()=>y(yt,G=>{e(o).passkeys_available&&G(ht)}),"if",sa,391,8)}var ct=s(yt,2),oe=a(ct),le=s(a(oe)),I=s(le);{var ae=G=>{var ee=Jr();x(re=>n(ee,re),[()=>l("twofa.info_both")]),v(G,ee)};g(()=>y(I,G=>{e(o).totp_enabled&&e(o).passkey_count>0&&G(ae)}),"if",sa,473,16)}x((G,ee,re)=>{n(ue,G),n(T,ee),n(le,` ${re??""} `)},[()=>l("twofa.authenticator_app"),()=>l("twofa.authenticator_hint"),()=>l("twofa.info_box")]),v(Se,me)};g(()=>y(Pe,Se=>{e(W)?e(c)?Se(ie,1):e(o)&&Se(qe,2):Se(R)}),"if",sa,242,0)}return v(r,Ne),ha(Ue)}La(["click","keydown"]);Mr[u]="src/components/PersonaEditor.svelte";var t2=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Mr[u],[[72,20]]),a2=_(m('<i class="fa-solid fa-floppy-disk mr-1"></i> ',1),Mr[u],[[74,20]]),r2=_(m("<span> </span>"),Mr[u],[[78,16]]),s2=_(m('<span class="text-xs text-warning-500"><i class="fa-solid fa-circle-exclamation mr-0.5"></i> Unsaved changes</span>'),Mr[u],[[81,16,[[82,20]]]]),i2=_(m(`<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-masks-theater mr-1.5"></i> </h2></div> <div class="p-4 space-y-3"><p class="text-xs text-text-subtle"> </p> <div><label class="text-xs font-medium text-text-muted uppercase tracking-wide mb-1 block"> </label> <textarea rows="6" class="w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text text-sm
                       placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50 resize-y font-sans" placeholder="You are a helpful, proactive AI assistant..."></textarea></div> <div class="flex items-center gap-3"><button class="px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                       hover:bg-primary-500 transition-colors disabled:opacity-50"><!></button> <!> <!></div></div></section>`),Mr[u],[[44,0,[[45,4,[[46,8,[[47,12]]]]],[50,4,[[51,8],[52,8,[[53,12],[56,12]]],[64,8,[[65,12]]]]]]]]);function Mr(r,i){wa(new.target),ga(i,!0,Mr);let o=S(P(""),"personality"),d=S(P(""),"original"),c=S(P(!1),"saving"),f=S(P(""),"message");async function b(){try{const Pe=(await M(Nt("GET","/api/persona")))();p(o,Pe.personality??"",!0),p(d,e(o),!0)}catch(Pe){console.error(...Xt("error","loadPersona:",Pe))}}async function h(){p(c,!0),p(f,"");try{(await M(Nt("PUT","/api/persona",{personality:e(o)})))().ok?(p(f,l("persona.saved"),!0),p(d,e(o),!0),setTimeout(()=>p(f,""),3e3)):p(f,l("persona.failed"),!0)}catch{p(f,l("persona.failed"),!0)}p(c,!1)}const w=S(ma(()=>C(e(o),e(d),!1)),"dirty");Es(b);var L={...ka()},j=i2(),A=a(j),k=a(A),q=s(a(k)),V=s(A,2),X=a(V),N=a(X),ne=s(X,2),je=a(ne),we=a(je),Te=s(je,2),Ke=s(ne,2),Ee=a(Ke),te=a(Ee);{var _e=Pe=>{var R=t2(),ie=s(Ae(R));x(qe=>n(ie,` ${qe??""}`),[()=>l("persona.saving")]),v(Pe,R)},Ve=Pe=>{var R=a2(),ie=s(Ae(R));x(qe=>n(ie,` ${qe??""}`),[()=>l("persona.save")]),v(Pe,R)};g(()=>y(te,Pe=>{e(c)?Pe(_e):Pe(Ve,!1)}),"if",Mr,71,16)}var K=s(Ee,2);{var W=Pe=>{var R=r2(),ie=a(R);x(qe=>{Qe(R,1,`text-xs ${qe??""}`),n(ie,e(f))},[()=>C(e(f),l("persona.saved"))?"text-success-500":"text-error-500"]),v(Pe,R)};g(()=>y(K,Pe=>{e(f)&&Pe(W)}),"if",Mr,77,12)}var Ue=s(K,2);{var Ne=Pe=>{var R=s2();v(Pe,R)};g(()=>y(Ue,Pe=>{e(w)&&Pe(Ne)}),"if",Mr,80,12)}return x((Pe,R,ie)=>{n(q,` ${Pe??""}`),n(N,R),n(we,ie),Ee.disabled=e(c)||!e(w)},[()=>l("persona.title"),()=>l("persona.personality_hint"),()=>l("persona.personality")]),ua(Te,function(){return e(o)},function(R){p(o,R)}),Y("click",Ee,h),v(r,j),ha(L)}La(["click"]);Xa[u]="src/components/ConversationHistory.svelte";var o2=_(m("<button> </button>"),Xa[u],[[97,16]]),n2=_(m('<p class="text-text-subtle text-sm italic text-center py-6"> </p>'),Xa[u],[[115,12]]),l2=_(m('<span class="text-[10px] text-text-subtle"> </span>'),Xa[u],[[123,24]]),d2=_(m('<div class="px-4 py-3 hover:bg-surface-muted/30 transition-colors"><div class="flex items-center gap-2 mb-1"><i></i> <span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <!> <span class="text-[10px] text-text-subtle ml-auto"> </span></div> <div class="text-sm text-text whitespace-pre-wrap break-words leading-relaxed pl-6"> </div></div>'),Xa[u],[[118,12,[[119,16,[[120,20],[121,20],[125,20]]],[127,16]]]]),c2=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i>'),Xa[u],[[142,20]]),v2=_(m('<div class="px-4 py-3 border-t border-border text-center"><button class="px-4 py-1.5 text-sm border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors disabled:opacity-50"><!> </button></div>'),Xa[u],[[135,8,[[136,12]]]]),u2=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-clock-rotate-left mr-1.5"></i> </h2> <span class="text-xs text-text-muted pr-3"> </span></div> <div class="px-4 py-2 border-b border-border flex flex-col sm:flex-row gap-2"><input type="text" class="flex-1 px-2.5 py-1.5 border border-border rounded-md bg-background text-text text-sm outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900"/> <div class="flex gap-1"></div></div> <div class="max-h-[600px] overflow-y-auto custom-scroll divide-y divide-border-muted"><!> <!></div> <!></section>'),Xa[u],[[77,0,[[78,4,[[79,8,[[80,12]]],[82,8]]],[87,4,[[88,8],[95,8]]],[113,4]]]]);function Xa(r,i){wa(new.target),ga(i,!0,Xa);let o=S(P(Jt([])),"messages"),d=S(P(0),"total"),c=S(P(""),"query"),f=S(P("all"),"roleFilter"),b=S(P(!1),"loading"),h=S(P(0),"offset");const w=50;async function L(R=!1){p(b,!0);try{const ie=new URLSearchParams({limit:String(w),offset:String(e(h))});e(c)&&ie.set("q",e(c));const qe=(await M(Nt("GET",`/api/memory/conversation/history?${ie}`)))();R?p(o,[...e(o),...qe.messages],!0):p(o,qe.messages,!0),p(d,qe.total,!0)}catch(ie){console.error(...Xt("error","loadHistory:",ie))}p(b,!1)}function j(){p(h,0),L()}function A(){p(h,e(h)+w),L(!0)}function k(R){C(R.key,"Enter")&&j()}const q=S(ma(()=>C(e(f),"all")?e(o):e(o).filter(R=>C(R.role,e(f)))),"filtered");function V(R){switch(R){case"user":return"fa-user text-info-500";case"assistant":return"fa-robot text-primary-500";case"system":return"fa-gear text-text-subtle";default:return"fa-circle text-text-subtle"}}L();var X={...ka()},N=u2(),ne=a(N),je=a(ne),we=s(a(je)),Te=s(je,2),Ke=a(Te),Ee=s(ne,2),te=a(Ee),_e=s(te,2);g(()=>Dt(_e,21,()=>[["all",l("history.all_roles")],["user",l("history.user_only")],["assistant",l("history.assistant_only")],["system",l("history.system_only")]],la,(R,ie)=>{var qe=ma(()=>vo(e(ie),2));let Se=()=>e(qe)[0];Se();let me=()=>e(qe)[1];me();var $=o2();let z;var Z=a($,!0);x(()=>{z=Qe($,1,"px-2 py-1 text-xs rounded border transition-colors",null,z,{"bg-primary-600":C(e(f),Se()),"text-white":C(e(f),Se()),"border-primary-600":C(e(f),Se()),"border-border":C(e(f),Se(),!1),"text-text-muted":C(e(f),Se(),!1),"hover:text-text":C(e(f),Se(),!1)}),n(Z,me())}),Y("click",$,function(){return p(f,Se(),!0)}),v(R,$)}),"each",Xa,96,12);var Ve=s(Ee,2),K=a(Ve);{var W=R=>{var ie=n2(),qe=a(ie);x(Se=>n(qe,Se),[()=>l("history.no_results")]),v(R,ie)};g(()=>y(K,R=>{C(e(q).length,0)&&!e(b)&&R(W)}),"if",Xa,114,8)}var Ue=s(K,2);g(()=>Dt(Ue,17,()=>e(q),R=>R.id,(R,ie)=>{var qe=d2(),Se=a(qe),me=a(Se),$=s(me,2),z=a($,!0);var Z=s($,2);{var H=D=>{var T=l2(),E=a(T);x(()=>n(E,`(${e(ie).user_id??""})`)),v(D,T)};g(()=>y(Z,D=>{e(ie).user_id&&D(H)}),"if",Xa,122,20)}var Le=s(Z,2),O=a(Le,!0);var B=s(Se,2),ue=a(B,!0);x((D,T,E)=>{Qe(me,1,`fa-solid ${D??""} text-xs w-4 text-center`),n(z,e(ie).role),n(O,T),n(ue,E)},[()=>V(e(ie).role),()=>Zr(e(ie).created_at),()=>e(ie).content.length>500?e(ie).content.slice(0,500)+"…":e(ie).content]),v(R,qe)}),"each",Xa,117,8);var Ne=s(Ve,2);{var Pe=R=>{var ie=v2(),qe=a(ie),Se=a(qe);{var me=z=>{var Z=c2();v(z,Z)};g(()=>y(Se,z=>{e(b)&&z(me)}),"if",Xa,141,16)}var $=s(Se);x(z=>{qe.disabled=e(b),n($,` ${z??""}`)},[()=>l("history.load_more")]),Y("click",qe,A),v(R,ie)};g(()=>y(Ne,R=>{e(o).length<e(d)&&R(Pe)}),"if",Xa,134,4)}return x((R,ie,qe)=>{n(we,` ${R??""}`),n(Ke,ie),St(te,"placeholder",qe)},[()=>l("history.title"),()=>l("history.total",{total:e(d)}),()=>l("history.search")]),Y("keyup",te,k),ua(te,function(){return e(c)},function(ie){p(c,ie)}),v(r,N),ha(X)}La(["keyup","click"]);ge[u]="src/components/SettingsTab.svelte";var f2=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),ge[u],[[269,12]]),p2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),ge[u],[[282,24]]),_2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-red-900/40 text-red-400 border-red-800/50"> </span>'),ge[u],[[284,24]]),m2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),ge[u],[[286,24]]),x2=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div>'),ge[u],[[301,24,[[302,28],[303,28]]]]),b2=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-amber-400 text-xs"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </span></div>'),ge[u],[[308,24,[[309,28],[310,28,[[311,32]]]]]]),g2=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div>'),ge[u],[[316,24,[[317,28],[318,28]]]]),h2=_(m('<div class="mt-2 p-2 rounded bg-zinc-800/40 border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> </p></div>'),ge[u],[[322,24,[[323,28,[[324,32]]]]]]),y2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),ge[u],[[343,24]]),w2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),ge[u],[[345,24]]),k2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-amber-900/40 text-amber-400 border-amber-800/50"> </span>'),ge[u],[[347,24]]),$2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-red-900/40 text-red-400 border-red-800/50"> </span>'),ge[u],[[349,24]]),T2=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div>'),ge[u],[[367,28,[[368,32],[369,32]]]]),E2=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-amber-400 text-xs"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </span></div>'),ge[u],[[374,28,[[375,32],[376,32,[[377,36]]]]]]),S2=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-green-400 font-mono text-xs"> </span></div>'),ge[u],[[382,28,[[383,32],[384,32]]]]),C2=_(m('<img alt="WhatsApp QR Code" class="mx-auto w-52 h-52 rounded-lg shadow-lg"/>'),ge[u],[[395,36]]),A2=_(m('<div class="w-52 h-52 mx-auto bg-zinc-800 rounded-lg flex items-center justify-center"><span class="text-text-subtle text-sm"> </span></div>'),ge[u],[[397,36,[[398,40]]]]),P2=_(m('<div class="mt-3 p-4 rounded-lg bg-surface border border-amber-800/50 text-center"><p class="text-sm text-amber-400 mb-3"><i class="fa-solid fa-qrcode mr-1.5"></i> </p> <!> <button class="mt-3 px-4 py-1.5 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div>'),ge[u],[[390,28,[[391,32,[[392,36]]],[401,32,[[405,36]]]]]]),j2=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div> <!> <!> <!>',1),ge[u],[[358,24,[[359,28],[360,28]]],[362,24,[[363,28],[364,28]]]]),O2=_(m('<div class="mt-2 p-2 rounded bg-zinc-800/40 border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> </p></div>'),ge[u],[[410,24,[[411,28,[[412,32]]]]]]),L2=_(m('<div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-brands fa-telegram text-blue-400 text-lg"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-3 space-y-2 text-sm"><div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text"> </span></div> <div class="flex justify-between"><span class="text-text-muted"> </span> <span> </span></div> <!> <!> <!></div></div> <div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-brands fa-whatsapp text-green-400 text-lg"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-3 space-y-2 text-sm"><div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text"> </span></div> <!></div></div> <div class="flex items-center gap-3 p-2.5 rounded-lg bg-surface-elevated border border-border/50"><i class="fa-solid fa-circle-info text-text-subtle"></i> <span class="text-xs text-text-subtle"> <!> </span></div>',1),ge[u],[[272,12,[[273,16,[[274,20,[[275,24],[276,24,[[277,28],[278,28]]]]]]],[289,16,[[290,20,[[291,24],[292,24]]],[294,20,[[295,24],[296,24]]]]]]],[333,12,[[334,16,[[335,20,[[336,24],[337,24,[[338,28],[339,28]]]]]]],[352,16,[[353,20,[[354,24],[355,24]]]]]]],[421,12,[[422,16],[423,16]]]]),R2=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),ge[u],[[444,12]]),M2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),ge[u],[[455,28]]),N2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),ge[u],[[457,28]]),I2=_(m("<p> </p>"),ge[u],[[462,28]]),D2=_(m("<p> </p>"),ge[u],[[464,28]]),F2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),ge[u],[[477,28]]),U2=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),ge[u],[[481,28]]),z2=_(m('<div class="flex items-center gap-2 p-2 rounded-md bg-surface border border-border/50"><i></i> <span class="text-sm text-text"> </span> <span class="text-xs px-1.5 py-0.5 rounded bg-primary-900/30 text-primary-400 border border-primary-800/30 ml-auto">SSO</span></div>'),ge[u],[[488,36,[[489,40],[490,40],[491,40]]]]),B2=_(m('<div class="space-y-1.5"></div>'),ge[u],[[486,28]]),q2=_(m('<p class="text-sm text-text-subtle"> </p>'),ge[u],[[496,28]]),G2=_(m('<div class="p-3 rounded-lg bg-red-900/20 border border-red-800/40"><p class="text-sm text-red-400"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </p></div>'),ge[u],[[505,16,[[506,20,[[507,24]]]]]]),V2=_(m(`<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-key text-amber-400"></i> <span class="text-sm font-medium text-text"> </span></div> <!></div> <div class="p-3 text-sm text-text-subtle"><!></div></div> <div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-right-to-bracket text-primary-400"></i> <span class="text-sm font-medium text-text"> </span></div> <!></div> <div class="p-3"><!></div></div></div> <!> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> Configure SSO in your <code class="px-1 py-0.5 bg-zinc-900 rounded text-text-muted">config.toml</code>:</p> <code class="block mt-2 whitespace-pre-wrap text-xs text-text-subtle leading-relaxed">[dashboard]
password_enabled = true
sso_providers = ["google", "github"]
sso_allowed_emails = ["you@example.com"]</code> <p class="text-xs text-text-subtle mt-2">SSO reuses the same OAuth client credentials (e.g. <code class="px-1 py-0.5 bg-zinc-900 rounded text-text-muted">GOOGLE_CLIENT_ID</code>). The SSO callback URL is <code class="px-1 py-0.5 bg-zinc-900 rounded text-text-muted">/api/auth/sso/&#123;provider&#125;/callback</code>.</p></div>`,1),ge[u],[[446,12,[[448,16,[[449,20,[[450,24,[[451,28],[452,28]]]]],[460,20]]],[470,16,[[471,20,[[472,24,[[473,28],[474,28]]]]],[484,20]]]]],[513,12,[[514,16,[[515,20],[516,42]]],[518,16],[522,16,[[523,71],[523,183]]]]]]),H2=_(m('<span class="text-xs text-text-muted pr-3"> </span>'),ge[u],[[549,12]]),K2=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),ge[u],[[556,12]]),W2=_(m('<button class="px-2 py-0.5 text-xs border border-border rounded bg-surface hover:bg-surface-elevated transition-colors disabled:opacity-50"><i></i></button>'),ge[u],[[577,32,[[583,36]]]]),Y2=_(m('<span class="token-health-expired text-[10px]"><i class="fa-solid fa-circle-xmark"></i></span>'),ge[u],[[611,48,[[612,52]]]]),J2=_(m('<span class="token-health-warning text-[10px]"><i class="fa-solid fa-circle-exclamation"></i></span>'),ge[u],[[615,48,[[616,52]]]]),Q2=_(m('<span class="token-health-good text-[10px]"><i class="fa-solid fa-circle-check"></i></span>'),ge[u],[[619,48,[[620,52]]]]),X2=_(m('<span class="text-error-400"><i class="fa-solid fa-clock mr-0.5"></i> </span>'),ge[u],[[627,52,[[628,56]]]]),Z2=_(m('<span class="text-warning-400"><i class="fa-solid fa-clock mr-0.5"></i> </span>'),ge[u],[[631,52,[[632,56]]]]),ex=_(m('<span><i class="fa-solid fa-clock mr-0.5"></i> </span>'),ge[u],[[635,52,[[636,56]]]]),tx=_(m('<span><i class="fa-solid fa-infinity mr-0.5"></i> </span>'),ge[u],[[640,48,[[640,54]]]]),ax=_(m("<span> </span>"),ge[u],[[643,48]]),rx=_(m('<span class="text-amber-400"><i class="fa-solid fa-triangle-exclamation"></i> </span>'),ge[u],[[646,48,[[647,52]]]]),sx=_(m('<span class="text-[10px] text-text-subtle/70"> </span>'),ge[u],[[651,48]]),ix=_(m('<a class="px-2 py-1 text-xs border border-warning-600/50 rounded bg-warning-500/10 text-warning-400 hover:bg-warning-500/20 transition-colors"><i class="fa-solid fa-arrow-rotate-right mr-1"></i> </a>'),ge[u],[[657,44,[[662,48]]]]),ox=_(m('<div class="flex items-center justify-between p-2 rounded-md bg-surface border border-border/50"><div class="min-w-0 flex-1 space-y-0.5"><div class="flex items-center gap-2"><span class="text-sm text-text truncate"> </span> <!></div> <div class="flex items-center gap-2 text-xs text-text-subtle flex-wrap"><!> <!> <!> <!></div></div> <div class="flex gap-1.5 ml-2 flex-shrink-0"><!> <button class="px-2 py-1 text-xs border border-border rounded bg-surface hover:bg-surface-elevated transition-colors disabled:opacity-50"><i></i></button> <button class="px-2 py-1 text-xs border border-red-800/50 rounded bg-red-900/20 text-red-400 hover:bg-red-900/40 transition-colors" title="Disconnect"><i class="fa-solid fa-xmark"></i></button></div></div>'),ge[u],[[605,32,[[606,36,[[607,40,[[608,44]]],[624,40]]],[655,36,[[665,40,[[671,44]]],[673,40,[[678,44]]]]]]]]),nx=_(m('<div class="mt-1.5 space-y-1.5 pl-7"></div>'),ge[u],[[599,24]]),lx=_(m('<div class="mb-3 last:mb-0"><div role="button" tabindex="0" class="w-full flex items-center justify-between p-2.5 rounded-lg bg-surface-elevated border border-border hover:border-text-subtle/30 transition-colors cursor-pointer"><div class="flex items-center gap-2"><i></i> <span class="text-sm font-medium text-text"> </span> <span class="text-xs px-1.5 py-0.5 rounded-full bg-green-900/40 text-green-400 border border-green-800/50"> </span></div> <div class="flex items-center gap-2"><!> <a class="px-2 py-0.5 text-xs border border-border rounded bg-surface hover:bg-surface-elevated transition-colors text-text-muted"><i class="fa-solid fa-plus"></i></a> <i></i></div></div> <!></div>'),ge[u],[[560,16,[[561,20,[[568,24,[[569,28],[570,28],[571,28]]],[575,24,[[586,28,[[592,32]]],[594,28]]]]]]]]),dx=_(m('<a class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md border border-border bg-surface hover:bg-surface-elevated hover:border-text-subtle/30 transition-colors text-text"><i></i> </a>'),ge[u],[[695,32,[[699,36]]]]),cx=_(m('<span class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-md border border-border/50 bg-surface text-text-subtle opacity-50 cursor-not-allowed"><i></i> </span>'),ge[u],[[702,32,[[706,36]]]]),vx=_(m('<div class="mt-3 pt-3 border-t border-border/50"><p class="text-xs text-text-subtle mb-2 uppercase tracking-wider"> </p> <div class="flex flex-wrap gap-2"></div></div>'),ge[u],[[690,16,[[691,20],[692,20]]]]),ux=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),ge[u],[[715,16]]),fx=_(m("<!> <!> <!>",1),ge[u],[]),px=_(m("<option> </option>"),ge[u],[[751,20]]),_x=_(m('<span class="text-xs text-text-subtle"> </span>'),ge[u],[[776,24]]),mx=_(m('<span class="text-xs text-text-subtle"> </span>'),ge[u],[[778,24]]),xx=_(m("<option></option>"),ge[u],[[805,32]]),bx=_(m("<option></option>"),ge[u],[[808,32]]),gx=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),ge[u],[[843,28]]),hx=_(m('<i class="fa-solid fa-floppy-disk mr-1"></i> ',1),ge[u],[[845,28]]),yx=_(m("<span> </span>"),ge[u],[[849,24]]),wx=_(m(`<div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm"><div class="p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-text-muted text-xs uppercase tracking-wide"> </span> <p class="text-text font-medium mt-1"> </p></div> <div class="p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-text-muted text-xs uppercase tracking-wide"> </span> <p class="text-text font-medium mt-1"> </p> <!></div></div> <div class="space-y-3"><div><div class="flex items-center gap-2 mb-1"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded border border-border bg-surface-elevated text-text-muted hover:text-text transition-colors"><i class="fa-solid fa-crosshairs mr-0.5"></i> </button></div> <div class="relative"><input type="text" list="tz-list" class="w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text text-sm
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50"/> <datalist id="tz-list"><!><!></datalist></div> <p class="text-xs text-text-subtle mt-1"> </p></div> <div><div class="flex items-center gap-2 mb-1"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded border border-border bg-surface-elevated text-text-muted hover:text-text transition-colors"><i class="fa-solid fa-crosshairs mr-0.5"></i> </button></div> <input type="text" class="w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text text-sm
                               placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50"/> <p class="text-xs text-text-subtle mt-1"> </p></div> <div class="flex items-center gap-3"><button class="px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                               hover:bg-primary-500 transition-colors disabled:opacity-50"><!></button> <!></div></div>`,1),ge[u],[[767,12,[[768,16,[[769,20],[770,20]]],[772,16,[[773,20],[774,20]]]]],[783,12,[[784,16,[[785,20,[[786,24],[787,24,[[791,28]]]]],[794,20,[[795,24],[803,24]]],[812,20]]],[815,16,[[816,20,[[817,24],[818,24,[[822,28]]]]],[825,20],[832,20]]],[835,16,[[836,20]]]]]]),kx=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),ge[u],[[854,12]]),$x=_(m(`<!> <!> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4 mt-4"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-tower-broadcast mr-1.5"></i> </h2> <button class="mr-3 px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div> <div class="p-4 space-y-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-shield-halved mr-1.5"></i> </h2></div> <div class="p-4 space-y-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-lock mr-1.5"></i> </h2></div> <div class="p-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-link mr-1.5"></i> </h2> <!></div> <div class="p-3"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-language mr-1.5"></i> </h2></div> <div class="p-4 space-y-3"><p class="text-xs text-text-subtle"> </p> <div class="flex items-center gap-3"><select class="px-3 py-2 rounded-md border border-border bg-surface-elevated text-text text-sm
                       focus:outline-none focus:ring-2 focus:ring-primary-500/50"></select></div></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-clock mr-1.5"></i> </h2></div> <div class="p-4 space-y-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-circle-info mr-1.5"></i> </h2></div> <div class="p-4 space-y-3 text-xs text-text-subtle"><p> </p> <div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">Telegram</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed">[telegram]
enabled = true
allowed_chat_ids = [123456]

# env: TELEGRAM_BOT_TOKEN</code></div> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">WhatsApp</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed">[whatsapp]
enabled = true
bridge_port = 3033
webhook_port = 3030
allowed_numbers = ["+1234567890"]</code></div> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">Dashboard SSO</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed">[dashboard]
password_enabled = true
sso_providers = ["google", "github"]
sso_allowed_emails = ["admin@example.com"]</code></div> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">OAuth Providers</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed"># Per-provider env vars:
GOOGLE_CLIENT_ID / GOOGLE_CLIENT_SECRET
GITHUB_CLIENT_ID / GITHUB_CLIENT_SECRET
DISCORD_CLIENT_ID / DISCORD_CLIENT_SECRET
# ... etc. See config.example.toml</code></div></div></div></section> <section class="mt-6"><!></section>`,1),ge[u],[[255,0,[[256,4,[[257,8,[[258,12]]],[260,8,[[264,12]]]]],[267,4]]],[436,0,[[437,4,[[438,8,[[439,12]]]]],[442,4]]],[531,0,[[532,4,[[533,8,[[534,12]]]]],[537,4]]],[543,0,[[544,4,[[545,8,[[546,12]]]]],[554,4]]],[722,0,[[723,4,[[724,8,[[725,12]]]]],[728,4,[[729,8],[730,8,[[731,12]]]]]]],[759,0,[[760,4,[[761,8,[[762,12]]]]],[765,4]]],[860,0,[[861,4,[[862,8,[[863,12]]]]],[866,4,[[867,8],[868,8,[[869,12,[[870,16],[871,16]]],[877,12,[[878,16],[879,16]]],[885,12,[[886,16],[887,16]]],[892,12,[[893,16],[894,16]]]]]]]]],[905,0]]);function ge(r,i){wa(new.target),ga(i,!0,ge);let o=S(P(null),"msgConfig"),d=S(P(null),"oauth"),c=S(P(null),"authInfo"),f=S(P(null),"refreshing"),b=S(P(Jt(new Set)),"expandedProviders"),h=S(P(null),"waQrImage");async function w(){var se,ye,et,dt;try{if(p(o,(await M(Nt("GET","/api/messaging/config")))(),!0),C((ye=(se=e(o))==null?void 0:se.whatsapp)==null?void 0:ye.bridge_status,"pairing")&&((dt=(et=e(o))==null?void 0:et.whatsapp)!=null&&dt.qr))try{const tt=(await M(Nt("GET","/api/messaging/whatsapp/qr")))();p(h,(tt==null?void 0:tt.qr)??null,!0)}catch{p(h,null)}else p(h,null)}catch(tt){console.error(...Xt("error","loadConfig:",tt))}}async function L(){try{p(d,(await M(Nt("GET","/api/oauth/status")))(),!0)}catch(se){console.error(...Xt("error","loadOAuth:",se))}}async function j(){try{p(c,(await M(Nt("GET","/api/auth/info")))(),!0)}catch(se){console.error(...Xt("error","loadAuth:",se))}}async function A(se,ye){p(f,ye??`${se}:all`,!0);try{const et=ye?`/api/oauth/${se}/refresh?account=${encodeURIComponent(ye)}`:`/api/oauth/${se}/refresh`;(await M(Nt("POST",et)))(),(await M(L()))()}catch(et){console.error(...Xt("error","refreshToken:",et))}finally{p(f,null)}}async function k(se,ye,et){if(confirm(l("settings.disconnect_confirm",{email:et,provider:se})))try{(await M(Nt("POST",`/api/oauth/${se}/disconnect/${encodeURIComponent(ye)}`)))(),(await M(L()))()}catch(dt){console.error(...Xt("error","disconnect:",dt))}}function q(se){const ye=new Set(e(b));ye.has(se)?ye.delete(se):ye.add(se),p(b,ye,!0)}function V(se){return se.filter(ye=>ye.accounts.length>0)}function X(se){return se.filter(ye=>C(ye.accounts.length,0))}let N=S(P(null),"tzInfo"),ne=S(P(Jt([])),"allTimezones"),je=S(P(""),"selectedTimezone"),we=S(P(""),"selectedLocale"),Te=S(P(!1),"tzSaving"),Ke=S(P(""),"tzMessage");async function Ee(){try{const se=va.userId||"",ye=(await M(Nt("GET",`/api/timezone?user_id=${encodeURIComponent(se)}`)))();p(N,ye,!0),p(je,(ye==null?void 0:ye.user_timezone)||"",!0),p(we,(ye==null?void 0:ye.user_locale)||"",!0)}catch(se){console.error(...Xt("error","loadTimezone:",se))}}async function te(){if(!(e(ne).length>0))try{const se=(await M(Nt("GET","/api/timezones")))();p(ne,(se==null?void 0:se.timezones)??[],!0)}catch(se){console.error(...Xt("error","loadTimezoneList:",se))}}async function _e(){if(va.userId){p(Te,!0),p(Ke,"");try{const se=(await M(Nt("POST","/api/timezone",{user_id:va.userId,timezone:e(je)||void 0,locale:e(we)||void 0})))();p(Ke,se!=null&&se.ok?l("common.saved"):(se==null?void 0:se.message)??l("common.failed"),!0),(await M(Ee()))(),setTimeout(()=>{p(Ke,"")},3e3)}catch{p(Ke,l("common.network_error"),!0)}finally{p(Te,!1)}}}function Ve(){try{p(je,Intl.DateTimeFormat().resolvedOptions().timeZone,!0)}catch{p(je,"UTC")}}function K(){try{p(we,navigator.language||"en-US",!0)}catch{p(we,"en-US")}}const W=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","America/Vancouver","America/Sao_Paulo","America/Mexico_City","Europe/London","Europe/Paris","Europe/Berlin","Europe/Moscow","Asia/Tokyo","Asia/Shanghai","Asia/Kolkata","Asia/Singapore","Asia/Dubai","Australia/Sydney","Australia/Melbourne","Pacific/Auckland","Africa/Cairo","Africa/Johannesburg"];Ga(()=>{C(kt.currentTab,"settings")&&(kt.refreshCounter,w(),L(),j(),Ee(),te())});var Ue={...ka()},Ne=$x(),Pe=Ae(Ne);g(()=>Mr(Pe,{}),"component",ge,249,0,{componentTag:"PersonaEditor"});var R=s(Pe,2);g(()=>Xa(R,{}),"component",ge,252,0,{componentTag:"ConversationHistory"});var ie=s(R,2),qe=a(ie),Se=a(qe),me=s(a(Se)),$=s(Se,2),z=s(a($)),Z=s(qe,2),H=a(Z);{var Le=se=>{var ye=f2(),et=a(ye);x(dt=>n(et,dt),[()=>l("common.loading")]),v(se,ye)},O=se=>{var ye=L2(),et=Ae(ye),dt=a(et),tt=a(dt),Ye=s(a(tt),2),at=a(Ye),ft=a(at),wt=s(at,2),Ge=a(wt),bt=s(tt,2);{var pt=He=>{var nt=p2(),It=a(nt);x(Gt=>n(It,Gt),[()=>l("common.connected")]),v(He,nt)},vt=He=>{var nt=_2(),It=a(nt);x(Gt=>n(It,Gt),[()=>l("common.disconnected")]),v(He,nt)},Pt=He=>{var nt=m2(),It=a(nt);x(Gt=>n(It,Gt),[()=>l("common.disabled")]),v(He,nt)};g(()=>y(bt,He=>{e(o).telegram.enabled&&e(o).telegram.connected?He(pt):e(o).telegram.enabled?He(vt,1):He(Pt,!1)}),"if",ge,281,20)}var Et=s(dt,2),jt=a(Et),Ft=a(jt),Ht=a(Ft),Ut=s(Ft,2),Kt=a(Ut),na=s(jt,2),ta=a(na),Ea=a(ta),pa=s(ta,2),zt=a(pa),da=s(na,2);{var ia=He=>{var nt=x2(),It=a(nt),Gt=a(It),Ma=s(It,2),ur=a(Ma);x((Na,Bt)=>{n(Gt,Na),n(ur,Bt)},[()=>l("settings.allowed_chat_ids"),()=>e(o).telegram.allowed_chat_ids.join(", ")]),v(He,nt)},aa=He=>{var nt=b2(),It=a(nt),Gt=a(It),Ma=s(It,2),ur=s(a(Ma));x((Na,Bt)=>{n(Gt,Na),n(ur,` ${Bt??""}`)},[()=>l("settings.allowed_chat_ids"),()=>l("settings.none_all_denied")]),v(He,nt)};g(()=>y(da,He=>{e(o).telegram.allowed_chat_ids.length>0?He(ia):He(aa,!1)}),"if",ge,300,20)}var $a=s(da,2);{var gt=He=>{var nt=g2(),It=a(nt),Gt=a(It),Ma=s(It,2),ur=a(Ma);x(Na=>{n(Gt,Na),n(ur,e(o).telegram.primary_channel)},[()=>l("settings.primary_channel")]),v(He,nt)};g(()=>y($a,He=>{e(o).telegram.primary_channel&&He(gt)}),"if",ge,315,20)}var Ot=s($a,2);{var Lt=He=>{var nt=h2(),It=a(nt),Gt=s(a(It));x(Ma=>n(Gt,` ${Ma??""}`),[()=>l("settings.enable_telegram_hint")]),v(He,nt)};g(()=>y(Ot,He=>{e(o).telegram.enabled||He(Lt)}),"if",ge,321,20)}var Mt=s(et,2),fa=a(Mt),Aa=a(fa),Ra=s(a(Aa),2),Zt=a(Ra),Ya=a(Zt),vr=s(Zt,2),sr=a(vr),ir=s(Aa,2);{var br=He=>{var nt=y2(),It=a(nt);x(Gt=>n(It,Gt),[()=>l("common.disabled")]),v(He,nt)},Er=He=>{var nt=w2(),It=a(nt);x(Gt=>n(It,Gt),[()=>l("common.connected")]),v(He,nt)},or=He=>{var nt=k2(),It=a(nt);x(Gt=>n(It,Gt),[()=>l("settings.pairing")]),v(He,nt)},Dr=He=>{var nt=$2(),It=a(nt);x(()=>n(It,e(o).whatsapp.bridge_status)),v(He,nt)};g(()=>y(ir,He=>{e(o).whatsapp.enabled?C(e(o).whatsapp.bridge_status,"connected")?He(Er,1):C(e(o).whatsapp.bridge_status,"pairing")?He(or,2):He(Dr,!1):He(br)}),"if",ge,342,20)}var Za=s(fa,2),qt=a(Za),Wt=a(qt),xa=a(Wt),ba=s(Wt,2),rs=a(ba),Sr=s(qt,2);{var Cr=He=>{var nt=j2(),It=Ae(nt),Gt=a(It),Ma=a(Gt),ur=s(Gt,2),Na=a(ur),Bt=s(It,2),Ta=a(Bt),tr=a(Ta),Br=s(Ta,2),As=a(Br),ss=s(Bt,2);{var qr=Ja=>{var fr=T2(),Ar=a(fr),Ps=a(Ar),ps=s(Ar,2),js=a(ps);x((Os,ti)=>{n(Ps,Os),n(js,ti)},[()=>l("settings.allowed_numbers"),()=>e(o).whatsapp.allowed_numbers.join(", ")]),v(Ja,fr)},ki=Ja=>{var fr=E2(),Ar=a(fr),Ps=a(Ar),ps=s(Ar,2),js=s(a(ps));x((Os,ti)=>{n(Ps,Os),n(js,` ${ti??""}`)},[()=>l("settings.allowed_numbers"),()=>l("settings.none_all_denied")]),v(Ja,fr)};g(()=>y(ss,Ja=>{e(o).whatsapp.allowed_numbers.length>0?Ja(qr):Ja(ki,!1)}),"if",ge,366,24)}var $i=s(ss,2);{var yl=Ja=>{var fr=S2(),Ar=a(fr),Ps=a(Ar),ps=s(Ar,2),js=a(ps);x(Os=>{n(Ps,Os),n(js,e(o).whatsapp.connected_number)},[()=>l("settings.connected_number")]),v(Ja,fr)};g(()=>y($i,Ja=>{e(o).whatsapp.connected_number&&Ja(yl)}),"if",ge,381,24)}var wl=s($i,2);{var kl=Ja=>{var fr=P2(),Ar=a(fr),Ps=s(a(Ar)),ps=s(Ar,2);{var js=_s=>{var Ls=C2();x(()=>St(Ls,"src",e(h))),v(_s,Ls)},Os=_s=>{var Ls=A2(),Tl=a(Ls),El=a(Tl);x(Sl=>n(El,Sl),[()=>l("settings.waiting_qr")]),v(_s,Ls)};g(()=>y(ps,_s=>{e(h)?_s(js):_s(Os,!1)}),"if",ge,394,32)}var ti=s(ps,2),$l=s(a(ti));x((_s,Ls)=>{n(Ps,` ${_s??""}`),n($l,` ${Ls??""}`)},[()=>l("settings.scan_qr"),()=>l("settings.refresh_qr")]),Y("click",ti,w),v(Ja,fr)};g(()=>y(wl,Ja=>{C(e(o).whatsapp.bridge_status,"pairing")&&Ja(kl)}),"if",ge,389,24)}x((Ja,fr)=>{n(Ma,Ja),n(Na,e(o).whatsapp.bridge_port),n(tr,fr),n(As,e(o).whatsapp.webhook_port)},[()=>l("settings.bridge_port"),()=>l("settings.webhook_port")]),v(He,nt)},Fr=He=>{var nt=O2(),It=a(nt),Gt=s(a(It));x(Ma=>n(Gt,` ${Ma??""}`),[()=>l("settings.enable_whatsapp_hint")]),v(He,nt)};g(()=>y(Sr,He=>{e(o).whatsapp.enabled?He(Cr):He(Fr,!1)}),"if",ge,357,20)}var Ur=s(Mt,2),Ss=s(a(Ur),2),er=a(Ss),fs=s(er);{var zr=He=>{var nt=Jr();x(It=>n(nt,`(${It??""})`),[()=>e(o).active_platforms.join(", ")]),v(He,nt)};g(()=>y(fs,He=>{e(o).active_platforms.length>0&&He(zr)}),"if",ge,425,20)}var Cs=s(fs);x((He,nt,It,Gt,Ma,ur,Na,Bt,Ta,tr,Br,As)=>{n(ft,He),n(Ge,nt),n(Ht,It),n(Kt,Gt),n(Ea,Ma),Qe(pa,1,e(o).telegram.has_token?"text-green-400":"text-red-400"),n(zt,ur),n(Ya,Na),n(sr,Bt),n(xa,Ta),n(rs,tr),n(er,`${Br??""} `),n(Cs,` — ${As??""}`)},[()=>l("settings.telegram"),()=>l("settings.telegram_desc"),()=>l("common.enabled"),()=>e(o).telegram.enabled?l("common.yes"):l("common.no"),()=>l("settings.bot_token"),()=>e(o).telegram.has_token?l("settings.bot_token_set"):l("settings.bot_token_not_set"),()=>l("settings.whatsapp"),()=>l("settings.whatsapp_desc"),()=>l("common.enabled"),()=>e(o).whatsapp.enabled?l("common.yes"):l("common.no"),()=>l("settings.active_platforms",{count:e(o).active_platforms.length}),()=>l("settings.active_platforms_detail")]),v(se,ye)};g(()=>y(H,se=>{e(o)?se(O,!1):se(Le)}),"if",ge,268,8)}var B=s(ie,2),ue=a(B),D=a(ue),T=s(a(D)),E=s(ue,2),U=a(E);{var J=se=>{var ye=R2(),et=a(ye);x(dt=>n(et,dt),[()=>l("common.loading")]),v(se,ye)},xe=se=>{var ye=V2(),et=Ae(ye),dt=a(et),tt=a(dt),Ye=a(tt),at=s(a(Ye),2),ft=a(at),wt=s(Ye,2);{var Ge=gt=>{var Ot=M2(),Lt=a(Ot);x(Mt=>n(Lt,Mt),[()=>l("common.enabled")]),v(gt,Ot)},bt=gt=>{var Ot=N2(),Lt=a(Ot);x(Mt=>n(Lt,Mt),[()=>l("common.disabled")]),v(gt,Ot)};g(()=>y(wt,gt=>{e(c).password_enabled?gt(Ge):gt(bt,!1)}),"if",ge,454,24)}var pt=s(tt,2),vt=a(pt);{var Pt=gt=>{var Ot=I2(),Lt=a(Ot);x(Mt=>n(Lt,Mt),[()=>l("settings.password_active")]),v(gt,Ot)},Et=gt=>{var Ot=D2(),Lt=a(Ot);x(Mt=>n(Lt,Mt),[()=>l("settings.password_disabled")]),v(gt,Ot)};g(()=>y(vt,gt=>{e(c).password_enabled?gt(Pt):gt(Et,!1)}),"if",ge,461,24)}var jt=s(dt,2),Ft=a(jt),Ht=a(Ft),Ut=s(a(Ht),2),Kt=a(Ut),na=s(Ht,2);{var ta=gt=>{var Ot=F2(),Lt=a(Ot);x(Mt=>n(Lt,Mt),[()=>l("settings.sso_configured",{count:e(c).sso_providers.length})]),v(gt,Ot)},Ea=gt=>{var Ot=U2(),Lt=a(Ot);x(Mt=>n(Lt,Mt),[()=>l("common.none")]),v(gt,Ot)};g(()=>y(na,gt=>{e(c).sso_providers.length>0?gt(ta):gt(Ea,!1)}),"if",ge,476,24)}var pa=s(Ft,2),zt=a(pa);{var da=gt=>{var Ot=B2();g(()=>Dt(Ot,21,()=>e(c).sso_providers,la,(Lt,Mt)=>{var fa=z2(),Aa=a(fa),Ra=s(Aa,2),Zt=a(Ra,!0);x(()=>{Qe(Aa,1,`${e(Mt).icon??""} text-sm w-5 text-center`),n(Zt,e(Mt).name)}),v(Lt,fa)}),"each",ge,487,32),v(gt,Ot)},ia=gt=>{var Ot=q2(),Lt=a(Ot);x(Mt=>n(Lt,Mt),[()=>l("settings.no_sso")]),v(gt,Ot)};g(()=>y(zt,gt=>{e(c).sso_providers.length>0?gt(da):gt(ia,!1)}),"if",ge,485,24)}var aa=s(et,2);{var $a=gt=>{var Ot=G2(),Lt=a(Ot),Mt=s(a(Lt));x(fa=>n(Mt,` ${fa??""}`),[()=>l("settings.lockout_warning")]),v(gt,Ot)};g(()=>y(aa,gt=>{!e(c).password_enabled&&C(e(c).sso_providers.length,0)&&gt($a)}),"if",ge,504,12)}x((gt,Ot)=>{n(ft,gt),n(Kt,Ot)},[()=>l("settings.password_login"),()=>l("settings.sso_providers")]),v(se,ye)};g(()=>y(U,se=>{e(c)?se(xe,!1):se(J)}),"if",ge,443,8)}var fe=s(B,2),F=a(fe),he=a(F),Xe=s(a(he)),yt=s(F,2),ht=a(yt);g(()=>sa(ht,{}),"component",ge,538,8,{componentTag:"TwoFactorPanel"});var ct=s(fe,2),oe=a(ct),le=a(oe),I=s(a(le)),ae=s(le,2);{var G=se=>{var ye=H2(),et=a(ye);x((dt,tt)=>n(et,`${dt??""} account${tt??""}`),[()=>V(e(d).providers).reduce((dt,tt)=>dt+tt.accounts.length,0),()=>C(V(e(d).providers).reduce((dt,tt)=>dt+tt.accounts.length,0),1,!1)?"s":""]),v(se,ye)};g(()=>y(ae,se=>{e(d)&&se(G)}),"if",ge,548,8)}var ee=s(oe,2),re=a(ee);{var ke=se=>{var ye=K2(),et=a(ye);x(dt=>n(et,dt),[()=>l("common.loading")]),v(se,ye)},ve=se=>{var ye=fx(),et=Ae(ye);g(()=>Dt(et,17,()=>V(e(d).providers),wt=>wt.id,(wt,Ge)=>{var bt=lx(),pt=a(bt),vt=a(pt),Pt=a(vt),Et=s(Pt,2),jt=a(Et,!0);var Ft=s(Et,2),Ht=a(Ft,!0);var Ut=s(vt,2),Kt=a(Ut);{var na=ia=>{var aa=W2(),$a=a(aa);let gt;x(Ot=>{aa.disabled=C(e(f),null,!1),St(aa,"title",Ot),gt=Qe($a,1,"fa-solid fa-arrows-rotate",null,gt,{"fa-spin":C(e(f),`${e(Ge).id}:all`)})},[()=>l("settings.refresh_all")]),Y("click",aa,function(Lt){Lt.stopPropagation(),A(e(Ge).id)}),v(ia,aa)};g(()=>y(Kt,ia=>{e(Ge).accounts.length>1&&ia(na)}),"if",ge,576,28)}var ta=s(Kt,2),Ea=s(ta,2);var pa=s(pt,2);{var zt=ia=>{var aa=nx();g(()=>Dt(aa,21,()=>e(Ge).accounts,$a=>$a.account,($a,gt)=>{const Ot=S(ma(()=>e(gt).expires_at?new Date(e(gt).expires_at):null),"expiresAt");e(Ot);const Lt=S(ma(()=>new Date),"now");e(Lt);const Mt=S(ma(()=>e(Ot)?e(Ot)<e(Lt):!1),"isExpired");e(Mt);const fa=S(ma(()=>e(Ot)?!e(Mt)&&e(Ot).getTime()-e(Lt).getTime()<1440*60*1e3:!1),"isExpiringSoon");e(fa);var Aa=ox(),Ra=a(Aa),Zt=a(Ra),Ya=a(Zt),vr=a(Ya,!0);var sr=s(Ya,2);{var ir=He=>{var nt=Y2();x(It=>St(nt,"title",It),[()=>l("oauth.health_expired")]),v(He,nt)},br=He=>{var nt=J2();x(It=>St(nt,"title",It),[()=>l("oauth.health_warning")]),v(He,nt)},Er=He=>{var nt=Q2();x(It=>St(nt,"title",It),[()=>l("oauth.health_good")]),v(He,nt)};g(()=>y(sr,He=>{e(Mt)?He(ir):e(fa)?He(br,1):He(Er,!1)}),"if",ge,610,44)}var or=s(Zt,2),Dr=a(or);{var Za=He=>{var nt=Oa(),It=Ae(nt);{var Gt=Na=>{var Bt=X2(),Ta=s(a(Bt),1,!0);x(tr=>n(Ta,tr),[()=>l("oauth.health_expired")]),v(Na,Bt)},Ma=Na=>{var Bt=Z2(),Ta=s(a(Bt),1,!0);x(tr=>n(Ta,tr),[()=>l("oauth.health_warning")]),v(Na,Bt)},ur=Na=>{var Bt=ex(),Ta=s(a(Bt),1,!0);x(tr=>n(Ta,tr),[()=>Zr(e(gt).expires_at)]),v(Na,Bt)};g(()=>y(It,Na=>{e(Mt)?Na(Gt):e(fa)?Na(Ma,1):Na(ur,!1)}),"if",ge,626,48)}v(He,nt)},qt=He=>{var nt=tx(),It=s(a(nt),1,!0);x(Gt=>n(It,Gt),[()=>l("oauth.never_expires")]),v(He,nt)};g(()=>y(Dr,He=>{e(gt).expires_at?He(Za):He(qt,!1)}),"if",ge,625,44)}var Wt=s(Dr,2);{var xa=He=>{var nt=ax(),It=a(nt);x((Gt,Ma)=>n(It,`${Gt??""} ${Ma??""}`),[()=>l("settings.updated"),()=>Zr(e(gt).updated_at)]),v(He,nt)};g(()=>y(Wt,He=>{e(gt).updated_at&&He(xa)}),"if",ge,642,44)}var ba=s(Wt,2);{var rs=He=>{var nt=rx(),It=s(a(nt));x(Gt=>n(It,` ${Gt??""}`),[()=>l("settings.no_refresh_token")]),v(He,nt)};g(()=>y(ba,He=>{e(gt).has_refresh_token||He(rs)}),"if",ge,645,44)}var Sr=s(ba,2);{var Cr=He=>{var nt=sx(),It=a(nt,!0);x(Gt=>n(It,Gt),[()=>e(gt).scopes.join(", ")]),v(He,nt)};g(()=>y(Sr,He=>{var nt;((nt=e(gt).scopes)==null?void 0:nt.length)>0&&He(Cr)}),"if",ge,650,44)}var Fr=s(Ra,2),Ur=a(Fr);{var Ss=He=>{var nt=ix(),It=s(a(nt),1,!0);x((Gt,Ma)=>{St(nt,"href",e(Ge).authorize_url),St(nt,"title",Gt),n(It,Ma)},[()=>l("oauth.reauth"),()=>l("oauth.reauth")]),v(He,nt)};g(()=>y(Ur,He=>{e(Mt)&&He(Ss)}),"if",ge,656,40)}var er=s(Ur,2),fs=a(er);let zr;var Cs=s(er,2);x(He=>{n(vr,e(gt).email),er.disabled=C(e(f),null,!1),St(er,"title",He),zr=Qe(fs,1,"fa-solid fa-arrows-rotate",null,zr,{"fa-spin":C(e(f),e(gt).account)})},[()=>l("common.refresh")]),Y("click",er,function(){return A(e(Ge).id,e(gt).account)}),Y("click",Cs,function(){return k(e(Ge).id,e(gt).account,e(gt).email)}),v($a,Aa)}),"each",ge,600,28),v(ia,aa)},da=ma(()=>e(b).has(e(Ge).id)||e(Ge).accounts.length<=2);g(()=>y(pa,ia=>{e(da)&&ia(zt)}),"if",ge,598,20)}x((ia,aa)=>{Qe(Pt,1,`${e(Ge).icon??""} text-sm w-5 text-center`),n(jt,e(Ge).name),n(Ht,e(Ge).accounts.length),St(ta,"href",e(Ge).authorize_url),St(ta,"title",ia),Qe(Ea,1,`fa-solid fa-chevron-${aa??""} text-xs text-text-subtle`)},[()=>l("settings.add_account"),()=>e(b).has(e(Ge).id)?"up":"down"]),Y("click",pt,function(){return q(e(Ge).id)}),Y("keydown",pt,function(aa){C(aa.key,"Enter")&&q(e(Ge).id)}),Y("click",ta,function(aa){return aa.stopPropagation()}),v(wt,bt)}),"each",ge,559,12);var dt=s(et,2);{var tt=wt=>{var Ge=vx(),bt=a(Ge),pt=a(bt),vt=s(bt,2);g(()=>Dt(vt,21,()=>X(e(d).providers),Pt=>Pt.id,(Pt,Et)=>{var jt=Oa(),Ft=Ae(jt);{var Ht=Kt=>{var na=dx(),ta=a(na),Ea=s(ta);x(()=>{St(na,"href",e(Et).authorize_url),Qe(ta,1,e(Et).icon),n(Ea,` ${e(Et).name??""}`)}),v(Kt,na)},Ut=Kt=>{var na=cx(),ta=a(na),Ea=s(ta);x((pa,zt)=>{St(na,"title",`Not configured — set ${pa??""}_CLIENT_ID and ${zt??""}_CLIENT_SECRET`),Qe(ta,1,e(Et).icon),n(Ea,` ${e(Et).name??""}`)},[()=>e(Et).id.toUpperCase(),()=>e(Et).id.toUpperCase()]),v(Kt,na)};g(()=>y(Ft,Kt=>{e(Et).configured?Kt(Ht):Kt(Ut,!1)}),"if",ge,694,28)}v(Pt,jt)}),"each",ge,693,24),x(Pt=>n(pt,Pt),[()=>l("settings.available_integrations")]),v(wt,Ge)},Ye=ma(()=>X(e(d).providers).length>0);g(()=>y(dt,wt=>{e(Ye)&&wt(tt)}),"if",ge,689,12)}var at=s(dt,2);{var ft=wt=>{var Ge=ux(),bt=a(Ge);x(pt=>n(bt,pt),[()=>l("settings.no_oauth")]),v(wt,Ge)};g(()=>y(at,wt=>{C(e(d).providers.length,0)&&wt(ft)}),"if",ge,714,12)}v(se,ye)};g(()=>y(re,se=>{C(e(d),null)?se(ke):se(ve,!1)}),"if",ge,555,8)}var Q=s(ct,2),$e=a(Q),Ie=a($e),Re=s(a(Ie)),Ct=s($e,2),st=a(Ct),De=a(st),lt=s(st,2),Je=a(lt);g(()=>Dt(Je,21,()=>Object.entries(eo),la,(se,ye)=>{var et=ma(()=>vo(e(ye),2));let dt=()=>e(et)[0];dt();let tt=()=>e(et)[1];tt();var Ye=px(),at=a(Ye,!0);var ft={};x(()=>{n(at,tt()),ft!==(ft=dt())&&(Ye.value=(Ye.__value=dt())??"")}),v(se,Ye)}),"each",ge,750,16);var _t;Wo(Je);var ze=s(Q,2),be=a(ze),ce=a(be),pe=s(a(ce)),Oe=s(be,2),Me=a(Oe);{var Ze=se=>{var ye=wx(),et=Ae(ye),dt=a(et),tt=a(dt),Ye=a(tt),at=s(tt,2),ft=a(at),wt=s(dt,2),Ge=a(wt),bt=a(Ge),pt=s(Ge,2),vt=a(pt),Pt=s(pt,2);{var Et=qt=>{var Wt=_x(),xa=a(Wt);x(ba=>n(xa,ba),[()=>l("settings.per_user_override")]),v(qt,Wt)},jt=qt=>{var Wt=mx(),xa=a(Wt);x(ba=>n(xa,ba),[()=>l("settings.system_default")]),v(qt,Wt)};g(()=>y(Pt,qt=>{e(N).user_timezone?qt(Et):qt(jt,!1)}),"if",ge,775,20)}var Ft=s(et,2),Ht=a(Ft),Ut=a(Ht),Kt=a(Ut),na=a(Kt),ta=s(Kt,2),Ea=s(a(ta)),pa=s(Ut,2),zt=a(pa),da=s(zt,2),ia=a(da);g(()=>Dt(ia,17,()=>W,la,(qt,Wt)=>{var xa=xx(),ba={};x(()=>{ba!==(ba=e(Wt))&&(xa.value=(xa.__value=e(Wt))??"")}),v(qt,xa)}),"each",ge,804,28);var aa=s(ia);g(()=>Dt(aa,17,()=>e(ne).filter(qt=>!W.includes(qt)),la,(qt,Wt)=>{var xa=bx(),ba={};x(()=>{ba!==(ba=e(Wt))&&(xa.value=(xa.__value=e(Wt))??"")}),v(qt,xa)}),"each",ge,807,28);var $a=s(pa,2),gt=a($a),Ot=s(Ht,2),Lt=a(Ot),Mt=a(Lt),fa=a(Mt),Aa=s(Mt,2),Ra=s(a(Aa)),Zt=s(Lt,2),Ya=s(Zt,2),vr=a(Ya),sr=s(Ot,2),ir=a(sr),br=a(ir);{var Er=qt=>{var Wt=gx(),xa=s(Ae(Wt));x(ba=>n(xa,` ${ba??""}`),[()=>l("common.saving")]),v(qt,Wt)},or=qt=>{var Wt=hx(),xa=s(Ae(Wt));x(ba=>n(xa,` ${ba??""}`),[()=>l("common.save")]),v(qt,Wt)};g(()=>y(br,qt=>{e(Te)?qt(Er):qt(or,!1)}),"if",ge,842,24)}var Dr=s(ir,2);{var Za=qt=>{var Wt=yx(),xa=a(Wt);x(ba=>{Qe(Wt,1,`text-xs ${ba??""}`),n(xa,e(Ke))},[()=>C(e(Ke),l("common.saved"))?"text-green-400":"text-red-400"]),v(qt,Wt)};g(()=>y(Dr,qt=>{e(Ke)&&qt(Za)}),"if",ge,848,20)}x((qt,Wt,xa,ba,rs,Sr,Cr,Fr)=>{n(Ye,qt),n(ft,e(N).current_time_formatted),n(bt,Wt),n(vt,e(N).effective_timezone),n(na,xa),n(Ea,` ${ba??""}`),St(zt,"placeholder",e(N).system_timezone||"UTC"),n(gt,rs),n(fa,Sr),n(Ra,` ${Cr??""}`),St(Zt,"placeholder",e(N).system_locale||"en-US"),n(vr,Fr),ir.disabled=e(Te)},[()=>l("settings.current_time"),()=>l("settings.effective_timezone"),()=>l("settings.timezone"),()=>l("settings.detect"),()=>l("settings.timezone_hint",{default:e(N).system_timezone}),()=>l("settings.locale"),()=>l("settings.detect"),()=>l("settings.locale_hint",{default:e(N).system_locale})]),Y("click",ta,Ve),ua(zt,function(){return e(je)},function(Wt){p(je,Wt)}),Y("click",Aa,K),ua(Zt,function(){return e(we)},function(Wt){p(we,Wt)}),Y("click",ir,_e),v(se,ye)},Be=se=>{var ye=kx(),et=a(ye);x(dt=>n(et,dt),[()=>l("common.loading")]),v(se,ye)};g(()=>y(Me,se=>{e(N)?se(Ze):se(Be,!1)}),"if",ge,766,8)}var We=s(ze,2),it=a(We),ot=a(it),rt=s(a(ot)),Fe=s(it,2),ut=a(Fe),mt=a(ut),Tt=s(We,2),xt=a(Tt);return g(()=>ya(xt,{}),"component",ge,906,4,{componentTag:"UsersPanel"}),x((se,ye,et,dt,tt,Ye,at,ft,wt,Ge)=>{n(me,` ${se??""}`),n(z,` ${ye??""}`),n(T,` ${et??""}`),n(Xe,` ${dt??""}`),n(I,` ${tt??""}`),n(Re,` ${Ye??""}`),n(De,at),_t!==(_t=Ws.locale)&&(Je.value=(Je.__value=Ws.locale)??"",mo(Je,Ws.locale)),n(pe,` ${ft??""}`),n(rt,` ${wt??""}`),n(mt,Ge)},[()=>l("settings.messaging"),()=>l("common.refresh"),()=>l("settings.dashboard_auth"),()=>l("settings.twofa"),()=>l("settings.oauth"),()=>l("settings.language"),()=>l("settings.language_hint"),()=>l("settings.timezone_locale"),()=>l("settings.config_reference"),()=>l("settings.config_hint")]),Y("click",$,w),Y("change",Je,function(ye){const et=ye.target.value;if(Ro(et),va.userId){const dt={en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",ja:"ja-JP","zh-CN":"zh-CN","pt-BR":"pt-BR"};Nt("POST","/api/timezone",{user_id:va.userId,locale:dt[et]??et}).catch(()=>{})}}),v(r,Ne),ha(Ue)}La(["click","keydown","change"]);ca[u]="src/App.svelte";var Tx=_(m("<button><i></i> </button>"),ca[u],[[189,16,[[194,20]]]]),Ex=_(m('<div class="mobile-menu-overlay open" role="presentation"></div> <nav class="mobile-menu open"><div class="flex items-center justify-between px-4 py-3 border-b border-border"><span class="text-sm font-semibold text-primary-400"><i class="fa-solid fa-robot mr-1"></i> </span> <button class="p-1 text-text-muted hover:text-text"><i class="fa-solid fa-xmark"></i></button></div> <div class="py-2"></div></nav>',1),ca[u],[[170,4],[175,4,[[176,8,[[177,12,[[178,16]]],[180,12,[[184,16]]]]],[187,8]]]]),Sx=_(m('<div class="flex items-center justify-between gap-3 px-4 py-2.5 bg-primary-900/30 border-b border-primary-800/40"><div class="flex items-center gap-2 text-sm text-primary-300"><i class="fa-solid fa-download"></i> <span> </span></div> <div class="flex gap-2"><button class="px-3 py-1 text-xs font-medium rounded bg-primary-600 text-white hover:bg-primary-500 transition-colors"> </button> <button class="px-2 py-1 text-xs text-text-muted hover:text-text transition-colors"> </button></div></div>'),ca[u],[[213,8,[[214,12,[[215,16],[216,16]]],[218,12,[[219,16],[225,16]]]]]]),Cx=_(m("<button><i></i> </button>"),ca[u],[[239,16,[[244,20]]]]),Ax=_(m('<!> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"><!> <!> <!> <!></div>',1),ca[u],[[257,12]]),Px=_(m('<!> <!> <main class="p-3 sm:p-6"><div class="hidden sm:flex border-b border-border mb-4 tab-scroll"></div> <div class="flex sm:hidden items-center gap-2 mb-3 text-sm text-text-muted"><i></i> <span class="font-medium text-text"> </span></div> <!></main>',1),ca[u],[[235,4,[[237,8],[250,8,[[251,12],[252,12]]]]]]),jx=_(m("<!> <!>",1),ca[u],[]);function ca(r,i){wa(new.target),ga(i,!0,ca);const o=3e4,d=[{id:"overview",label:"Overview",icon:"fa-chart-line"},{id:"chat",label:"Chat",icon:"fa-comments"},{id:"goals",label:"Goals",icon:"fa-bullseye"},{id:"skills",label:"Skills",icon:"fa-puzzle-piece"},{id:"knowledge",label:"Knowledge",icon:"fa-diagram-project"},{id:"tools",label:"Tools",icon:"fa-screwdriver-wrench"},{id:"trash",label:"Trash",icon:"fa-trash-can"},{id:"security",label:"Security",icon:"fa-shield-halved"},{id:"operations",label:"Ops",icon:"fa-server"},{id:"settings",label:"Settings",icon:"fa-gear"}];function c(te){kt.currentTab=te,kt.mobileMenuOpen=!1}async function f(){try{const te=(await M(fetch("/api/auth/check")))(),_e=(await M(te.json()))();va.authenticated=C(_e.authenticated,!0),va.userId=_e.user_id||null,va.role=_e.role||null,va.subject=_e.subject||null}catch{va.authenticated=!1}finally{va.checked=!0}}async function b(){try{const te=(await M(fetch("/api/onboarding/status")))(),_e=(await M(te.json()))();va.onboardingCompleted=C(_e.completed,!0)}catch{va.onboardingCompleted=!0}}function h(){va.onboardingCompleted=!0}let w=S(P(null),"deferredPrompt"),L=S(P(!1),"showInstallBanner");Es(()=>(Cc(),Pc(),b(),f(),window.addEventListener("onboarding-complete",h),window.addEventListener("beforeinstallprompt",te=>{te.preventDefault(),p(w,te,!0),localStorage.getItem("safe-agent-pwa-dismissed")||p(L,!0)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),"Notification"in window&&C(Notification.permission,"granted")&&(kt.notificationsEnabled=!0),()=>{window.removeEventListener("onboarding-complete",h)}));function j(){var te;(te=e(w))!=null&&te.prompt&&(e(w).prompt(),p(w,null),p(L,!1))}function A(){p(L,!1),localStorage.setItem("safe-agent-pwa-dismissed","1")}let k,q;Ga(()=>(va.authenticated&&(wi(()=>Rr()),k=new EventSource("/api/events"),k.onmessage=te=>{const _e=te.data;if(_e&&_e.startsWith("{"))try{const Ve=JSON.parse(_e);if(Ve.type){if(gl(Ve),(C(Ve.type,"turn_complete")||C(Ve.type,"approval_needed"))&&Rr(),C(Ve.type,"approval_needed")){const K=Ve;Lc(K.tool,K.id)}return}}catch{}Rr()},k.onerror=()=>{console.error("SSE connection lost, will retry..."),hl()},q=setInterval(Rr,o)),()=>{k==null||k.close(),k=void 0,q&&(clearInterval(q),q=void 0)}));var V={...ka()},X=jx(),N=Ae(X);{var ne=te=>{var _e=Ex(),Ve=Ae(_e),K=s(Ve,2),W=a(K),Ue=a(W),Ne=s(a(Ue)),Pe=s(Ue,2),R=s(W,2);g(()=>Dt(R,21,()=>d,la,(ie,qe)=>{var Se=Tx();let me;var $=a(Se),z=s($);x(Z=>{me=Qe(Se,1,"mobile-nav-item",null,me,{active:C(kt.currentTab,e(qe).id)}),Qe($,1,`fa-solid ${e(qe).icon??""} w-5 text-center`),n(z,` ${Z??""}`)},[()=>l("nav."+e(qe).id)]),Y("click",Se,function(){return c(e(qe).id)}),v(ie,Se)}),"each",ca,188,12),x(ie=>n(Ne,` ${ie??""}`),[()=>l("header.title")]),Y("click",Ve,function(){return kt.mobileMenuOpen=!1}),Y("click",Pe,function(){return kt.mobileMenuOpen=!1}),v(te,_e)};g(()=>y(N,te=>{kt.mobileMenuOpen&&te(ne)}),"if",ca,169,0)}var je=s(N,2);{var we=te=>{},Te=te=>{g(()=>At(te,{}),"component",ca,205,4,{componentTag:"OnboardingWizard"})},Ke=te=>{g(()=>Yt(te,{}),"component",ca,207,4,{componentTag:"LoginOverlay"})},Ee=te=>{var _e=Px(),Ve=Ae(_e);g(()=>mr(Ve,{}),"component",ca,209,4,{componentTag:"Header"});var K=s(Ve,2);{var W=T=>{var E=Sx(),U=a(E),J=s(a(U),2),xe=a(J),fe=s(U,2),F=a(fe),he=a(F),Xe=s(F,2),yt=a(Xe);x((ht,ct,oe)=>{n(xe,ht),n(he,ct),n(yt,oe)},[()=>l("pwa.install_hint"),()=>l("pwa.install"),()=>l("pwa.dismiss")]),Y("click",F,j),Y("click",Xe,A),v(T,E)};g(()=>y(K,T=>{e(L)&&T(W)}),"if",ca,212,4)}var Ue=s(K,2),Ne=a(Ue);g(()=>Dt(Ne,21,()=>d,la,(T,E)=>{var U=Cx();let J;var xe=a(U),fe=s(xe);x(F=>{J=Qe(U,1,"main-tab",null,J,{active:C(kt.currentTab,e(E).id)}),Qe(xe,1,`fa-solid ${e(E).icon??""} mr-1.5`),n(fe,` ${F??""}`)},[()=>l("nav."+e(E).id)]),Y("click",U,function(){return c(e(E).id)}),v(T,U)}),"each",ca,238,12);var Pe=s(Ne,2),R=a(Pe),ie=s(R,2),qe=a(ie),Se=s(Pe,2);{var me=T=>{var E=Ax(),U=Ae(E);g(()=>Ca(U,{}),"component",ca,256,12,{componentTag:"LiveFeed"});var J=s(U,2),xe=a(J);g(()=>$s(xe,{}),"component",ca,258,16,{componentTag:"PendingActions"});var fe=s(xe,2);g(()=>Qr(fe,{}),"component",ca,259,16,{componentTag:"ActivityLog"});var F=s(fe,2);g(()=>Ua(F,{}),"component",ca,260,16,{componentTag:"MemoryPanel"});var he=s(F,2);g(()=>es(he,{}),"component",ca,261,16,{componentTag:"StatsPanel"}),v(T,E)},$=T=>{g(()=>ja(T,{}),"component",ca,264,12,{componentTag:"ChatTab"})},z=T=>{g(()=>Vt(T,{}),"component",ca,266,12,{componentTag:"GoalsTab"})},Z=T=>{g(()=>Fa(T,{}),"component",ca,268,12,{componentTag:"SkillsTab"})},H=T=>{g(()=>rr(T,{}),"component",ca,270,12,{componentTag:"KnowledgeTab"})},Le=T=>{g(()=>Ts(T,{}),"component",ca,272,12,{componentTag:"ToolsTab"})},O=T=>{g(()=>Pa(T,{}),"component",ca,274,12,{componentTag:"TrashTab"})},B=T=>{g(()=>Rt(T,{}),"component",ca,276,12,{componentTag:"SecurityTab"})},ue=T=>{g(()=>Ce(T,{}),"component",ca,278,12,{componentTag:"OperationsTab"})},D=T=>{g(()=>ge(T,{}),"component",ca,280,12,{componentTag:"SettingsTab"})};g(()=>y(Se,T=>{C(kt.currentTab,"overview")?T(me):C(kt.currentTab,"chat")?T($,1):C(kt.currentTab,"goals")?T(z,2):C(kt.currentTab,"skills")?T(Z,3):C(kt.currentTab,"knowledge")?T(H,4):C(kt.currentTab,"tools")?T(Le,5):C(kt.currentTab,"trash")?T(O,6):C(kt.currentTab,"security")?T(B,7):C(kt.currentTab,"operations")?T(ue,8):C(kt.currentTab,"settings")&&T(D,9)}),"if",ca,255,8)}x((T,E)=>{Qe(R,1,`fa-solid ${T??""} text-primary-500`),n(qe,E)},[()=>{var T;return(T=d.find(E=>C(E.id,kt.currentTab)))==null?void 0:T.icon},()=>l("nav."+kt.currentTab)]),v(te,_e)};g(()=>y(je,te=>{va.checked?C(va.onboardingCompleted,!1)?te(Te,1):va.authenticated?te(Ee,!1):te(Ke,2):te(we)}),"if",ca,202,0)}return v(r,X),ha(V)}La(["click"]);dc(ca,{target:document.getElementById("app")});
