var bl=Object.defineProperty;var Vo=r=>{throw TypeError(r)};var gl=(r,i,o)=>i in r?bl(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o;var Oa=(r,i,o)=>gl(r,typeof i!="symbol"?i+"":i,o),uo=(r,i,o)=>i.has(r)||Vo("Cannot "+o);var H=(r,i,o)=>(uo(r,i,"read from private field"),o?o.call(r):i.get(r)),Xt=(r,i,o)=>i.has(r)?Vo("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(r):i.set(r,o),Zt=(r,i,o,d)=>(uo(r,i,"write to private field"),d?d.call(r,o):i.set(r,o),o),Qr=(r,i,o)=>(uo(r,i,"access private method"),o);var so=Array.isArray,hl=Array.prototype.indexOf,Is=Array.prototype.includes,io=Array.from,Fs=Object.defineProperty,Hs=Object.getOwnPropertyDescriptor,yl=Object.getOwnPropertyDescriptors,xn=Object.prototype,wl=Array.prototype,Oo=Object.getPrototypeOf,Ko=Object.isExtensible;const kl=()=>{};function Tl(r){for(var i=0;i<r.length;i++)r[i]()}function bn(){var r,i,o=new Promise((d,c)=>{r=d,i=c});return{promise:o,resolve:r,reject:i}}function gn(r,i){if(Array.isArray(r))return r;if(!(Symbol.iterator in r))return Array.from(r);const o=[];for(const d of r)if(o.push(d),o.length===i)break;return o}const Wr=2,Ei=4,oo=8,hn=1<<24,Za=16,Aa=32,qs=64,yn=128,_a=512,zr=1024,Jr=2048,Ca=4096,la=8192,ds=16384,Li=32768,ai=65536,Qi=1<<17,wn=1<<18,ci=1<<19,$l=1<<20,Ja=1<<25,Us=65536,xo=1<<21,no=1<<22,cs=1<<23,Ls=Symbol("$state"),El=Symbol(""),kn=Symbol("proxy path"),$s=new class extends Error{constructor(){super(...arguments);Oa(this,"name","StaleReactionError");Oa(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},Sl=1,Cl=11;function Al(r){{const i=new Error(`lifecycle_outside_component
\`${r}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw i.name="Svelte error",i}}function Pl(){{const r=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw r.name="Svelte error",r}}function Wo(){{const r=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw r.name="Svelte error",r}}function Ol(r,i){{const o=new Error(`component_api_changed
Calling \`${r}\` on a component instance (of ${i}) is no longer valid in Svelte 5
https://svelte.dev/e/component_api_changed`);throw o.name="Svelte error",o}}function jl(r,i){{const o=new Error(`component_api_invalid_new
Attempted to instantiate ${r} with \`new ${i}\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \`compatibility.componentApi\` compiler option to \`4\` to keep it working.
https://svelte.dev/e/component_api_invalid_new`);throw o.name="Svelte error",o}}function Rl(){{const r=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw r.name="Svelte error",r}}function Ll(r,i,o){{const d=new Error(`each_key_duplicate
${o?`Keyed each block has duplicate key \`${o}\` at indexes ${r} and ${i}`:`Keyed each block has duplicate key at indexes ${r} and ${i}`}
https://svelte.dev/e/each_key_duplicate`);throw d.name="Svelte error",d}}function Nl(r){{const i=new Error(`effect_in_teardown
\`${r}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw i.name="Svelte error",i}}function Ml(){{const r=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw r.name="Svelte error",r}}function Dl(r){{const i=new Error(`effect_orphan
\`${r}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw i.name="Svelte error",i}}function Il(){{const r=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw r.name="Svelte error",r}}function Fl(r){{const i=new Error(`rune_outside_svelte
The \`${r}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw i.name="Svelte error",i}}function Ul(){{const r=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw r.name="Svelte error",r}}function zl(){{const r=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw r.name="Svelte error",r}}function Bl(){{const r=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw r.name="Svelte error",r}}function ql(){{const r=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw r.name="Svelte error",r}}const Gl=1,Vl=2,Tn=4,Kl=8,Wl=16,Jl=1,Hl=2,Vr=Symbol(),u=Symbol("filename"),$n="http://www.w3.org/1999/xhtml";var Ni="font-weight: bold",Mi="font-weight: normal";function Yl(r,i){console.warn(`%c[svelte] binding_property_non_reactive
%c${i?`\`${r}\` (${i}) is binding to a non-reactive property`:`\`${r}\` is binding to a non-reactive property`}
https://svelte.dev/e/binding_property_non_reactive`,Ni,Mi)}function Ql(r){console.warn(`%c[svelte] console_log_state
%cYour \`console.${r}\` contained \`$state\` proxies. Consider using \`$inspect(...)\` or \`$state.snapshot(...)\` instead
https://svelte.dev/e/console_log_state`,Ni,Mi)}function Zl(){console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ni,Mi)}function yi(r){console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${r}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Ni,Mi)}function Xl(){console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ni,Mi)}function En(r){return r===this.v}function ed(r,i){return r!=r?i==i:r!==i||r!==null&&typeof r=="object"||typeof r=="function"}function Sn(r){return!ed(r,this.v)}let td=!1;var rd="font-weight: bold",ad="font-weight: normal";function Jo(r){console.warn(`%c[svelte] state_snapshot_uncloneable
%c${r?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${r}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,rd,ad)}const sd=[];function id(r,i=!1,o=!1){if(!i){const d=[],c=wi(r,new Map,"",d,null,o);if(d.length===1&&d[0]==="")Jo();else if(d.length>0){const f=d.length>10?d.slice(0,7):d.slice(0,10),b=d.length-f.length;let h=f.map(w=>`- <value>${w}`).join(`
`);b>0&&(h+=`
- ...and ${b} more`),Jo(h)}return c}return wi(r,new Map,"",sd,null,o)}function wi(r,i,o,d,c=null,f=!1){if(typeof r=="object"&&r!==null){var b=i.get(r);if(b!==void 0)return b;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(so(r)){var h=Array(r.length);i.set(r,h),c!==null&&i.set(c,h);for(var w=0;w<r.length;w+=1){var P=r[w];w in r&&(h[w]=wi(P,i,`${o}[${w}]`,d,null,f))}return h}if(Oo(r)===xn){h={},i.set(r,h),c!==null&&i.set(c,h);for(var C in r)h[C]=wi(r[C],i,`${o}.${C}`,d,null,f);return h}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function"&&!f)return wi(r.toJSON(),i,`${o}.toJSON()`,d,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return d.push(o),r}}function S(r,i){return r.label=i,vi(r.v,i),r}function vi(r,i){var o;return(o=r==null?void 0:r[kn])==null||o.call(r,i),r}function od(r){const i=new Error,o=nd();return o.length===0?null:(o.unshift(`
`),Fs(i,"stack",{value:o.join(`
`)}),Fs(i,"name",{value:r}),i)}function nd(){const r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const i=new Error().stack;if(Error.stackTraceLimit=r,!i)return[];const o=i.split(`
`),d=[];for(let c=0;c<o.length;c++){const f=o[c],b=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];b.includes("svelte/src/internal")||b.includes("node_modules/.vite")||d.push(f)}}return d}let Lr=null;function si(r){Lr=r}let Ha=null;function Zi(r){Ha=r}function g(r,i,o,d,c,f){const b=Ha;Ha={type:i,file:o[u],line:d,column:c,parent:b,...f};try{return r()}finally{Ha=b}}let vs=null;function Ho(r){vs=r}function $r(r,i=!1,o){Lr={p:Lr,i:!1,c:null,e:null,s:r,x:null,l:null},Lr.function=o,vs=o}function Er(r){var i=Lr,o=i.e;if(o!==null){i.e=null;for(var d of o)Jn(d)}return r!==void 0&&(i.x=r),i.i=!0,Lr=i.p,vs=(Lr==null?void 0:Lr.function)??null,r??{}}function Cn(){return!0}let Es=[];function An(){var r=Es;Es=[],Tl(r)}function Fa(r){if(Es.length===0&&!ki){var i=Es;queueMicrotask(()=>{i===Es&&An()})}Es.push(r)}function ld(){for(;Es.length>0;)An()}const bo=new WeakMap;function Pn(r){var i=dr;if(i===null)return ar.f|=cs,r;if(r instanceof Error&&!bo.has(r)&&bo.set(r,dd(r,i)),(i.f&Li)===0&&(i.f&Ei)===0)throw!i.parent&&r instanceof Error&&On(r),r;ii(r,i)}function ii(r,i){for(;i!==null;){if((i.f&yn)!==0){if((i.f&Li)===0)throw r;try{i.b.error(r);return}catch(o){r=o}}i=i.parent}throw r instanceof Error&&On(r),r}function dd(r,i){var b,h,w;const o=Hs(r,"message");if(!(o&&!o.configurable)){for(var d=Mo?"  ":"	",c=`
${d}in ${((b=i.fn)==null?void 0:b.name)||"<unknown>"}`,f=i.ctx;f!==null;)c+=`
${d}in ${(h=f.function)==null?void 0:h[u].split("/").pop()}`,f=f.p;return{message:r.message+`
${c}
`,stack:(w=r.stack)==null?void 0:w.split(`
`).filter(P=>!P.includes("svelte/src/internal")).join(`
`)}}}function On(r){const i=bo.get(r);i&&(Fs(r,"message",{value:i.message}),Fs(r,"stack",{value:i.stack}))}const cd=-7169;function Rr(r,i){r.f=r.f&cd|i}function jo(r){(r.f&_a)!==0||r.deps===null?Rr(r,zr):Rr(r,Ca)}function jn(r){if(r!==null)for(const i of r)(i.f&Wr)===0||(i.f&Us)===0||(i.f^=Us,jn(i.deps))}function Rn(r,i,o){(r.f&Jr)!==0?i.add(r):(r.f&Ca)!==0&&o.add(r),jn(r.deps),Rr(r,zr)}const zi=new Set;let Ht=null,Xi=null,Kr=null,ta=[],lo=null,go=!1,ki=!1;var Ys,Qs,Cs,Zs,Pi,Oi,As,Ka,Xs,Ba,ho,yo,Ln;const Go=class Go{constructor(){Xt(this,Ba);Oa(this,"committed",!1);Oa(this,"current",new Map);Oa(this,"previous",new Map);Xt(this,Ys,new Set);Xt(this,Qs,new Set);Xt(this,Cs,0);Xt(this,Zs,0);Xt(this,Pi,null);Xt(this,Oi,new Set);Xt(this,As,new Set);Xt(this,Ka,new Map);Oa(this,"is_fork",!1);Xt(this,Xs,!1)}is_deferred(){return this.is_fork||H(this,Zs)>0}skip_effect(i){H(this,Ka).has(i)||H(this,Ka).set(i,{d:[],m:[]})}unskip_effect(i){var o=H(this,Ka).get(i);if(o){H(this,Ka).delete(i);for(var d of o.d)Rr(d,Jr),ka(d);for(d of o.m)Rr(d,Ca),ka(d)}}process(i){var c;ta=[],this.apply();var o=[],d=[];for(const f of i)Qr(this,Ba,ho).call(this,f,o,d);if(this.is_deferred()){Qr(this,Ba,yo).call(this,d),Qr(this,Ba,yo).call(this,o);for(const[f,b]of H(this,Ka))In(f,b)}else{for(const f of H(this,Ys))f();H(this,Ys).clear(),H(this,Cs)===0&&Qr(this,Ba,Ln).call(this),Xi=this,Ht=null,Yo(d),Yo(o),Xi=null,(c=H(this,Pi))==null||c.resolve()}Kr=null}capture(i,o){o!==Vr&&!this.previous.has(i)&&this.previous.set(i,o),(i.f&cs)===0&&(this.current.set(i,i.v),Kr==null||Kr.set(i,i.v))}activate(){Ht=this,this.apply()}deactivate(){Ht===this&&(Ht=null,Kr=null)}flush(){if(this.activate(),ta.length>0){if(Nn(),Ht!==null&&Ht!==this)return}else H(this,Cs)===0&&this.process([]);this.deactivate()}discard(){for(const i of H(this,Qs))i(this);H(this,Qs).clear()}increment(i){Zt(this,Cs,H(this,Cs)+1),i&&Zt(this,Zs,H(this,Zs)+1)}decrement(i){Zt(this,Cs,H(this,Cs)-1),i&&Zt(this,Zs,H(this,Zs)-1),!H(this,Xs)&&(Zt(this,Xs,!0),Fa(()=>{Zt(this,Xs,!1),this.is_deferred()?ta.length>0&&this.flush():this.revive()}))}revive(){for(const i of H(this,Oi))H(this,As).delete(i),Rr(i,Jr),ka(i);for(const i of H(this,As))Rr(i,Ca),ka(i);this.flush()}oncommit(i){H(this,Ys).add(i)}ondiscard(i){H(this,Qs).add(i)}settled(){return(H(this,Pi)??Zt(this,Pi,bn())).promise}static ensure(){if(Ht===null){const i=Ht=new Go;zi.add(Ht),ki||Fa(()=>{Ht===i&&i.flush()})}return Ht}apply(){}};Ys=new WeakMap,Qs=new WeakMap,Cs=new WeakMap,Zs=new WeakMap,Pi=new WeakMap,Oi=new WeakMap,As=new WeakMap,Ka=new WeakMap,Xs=new WeakMap,Ba=new WeakSet,ho=function(i,o,d){i.f^=zr;for(var c=i.first,f=null;c!==null;){var b=c.f,h=(b&(Aa|qs))!==0,w=h&&(b&zr)!==0,P=w||(b&la)!==0||H(this,Ka).has(c);if(!P&&c.fn!==null){h?c.f^=zr:f!==null&&(b&(Ei|oo|hn))!==0?f.b.defer_effect(c):(b&Ei)!==0?o.push(c):Ii(c)&&((b&Za)!==0&&H(this,As).add(c),li(c));var C=c.first;if(C!==null){c=C;continue}}var E=c.parent;for(c=c.next;c===null&&E!==null;)E===f&&(f=null),c=E.next,E=E.parent}},yo=function(i){for(var o=0;o<i.length;o+=1)Rn(i[o],H(this,Oi),H(this,As))},Ln=function(){var c;if(zi.size>1){this.previous.clear();var i=Kr,o=!0;for(const f of zi){if(f===this){o=!1;continue}const b=[];for(const[w,P]of this.current){if(f.current.has(w))if(o&&P!==f.current.get(w))f.current.set(w,P);else continue;b.push(w)}if(b.length===0)continue;const h=[...f.current.keys()].filter(w=>!this.current.has(w));if(h.length>0){var d=ta;ta=[];const w=new Set,P=new Map;for(const C of b)Mn(C,h,w,P);if(ta.length>0){Ht=f,f.apply();for(const C of ta)Qr(c=f,Ba,ho).call(c,C,[],[]);f.deactivate()}ta=d}}Ht=null,Kr=i}this.committed=!0,zi.delete(this)};let us=Go;function vd(r){var i=ki;ki=!0;try{for(var o;;){if(ld(),ta.length===0&&(Ht==null||Ht.flush(),ta.length===0))return lo=null,o;Nn()}}finally{ki=i}}function Nn(){go=!0;var r=new Set;try{for(var i=0;ta.length>0;){var o=us.ensure();if(i++>1e3){var d=new Map;for(const f of o.current.keys())for(const[b,h]of f.updated??[]){var c=d.get(b);c||(c={error:h.error,count:0},d.set(b,c)),c.count+=h.count}for(const f of d.values())f.error&&console.error(f.error);ud()}o.process(ta),fs.clear();for(const f of o.current.keys())r.add(f)}}finally{ta=[],go=!1,lo=null;for(const f of r)f.updated=null}}function ud(){try{Il()}catch(r){Fs(r,"stack",{value:""}),ii(r,lo)}}let ya=null;function Yo(r){var i=r.length;if(i!==0){for(var o=0;o<i;){var d=r[o++];if((d.f&(ds|la))===0&&Ii(d)&&(ya=new Set,li(d),d.deps===null&&d.first===null&&d.nodes===null&&d.teardown===null&&d.ac===null&&Qn(d),(ya==null?void 0:ya.size)>0)){fs.clear();for(const c of ya){if((c.f&(ds|la))!==0)continue;const f=[c];let b=c.parent;for(;b!==null;)ya.has(b)&&(ya.delete(b),f.push(b)),b=b.parent;for(let h=f.length-1;h>=0;h--){const w=f[h];(w.f&(ds|la))===0&&li(w)}}ya.clear()}}ya=null}}function Mn(r,i,o,d){if(!o.has(r)&&(o.add(r),r.reactions!==null))for(const c of r.reactions){const f=c.f;(f&Wr)!==0?Mn(c,i,o,d):(f&(no|Za))!==0&&(f&Jr)===0&&Dn(c,i,d)&&(Rr(c,Jr),ka(c))}}function Dn(r,i,o){const d=o.get(r);if(d!==void 0)return d;if(r.deps!==null)for(const c of r.deps){if(Is.call(i,c))return!0;if((c.f&Wr)!==0&&Dn(c,i,o))return o.set(c,!0),!0}return o.set(r,!1),!1}function ka(r){for(var i=lo=r;i.parent!==null;){i=i.parent;var o=i.f;if(go&&i===dr&&(o&Za)!==0&&(o&wn)===0)return;if((o&(qs|Aa))!==0){if((o&zr)===0)return;i.f^=zr}}ta.push(i)}function In(r,i){if(!((r.f&Aa)!==0&&(r.f&zr)!==0)){(r.f&Jr)!==0?i.d.push(r):(r.f&Ca)!==0&&i.m.push(r),Rr(r,zr);for(var o=r.first;o!==null;)In(o,i),o=o.next}}function fd(r){let i=0,o=zs(0),d;return S(o,"createSubscriber version"),()=>{Do()&&(a(o),Si(()=>(i===0&&(d=ui(()=>r(()=>Ti(o)))),i+=1,()=>{Fa(()=>{i-=1,i===0&&(d==null||d(),d=void 0,Ti(o))})})))}}var pd=ai|ci|yn;function _d(r,i,o){new md(r,i,o)}var ua,Po,ja,Ps,Ra,fa,ea,La,Wa,ns,Os,ls,ei,js,ti,ri,Na,ro,qr,xd,bd,wo,Vi,Ki,ko;class md{constructor(i,o,d){Xt(this,qr);Oa(this,"parent");Oa(this,"is_pending",!1);Xt(this,ua);Xt(this,Po,null);Xt(this,ja);Xt(this,Ps);Xt(this,Ra);Xt(this,fa,null);Xt(this,ea,null);Xt(this,La,null);Xt(this,Wa,null);Xt(this,ns,null);Xt(this,Os,0);Xt(this,ls,0);Xt(this,ei,!1);Xt(this,js,!1);Xt(this,ti,new Set);Xt(this,ri,new Set);Xt(this,Na,null);Xt(this,ro,fd(()=>(Zt(this,Na,zs(H(this,Os))),S(H(this,Na),"$effect.pending()"),()=>{Zt(this,Na,null)})));Zt(this,ua,i),Zt(this,ja,o),Zt(this,Ps,d),this.parent=dr.b,this.is_pending=!!H(this,ja).pending,Zt(this,Ra,Fo(()=>{dr.b=this;{var c=Qr(this,qr,wo).call(this);try{Zt(this,fa,pa(()=>d(c)))}catch(f){this.error(f)}H(this,ls)>0?Qr(this,qr,Ki).call(this):this.is_pending=!1}return()=>{var f;(f=H(this,ns))==null||f.remove()}},pd))}defer_effect(i){Rn(i,H(this,ti),H(this,ri))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!H(this,ja).pending}update_pending_count(i){Qr(this,qr,ko).call(this,i),Zt(this,Os,H(this,Os)+i),!(!H(this,Na)||H(this,ei))&&(Zt(this,ei,!0),Fa(()=>{Zt(this,ei,!1),H(this,Na)&&ni(H(this,Na),H(this,Os))}))}get_effect_pending(){return H(this,ro).call(this),a(H(this,Na))}error(i){var o=H(this,ja).onerror;let d=H(this,ja).failed;if(H(this,js)||!o&&!d)throw i;H(this,fa)&&(aa(H(this,fa)),Zt(this,fa,null)),H(this,ea)&&(aa(H(this,ea)),Zt(this,ea,null)),H(this,La)&&(aa(H(this,La)),Zt(this,La,null));var c=!1,f=!1;const b=()=>{if(c){Xl();return}c=!0,f&&ql(),us.ensure(),Zt(this,Os,0),H(this,La)!==null&&Ns(H(this,La),()=>{Zt(this,La,null)}),this.is_pending=this.has_pending_snippet(),Zt(this,fa,Qr(this,qr,Vi).call(this,()=>(Zt(this,js,!1),pa(()=>H(this,Ps).call(this,H(this,ua)))))),H(this,ls)>0?Qr(this,qr,Ki).call(this):this.is_pending=!1};Fa(()=>{try{f=!0,o==null||o(i,b),f=!1}catch(h){ii(h,H(this,Ra)&&H(this,Ra).parent)}d&&Zt(this,La,Qr(this,qr,Vi).call(this,()=>{us.ensure(),Zt(this,js,!0);try{return pa(()=>{d(H(this,ua),()=>i,()=>b)})}catch(h){return ii(h,H(this,Ra).parent),null}finally{Zt(this,js,!1)}}))})}}ua=new WeakMap,Po=new WeakMap,ja=new WeakMap,Ps=new WeakMap,Ra=new WeakMap,fa=new WeakMap,ea=new WeakMap,La=new WeakMap,Wa=new WeakMap,ns=new WeakMap,Os=new WeakMap,ls=new WeakMap,ei=new WeakMap,js=new WeakMap,ti=new WeakMap,ri=new WeakMap,Na=new WeakMap,ro=new WeakMap,qr=new WeakSet,xd=function(){try{Zt(this,fa,pa(()=>H(this,Ps).call(this,H(this,ua))))}catch(i){this.error(i)}},bd=function(){const i=H(this,ja).pending;i&&(Zt(this,ea,pa(()=>i(H(this,ua)))),Fa(()=>{var o=Qr(this,qr,wo).call(this);Zt(this,fa,Qr(this,qr,Vi).call(this,()=>(us.ensure(),pa(()=>H(this,Ps).call(this,o))))),H(this,ls)>0?Qr(this,qr,Ki).call(this):(Ns(H(this,ea),()=>{Zt(this,ea,null)}),this.is_pending=!1)}))},wo=function(){var i=H(this,ua);return this.is_pending&&(Zt(this,ns,Qa()),H(this,ua).before(H(this,ns)),i=H(this,ns)),i},Vi=function(i){var o=dr,d=ar,c=Lr;za(H(this,Ra)),xa(H(this,Ra)),si(H(this,Ra).ctx);try{return i()}catch(f){return Pn(f),null}finally{za(o),xa(d),si(c)}},Ki=function(){const i=H(this,ja).pending;H(this,fa)!==null&&(Zt(this,Wa,document.createDocumentFragment()),H(this,Wa).append(H(this,ns)),el(H(this,fa),H(this,Wa))),H(this,ea)===null&&Zt(this,ea,pa(()=>i(H(this,ua))))},ko=function(i){var o;if(!this.has_pending_snippet()){this.parent&&Qr(o=this.parent,qr,ko).call(o,i);return}if(Zt(this,ls,H(this,ls)+i),H(this,ls)===0){this.is_pending=!1;for(const d of H(this,ti))Rr(d,Jr),ka(d);for(const d of H(this,ri))Rr(d,Ca),ka(d);H(this,ti).clear(),H(this,ri).clear(),H(this,ea)&&Ns(H(this,ea),()=>{Zt(this,ea,null)}),H(this,Wa)&&(H(this,ua).before(H(this,Wa)),Zt(this,Wa,null))}};function Fn(r,i,o,d){const c=Ro;var f=r.filter(k=>!k.settled);if(o.length===0&&f.length===0){d(i.map(c));return}var b=Ht,h=dr,w=hd(),P=f.length===1?f[0].promise:f.length>1?Promise.all(f.map(k=>k.promise)):null;function C(k){w();try{d(k)}catch(M){(h.f&ds)===0&&ii(M,h)}b==null||b.deactivate(),To()}if(o.length===0){P.then(()=>C(i.map(c)));return}function E(){w(),Promise.all(o.map(k=>wd(k))).then(k=>C([...i.map(c),...k])).catch(k=>ii(k,h))}P?P.then(E):E()}function gd(r,i){Fn(r,[],[],i)}function hd(){var r=dr,i=ar,o=Lr,d=Ht,c=Ha;return function(b=!0){za(r),xa(i),si(o),b&&(d==null||d.activate()),Zi(c)}}async function O(r){var i=await r;return()=>i}function To(){za(null),xa(null),si(null),Zi(null)}const yd=new Set;function Ro(r){var i=Wr|Jr,o=ar!==null&&(ar.f&Wr)!==0?ar:null;return dr!==null&&(dr.f|=ci),{ctx:Lr,deps:null,effects:null,equals:En,f:i,fn:r,reactions:null,rv:0,v:Vr,wv:0,parent:o??dr,ac:null}}function wd(r,i,o){let d=dr;d===null&&Pl();var c=d.b,f=void 0,b=zs(Vr);b.label=i;var h=!ar,w=new Map;return zd(()=>{var M;var P=bn();f=P.promise;try{Promise.resolve(r()).then(P.resolve,P.reject).then(()=>{C===Ht&&C.committed&&C.deactivate(),To()})}catch(I){P.reject(I),To()}var C=Ht;if(h){var E=c.is_rendered();c.update_pending_count(1),C.increment(E),(M=w.get(C))==null||M.reject($s),w.delete(C),w.set(C,P)}const k=(I,Z=void 0)=>{if(C.activate(),Z)Z!==$s&&(b.f|=cs,ni(b,Z));else{(b.f&cs)!==0&&(b.f^=cs),ni(b,I);for(const[R,q]of w){if(w.delete(R),R===C)break;q.reject($s)}}h&&(c.update_pending_count(-1),C.decrement(E))};P.promise.then(k,I=>k(null,I||"unknown"))}),Io(()=>{for(const P of w.values())P.reject($s)}),b.f|=no,new Promise(P=>{function C(E){function k(){E===f?P(b):C(f)}E.then(k,k)}C(f)})}function Br(r){const i=Ro(r);return tl(i),i}function kd(r){const i=Ro(r);return i.equals=Sn,i}function Td(r){var i=r.effects;if(i!==null){r.effects=null;for(var o=0;o<i.length;o+=1)aa(i[o])}}let fo=[];function $d(r){for(var i=r.parent;i!==null;){if((i.f&Wr)===0)return(i.f&ds)===0?i:null;i=i.parent}return null}function Lo(r){var i,o=dr;za($d(r));{let d=oi;Qo(new Set);try{Is.call(fo,r)&&Rl(),fo.push(r),r.f&=~Us,Td(r),i=il(r)}finally{za(o),Qo(d),fo.pop()}}return i}function Un(r){var i=Lo(r);if(!r.equals(i)&&(r.wv=al(),(!(Ht!=null&&Ht.is_fork)||r.deps===null)&&(r.v=i,r.deps===null))){Rr(r,zr);return}Bs||(Kr!==null?(Do()||Ht!=null&&Ht.is_fork)&&Kr.set(r,i):jo(r))}function Ed(r){var i,o;if(r.effects!==null)for(const d of r.effects)(d.teardown||d.ac)&&((i=d.teardown)==null||i.call(d),(o=d.ac)==null||o.abort($s),d.teardown=kl,d.ac=null,Ci(d,0),Uo(d))}function zn(r){if(r.effects!==null)for(const i of r.effects)i.teardown&&li(i)}let oi=new Set;const fs=new Map;function Qo(r){oi=r}let No=!1;function Sd(){No=!0}function zs(r,i){var o={f:0,v:r,reactions:null,equals:En,rv:0,wv:0};return o}function A(r,i){const o=zs(r);return tl(o),o}function Cd(r,i=!1,o=!0){const d=zs(r);return i||(d.equals=Sn),d}function p(r,i,o=!1){ar!==null&&(!Ta||(ar.f&Qi)!==0)&&Cn()&&(ar.f&(Wr|Za|no|Qi))!==0&&(ma===null||!Is.call(ma,r))&&Bl();let d=o?rr(i):i;return vi(d,r.label),ni(r,d)}function ni(r,i){var c;if(!r.equals(i)){var o=r.v;Bs?fs.set(r,i):fs.set(r,o),r.v=i;var d=us.ensure();d.capture(r,o);{if(dr!==null){r.updated??(r.updated=new Map);const f=(((c=r.updated.get(""))==null?void 0:c.count)??0)+1;if(r.updated.set("",{error:null,count:f}),f>5){const b=od("updated at");if(b!==null){let h=r.updated.get(b.stack);h||(h={error:b,count:0},r.updated.set(b.stack,h)),h.count++}}}dr!==null&&(r.set_during_effect=!0)}if((r.f&Wr)!==0){const f=r;(r.f&Jr)!==0&&Lo(f),jo(f)}r.wv=al(),qn(r,Jr),dr!==null&&(dr.f&zr)!==0&&(dr.f&(Aa|qs))===0&&(va===null?Gd([r]):va.push(r)),!d.is_fork&&oi.size>0&&!No&&Bn()}return i}function Bn(){No=!1;for(const r of oi)(r.f&zr)!==0&&Rr(r,Ca),Ii(r)&&li(r);oi.clear()}function Zo(r,i=1){var o=a(r),d=i===1?o++:o--;return p(r,o),d}function Ti(r){p(r,r.v+1)}function qn(r,i){var o=r.reactions;if(o!==null)for(var d=o.length,c=0;c<d;c++){var f=o[c],b=f.f;if((b&Qi)!==0){oi.add(f);continue}var h=(b&Jr)===0;if(h&&Rr(f,i),(b&Wr)!==0){var w=f;Kr==null||Kr.delete(w),(b&Us)===0&&(b&_a&&(f.f|=Us),qn(w,Ca))}else h&&((b&Za)!==0&&ya!==null&&ya.add(f),ka(f))}}const Ad=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function rr(r){if(typeof r!="object"||r===null||Ls in r)return r;const i=Oo(r);if(i!==xn&&i!==wl)return r;var o=new Map,d=so(r),c=A(0),f=Ms,b=C=>{if(Ms===f)return C();var E=ar,k=Ms;xa(null),an(f);var M=C();return xa(E),an(k),M};d&&(o.set("length",A(r.length)),r=jd(r));var h="";let w=!1;function P(C){if(!w){w=!0,h=C,S(c,`${h} version`);for(const[E,k]of o)S(k,Ts(h,E));w=!1}}return new Proxy(r,{defineProperty(C,E,k){(!("value"in k)||k.configurable===!1||k.enumerable===!1||k.writable===!1)&&Ul();var M=o.get(E);return M===void 0?b(()=>{var I=A(k.value);return o.set(E,I),typeof E=="string"&&S(I,Ts(h,E)),I}):p(M,k.value,!0),!0},deleteProperty(C,E){var k=o.get(E);if(k===void 0){if(E in C){const M=b(()=>A(Vr));o.set(E,M),Ti(c),S(M,Ts(h,E))}}else p(k,Vr),Ti(c);return!0},get(C,E,k){var R;if(E===Ls)return r;if(E===kn)return P;var M=o.get(E),I=E in C;if(M===void 0&&(!I||(R=Hs(C,E))!=null&&R.writable)&&(M=b(()=>{var q=rr(I?C[E]:Vr),ce=A(q);return S(ce,Ts(h,E)),ce}),o.set(E,M)),M!==void 0){var Z=a(M);return Z===Vr?void 0:Z}return Reflect.get(C,E,k)},getOwnPropertyDescriptor(C,E){var k=Reflect.getOwnPropertyDescriptor(C,E);if(k&&"value"in k){var M=o.get(E);M&&(k.value=a(M))}else if(k===void 0){var I=o.get(E),Z=I==null?void 0:I.v;if(I!==void 0&&Z!==Vr)return{enumerable:!0,configurable:!0,value:Z,writable:!0}}return k},has(C,E){var Z;if(E===Ls)return!0;var k=o.get(E),M=k!==void 0&&k.v!==Vr||Reflect.has(C,E);if(k!==void 0||dr!==null&&(!M||(Z=Hs(C,E))!=null&&Z.writable)){k===void 0&&(k=b(()=>{var R=M?rr(C[E]):Vr,q=A(R);return S(q,Ts(h,E)),q}),o.set(E,k));var I=a(k);if(I===Vr)return!1}return M},set(C,E,k,M){var Oe;var I=o.get(E),Z=E in C;if(d&&E==="length")for(var R=k;R<I.v;R+=1){var q=o.get(R+"");q!==void 0?p(q,Vr):R in C&&(q=b(()=>A(Vr)),o.set(R+"",q),S(q,Ts(h,R)))}if(I===void 0)(!Z||(Oe=Hs(C,E))!=null&&Oe.writable)&&(I=b(()=>A(void 0)),S(I,Ts(h,E)),p(I,rr(k)),o.set(E,I));else{Z=I.v!==Vr;var ce=b(()=>rr(k));p(I,ce)}var de=Reflect.getOwnPropertyDescriptor(C,E);if(de!=null&&de.set&&de.set.call(M,k),!Z){if(d&&typeof E=="string"){var $e=o.get("length"),We=Number(E);Number.isInteger(We)&&We>=$e.v&&p($e,We+1)}Ti(c)}return!0},ownKeys(C){a(c);var E=Reflect.ownKeys(C).filter(I=>{var Z=o.get(I);return Z===void 0||Z.v!==Vr});for(var[k,M]of o)M.v!==Vr&&!(k in C)&&E.push(k);return E},setPrototypeOf(){zl()}})}function Ts(r,i){return typeof i=="symbol"?`${r}[Symbol(${i.description??""})]`:Ad.test(i)?`${r}.${i}`:/^\d+$/.test(i)?`${r}[${i}]`:`${r}['${i}']`}function Ya(r){try{if(r!==null&&typeof r=="object"&&Ls in r)return r[Ls]}catch{}return r}function Pd(r,i){return Object.is(Ya(r),Ya(i))}const Od=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function jd(r){return new Proxy(r,{get(i,o,d){var c=Reflect.get(i,o,d);return Od.has(o)?function(...f){Sd();var b=c.apply(this,f);return Bn(),b}:c}})}function Rd(){const r=Array.prototype,i=Array.__svelte_cleanup;i&&i();const{indexOf:o,lastIndexOf:d,includes:c}=r;r.indexOf=function(f,b){const h=o.call(this,f,b);if(h===-1){for(let w=b??0;w<this.length;w+=1)if(Ya(this[w])===f){yi("array.indexOf(...)");break}}return h},r.lastIndexOf=function(f,b){const h=d.call(this,f,b??this.length-1);if(h===-1){for(let w=0;w<=(b??this.length-1);w+=1)if(Ya(this[w])===f){yi("array.lastIndexOf(...)");break}}return h},r.includes=function(f,b){const h=c.call(this,f,b);if(!h){for(let w=0;w<this.length;w+=1)if(Ya(this[w])===f){yi("array.includes(...)");break}}return h},Array.__svelte_cleanup=()=>{r.indexOf=o,r.lastIndexOf=d,r.includes=c}}function j(r,i,o=!0){try{r===i!=(Ya(r)===Ya(i))&&yi(o?"===":"!==")}catch{}return r===i===o}function Xo(r,i,o=!0){return r==i!=(Ya(r)==Ya(i))&&yi(o?"==":"!="),r==i===o}var en,Mo,Gn,Vn;function Ld(){if(en===void 0){en=window,Mo=/Firefox/.test(navigator.userAgent);var r=Element.prototype,i=Node.prototype,o=Text.prototype;Gn=Hs(i,"firstChild").get,Vn=Hs(i,"nextSibling").get,Ko(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ko(o)&&(o.__t=void 0),r.__svelte_meta=null,Rd()}}function Qa(r=""){return document.createTextNode(r)}function eo(r){return Gn.call(r)}function Di(r){return Vn.call(r)}function e(r,i){return eo(r)}function Te(r,i=!1){{var o=eo(r);return o instanceof Comment&&o.data===""?Di(o):o}}function s(r,i=1,o=!1){let d=r;for(;i--;)d=Di(d);return d}function Nd(r){r.textContent=""}function Kn(){return!1}function Md(r,i,o){return document.createElementNS($n,r,void 0)}function Bi(r,i){if(i){const o=document.body;r.autofocus=!0,Fa(()=>{document.activeElement===o&&r.focus()})}}let tn=!1;function Dd(){tn||(tn=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var i;if(!r.defaultPrevented)for(const o of r.target.elements)(i=o.__on_r)==null||i.call(o)})},{capture:!0}))}function co(r){var i=ar,o=dr;xa(null),za(null);try{return r()}finally{xa(i),za(o)}}function Wn(r,i,o,d=o){r.addEventListener(i,()=>co(o));const c=r.__on_r;c?r.__on_r=()=>{c(),d(!0)}:r.__on_r=()=>d(!0),Dd()}function Id(r){dr===null&&(ar===null&&Dl(r),Ml()),Bs&&Nl(r)}function Fd(r,i){var o=i.last;o===null?i.last=i.first=r:(o.next=r,r.prev=o,i.last=r)}function Xa(r,i,o){for(var d=dr;d!==null&&(d.f&Qi)!==0;)d=d.parent;d!==null&&(d.f&la)!==0&&(r|=la);var c={ctx:Lr,deps:null,nodes:null,f:r|Jr|_a,first:null,fn:i,last:null,next:null,parent:d,b:d&&d.b,prev:null,teardown:null,wv:0,ac:null};if(c.component_function=vs,o)try{li(c)}catch(h){throw aa(c),h}else i!==null&&ka(c);var f=c;if(o&&f.deps===null&&f.teardown===null&&f.nodes===null&&f.first===f.last&&(f.f&ci)===0&&(f=f.first,(r&Za)!==0&&(r&ai)!==0&&f!==null&&(f.f|=ai)),f!==null&&(f.parent=d,d!==null&&Fd(f,d),ar!==null&&(ar.f&Wr)!==0&&(r&qs)===0)){var b=ar;(b.effects??(b.effects=[])).push(f)}return c}function Do(){return ar!==null&&!Ta}function Io(r){const i=Xa(oo,null,!1);return Rr(i,zr),i.teardown=r,i}function Gr(r){Id("$effect"),Fs(r,"name",{value:"$effect"});var i=dr.f,o=!ar&&(i&Aa)!==0&&(i&Li)===0;if(o){var d=Lr;(d.e??(d.e=[])).push(r)}else return Jn(r)}function Jn(r){return Xa(Ei|$l,r,!1)}function Ud(r){us.ensure();const i=Xa(qs|ci,r,!0);return(o={})=>new Promise(d=>{o.outro?Ns(i,()=>{aa(i),d(void 0)}):(aa(i),d(void 0))})}function Hn(r){return Xa(Ei,r,!1)}function zd(r){return Xa(no|ci,r,!0)}function Si(r,i=0){return Xa(oo|i,r,!0)}function x(r,i=[],o=[],d=[]){Fn(d,i,o,c=>{Xa(oo,()=>r(...c.map(a)),!0)})}function Fo(r,i=0){var o=Xa(Za|i,r,!0);return o.dev_stack=Ha,o}function pa(r){return Xa(Aa|ci,r,!0)}function Yn(r){var i=r.teardown;if(i!==null){const o=Bs,d=ar;rn(!0),xa(null);try{i.call(null)}finally{rn(o),xa(d)}}}function Uo(r,i=!1){var o=r.first;for(r.first=r.last=null;o!==null;){const c=o.ac;c!==null&&co(()=>{c.abort($s)});var d=o.next;(o.f&qs)!==0?o.parent=null:aa(o,i),o=d}}function Bd(r){for(var i=r.first;i!==null;){var o=i.next;(i.f&Aa)===0&&aa(i),i=o}}function aa(r,i=!0){var o=!1;(i||(r.f&wn)!==0)&&r.nodes!==null&&r.nodes.end!==null&&(qd(r.nodes.start,r.nodes.end),o=!0),Uo(r,i&&!o),Ci(r,0),Rr(r,ds);var d=r.nodes&&r.nodes.t;if(d!==null)for(const f of d)f.stop();Yn(r);var c=r.parent;c!==null&&c.first!==null&&Qn(r),r.component_function=null,r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes=r.ac=null}function qd(r,i){for(;r!==null;){var o=r===i?null:Di(r);r.remove(),r=o}}function Qn(r){var i=r.parent,o=r.prev,d=r.next;o!==null&&(o.next=d),d!==null&&(d.prev=o),i!==null&&(i.first===r&&(i.first=d),i.last===r&&(i.last=o))}function Ns(r,i,o=!0){var d=[];Zn(r,d,!0);var c=()=>{o&&aa(r),i&&i()},f=d.length;if(f>0){var b=()=>--f||c();for(var h of d)h.out(b)}else c()}function Zn(r,i,o){if((r.f&la)===0){r.f^=la;var d=r.nodes&&r.nodes.t;if(d!==null)for(const h of d)(h.is_global||o)&&i.push(h);for(var c=r.first;c!==null;){var f=c.next,b=(c.f&ai)!==0||(c.f&Aa)!==0&&(r.f&Za)!==0;Zn(c,i,b?o:!1),c=f}}}function zo(r){Xn(r,!0)}function Xn(r,i){if((r.f&la)!==0){r.f^=la,(r.f&zr)===0&&(Rr(r,Jr),ka(r));for(var o=r.first;o!==null;){var d=o.next,c=(o.f&ai)!==0||(o.f&Aa)!==0;Xn(o,c?i:!1),o=d}var f=r.nodes&&r.nodes.t;if(f!==null)for(const b of f)(b.is_global||i)&&b.in()}}function el(r,i){if(r.nodes)for(var o=r.nodes.start,d=r.nodes.end;o!==null;){var c=o===d?null:Di(o);i.append(o),o=c}}let Wi=!1,Bs=!1;function rn(r){Bs=r}let ar=null,Ta=!1;function xa(r){ar=r}let dr=null;function za(r){dr=r}let ma=null;function tl(r){ar!==null&&(ma===null?ma=[r]:ma.push(r))}let ra=null,oa=0,va=null;function Gd(r){va=r}let rl=1,Ss=0,Ms=Ss;function an(r){Ms=r}function al(){return++rl}function Ii(r){var i=r.f;if((i&Jr)!==0)return!0;if(i&Wr&&(r.f&=~Us),(i&Ca)!==0){for(var o=r.deps,d=o.length,c=0;c<d;c++){var f=o[c];if(Ii(f)&&Un(f),f.wv>r.wv)return!0}(i&_a)!==0&&Kr===null&&Rr(r,zr)}return!1}function sl(r,i,o=!0){var d=r.reactions;if(d!==null&&!(ma!==null&&Is.call(ma,r)))for(var c=0;c<d.length;c++){var f=d[c];(f.f&Wr)!==0?sl(f,i,!1):i===f&&(o?Rr(f,Jr):(f.f&zr)!==0&&Rr(f,Ca),ka(f))}}function il(r){var Z;var i=ra,o=oa,d=va,c=ar,f=ma,b=Lr,h=Ta,w=Ms,P=r.f;ra=null,oa=0,va=null,ar=(P&(Aa|qs))===0?r:null,ma=null,si(r.ctx),Ta=!1,Ms=++Ss,r.ac!==null&&(co(()=>{r.ac.abort($s)}),r.ac=null);try{r.f|=xo;var C=r.fn,E=C();r.f|=Li;var k=r.deps,M=Ht==null?void 0:Ht.is_fork;if(ra!==null){var I;if(M||Ci(r,oa),k!==null&&oa>0)for(k.length=oa+ra.length,I=0;I<ra.length;I++)k[oa+I]=ra[I];else r.deps=k=ra;if(Do()&&(r.f&_a)!==0)for(I=oa;I<k.length;I++)((Z=k[I]).reactions??(Z.reactions=[])).push(r)}else!M&&k!==null&&oa<k.length&&(Ci(r,oa),k.length=oa);if(Cn()&&va!==null&&!Ta&&k!==null&&(r.f&(Wr|Ca|Jr))===0)for(I=0;I<va.length;I++)sl(va[I],r);if(c!==null&&c!==r){if(Ss++,c.deps!==null)for(let R=0;R<o;R+=1)c.deps[R].rv=Ss;if(i!==null)for(const R of i)R.rv=Ss;va!==null&&(d===null?d=va:d.push(...va))}return(r.f&cs)!==0&&(r.f^=cs),E}catch(R){return Pn(R)}finally{r.f^=xo,ra=i,oa=o,va=d,ar=c,ma=f,si(b),Ta=h,Ms=w}}function Vd(r,i){let o=i.reactions;if(o!==null){var d=hl.call(o,r);if(d!==-1){var c=o.length-1;c===0?o=i.reactions=null:(o[d]=o[c],o.pop())}}if(o===null&&(i.f&Wr)!==0&&(ra===null||!Is.call(ra,i))){var f=i;(f.f&_a)!==0&&(f.f^=_a,f.f&=~Us),jo(f),Ed(f),Ci(f,0)}}function Ci(r,i){var o=r.deps;if(o!==null)for(var d=i;d<o.length;d++)Vd(r,o[d])}function li(r){var i=r.f;if((i&ds)===0){Rr(r,zr);var o=dr,d=Wi;dr=r,Wi=!0;{var c=vs;Ho(r.component_function);var f=Ha;Zi(r.dev_stack??Ha)}try{(i&(Za|hn))!==0?Bd(r):Uo(r),Yn(r);var b=il(r);r.teardown=typeof b=="function"?b:null,r.wv=rl;var h;td&&(r.f&Jr)!==0&&r.deps}finally{Wi=d,dr=o,Ho(c),Zi(f)}}}async function Ji(){await Promise.resolve(),vd()}function a(r){var i=r.f,o=(i&Wr)!==0;if(ar!==null&&!Ta){var d=dr!==null&&(dr.f&ds)!==0;if(!d&&(ma===null||!Is.call(ma,r))){var c=ar.deps;if((ar.f&xo)!==0)r.rv<Ss&&(r.rv=Ss,ra===null&&c!==null&&c[oa]===r?oa++:ra===null?ra=[r]:ra.push(r));else{(ar.deps??(ar.deps=[])).push(r);var f=r.reactions;f===null?r.reactions=[ar]:Is.call(f,ar)||f.push(ar)}}}if(yd.delete(r),Bs&&fs.has(r))return fs.get(r);if(o){var b=r;if(Bs){var h=b.v;return((b.f&zr)===0&&b.reactions!==null||nl(b))&&(h=Lo(b)),fs.set(b,h),h}var w=(b.f&_a)===0&&!Ta&&ar!==null&&(Wi||(ar.f&_a)!==0),P=(b.f&Li)===0;Ii(b)&&(w&&(b.f|=_a),Un(b)),w&&!P&&(zn(b),ol(b))}if(Kr!=null&&Kr.has(r))return Kr.get(r);if((r.f&cs)!==0)throw r.v;return r.v}function ol(r){if(r.f|=_a,r.deps!==null)for(const i of r.deps)(i.reactions??(i.reactions=[])).push(r),(i.f&Wr)!==0&&(i.f&_a)===0&&(zn(i),ol(i))}function nl(r){if(r.v===Vr)return!0;if(r.deps===null)return!1;for(const i of r.deps)if(fs.has(i)||(i.f&Wr)!==0&&nl(i))return!0;return!1}function ui(r){var i=Ta;try{return Ta=!0,r()}finally{Ta=i}}const Kd=["touchstart","touchmove"];function Wd(r){return Kd.includes(r)}function _(r,i,o){return(...d)=>{const c=r(...d);var f=c.nodeType===Cl?c.firstChild:c;return ll(f,i,o),c}}function Jd(r,i,o){r.__svelte_meta={parent:Ha,loc:{file:i,line:o[0],column:o[1]}},o[2]&&ll(r.firstChild,i,o[2])}function ll(r,i,o){for(var d=0;r&&d<o.length;)r.nodeType===Sl&&Jd(r,i,o[d++]),r=r.nextSibling}const Hi=Symbol("events"),dl=new Set,$o=new Set;function Hd(r,i,o,d={}){function c(f){if(d.capture||Eo.call(i,f),!f.cancelBubble)return co(()=>o==null?void 0:o.call(this,f))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Fa(()=>{i.addEventListener(r,c,d)}):i.addEventListener(r,c,d),c}function Yd(r,i,o,d,c){var f={capture:d,passive:c},b=Hd(r,i,o,f);(i===document.body||i===window||i===document||i instanceof HTMLMediaElement)&&Io(()=>{i.removeEventListener(r,b,f)})}function oe(r,i,o){(i[Hi]??(i[Hi]={}))[r]=o}function Dr(r){for(var i=0;i<r.length;i++)dl.add(r[i]);for(var o of $o)o(r)}let sn=null;function Eo(r){var R,q;var i=this,o=i.ownerDocument,d=r.type,c=((R=r.composedPath)==null?void 0:R.call(r))||[],f=c[0]||r.target;sn=r;var b=0,h=sn===r&&r.__root;if(h){var w=c.indexOf(h);if(w!==-1&&(i===document||i===window)){r.__root=i;return}var P=c.indexOf(i);if(P===-1)return;w<=P&&(b=w)}if(f=c[b]||r.target,f!==i){Fs(r,"currentTarget",{configurable:!0,get(){return f||o}});var C=ar,E=dr;xa(null),za(null);try{for(var k,M=[];f!==null;){var I=f.assignedSlot||f.parentNode||f.host||null;try{var Z=(q=f[Hi])==null?void 0:q[d];Z!=null&&(!f.disabled||r.target===f)&&Z.call(f,r)}catch(ce){k?M.push(ce):k=ce}if(r.cancelBubble||I===i||I===null)break;f=I}if(k){for(let ce of M)queueMicrotask(()=>{throw ce});throw k}}finally{r.__root=i,delete r.currentTarget,xa(C),za(E)}}}var pn,_n;const po=(_n=(pn=globalThis==null?void 0:globalThis.window)==null?void 0:pn.trustedTypes)==null?void 0:_n.createPolicy("svelte-trusted-html",{createHTML:r=>r});function Qd(r){return(po==null?void 0:po.createHTML(r))??r}function Zd(r,i=!1){var o=Md("template");return r=r.replaceAll("<!>","<!---->"),o.innerHTML=i?Qd(r):r,o.content}function to(r,i){var o=dr;o.nodes===null&&(o.nodes={start:r,end:i,a:null,t:null})}function m(r,i){var o=(i&Jl)!==0,d=(i&Hl)!==0,c,f=!r.startsWith("<!>");return()=>{c===void 0&&(c=Zd(f?r:"<!>"+r,!0),o||(c=eo(c)));var b=d||Mo?document.importNode(c,!0):c.cloneNode(!0);if(o){var h=eo(b),w=b.lastChild;to(h,w)}else to(b,b);return b}}function Da(r=""){{var i=Qa(r+"");return to(i,i),i}}function Sr(){var r=document.createDocumentFragment(),i=document.createComment(""),o=Qa();return r.append(i,o),to(i,o),r}function v(r,i){r!==null&&r.before(i)}function n(r,i){var o=i==null?"":typeof i=="object"?i+"":i;o!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=o,r.nodeValue=o+"")}function Xd(r,i){return ec(r,i)}const qi=new Map;function ec(r,{target:i,anchor:o,props:d={},events:c,context:f,intro:b=!0}){Ld();var h=new Set,w=E=>{for(var k=0;k<E.length;k++){var M=E[k];if(!h.has(M)){h.add(M);var I=Wd(M);for(const q of[i,document]){var Z=qi.get(q);Z===void 0&&(Z=new Map,qi.set(q,Z));var R=Z.get(M);R===void 0?(q.addEventListener(M,Eo,{passive:I}),Z.set(M,1)):Z.set(M,R+1)}}}};w(io(dl)),$o.add(w);var P=void 0,C=Ud(()=>{var E=o??i.appendChild(Qa());return _d(E,{pending:()=>{}},k=>{$r({});var M=Lr;f&&(M.c=f),c&&(d.$$events=c),P=r(k,d)||{},Er()}),()=>{var Z;for(var k of h)for(const R of[i,document]){var M=qi.get(R),I=M.get(k);--I==0?(R.removeEventListener(k,Eo),M.delete(k),M.size===0&&qi.delete(R)):M.set(k,I)}$o.delete(w),E!==o&&((Z=E.parentNode)==null||Z.removeChild(E))}});return tc.set(P,C),P}let tc=new WeakMap;function Cr(r){r&&jl(r[u]??"a component",r.name)}function Ar(){const r=Lr==null?void 0:Lr.function;function i(o){Ol(o,r[u])}return{$destroy:()=>i("$destroy()"),$on:()=>i("$on(...)"),$set:()=>i("$set(...)")}}var wa,Ma,na,Rs,ji,Ri,ao;class rc{constructor(i,o=!0){Oa(this,"anchor");Xt(this,wa,new Map);Xt(this,Ma,new Map);Xt(this,na,new Map);Xt(this,Rs,new Set);Xt(this,ji,!0);Xt(this,Ri,()=>{var i=Ht;if(H(this,wa).has(i)){var o=H(this,wa).get(i),d=H(this,Ma).get(o);if(d)zo(d),H(this,Rs).delete(o);else{var c=H(this,na).get(o);c&&(H(this,Ma).set(o,c.effect),H(this,na).delete(o),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),d=c.effect)}for(const[f,b]of H(this,wa)){if(H(this,wa).delete(f),f===i)break;const h=H(this,na).get(b);h&&(aa(h.effect),H(this,na).delete(b))}for(const[f,b]of H(this,Ma)){if(f===o||H(this,Rs).has(f))continue;const h=()=>{if(Array.from(H(this,wa).values()).includes(f)){var P=document.createDocumentFragment();el(b,P),P.append(Qa()),H(this,na).set(f,{effect:b,fragment:P})}else aa(b);H(this,Rs).delete(f),H(this,Ma).delete(f)};H(this,ji)||!d?(H(this,Rs).add(f),Ns(b,h,!1)):h()}}});Xt(this,ao,i=>{H(this,wa).delete(i);const o=Array.from(H(this,wa).values());for(const[d,c]of H(this,na))o.includes(d)||(aa(c.effect),H(this,na).delete(d))});this.anchor=i,Zt(this,ji,o)}ensure(i,o){var d=Ht,c=Kn();if(o&&!H(this,Ma).has(i)&&!H(this,na).has(i))if(c){var f=document.createDocumentFragment(),b=Qa();f.append(b),H(this,na).set(i,{effect:pa(()=>o(b)),fragment:f})}else H(this,Ma).set(i,pa(()=>o(this.anchor)));if(H(this,wa).set(d,i),c){for(const[h,w]of H(this,Ma))h===i?d.unskip_effect(w):d.skip_effect(w);for(const[h,w]of H(this,na))h===i?d.unskip_effect(w.effect):d.skip_effect(w.effect);d.oncommit(H(this,Ri)),d.ondiscard(H(this,ao))}else H(this,Ri).call(this)}}wa=new WeakMap,Ma=new WeakMap,na=new WeakMap,Rs=new WeakMap,ji=new WeakMap,Ri=new WeakMap,ao=new WeakMap;function y(r,i,o=!1){var d=new rc(r),c=o?ai:0;function f(b,h){d.ensure(b,h)}Fo(()=>{var b=!1;i((h,w=0)=>{b=!0,f(w,h)}),b||f(!1,null)},c)}function fr(r,i){return i}function ac(r,i,o){for(var d=[],c=i.length,f,b=i.length,h=0;h<c;h++){let E=i[h];Ns(E,()=>{if(f){if(f.pending.delete(E),f.done.add(E),f.pending.size===0){var k=r.outrogroups;So(io(f.done)),k.delete(f),k.size===0&&(r.outrogroups=null)}}else b-=1},!1)}if(b===0){var w=d.length===0&&o!==null;if(w){var P=o,C=P.parentNode;Nd(C),C.append(P),r.items.clear()}So(i,!w)}else f={pending:new Set(i),done:new Set},(r.outrogroups??(r.outrogroups=new Set)).add(f)}function So(r,i=!0){for(var o=0;o<r.length;o++)aa(r[o],i)}var on;function Wt(r,i,o,d,c,f=null){var b=r,h=new Map,w=(i&Tn)!==0;if(w){var P=r;b=P.appendChild(Qa())}var C=null,E=kd(()=>{var q=o();return so(q)?q:q==null?[]:io(q)}),k,M=!0;function I(){R.fallback=C,sc(R,k,b,i,d),C!==null&&(k.length===0?(C.f&Ja)===0?zo(C):(C.f^=Ja,gi(C,null,b)):Ns(C,()=>{C=null}))}var Z=Fo(()=>{k=a(E);for(var q=k.length,ce=new Set,de=Ht,$e=Kn(),We=0;We<q;We+=1){var Oe=k[We],je=d(Oe,We),De=M?null:h.get(je);De?(De.v&&ni(De.v,Oe),De.i&&ni(De.i,We),$e&&de.unskip_effect(De.e)):(De=ic(h,M?b:on??(on=Qa()),Oe,je,We,c,i,o),M||(De.e.f|=Ja),h.set(je,De)),ce.add(je)}if(q===0&&f&&!C&&(M?C=pa(()=>f(b)):(C=pa(()=>f(on??(on=Qa()))),C.f|=Ja)),q>ce.size&&oc(k,d),!M)if($e){for(const[ct,ke]of h)ce.has(ct)||de.skip_effect(ke.e);de.oncommit(I),de.ondiscard(()=>{})}else I();a(E)}),R={effect:Z,items:h,outrogroups:null,fallback:C};M=!1}function bi(r){for(;r!==null&&(r.f&Aa)===0;)r=r.next;return r}function sc(r,i,o,d,c){var ke,ae,Ue,ut,ht,G,we,pe,se;var f=(d&Kl)!==0,b=i.length,h=r.items,w=bi(r.effect.first),P,C=null,E,k=[],M=[],I,Z,R,q;if(f)for(q=0;q<b;q+=1)I=i[q],Z=c(I,q),R=h.get(Z).e,(R.f&Ja)===0&&((ae=(ke=R.nodes)==null?void 0:ke.a)==null||ae.measure(),(E??(E=new Set)).add(R));for(q=0;q<b;q+=1){if(I=i[q],Z=c(I,q),R=h.get(Z).e,r.outrogroups!==null)for(const V of r.outrogroups)V.pending.delete(R),V.done.delete(R);if((R.f&Ja)!==0)if(R.f^=Ja,R===w)gi(R,null,o);else{var ce=C?C.next:w;R===r.effect.last&&(r.effect.last=R.prev),R.prev&&(R.prev.next=R.next),R.next&&(R.next.prev=R.prev),os(r,C,R),os(r,R,ce),gi(R,ce,o),C=R,k=[],M=[],w=bi(C.next);continue}if((R.f&la)!==0&&(zo(R),f&&((ut=(Ue=R.nodes)==null?void 0:Ue.a)==null||ut.unfix(),(E??(E=new Set)).delete(R))),R!==w){if(P!==void 0&&P.has(R)){if(k.length<M.length){var de=M[0],$e;C=de.prev;var We=k[0],Oe=k[k.length-1];for($e=0;$e<k.length;$e+=1)gi(k[$e],de,o);for($e=0;$e<M.length;$e+=1)P.delete(M[$e]);os(r,We.prev,Oe.next),os(r,C,We),os(r,Oe,de),w=de,C=Oe,q-=1,k=[],M=[]}else P.delete(R),gi(R,w,o),os(r,R.prev,R.next),os(r,R,C===null?r.effect.first:C.next),os(r,C,R),C=R;continue}for(k=[],M=[];w!==null&&w!==R;)(P??(P=new Set)).add(w),M.push(w),w=bi(w.next);if(w===null)continue}(R.f&Ja)===0&&k.push(R),C=R,w=bi(R.next)}if(r.outrogroups!==null){for(const V of r.outrogroups)V.pending.size===0&&(So(io(V.done)),(ht=r.outrogroups)==null||ht.delete(V));r.outrogroups.size===0&&(r.outrogroups=null)}if(w!==null||P!==void 0){var je=[];if(P!==void 0)for(R of P)(R.f&la)===0&&je.push(R);for(;w!==null;)(w.f&la)===0&&w!==r.fallback&&je.push(w),w=bi(w.next);var De=je.length;if(De>0){var ct=(d&Tn)!==0&&b===0?o:null;if(f){for(q=0;q<De;q+=1)(we=(G=je[q].nodes)==null?void 0:G.a)==null||we.measure();for(q=0;q<De;q+=1)(se=(pe=je[q].nodes)==null?void 0:pe.a)==null||se.fix()}ac(r,je,ct)}}f&&Fa(()=>{var V,T;if(E!==void 0)for(R of E)(T=(V=R.nodes)==null?void 0:V.a)==null||T.apply()})}function ic(r,i,o,d,c,f,b,h){var w=(b&Gl)!==0?(b&Wl)===0?Cd(o,!1,!1):zs(o):null,P=(b&Vl)!==0?zs(c):null;return w&&(w.trace=()=>{h()[(P==null?void 0:P.v)??c]}),{v:w,i:P,e:pa(()=>(f(i,w??o,P??c,h),()=>{r.delete(d)}))}}function gi(r,i,o){if(r.nodes)for(var d=r.nodes.start,c=r.nodes.end,f=i&&(i.f&Ja)===0?i.nodes.start:o;d!==null;){var b=Di(d);if(f.before(d),d===c)return;d=b}}function os(r,i,o){i===null?r.effect.first=o:i.next=o,o===null?r.effect.last=i:o.prev=i}function oc(r,i){const o=new Map,d=r.length;for(let c=0;c<d;c++){const f=i(r[c],c);if(o.has(f)){const b=String(o.get(f)),h=String(c);let w=String(f);w.startsWith("[object ")&&(w=null),Ll(b,h,w)}o.set(f,c)}}const nn=[...` 	
\r\f \v\uFEFF`];function nc(r,i,o){var d=r==null?"":""+r;if(i&&(d=d?d+" "+i:i),o){for(var c in o)if(o[c])d=d?d+" "+c:c;else if(d.length)for(var f=c.length,b=0;(b=d.indexOf(c,b))>=0;){var h=b+f;(b===0||nn.includes(d[b-1]))&&(h===d.length||nn.includes(d[h]))?d=(b===0?"":d.substring(0,b))+d.substring(h+1):b=h}}return d===""?null:d}function lc(r,i){return r==null?null:String(r)}function at(r,i,o,d,c,f){var b=r.__className;if(b!==o||b===void 0){var h=nc(o,d,f);h==null?r.removeAttribute("class"):r.className=h,r.__className=o}else if(f&&c!==f)for(var w in f){var P=!!f[w];(c==null||P!==!!c[w])&&r.classList.toggle(w,P)}return f}function Js(r,i,o,d){var c=r.__style;if(c!==i){var f=lc(i);f==null?r.removeAttribute("style"):r.style.cssText=f,r.__style=i}return d}function vo(r,i,o=!1){if(r.multiple){if(i==null)return;if(!so(i))return Zl();for(var d of r.options)d.selected=i.includes($i(d));return}for(d of r.options){var c=$i(d);if(Pd(c,i)){d.selected=!0;return}}(!o||i!==void 0)&&(r.selectedIndex=-1)}function Bo(r){var i=new MutationObserver(()=>{vo(r,r.__value)});i.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Io(()=>{i.disconnect()})}function Fi(r,i,o=i){var d=new WeakSet,c=!0;Wn(r,"change",f=>{var b=f?"[selected]":":checked",h;if(r.multiple)h=[].map.call(r.querySelectorAll(b),$i);else{var w=r.querySelector(b)??r.querySelector("option:not([disabled])");h=w&&$i(w)}o(h),Ht!==null&&d.add(Ht)}),Hn(()=>{var f=i();if(r===document.activeElement){var b=Xi??Ht;if(d.has(b))return}if(vo(r,f,c),c&&f===void 0){var h=r.querySelector(":checked");h!==null&&(f=$i(h),o(f))}r.__value=f,c=!1}),Bo(r)}function $i(r){return"__value"in r?r.__value:r.value}const dc=Symbol("is custom element"),cc=Symbol("is html");function Lt(r,i,o,d){var c=vc(r);c[i]!==(c[i]=o)&&(i==="loading"&&(r[El]=o),o==null?r.removeAttribute(i):typeof o!="string"&&uc(r).includes(i)?r[i]=o:r.setAttribute(i,o))}function vc(r){return r.__attributes??(r.__attributes={[dc]:r.nodeName.includes("-"),[cc]:r.namespaceURI===$n})}var ln=new Map;function uc(r){var i=r.getAttribute("is")||r.nodeName,o=ln.get(i);if(o)return o;ln.set(i,o=[]);for(var d,c=r,f=Element.prototype;f!==c;){d=yl(c);for(var b in d)d[b].set&&o.push(b);c=Oo(c)}return o}function vr(r,i,o=i){var d=new WeakSet;Wn(r,"input",async c=>{r.type==="checkbox"&&Wo();var f=c?r.defaultValue:r.value;if(f=_o(r)?mo(f):f,o(f),Ht!==null&&d.add(Ht),await Ji(),f!==(f=i())){var b=r.selectionStart,h=r.selectionEnd,w=r.value.length;if(r.value=f??"",h!==null){var P=r.value.length;b===h&&h===w&&P>w?(r.selectionStart=P,r.selectionEnd=P):(r.selectionStart=b,r.selectionEnd=Math.min(h,P))}}}),ui(i)==null&&r.value&&(o(_o(r)?mo(r.value):r.value),Ht!==null&&d.add(Ht)),Si(()=>{r.type==="checkbox"&&Wo();var c=i();if(r===document.activeElement){var f=Xi??Ht;if(d.has(f))return}_o(r)&&c===mo(r.value)||r.type==="date"&&!c&&!r.value||c!==r.value&&(r.value=c??"")})}function _o(r){var i=r.type;return i==="number"||i==="range"}function mo(r){return r===""?null:+r}function dn(r,i){return r===i||(r==null?void 0:r[Ls])===i}function fc(r={},i,o,d){return Hn(()=>{var c,f;return Si(()=>{c=f,f=[],ui(()=>{r!==o(...f)&&(i(r,...f),c&&dn(o(...c),r)&&i(null,...c))})}),()=>{Fa(()=>{f&&dn(o(...f),r)&&i(null,...f)})}}),r}let Gi=!1;function pc(r){var i=Gi;try{return Gi=!1,[r(),Gi]}finally{Gi=i}}function _c(r,i,o,d){var c=d,f=!0,b=()=>(f&&(f=!1,c=d),c),h;h=r[i],h===void 0&&d!==void 0&&(h=b());var w;return w=()=>{var P=r[i];return P===void 0?b():(f=!0,P)},w}function cn(r,i,o,d,c,f){gd(i,()=>{var b=!1,h=vs==null?void 0:vs[u];Si(()=>{if(!b){var[w,P]=pc(o);if(!P){var C=d(),E=!1,k=Si(()=>{E||w[C]});if(E=!0,k.deps===null){var M=`${h}:${c}:${f}`;Yl(r,M),b=!0}}}})})}function tr(r,...i){return ui(()=>{try{let o=!1;const d=[];for(const c of i)c&&typeof c=="object"&&Ls in c?(d.push(id(c,!0)),o=!0):d.push(c);o&&(Ql(r),console.log("%c[snapshot]","color: grey",...d))}catch{}}),i}{let r=function(i){if(!(i in globalThis)){let o;Object.defineProperty(globalThis,i,{configurable:!0,get:()=>{if(o!==void 0)return o;Fl(i)},set:d=>{o=d}})}};var j2=r;r("$state"),r("$effect"),r("$derived"),r("$inspect"),r("$props"),r("$bindable")}function fi(r){Lr===null&&Al("onMount"),Gr(()=>{const i=ui(r);if(typeof i=="function")return i})}const mc="5";var mn;typeof window<"u"&&((mn=window.__svelte??(window.__svelte={})).v??(mn.v=new Set)).add(mc);const xc="modulepreload",bc=function(r){return"/"+r},vn={},Ws=function(i,o,d){let c=Promise.resolve();if(o&&o.length>0){let b=function(P){return Promise.all(P.map(C=>Promise.resolve(C).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),w=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));c=b(o.map(P=>{if(P=bc(P),P in vn)return;vn[P]=!0;const C=P.endsWith(".css"),E=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${P}"]${E}`))return;const k=document.createElement("link");if(k.rel=C?"stylesheet":xc,C||(k.as="script"),k.crossOrigin="",k.href=P,w&&k.setAttribute("nonce",w),document.head.appendChild(k),C)return new Promise((M,I)=>{k.addEventListener("load",M),k.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${P}`)))})}))}function f(b){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=b,window.dispatchEvent(h),!h.defaultPrevented)throw b}return c.then(b=>{for(const h of b||[])h.status==="rejected"&&f(h.reason);return i().catch(f)})},Ai={"common.loading":"Loading...","common.save":"Save","common.saving":"Saving...","common.saved":"Saved","common.cancel":"Cancel","common.refresh":"Refresh","common.delete":"Delete","common.confirm":"Confirm","common.back":"Back","common.next":"Next","common.skip":"Skip","common.yes":"Yes","common.no":"No","common.enabled":"Enabled","common.disabled":"Disabled","common.connected":"Connected","common.disconnected":"Disconnected","common.not_configured":"Not configured","common.none":"None","common.error":"Error","common.success":"Success","common.failed":"Failed","common.network_error":"Network error","common.connection_failed":"Connection failed","common.or":"or","common.tools":"tools","common.verify":"Verify","common.verifying":"Verifying...","common.close":"Close","nav.overview":"Overview","nav.chat":"Chat","nav.goals":"Goals","nav.skills":"Skills","nav.knowledge":"Knowledge","nav.tools":"Tools","nav.trash":"Trash","nav.security":"Security","nav.ops":"Ops","nav.settings":"Settings","header.title":"safe-agent","header.loading":"loading...","header.paused":"paused","header.running":"running","header.disconnected":"disconnected","header.tools_count":"{count} tools","header.resume":"Resume","header.pause":"Pause","header.force_tick":"Force Tick","header.sign_out":"Sign out","login.title":"safe-agent","login.2fa_required":"Two-factor authentication required","login.sign_in_continue":"Sign in to continue","login.sign_in_account":"Sign in with your account","login.enter_password":"Enter the dashboard password to continue","login.login_failed":"Login failed","login.verification_failed":"Verification failed","login.waiting_passkey":"Waiting for passkey...","login.use_passkey":"Use Passkey","login.authenticator_code":"Authenticator Code","login.verify":"Verify","login.verify_recovery":"Verify Recovery Code","login.use_recovery":"Use a recovery code instead","login.recovery_code":"Recovery Code","login.use_authenticator":"Use authenticator code instead","login.back_to_login":"Back to login","login.continue_with":"Continue with {provider}","login.username":"Username","login.password":"Password","login.enter_username":"Enter username","login.enter_password_placeholder":"Enter password","login.signing_in":"Signing in...","login.sign_in":"Sign In","login.passkey_cancelled":"Passkey authentication was cancelled","login.passkey_cancelled_timeout":"Passkey authentication was cancelled or timed out","login.passkey_failed":"Passkey authentication failed: {message}","login.passkey_start_failed":"Failed to start passkey authentication","login.passkey_verify_failed":"Passkey verification failed","onboarding.welcome":"Welcome to Safe Agent","onboarding.welcome_desc":"Let's set up your AI agent. You can change these later in Settings.","onboarding.agent_name":"Agent Name","onboarding.agent_name_placeholder":"e.g. Jarvis, Friday, Atlas...","onboarding.core_personality":"Core Personality","onboarding.personality_placeholder":"Describe how your agent should behave, e.g. 'You are a helpful assistant that responds concisely.'","onboarding.personality_hint":"This instruction persists across all interactions.","onboarding.llm_backend":"LLM Backend","onboarding.llm_desc":"Choose and test the AI model that powers your agent.","onboarding.backend_label":"Backend","onboarding.env_hint":"Make sure the required environment variable for your chosen backend is set","onboarding.testing":"Testing connection...","onboarding.test_connection":"Test Connection","onboarding.test_success":"Success!","onboarding.test_failed":"Failed","onboarding.network_error_test":"Network error testing LLM connection","onboarding.messaging":"Messaging Platforms","onboarding.messaging_desc":"Optionally connect messaging platforms. You can do this later in Settings.","onboarding.telegram":"Telegram","onboarding.telegram_requires":"Requires TELEGRAM_BOT_TOKEN","onboarding.whatsapp":"WhatsApp","onboarding.whatsapp_requires":"Requires WhatsApp bridge setup","onboarding.messaging_hint":"Messaging platforms can be configured later via the config file or environment variables.","onboarding.ready":"Ready to Go","onboarding.ready_desc":"Review your configuration and complete setup.","onboarding.review_name":"Agent Name","onboarding.review_backend":"LLM Backend","onboarding.review_telegram":"Telegram","onboarding.review_whatsapp":"WhatsApp","onboarding.review_personality":"Personality","onboarding.default":"(default)","onboarding.change_later":"You can change all of these later from the Settings tab.","onboarding.step_of":"Step {current} of {total}","onboarding.completing":"Completing...","onboarding.complete_setup":"Complete Setup","onboarding.network_error_save":"Network error saving config","onboarding.network_error_complete":"Network error completing onboarding","onboarding.failed_save":"Failed to save config","onboarding.failed_complete":"Failed to complete onboarding","chat.no_messages":"No messages yet. Say something to the agent.","chat.tool_running":"running…","chat.thinking":"Thinking…","chat.processing":"Processing…","chat.send_failed":"Failed to send message","chat.placeholder":"Type a message...","goals.title":"Goals & Tasks","goals.all_statuses":"All statuses","goals.active":"Active","goals.paused":"Paused","goals.completed":"Completed","goals.failed":"Failed","goals.cancelled":"Cancelled","goals.error_loading":"Error loading goals","goals.no_goals":"No goals yet. The agent will create goals as it works on tasks.","goals.pause":"Pause","goals.cancel":"Cancel","goals.resume":"Resume","goals.self_reflection":"Self-Reflection","goals.tasks":"Tasks","goals.no_tasks":"No tasks defined yet.","goals.depends_on":"Depends on:","goals.tool":"Tool:","goals.created":"Created","goals.updated":"Updated","goals.completed_at":"Completed","goals.id":"ID","goals.status_update_failed":"Failed to update status: ","skills.title":"Skills & Credentials","skills.count":"{count} skill(s)","skills.import":"Import","skills.import_skill":"Import Skill","skills.git_repo":"Git Repository","skills.archive_url":"Archive URL","skills.local_path":"Local Path","skills.git_placeholder":"https://github.com/user/skill.git","skills.url_placeholder":"https://example.com/skill.tar.gz","skills.path_placeholder":"/path/to/skill/dir","skills.importing":"Importing...","skills.error_loading":"Error loading skills","skills.no_skills":"No skills installed. The agent can create skills, or import one above.","skills.stop":"Stop","skills.start":"Start","skills.restart":"Restart","skills.view_log":"View Log","skills.credentials":"Credentials","skills.no_credentials":"No credentials defined","skills.schedule":"Schedule","skills.entrypoint":"Entrypoint","skills.has_venv":"Python venv","skills.manually_stopped":"Manually stopped","knowledge.title":"Knowledge Graph","knowledge.summary":"{nodes} nodes, {edges} edges","knowledge.search_placeholder":"Search knowledge graph...","knowledge.back":"Back","knowledge.no_nodes":"No knowledge nodes yet. The agent builds its knowledge graph over time.","knowledge.no_neighbors":"No neighbors for this node.","knowledge.confidence":"confidence:","knowledge.node_type":"Type","knowledge.created":"Created","tools.title":"Registered Tools","tools.no_tools":"No tools loaded.","tools.description":"Description","tools.auto_approve":"Auto-approve","tools.parameters":"Parameters","tools.no_parameters":"No parameters","trash.title":"Trash","trash.empty":"Trash is empty.","trash.restore":"Restore","trash.delete_permanent":"Delete permanently","trash.confirm_delete":"Permanently delete this file?","trash.deleted":"Deleted","trash.original_path":"Original path","security.title":"Security & Trust","security.overview":"Overview","security.audit_trail":"Audit Trail","security.cost_tracking":"Cost Tracking","security.rate_limits":"Rate Limits","security.twofa":"2FA","security.total_events":"Total Events","security.tool_calls":"Tool Calls","security.approvals":"Approvals","security.rejections":"Rejections","security.pii_detections":"PII Detections","security.permission_denied":"Permission Denied","security.todays_cost":"Today's Cost","security.month_cost":"This Month","security.total_cost":"All-Time Cost","security.total_tokens":"Total Tokens","security.daily_limit":"Daily Limit","security.budget_remaining":"Budget Remaining","security.calls_per_min":"Calls/min","security.calls_per_hour":"Calls/hr","security.limit_per_min":"Limit/min","security.limit_per_hour":"Limit/hr","security.recent_events":"Recent Events","security.no_events":"No audit events yet.","security.filter":"Filter","security.all_types":"All types","security.why":"Why?","security.recent_costs":"Recent Cost Entries","security.no_costs":"No cost data yet.","security.model":"Model","security.tokens":"Tokens","security.cost":"Cost","security.pending_challenges":"Pending 2FA Challenges","security.no_challenges":"No pending 2FA challenges.","security.reject":"Reject","security.action_explanation":"Action Explanation","security.causal_chain":"Causal Chain","security.no_explanation":"No explanation available.","ops.health":"Health","ops.updates":"Updates","ops.backup":"Backup","ops.federation":"Federation","ops.llm_backends":"LLM Backends","ops.health_check":"Health Check","ops.checking_health":"Checking health...","ops.database":"Database","ops.agent":"Agent","ops.prometheus":"Prometheus Metrics","ops.prometheus_desc":"Metrics are exposed at /metrics in Prometheus text format.","ops.prometheus_hint":"Point your Prometheus scrape config or Grafana agent at this endpoint. No authentication is required for /metrics.","ops.view_raw_metrics":"View Raw Metrics","ops.auto_update":"Auto-Update","ops.current_version":"Current:","ops.update_available":"Update Available","ops.up_to_date":"Up to date","ops.release_notes":"Release Notes","ops.applying":"Applying...","ops.apply_update":"Apply Update","ops.view_release":"View Release","ops.check_updates":"Check for Updates","ops.checking":"Checking...","ops.backup_restore":"Backup & Restore","ops.export_backup":"Export Backup","ops.download_backup":"Download Backup","ops.restore_backup":"Restore from Backup","ops.upload_backup":"Upload Backup File","ops.restoring":"Restoring...","ops.federation_title":"Multi-Node Federation","ops.federation_loading":"Loading federation status...","ops.add_peer":"Add Peer Address","ops.add":"Add","ops.peers":"Peers","ops.no_peers":"No peers connected.","ops.remove_peer":"Remove peer","ops.llm_plugins":"LLM Backend Plugins","ops.loading_backends":"Loading backends...","ops.active_backend":"Active:","ops.available_backends":"Available Backends","settings.messaging":"Messaging Platforms","settings.telegram":"Telegram","settings.telegram_desc":"Long-polling bot via teloxide","settings.whatsapp":"WhatsApp","settings.whatsapp_desc":"Baileys bridge (Node.js)","settings.bot_token":"Bot Token","settings.bot_token_set":"Set (TELEGRAM_BOT_TOKEN)","settings.bot_token_not_set":"Not set","settings.allowed_chat_ids":"Allowed Chat IDs","settings.none_all_denied":"None (all denied)","settings.primary_channel":"Primary Channel","settings.enable_telegram_hint":"Enable Telegram by setting telegram.enabled = true in your config and providing a TELEGRAM_BOT_TOKEN env var.","settings.bridge_port":"Bridge Port","settings.webhook_port":"Webhook Port","settings.allowed_numbers":"Allowed Numbers","settings.connected_number":"Connected Number","settings.scan_qr":"Scan this QR code with WhatsApp to pair","settings.waiting_qr":"Waiting for QR...","settings.refresh_qr":"Refresh QR","settings.enable_whatsapp_hint":"Enable WhatsApp by setting whatsapp.enabled = true in your config and adding allowed numbers. The Baileys bridge requires Node.js in the container.","settings.active_platforms":"{count} active platform(s)","settings.active_platforms_detail":"the primary messaging backend is used by the message tool.","settings.pairing":"Pairing","settings.dashboard_auth":"Dashboard Authentication","settings.password_login":"Password Login","settings.password_active":"Password authentication is active via the DASHBOARD_PASSWORD env var.","settings.password_disabled":"Password login is disabled. Users must sign in via SSO.","settings.sso_providers":"SSO Providers","settings.sso_configured":"{count} configured","settings.no_sso":"No SSO providers configured. Add providers to [dashboard].sso_providers in config.","settings.lockout_warning":"Password login is disabled and no SSO providers are configured. You may be locked out after your session expires.","settings.sso_config_hint":"Configure SSO in your config.toml:","settings.sso_callback_hint":"SSO reuses the same OAuth client credentials. The SSO callback URL is /api/auth/sso/{provider}/callback.","settings.twofa":"Two-Factor Authentication","settings.oauth":"Connected Accounts (OAuth)","settings.oauth_count":"{count} account(s)","settings.available_integrations":"Available Integrations","settings.no_oauth":"No OAuth providers available.","settings.no_refresh_token":"No refresh token","settings.updated":"Updated:","settings.refresh_all":"Refresh all","settings.add_account":"Add account","settings.disconnect_confirm":"Disconnect {email} from {provider}?","settings.timezone_locale":"Timezone & Locale","settings.current_time":"Current Time","settings.effective_timezone":"Effective Timezone","settings.per_user_override":"(per-user override)","settings.system_default":"(system default)","settings.timezone":"Timezone","settings.detect":"Detect","settings.timezone_hint":"IANA timezone name. Leave empty to use system default ({default}).","settings.locale":"Locale","settings.locale_hint":"BCP 47 locale tag (e.g. en-US, de-DE, ja-JP). Leave empty to use system default ({default}).","settings.config_reference":"Configuration Reference","settings.config_hint":"Messaging and OAuth configuration is done via the TOML config file and environment variables. Changes require a container restart.","settings.language":"Language","settings.language_hint":"Choose the dashboard display language. This also sets your locale for agent responses.","memory.title_core":"Core Memory","memory.title_conversation":"Conversation","memory.title_archival":"Archival","memory.core":"Core","memory.conversation":"Conversation","memory.archival":"Archival","memory.empty":"No memories found.","memory.search_placeholder":"Search archival memory...","memory.search":"Search","memory.edit":"Edit","memory.save":"Save","memory.delete_confirm":"Delete this memory?","stats.title":"Agent Statistics","stats.ticks":"Ticks","stats.messages":"Messages","stats.approvals":"Approvals","stats.rejections":"Rejections","stats.uptime":"Uptime","stats.last_tick":"Last Tick","stats.never":"never","activity.title":"Recent Activity","activity.no_activity":"No recent activity.","feed.title":"Tool Activity","feed.no_events":"No tool events yet. Activity will appear here in real time.","feed.thinking":"Thinking","feed.executing":"Executing","feed.completed":"Completed","feed.approval_needed":"Approval needed","pending.title":"Pending Actions","pending.approve_all":"Approve All","pending.reject_all":"Reject All","pending.approve":"Approve","pending.reject":"Reject","pending.no_pending":"No pending actions.","pending.tool":"Tool","pending.params":"Params","users.title":"User Management","users.add_user":"Add User","users.no_users":"No users found.","users.username":"Username","users.display_name":"Display Name","users.email":"Email","users.role":"Role","users.status":"Status","users.actions":"Actions","users.active":"Active","users.disabled":"disabled","users.edit":"Edit","users.disable":"Disable","users.enable":"Enable","users.create_user":"Create User","users.creating":"Creating...","users.password":"Password","users.role_admin":"admin","users.role_user":"user","users.role_viewer":"viewer","users.telegram_id":"Telegram ID","users.whatsapp_id":"WhatsApp ID","users.platform_ids":"Platform IDs","twofa.title":"Two-Factor Authentication","twofa.totp_enabled":"TOTP two-factor authentication is active. Enter your current code to disable it.","twofa.totp_code":"TOTP Code","twofa.disable_2fa":"Disable 2FA","twofa.setup_desc":"Add an extra layer of security by requiring a time-based code from your phone when signing in.","twofa.setup_authenticator":"Set Up Authenticator","twofa.scan_step":"1. Scan with your authenticator app:","twofa.manual_key":"Or enter this key manually:","twofa.save_recovery":"2. Save your recovery codes:","twofa.recovery_hint":"Store these codes somewhere safe. Each code can only be used once.","twofa.show_codes":"Show recovery codes","twofa.hide_codes":"Hide recovery codes","twofa.verify_step":"3. Verify your setup:","twofa.verify_hint":"Enter a code from your authenticator to confirm.","twofa.verify_enable":"Verify & Enable","twofa.passkeys":"Passkeys","twofa.passkeys_desc":"Use biometrics, security keys, or your device's screen lock","twofa.registered":"{count} registered","twofa.passkey_name":"Passkey Name","twofa.passkey_placeholder":"e.g. MacBook Touch ID","twofa.registering":"Registering...","twofa.add_passkey":"Add Passkey","twofa.passkey_info":"Passkeys use your device's biometric sensor, security key, or screen lock for passwordless 2FA.","twofa.added":"Added","twofa.delete_passkey":"Delete passkey","twofa.info_box":"When 2FA is enabled, you'll need to provide a second factor (authenticator code or passkey) after entering your password.","twofa.info_both":"You can use either your authenticator app or a passkey.","cred.label":"Credential","cred.env":"env","cred.oauth":"OAuth","cred.set":"Set","cred.missing":"Missing","cred.token_present":"Token present","cred.no_token":"No token","cred.configured":"Configured","cred.required":"Required","cred.optional":"Optional","cred.configured_placeholder":"(configured - enter new value to update)","cred.enter_value":"Enter value...","cred.remove_confirm":'Remove credential "{name}" from "{skill}"?',"cred.save_failed":"Failed to save credential: ","cred.remove_failed":"Failed to remove credential: ","goals.count":"{count} goal(s)","skills.name_placeholder":"Skill name (optional, auto-detected)","skills.import_desc":"Import an existing OpenClaw skill from a Git repository, archive URL (.tar.gz/.zip), or local directory. The skill must contain a skill.toml manifest.","skills.no_skills_import":"No skills installed. Skills will appear here when the agent creates them, or use the Import button above.","skills.disable":"Disable","skills.enable":"Enable","skills.deleting":"Deleting...","skills.delete":"Delete","skills.parameters":"Parameters","skills.logs":"Logs","skills.manifest":"Manifest","skills.extension":"Extension","skills.environment_vars":"Environment Variables","skills.add":"Add","skills.skill_panel":"Skill Panel","skills.open_full_page":"Open full page","skills.registered_routes":"Registered Routes","skills.no_extension_ui":"This skill has an extension but no UI panel or routes registered.","skills.edit_manifest":"Edit skill.toml directly","skills.loading_detail":"Loading detail...","skills.last_lines":"Last 300 lines of skill.log","skills.no_log":"(no log output)","skills.saved_restart":"Saved. Restart the skill for changes to take effect.","skills.delete_confirm":'Permanently delete skill "{name}"? This cannot be undone.',"skills.restart_failed":"Failed to restart skill: ","skills.delete_failed":"Failed to delete skill: ","skills.toggle_failed":"Failed to toggle skill: ","skills.env_failed":"Failed to set env var: ","skills.delete_env_failed":"Failed to delete env var: ","skills.remove_env_confirm":'Remove env var "{key}" from "{skill}"?',"trash.search_placeholder":"Search by name, path, or source...","trash.no_match":'No items matching "{query}"',"trash.empty_hint":"Deleted files and directories will appear here for recovery.","trash.empty_trash":"Empty Trash","trash.delete_all":"Delete all?","trash.items_count":"{count} item(s)","trash.restore_title":"Restore to original location","trash.delete_permanent_title":"Permanently delete","trash.permanent_confirm":'Permanently delete "{name}"? This cannot be undone.',"trash.load_failed":"Failed to load trash","trash.restore_failed":"Failed to restore","trash.delete_failed":"Failed to delete","trash.empty_failed":"Failed to empty trash","trash.restored":"Restored","trash.emptied":"Trash emptied","users.users":"Users","users.new_user":"New User","users.loading":"Loading users...","users.no_users_desc":"No users configured. The agent operates in single-user mode.","users.create":"Create","users.delete_confirm":'Delete user "{username}"? This cannot be undone.',"users.disable_user":"Disable user","users.enable_user":"Enable user","users.delete_user":"Delete user","users.last_seen":"Last seen:","users.never":"Never","users.just_now":"Just now","users.failed_create":"Failed to create user (username may already exist)","users.error_create":"Error creating user","users.failed_update":"Failed to update user","users.failed_role":"Failed to update role","users.failed_delete":"Failed to delete user","users.created":'User "{username}" created',"twofa.multi_user_only":"Two-factor authentication is only available for multi-user accounts.","twofa.loading_status":"Loading 2FA status...","twofa.load_failed":"Failed to load 2FA status","twofa.authenticator_app":"Authenticator App (TOTP)","twofa.authenticator_hint":"Use an app like Google Authenticator or Authy","twofa.enabled_badge":"Enabled","twofa.disabled_badge":"Disabled","twofa.none_badge":"None","twofa.added_label":"Added","ops.tools":"Tools","ops.exporting":"Exporting...","ops.peer_placeholder":"http://192.168.1.101:3031","ops.remove_peer_title":"Remove peer","ops.federation_disabled":"Federation is not enabled. Add [federation] with enabled = true to your config to enable multi-node features.","ops.peers_count":"Peers ({count})","ops.switch_backend_hint":"To switch backends, set backend in [llm] config or the LLM_BACKEND env var and restart. Custom backends can be registered as plugins at runtime.","ops.model_advisor":"Model Advisor","ops.system_specs":"System Specifications","ops.advisor_ram":"RAM","ops.advisor_available":"available","ops.advisor_cpu":"CPU","ops.advisor_cores":"cores","ops.advisor_gpu":"GPU","ops.advisor_no_gpu":"No GPU detected","ops.advisor_backend_accel":"Acceleration","ops.advisor_unified":"Unified memory","ops.advisor_detect":"Detect Hardware & Recommend Models","ops.ollama_status":"Ollama Status","ops.ollama_running":"Ollama is running","ops.ollama_not_running":"Ollama is not running","ops.ollama_install_hint":"Install Ollama from https://ollama.com to pull and run models locally.","ops.advisor_models_installed":"models installed","ops.advisor_detect_first":"Click 'Detect Hardware' above to scan your system.","ops.recommended_models":"Recommended Models","ops.advisor_all_use_cases":"All Use Cases","ops.advisor_uc_general":"General","ops.advisor_uc_coding":"Coding","ops.advisor_uc_reasoning":"Reasoning","ops.advisor_uc_chat":"Chat","ops.advisor_uc_multimodal":"Multimodal","ops.advisor_analyzing":"Analyzing models for your hardware...","ops.advisor_col_name":"Model","ops.advisor_col_params":"Params","ops.advisor_col_score":"Score","ops.advisor_col_fit":"Fit","ops.advisor_col_mode":"Mode","ops.advisor_col_quant":"Quant","ops.advisor_col_tps":"tok/s","ops.advisor_col_mem":"Memory","ops.advisor_col_action":"Action","ops.advisor_use":"Use This","ops.advisor_install":"Install","ops.advisor_pulling":"Pulling...","ops.advisor_pull_complete":"Pull complete!","ops.advisor_configured":"Configured {model} as active Ollama backend.","ops.advisor_no_models":"No models fit your hardware. Try a different use case filter.","onboarding.ollama_detecting":"Detecting hardware...","onboarding.ollama_your_hardware":"Your hardware:","onboarding.ollama_connected":"Ollama is connected","onboarding.ollama_not_running":"Ollama is not running","onboarding.ollama_top_models":"Top recommended models","onboarding.ollama_score":"Score","onboarding.ollama_use":"Use This","onboarding.ollama_install":"Install","onboarding.ollama_pulling":"Pulling...","onboarding.ollama_installed":"Installed!","onboarding.ollama_configured":"Configured {model} as Ollama backend!","onboarding.ollama_install_hint":"Install Ollama from https://ollama.com, then restart setup to pull models."},cl="safe-agent-locale",Yi={en:"English",es:"Español",fr:"Français",de:"Deutsch",ja:"日本語","zh-CN":"简体中文","pt-BR":"Português (Brasil)"},hi=new Map;hi.set("en",Ai);const Ds=$state({locale:"en",messages:Ai});function l(r,i){let o=Ds.messages[r]??Ai[r]??r;if(i)for(const[d,c]of Object.entries(i))o=o.replaceAll(`{${d}}`,String(c));return o}const un={es:()=>Ws(()=>import("./assets/es-B02p7ya5.js"),[]),fr:()=>Ws(()=>import("./assets/fr-D38o4Ede.js"),[]),de:()=>Ws(()=>import("./assets/de-CxX4wzxD.js"),[]),ja:()=>Ws(()=>import("./assets/ja-D-LjH5gh.js"),[]),"zh-CN":()=>Ws(()=>import("./assets/zh-CN-DlKBlyUq.js"),[]),"pt-BR":()=>Ws(()=>import("./assets/pt-BR-2neMCRm6.js"),[])};async function Co(r){if(r===Ds.locale&&hi.has(r))return;let i;if(hi.has(r))i=hi.get(r);else if(un[r])try{i=(await un[r]()).default,hi.set(r,i)}catch{console.warn(`Locale "${r}" not found, falling back to English`),i=Ai,r="en"}else i=Ai,r="en";Ds.locale=r,Ds.messages=i;try{localStorage.setItem(cl,r)}catch{}}function gc(){let r=null;try{r=localStorage.getItem(cl)}catch{}if(r&&r in Yi){Co(r);return}const i=navigator.language??"en",o=i in Yi?i:null,d=o?null:Object.keys(Yi).find(f=>i.startsWith(f.split("-")[0]));Co(o??d??"en")}const hc=100,Vt=vi(rr({refreshCounter:0,currentTab:"overview",currentMemoryTab:"core"}),"dashboard"),sr=vi(rr({checked:!1,authenticated:!1,userId:null,role:null,subject:null,onboardingCompleted:null}),"auth"),yr=vi(rr({events:[],isThinking:!1,activeTool:null}),"liveFeed");function $a(){Vt.refreshCounter++}function vl(r){switch(yr.events=[r,...yr.events].slice(0,hc),r.type){case"thinking":yr.isThinking=!0,yr.activeTool=null;break;case"tool_start":yr.activeTool=r.tool;break;case"tool_result":yr.activeTool=null;break;case"turn_complete":case"error":yr.isThinking=!1,yr.activeTool=null;break}}function ul(){yr.events=[],yr.isThinking=!1,yr.activeTool=null}Kt[u]="src/components/LoginOverlay.svelte";var yc=_(m('<div class="mb-4 px-3 py-2 rounded-md bg-error-950 border border-error-500/30 text-sm text-error-400"><i class="fa-solid fa-circle-exclamation mr-1"></i> </div>'),Kt[u],[[262,12,[[263,16]]]]),wc=_(m('<div class="text-center py-4"><i class="fa-solid fa-spinner fa-spin text-text-muted"></i></div>'),Kt[u],[[268,12,[[269,16]]]]),kc=_(m('<i class="fa-solid fa-spinner fa-spin"></i> ',1),Kt[u],[[285,28]]),Tc=_(m('<i class="fa-solid fa-fingerprint text-amber-400"></i> ',1),Kt[u],[[287,28]]),$c=_(m(`<button type="button" class="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-md
                               border border-border bg-surface-elevated text-text font-medium text-sm
                               hover:bg-surface hover:border-primary-500/40 transition-colors
                               disabled:opacity-50 disabled:cursor-not-allowed"><!></button>`),Kt[u],[[275,20]]),Ec=_(m('<div class="relative my-2"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-border"></div></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-surface px-3 text-text-muted tracking-wider"> </span></div></div>'),Kt[u],[[293,20,[[294,24,[[295,28]]],[297,24,[[298,28]]]]]]),Sc=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Kt[u],[[330,36]]),Cc=_(m('<i class="fa-solid fa-check mr-1"></i> ',1),Kt[u],[[332,36]]),Ac=_(m(`<div><label class="block mb-3"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" maxlength="6" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                           font-mono tracking-widest text-center text-lg
                                           placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                           disabled:opacity-50" placeholder="000000"/></label> <button type="button" class="w-full px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                                       hover:bg-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div> <button type="button" class="w-full text-xs text-text-muted hover:text-primary-400 transition-colors"> </button>`,1),Kt[u],[[305,24,[[306,28,[[307,32],[308,32]]],[322,28]]],[336,24]]),Pc=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Kt[u],[[368,36]]),Oc=_(m('<i class="fa-solid fa-check mr-1"></i> ',1),Kt[u],[[370,36]]),jc=_(m(`<div><label class="block mb-3"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                           font-mono tracking-wider text-center
                                           placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                           disabled:opacity-50" placeholder="abcd1234"/></label> <button type="button" class="w-full px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                                       hover:bg-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div> <button type="button" class="w-full text-xs text-text-muted hover:text-primary-400 transition-colors"> </button>`,1),Kt[u],[[344,24,[[345,28,[[346,32],[347,32]]],[360,28]]],[374,24]]),Rc=_(m('<div class="space-y-4"><!> <!> <!> <button type="button" class="w-full text-xs text-text-muted hover:text-text transition-colors mt-2"><i class="fa-solid fa-arrow-left mr-1"></i> </button></div>'),Kt[u],[[273,12,[[384,16,[[389,20]]]]]]),Lc=_(m(`<button type="button" class="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-md
                                   border border-border bg-surface-elevated text-text font-medium text-sm
                                   hover:bg-surface hover:border-primary-500/40 transition-colors"><i></i> </button>`),Kt[u],[[397,24,[[404,28]]]]),Nc=_(m('<div class="relative my-5"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-border"></div></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-surface px-3 text-text-muted tracking-wider"> </span></div></div>'),Kt[u],[[411,20,[[412,24,[[413,28]]],[415,24,[[416,28]]]]]]),Mc=_(m('<div class="space-y-2 mb-4"></div> <!>',1),Kt[u],[[395,16]]),Dc=_(m(`<label class="block mb-3"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" required="" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                       placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                       disabled:opacity-50"/></label>`),Kt[u],[[425,24,[[426,28],[427,28]]]]),Ic=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Kt[u],[[462,28]]),Fc=_(m('<i class="fa-solid fa-right-to-bracket mr-1"></i> ',1),Kt[u],[[464,28]]),Uc=_(m(`<form><!> <label class="block mb-4"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="password" required="" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50
                                   disabled:opacity-50"/></label> <button type="submit" class="w-full px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                               hover:bg-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button></form>`),Kt[u],[[423,16,[[440,20,[[441,24],[442,24]]],[455,20]]]]),zc=_(m("<!> <!>",1),Kt[u],[]),Bc=_(m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"><div class="w-full max-w-sm mx-4 p-8 rounded-xl border border-border bg-surface shadow-2xl"><div class="text-center mb-6"><i class="fa-solid fa-robot text-3xl text-primary-400 mb-3"></i> <h2 class="text-lg font-semibold text-text"> </h2> <p class="text-sm text-text-muted mt-1"><!></p></div> <!> <!></div></div>'),Kt[u],[[243,0,[[244,4,[[245,8,[[246,12],[247,12],[248,12]]]]]]]]);function Kt(r,i){Cr(new.target),$r(i,!0,Kt);let o=S(A(""),"username"),d=S(A(""),"password"),c=S(A(""),"error"),f=S(A(!1),"loading"),b=S(A(!0),"passwordEnabled"),h=S(A(rr([])),"ssoProviders"),w=S(A(!1),"infoLoaded"),P=S(A(!1),"multiUserMode"),C=S(A(!1),"twoFaRequired"),E=S(A(""),"challengeToken"),k=S(A(rr([])),"twoFaMethods"),M=S(A(""),"twoFaUserId"),I=S(A(""),"totpCode"),Z=S(A(""),"recoveryCode"),R=S(A(!1),"showRecoveryInput"),q=S(A(!1),"passkeyLoading");Gr(()=>{ce()});async function ce(){try{const D=(await O(fetch("/api/auth/info")))(),L=(await O(D.json()))();p(b,L.password_enabled??!0,!0),p(h,L.sso_providers??[],!0),p(P,L.multi_user??!1,!0)}catch{p(b,!0),p(h,[],!0)}finally{p(w,!0)}}async function de(D){D.preventDefault(),p(c,""),p(f,!0);try{const L={password:a(d)};a(P)&&a(o)&&(L.username=a(o));const ge=(await O(fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})))(),Ze=(await O(ge.json()))();Ze.requires_2fa?(p(C,!0),p(E,Ze.challenge_token,!0),p(k,Ze.methods||[],!0),p(M,Ze.user_id||"",!0),p(d,"")):ge.ok&&Ze.ok?Oe(Ze):p(c,Ze.error||l("login.login_failed"),!0)}catch{p(c,l("common.connection_failed"),!0)}finally{p(f,!1)}}async function $e(){p(c,""),p(f,!0);try{const D={challenge_token:a(E)};a(R)?D.recovery_code=a(Z).trim():D.totp_code=a(I).trim();const L=(await O(fetch("/api/auth/2fa/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})))(),ge=(await O(L.json()))();L.ok&&ge.ok?Oe(ge):p(c,ge.error||l("login.verification_failed"),!0)}catch{p(c,l("common.connection_failed"),!0)}finally{p(f,!1)}}async function We(){p(c,""),p(q,!0);try{const D=(await O(fetch("/api/auth/passkey/authenticate/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge_token:a(E)})})))(),L=(await O(D.json()))();if(!L.ok){p(c,L.error||l("login.passkey_start_failed"),!0),p(q,!1);return}const ge=L.options;if(ge.publicKey.challenge=ct(ge.publicKey.challenge),ge.publicKey.allowCredentials)for(const _t of ge.publicKey.allowCredentials)_t.id=ct(_t.id);const Ze=(await O(navigator.credentials.get(ge)))();if(!Ze){p(c,l("login.passkey_cancelled"),!0),p(q,!1);return}const vt=Ze.response,it={challenge_token:a(E),credential:{id:Ze.id,rawId:ke(Ze.rawId),response:{authenticatorData:ke(vt.authenticatorData),clientDataJSON:ke(vt.clientDataJSON),signature:ke(vt.signature),userHandle:vt.userHandle?ke(vt.userHandle):null},type:Ze.type}},J=(await O(fetch("/api/auth/passkey/authenticate/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)})))(),Be=(await O(J.json()))();J.ok&&Be.ok?Oe(Be):p(c,Be.error||l("login.passkey_verify_failed"),!0)}catch(D){j(D.name,"NotAllowedError")?p(c,l("login.passkey_cancelled_timeout"),!0):p(c,l("login.passkey_failed",{message:D.message}),!0)}finally{p(q,!1)}}function Oe(D){sr.authenticated=!0,D.user&&(sr.userId=D.user.id,sr.role=D.user.role,sr.subject=D.user.username),p(o,""),p(d,""),p(C,!1),p(E,""),p(I,""),p(Z,"")}function je(){p(C,!1),p(E,""),p(k,[],!0),p(I,""),p(Z,""),p(R,!1),p(c,"")}function De(D){window.location.href=D.login_url}function ct(D){const L=D.replace(/-/g,"+").replace(/_/g,"/"),ge=L+"=".repeat((4-L.length%4)%4),Ze=atob(ge),vt=new ArrayBuffer(Ze.length),it=new Uint8Array(vt);for(let J=0;J<Ze.length;J++)it[J]=Ze.charCodeAt(J);return vt}function ke(D){const L=new Uint8Array(D);let ge="";for(const Ze of L)ge+=String.fromCharCode(Ze);return btoa(ge).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var ae={...Ar()},Ue=Bc(),ut=e(Ue),ht=e(ut),G=s(e(ht),2),we=e(G),pe=s(G,2),se=e(pe);{var V=D=>{var L=Da();x(ge=>n(L,ge),[()=>l("login.2fa_required")]),v(D,L)},T=D=>{var L=Da();x(ge=>n(L,ge),[()=>l("login.sign_in_continue")]),v(D,L)},F=D=>{var L=Da();x(ge=>n(L,ge),[()=>l("login.sign_in_account")]),v(D,L)},_e=D=>{var L=Da();x(ge=>n(L,ge),[()=>l("login.enter_password")]),v(D,L)};g(()=>y(se,D=>{a(C)?D(V):a(b)&&a(h).length>0?D(T,1):a(h).length>0?D(F,2):D(_e,!1)}),"if",Kt,249,16)}var K=s(ht,2);{var qe=D=>{var L=yc(),ge=s(e(L));x(()=>n(ge,` ${a(c)??""}`)),v(D,L)};g(()=>y(K,D=>{a(c)&&D(qe)}),"if",Kt,261,8)}var ze=s(K,2);{var be=D=>{var L=wc();v(D,L)},tt=D=>{var L=Rc(),ge=e(L);{var Ze=ie=>{var $=$c(),N=e($);{var U=te=>{var ve=kc(),re=s(Te(ve));x(z=>n(re,` ${z??""}`),[()=>l("login.waiting_passkey")]),v(te,ve)},ee=te=>{var ve=Tc(),re=s(Te(ve));x(z=>n(re,` ${z??""}`),[()=>l("login.use_passkey")]),v(te,ve)};g(()=>y(N,te=>{a(q)?te(U):te(ee,!1)}),"if",Kt,284,24)}x(()=>$.disabled=a(q)),oe("click",$,We),v(ie,$)},vt=Br(()=>a(k).includes("passkey"));g(()=>y(ge,ie=>{a(vt)&&ie(Ze)}),"if",Kt,274,16)}var it=s(ge,2);{var J=ie=>{var $=Ec(),N=s(e($),2),U=e(N),ee=e(U);x(te=>n(ee,te),[()=>l("common.or")]),v(ie,$)},Be=Br(()=>a(k).includes("passkey")&&a(k).includes("totp"));g(()=>y(it,ie=>{a(Be)&&ie(J)}),"if",Kt,292,16)}var _t=s(it,2);{var Rt=ie=>{var $=Sr(),N=Te($);{var U=te=>{var ve=Ac(),re=Te(ve),z=e(re),ue=e(z),Ae=e(ue),xe=s(ue,2);Bi(xe,!0);var bt=s(z,2),He=e(bt);{var he=Pe=>{var le=Sc(),Y=s(Te(le));x(ne=>n(Y,` ${ne??""}`),[()=>l("common.verifying")]),v(Pe,le)},Xe=Pe=>{var le=Cc(),Y=s(Te(le));x(ne=>n(Y,` ${ne??""}`),[()=>l("common.verify")]),v(Pe,le)};g(()=>y(He,Pe=>{a(f)?Pe(he):Pe(Xe,!1)}),"if",Kt,329,32)}var Ve=s(re,2),nt=e(Ve);x((Pe,le,Y)=>{n(Ae,Pe),xe.disabled=a(f),bt.disabled=le,n(nt,Y)},[()=>l("login.authenticator_code"),()=>a(f)||j(a(I).trim().length,6,!1),()=>l("login.use_recovery")]),oe("keydown",xe,function(le){j(le.key,"Enter")&&j(a(I).trim().length,6)&&$e()}),vr(xe,function(){return a(I)},function(le){p(I,le)}),oe("click",bt,$e),oe("click",Ve,function(){p(R,!0),p(c,"")}),v(te,ve)},ee=te=>{var ve=jc(),re=Te(ve),z=e(re),ue=e(z),Ae=e(ue),xe=s(ue,2);Bi(xe,!0);var bt=s(z,2),He=e(bt);{var he=Pe=>{var le=Pc(),Y=s(Te(le));x(ne=>n(Y,` ${ne??""}`),[()=>l("common.verifying")]),v(Pe,le)},Xe=Pe=>{var le=Oc(),Y=s(Te(le));x(ne=>n(Y,` ${ne??""}`),[()=>l("login.verify_recovery")]),v(Pe,le)};g(()=>y(He,Pe=>{a(f)?Pe(he):Pe(Xe,!1)}),"if",Kt,367,32)}var Ve=s(re,2),nt=e(Ve);x((Pe,le,Y)=>{n(Ae,Pe),xe.disabled=a(f),bt.disabled=le,n(nt,Y)},[()=>l("login.recovery_code"),()=>a(f)||!a(Z).trim(),()=>l("login.use_authenticator")]),oe("keydown",xe,function(le){j(le.key,"Enter")&&a(Z).trim()&&$e()}),vr(xe,function(){return a(Z)},function(le){p(Z,le)}),oe("click",bt,$e),oe("click",Ve,function(){p(R,!1),p(c,"")}),v(te,ve)};g(()=>y(N,te=>{a(R)?te(ee,!1):te(U)}),"if",Kt,304,20)}v(ie,$)},Et=Br(()=>a(k).includes("totp"));g(()=>y(_t,ie=>{a(Et)&&ie(Rt)}),"if",Kt,303,16)}var pt=s(_t,2),X=s(e(pt));x(ie=>n(X,` ${ie??""}`),[()=>l("login.back_to_login")]),oe("click",pt,je),v(D,L)},Q=D=>{var L=zc(),ge=Te(L);{var Ze=J=>{var Be=Mc(),_t=Te(Be);g(()=>Wt(_t,21,()=>a(h),fr,(pt,X)=>{var ie=Lc(),$=e(ie),N=s($);x(U=>{at($,1,`${a(X).icon??""} text-base`),n(N,` ${U??""}`)},[()=>l("login.continue_with",{provider:a(X).name})]),oe("click",ie,function(){return De(a(X))}),v(pt,ie)}),"each",Kt,396,20);var Rt=s(_t,2);{var Et=pt=>{var X=Nc(),ie=s(e(X),2),$=e(ie),N=e($);x(U=>n(N,U),[()=>l("common.or")]),v(pt,X)};g(()=>y(Rt,pt=>{a(b)&&pt(Et)}),"if",Kt,410,16)}v(J,Be)};g(()=>y(ge,J=>{a(h).length>0&&J(Ze)}),"if",Kt,394,12)}var vt=s(ge,2);{var it=J=>{var Be=Uc(),_t=e(Be);{var Rt=te=>{var ve=Dc(),re=e(ve),z=e(re),ue=s(re,2);Bi(ue,!0),x((Ae,xe)=>{n(z,Ae),ue.disabled=a(f),Lt(ue,"placeholder",xe)},[()=>l("login.username"),()=>l("login.enter_username")]),vr(ue,function(){return a(o)},function(xe){p(o,xe)}),v(te,ve)};g(()=>y(_t,te=>{a(P)&&te(Rt)}),"if",Kt,424,20)}var Et=s(_t,2),pt=e(Et),X=e(pt),ie=s(pt,2);Bi(ie,!a(P));var $=s(Et,2),N=e($);{var U=te=>{var ve=Ic(),re=s(Te(ve));x(z=>n(re,` ${z??""}`),[()=>l("login.signing_in")]),v(te,ve)},ee=te=>{var ve=Fc(),re=s(Te(ve));x(z=>n(re,` ${z??""}`),[()=>l("login.sign_in")]),v(te,ve)};g(()=>y(N,te=>{a(f)?te(U):te(ee,!1)}),"if",Kt,461,24)}x((te,ve)=>{n(X,te),ie.disabled=a(f),Lt(ie,"placeholder",ve),$.disabled=a(f)||!a(d)},[()=>l("login.password"),()=>l("login.enter_password_placeholder")]),Yd("submit",Be,de),vr(ie,function(){return a(d)},function(ve){p(d,ve)}),v(J,Be)};g(()=>y(vt,J=>{a(b)&&J(it)}),"if",Kt,422,12)}v(D,L)};g(()=>y(ze,D=>{a(w)?a(C)?D(tt,1):D(Q,!1):D(be)}),"if",Kt,267,8)}return x(D=>n(we,D),[()=>l("login.title")]),v(r,Ue),Er(ae)}Dr(["click","keydown"]);yt[u]="src/components/OnboardingWizard.svelte";var qc=_(m('<i class="fa-solid fa-check"></i>'),yt[u],[[217,28]]),Gc=_(m("<div></div>"),yt[u],[[223,24]]),Vc=_(m('<div class="flex items-center"><div><!></div> <!></div>'),yt[u],[[213,16,[[214,20]]]]),Kc=_(m(`<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-600/10 mb-4"><i class="fa-solid fa-robot text-3xl text-primary-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <label class="block mb-4"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <input type="text" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50"/></label> <label class="block mb-2"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <textarea rows="4" class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50 resize-none"></textarea></label> <p class="text-xs text-text-muted"> </p>`,1),yt[u],[[234,20,[[235,24,[[236,28]]],[238,24],[239,24]]],[242,20,[[243,24],[244,24]]],[253,20,[[254,24],[255,24]]],[263,20]]),Wc=_(m("<option> </option>"),yt[u],[[283,32]]),Jc=_(m('<p class="text-sm text-text-muted"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </p>'),yt[u],[[298,32,[[298,67]]]]),Hc=_(m('<div class="flex items-center gap-2 text-sm"><span></span> <span> </span></div>'),yt[u],[[313,36,[[314,40],[315,40]]]]),Yc=_(m('<button class="bg-green-600/20 text-green-400 px-2 py-1 rounded text-xs hover:bg-green-600/30"> </button>'),yt[u],[[330,56]]),Qc=_(m('<span class="text-xs text-text-muted"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </span>'),yt[u],[[338,60,[[338,98]]]]),Zc=_(m('<button class="bg-surface text-text px-2 py-1 rounded text-xs hover:bg-surface-elevated border border-border"><i class="fa-solid fa-download mr-1"></i> </button>'),yt[u],[[340,60,[[344,64]]]]),Xc=_(m('<span class="text-xs text-text-muted">—</span>'),yt[u],[[348,56]]),ev=_(m('<div class="flex items-center justify-between p-2 rounded bg-surface border border-border/50"><div><span class="font-mono text-sm text-text"> </span> <span class="text-xs text-text-muted ml-2"> </span></div> <div><!></div></div>'),yt[u],[[323,44,[[324,48,[[325,52],[326,52]]],[328,48]]]]),tv=_(m('<div class="text-xs font-medium text-text-muted uppercase tracking-wide"> </div> <div class="space-y-2"></div>',1),yt[u],[[320,36],[321,36]]),rv=_(m('<p class="text-xs text-text-muted"> </p>'),yt[u],[[357,36]]),av=_(m('<div class="text-sm"><span class="font-medium"> </span> <span class="text-text-muted ml-2"> <!></span></div> <!> <!> <!>',1),yt[u],[[300,32,[[301,36],[302,36]]]]),sv=_(m('<div class="mb-4 p-4 rounded-lg border border-border bg-surface-elevated space-y-3"><!></div>'),yt[u],[[296,24]]),iv=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),yt[u],[[372,28]]),ov=_(m('<i class="fa-solid fa-flask mr-1"></i> ',1),yt[u],[[374,28]]),nv=_(m('<i class="fa-solid fa-check-circle mr-1"></i> <strong> </strong> <p class="mt-1 text-xs opacity-80"> </p>',1),yt[u],[[381,32],[381,78],[382,32]]),lv=_(m('<i class="fa-solid fa-times-circle mr-1"></i> <strong> </strong> <p class="mt-1 text-xs opacity-80"> </p>',1),yt[u],[[384,32],[384,78],[385,32]]),dv=_(m("<div><!></div>"),yt[u],[[379,24]]),cv=_(m(`<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-600/10 mb-4"><i class="fa-solid fa-brain text-3xl text-primary-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <label class="block mb-4"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <select class="mt-1 w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text
                                   focus:outline-none focus:ring-2 focus:ring-primary-500/50"></select></label> <p class="text-xs text-text-muted mb-4"> <code class="bg-surface-elevated px-1 rounded text-xs">OPENROUTER_API_KEY</code>, <code class="bg-surface-elevated px-1 rounded text-xs">CLAUDE_BIN</code>, etc.)</p> <!> <button class="w-full px-4 py-2 rounded-md border border-border bg-surface-elevated text-text font-medium text-sm
                               hover:bg-surface transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <!>`,1),yt[u],[[267,20,[[268,24,[[269,28]]],[271,24],[272,24]]],[275,20,[[276,24],[277,24]]],[288,20,[[290,30],[291,24]]],[365,20]]),vv=_(m('<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-600/10 mb-4"><i class="fa-solid fa-comments text-3xl text-primary-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <div class="space-y-4"><div class="flex items-center justify-between p-4 rounded-lg border border-border bg-surface-elevated"><div class="flex items-center gap-3"><i class="fa-brands fa-telegram text-2xl text-blue-400"></i> <div><p class="font-medium text-text"> </p> <p class="text-xs text-text-muted"> </p></div></div> <span> </span></div> <div class="flex items-center justify-between p-4 rounded-lg border border-border bg-surface-elevated"><div class="flex items-center gap-3"><i class="fa-brands fa-whatsapp text-2xl text-green-400"></i> <div><p class="font-medium text-text"> </p> <p class="text-xs text-text-muted"> </p></div></div> <span> </span></div></div> <p class="text-xs text-text-muted mt-4"> </p>',1),yt[u],[[392,20,[[393,24,[[394,28]]],[396,24],[397,24]]],[400,20,[[401,24,[[402,28,[[403,32],[404,32,[[405,36],[406,36]]]]],[409,28]]],[415,24,[[416,28,[[417,32],[418,32,[[419,36],[420,36]]]]],[423,28]]]]],[430,20]]),uv=_(m('<div class="p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-xs text-text-muted uppercase tracking-wide"> </span> <p class="text-sm text-text mt-1 line-clamp-3"> </p></div>'),yt[u],[[466,28,[[467,32],[468,32]]]]),fv=_(m('<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-green-600/10 mb-4"><i class="fa-solid fa-check-double text-3xl text-green-500"></i></div> <h2 class="text-2xl font-bold text-text"> </h2> <p class="text-text-muted mt-2"> </p></div> <div class="space-y-3 mb-6"><div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span class="text-sm font-medium text-text"> </span></div> <div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span class="text-sm font-medium text-text"> </span></div> <div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span> </span></div> <div class="flex justify-between items-center p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-sm text-text-muted"> </span> <span> </span></div> <!></div> <p class="text-xs text-text-muted text-center mb-2"> </p>',1),yt[u],[[436,20,[[437,24,[[438,28]]],[440,24],[441,24]]],[444,20,[[445,24,[[446,28],[447,28]]],[449,24,[[450,28],[451,28]]],[453,24,[[454,28],[455,28]]],[459,24,[[460,28],[461,28]]]]],[473,20]]),pv=_(m('<div class="px-8 pb-2"><div class="p-3 rounded-md bg-red-900/30 border border-red-700/50 text-red-300 text-sm"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div></div>'),yt[u],[[481,16,[[482,20,[[483,24]]]]]]),_v=_(m('<button class="px-4 py-2 rounded-md text-sm text-text-muted hover:text-text transition-colors"><i class="fa-solid fa-arrow-left mr-1"></i> </button>'),yt[u],[[492,24,[[496,28]]]]),mv=_(m('<button class="px-4 py-2 rounded-md text-sm text-text-muted hover:text-text transition-colors"> <i class="fa-solid fa-forward ml-1"></i></button>'),yt[u],[[505,24,[[509,47]]]]),xv=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> Saving...',1),yt[u],[[521,32]]),bv=_(m('Next <i class="fa-solid fa-arrow-right ml-1"></i>',1),yt[u],[[523,37]]),gv=_(m(`<button class="px-5 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                                   hover:bg-primary-500 transition-colors disabled:opacity-50"><!></button>`),yt[u],[[514,24]]),hv=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> Completing...',1),yt[u],[[534,32]]),yv=_(m('<i class="fa-solid fa-rocket mr-1"></i> Complete Setup',1),yt[u],[[536,32]]),wv=_(m(`<button class="px-5 py-2 rounded-md bg-green-600 text-white font-medium text-sm
                                   hover:bg-green-500 transition-colors disabled:opacity-50"><!></button>`),yt[u],[[527,24]]),kv=_(m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-bg/95 backdrop-blur-sm"><div class="w-full max-w-2xl mx-4"><div class="flex items-center justify-center mb-8 gap-2"></div> <div class="bg-surface rounded-xl border border-border shadow-2xl overflow-hidden"><div class="p-8"><!></div> <!> <div class="flex justify-between items-center px-8 py-5 bg-surface-elevated border-t border-border"><div><!></div> <div class="flex items-center gap-2"><span class="text-xs text-text-muted"> </span> <!> <!></div></div></div></div></div>'),yt[u],[[207,0,[[208,4,[[210,8],[229,8,[[231,12],[489,12,[[490,16],[501,16,[[502,20]]]]]]]]]]]]);function yt(r,i){Cr(new.target),$r(i,!0,yt);let o=S(A(1),"currentStep");const d=4;let c=S(A(""),"agentName"),f=S(A(""),"corePersonality"),b=S(A(""),"activeBackend"),h=S(A(rr([])),"availableBackends"),w=S(A(""),"llmTestResult"),P=S(A(null),"llmTestOk"),C=S(A(!1),"llmTesting"),E=S(A(null),"ollamaSpecs"),k=S(A(rr([])),"ollamaRecs"),M=S(A(!1),"ollamaRecsLoading"),I=S(A(null),"ollamaAvail"),Z=S(A(""),"ollamaPulling"),R=S(A(""),"ollamaPullMsg"),q=S(A(!1),"telegramEnabled"),ce=S(A(!1),"whatsappEnabled"),de=S(A(!1),"saving"),$e=S(A(""),"error"),We=S(A(!1),"completing");const Oe=X=>{window.dispatchEvent(new CustomEvent(X))};async function je(){p(M,!0);try{const[X,ie,$]=(await O(Promise.all([fetch("/api/llm/advisor/system"),fetch("/api/llm/advisor/recommend?limit=3"),fetch("/api/llm/ollama/status")])))();p(E,(await O(X.json()))(),!0);const N=(await O(ie.json()))();p(k,N.models||[],!0),p(I,(await O($.json()))(),!0)}catch(X){console.error(...tr("error","Failed to load Ollama advisor",X))}p(M,!1)}async function De(X){p(Z,X,!0),p(R,l("onboarding.ollama_pulling"),!0);try{const ie=(await O(fetch("/api/llm/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:X})})))(),$=(await O(ie.json()))();if($.ok){p(R,l("onboarding.ollama_installed"),!0);const N=(await O(fetch("/api/llm/ollama/status")))();p(I,(await O(N.json()))(),!0);const U=(await O(fetch("/api/llm/advisor/recommend?limit=3")))(),ee=(await O(U.json()))();p(k,ee.models||[],!0)}else p(R,$.error||"Pull failed",!0)}catch{p(R,"Pull failed")}setTimeout(()=>{p(Z,""),p(R,"")},3e3)}async function ct(X){try{(await O(fetch("/api/llm/ollama/configure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:X})})))(),p(P,!0),p(w,l("onboarding.ollama_configured",{model:X}),!0)}catch{}}Gr(()=>{ke()}),Gr(()=>{j(a(b),"ollama")&&!a(E)&&je()});async function ke(){try{const X=(await O(fetch("/api/onboarding/status")))(),ie=(await O(X.json()))();p(c,ie.agent_name||"",!0),p(f,ie.core_personality||"",!0),p(b,ie.llm_backend||"",!0),p(h,ie.llm_available||[],!0),p(q,ie.telegram_enabled||!1,!0),p(ce,ie.whatsapp_enabled||!1,!0)}catch(X){console.error(...tr("error","Failed to load onboarding status",X))}}async function ae(){p(de,!0),p($e,"");try{const X=(await O(fetch("/api/onboarding/save-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_name:a(c)||void 0,core_personality:a(f)||void 0,llm_backend:a(b)||void 0})})))(),ie=(await O(X.json()))();ie.ok||p($e,ie.message||l("onboarding.failed_save"),!0)}catch{p($e,l("onboarding.network_error_save"),!0)}finally{p(de,!1)}}async function Ue(){p(C,!0),p(w,""),p(P,null);try{const X=(await O(fetch("/api/onboarding/test-llm",{method:"POST",headers:{"Content-Type":"application/json"}})))(),ie=(await O(X.json()))();p(P,ie.ok,!0),p(w,ie.ok?ie.response:ie.error,!0)}catch{p(P,!1),p(w,l("onboarding.network_error_test"),!0)}finally{p(C,!1)}}async function ut(){p(We,!0),p($e,"");try{const X=(await O(fetch("/api/onboarding/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_name:a(c)||void 0,core_personality:a(f)||void 0})})))(),ie=(await O(X.json()))();ie.ok?Oe("onboarding-complete"):p($e,ie.message||l("onboarding.failed_complete"),!0)}catch{p($e,l("onboarding.network_error_complete"),!0)}finally{p(We,!1)}}function ht(){j(a(o),1)&&ae(),a(o)<d&&Zo(o)}function G(){a(o)>1&&Zo(o,-1)}var we={...Ar()},pe=kv(),se=e(pe),V=e(se);g(()=>Wt(V,21,()=>Array(d),fr,(X,ie,$)=>{const N=S(Br(()=>$+1),"step");a(N);var U=Vc(),ee=e(U),te=e(ee);{var ve=Ae=>{var xe=qc();v(Ae,xe)},re=Ae=>{var xe=Da();x(()=>n(xe,a(N))),v(Ae,xe)};g(()=>y(te,Ae=>{a(N)<a(o)?Ae(ve):Ae(re,!1)}),"if",yt,216,24)}var z=s(ee,2);{var ue=Ae=>{var xe=Gc();x(()=>at(xe,1,`w-12 h-0.5 mx-1 ${a(N)<a(o)?"bg-green-600":"bg-border"}`)),v(Ae,xe)};g(()=>y(z,Ae=>{$<d-1&&Ae(ue)}),"if",yt,222,20)}x(()=>at(ee,1,`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-colors
                        ${a(N)<a(o)?"bg-green-600 text-white":j(a(N),a(o))?"bg-primary-600 text-white":"bg-surface-elevated text-text-muted border border-border"}`)),v(X,U)}),"each",yt,211,12);var T=s(V,2),F=e(T),_e=e(F);{var K=X=>{var ie=Kc(),$=Te(ie),N=s(e($),2),U=e(N),ee=s(N,2),te=e(ee),ve=s($,2),re=e(ve),z=e(re),ue=s(re,2),Ae=s(ve,2),xe=e(Ae),bt=e(xe),He=s(xe,2),he=s(Ae,2),Xe=e(he);x((Ve,nt,Pe,le,Y,ne,me)=>{n(U,Ve),n(te,nt),n(z,Pe),Lt(ue,"placeholder",le),n(bt,Y),Lt(He,"placeholder",ne),n(Xe,me)},[()=>l("onboarding.welcome"),()=>l("onboarding.welcome_desc"),()=>l("onboarding.agent_name"),()=>l("onboarding.agent_name_placeholder"),()=>l("onboarding.core_personality"),()=>l("onboarding.personality_placeholder"),()=>l("onboarding.personality_hint")]),vr(ue,function(){return a(c)},function(nt){p(c,nt)}),vr(He,function(){return a(f)},function(nt){p(f,nt)}),v(X,ie)},qe=X=>{var ie=cv(),$=Te(ie),N=s(e($),2),U=e(N),ee=s(N,2),te=e(ee),ve=s($,2),re=e(ve),z=e(re),ue=s(re,2);g(()=>Wt(ue,21,()=>a(h),fr,(Y,ne)=>{var me=Wc(),ye=e(me,!0);var Ie={};x(()=>{n(ye,a(ne)),Ie!==(Ie=a(ne))&&(me.value=(me.__value=a(ne))??"")}),v(Y,me)}),"each",yt,282,28);var Ae=s(ve,2),xe=e(Ae),bt=s(Ae,2);{var He=Y=>{var ne=sv(),me=e(ne);{var ye=Ee=>{var Fe=Jc(),Ye=s(e(Fe));x(Qe=>n(Ye,` ${Qe??""}`),[()=>l("onboarding.ollama_detecting")]),v(Ee,Fe)},Ie=Ee=>{var Fe=av(),Ye=Te(Fe),Qe=e(Ye),Ke=e(Qe),Se=s(Qe,2),st=e(Se),lt=s(st);{var B=Ne=>{var Me=Da();x(gt=>n(Me,`· ${(a(E).gpu_name||"GPU")??""} (${gt??""} GB VRAM) · ${a(E).backend??""}`),[()=>{var gt;return((gt=a(E).gpu_vram_gb)==null?void 0:gt.toFixed(0))??"?"}]),v(Ne,Me)},W=Ne=>{var Me=Da("· CPU only");v(Ne,Me)};g(()=>y(lt,Ne=>{a(E).has_gpu?Ne(B):Ne(W,!1)}),"if",yt,304,40)}var Re=s(Ye,2);{var Le=Ne=>{var Me=Hc(),gt=e(Me),et=s(gt,2),ft=e(et);x(ot=>{at(gt,1,`w-2 h-2 rounded-full ${a(I).available?"bg-green-500":"bg-red-500"}`),n(ft,ot)},[()=>a(I).available?l("onboarding.ollama_connected"):l("onboarding.ollama_not_running")]),v(Ne,Me)};g(()=>y(Re,Ne=>{a(I)&&Ne(Le)}),"if",yt,312,32)}var rt=s(Re,2);{var wt=Ne=>{var Me=tv(),gt=Te(Me),et=e(gt),ft=s(gt,2);g(()=>Wt(ft,21,()=>a(k),fr,(ot,Je)=>{var St=ev(),$t=e(St),kt=e($t),Ut=e(kt,!0);var Dt=s(kt,2),Ot=e(Dt);var Bt=s($t,2),ur=e(Bt);{var or=At=>{var Nt=Yc(),cr=e(Nt,!0);x(xt=>n(cr,xt),[()=>l("onboarding.ollama_use")]),oe("click",Nt,function(){return ct(a(Je).ollama_tag||a(Je).name)}),v(At,Nt)},hr=At=>{var Nt=Sr(),cr=Te(Nt);{var xt=It=>{var Ft=Qc(),qt=s(e(Ft),1,!0);x(()=>n(qt,a(R))),v(It,Ft)},Pt=It=>{var Ft=Zc(),qt=s(e(Ft),1,!0);x(Yt=>n(qt,Yt),[()=>l("onboarding.ollama_install")]),oe("click",Ft,function(){return De(a(Je).ollama_tag)}),v(It,Ft)};g(()=>y(cr,It=>{j(a(Z),a(Je).ollama_tag)?It(xt):It(Pt,!1)}),"if",yt,337,56)}v(At,Nt)},pr=At=>{var Nt=Xc();v(At,Nt)};g(()=>y(ur,At=>{var Nt;a(Je).installed?At(or):a(Je).ollama_tag&&((Nt=a(I))!=null&&Nt.available)?At(hr,1):At(pr,!1)}),"if",yt,329,52)}x((At,Nt,cr)=>{n(Ut,a(Je).name),n(Ot,`${At??""}B · ${a(Je).best_quant??""} · ${Nt??""}: ${cr??""}`)},[()=>{var At;return(At=a(Je).params_b)==null?void 0:At.toFixed(1)},()=>l("onboarding.ollama_score"),()=>{var At;return(At=a(Je).score)==null?void 0:At.toFixed(0)}]),v(ot,St)}),"each",yt,322,40),x(ot=>n(et,ot),[()=>l("onboarding.ollama_top_models")]),v(Ne,Me)};g(()=>y(rt,Ne=>{a(k).length&&Ne(wt)}),"if",yt,319,32)}var dt=s(rt,2);{var Ge=Ne=>{var Me=rv(),gt=e(Me);x(et=>n(gt,et),[()=>l("onboarding.ollama_install_hint")]),v(Ne,Me)};g(()=>y(dt,Ne=>{var Me;(Me=a(I))!=null&&Me.available||Ne(Ge)}),"if",yt,356,32)}x((Ne,Me)=>{n(Ke,Ne),n(st,`${Me??""} GB RAM `)},[()=>l("onboarding.ollama_your_hardware"),()=>{var Ne;return(Ne=a(E).total_ram_gb)==null?void 0:Ne.toFixed(0)}]),v(Ee,Fe)};g(()=>y(me,Ee=>{a(M)?Ee(ye):a(E)&&Ee(Ie,1)}),"if",yt,297,28)}v(Y,ne)};g(()=>y(bt,Y=>{j(a(b),"ollama")&&Y(He)}),"if",yt,295,20)}var he=s(bt,2),Xe=e(he);{var Ve=Y=>{var ne=iv(),me=s(Te(ne));x(ye=>n(me,` ${ye??""}`),[()=>l("onboarding.testing")]),v(Y,ne)},nt=Y=>{var ne=ov(),me=s(Te(ne));x(ye=>n(me,` ${ye??""}`),[()=>l("onboarding.test_connection")]),v(Y,ne)};g(()=>y(Xe,Y=>{a(C)?Y(Ve):Y(nt,!1)}),"if",yt,371,24)}var Pe=s(he,2);{var le=Y=>{var ne=dv(),me=e(ne);{var ye=Ee=>{var Fe=nv(),Ye=s(Te(Fe),2),Qe=e(Ye),Ke=s(Ye,2),Se=e(Ke);x(st=>{n(Qe,st),n(Se,a(w))},[()=>l("onboarding.test_success")]),v(Ee,Fe)},Ie=Ee=>{var Fe=lv(),Ye=s(Te(Fe),2),Qe=e(Ye),Ke=s(Ye,2),Se=e(Ke);x(st=>{n(Qe,st),n(Se,a(w))},[()=>l("onboarding.test_failed")]),v(Ee,Fe)};g(()=>y(me,Ee=>{a(P)?Ee(ye):Ee(Ie,!1)}),"if",yt,380,28)}x(()=>at(ne,1,`mt-4 p-3 rounded-md text-sm ${a(P)?"bg-green-900/30 border border-green-700/50 text-green-300":"bg-red-900/30 border border-red-700/50 text-red-300"}`)),v(Y,ne)};g(()=>y(Pe,Y=>{j(a(P),null,!1)&&Y(le)}),"if",yt,378,20)}x((Y,ne,me,ye)=>{n(U,Y),n(te,ne),n(z,me),n(xe,`${ye??""}
                        (e.g. `),he.disabled=a(C)},[()=>l("onboarding.llm_backend"),()=>l("onboarding.llm_desc"),()=>l("onboarding.backend_label"),()=>l("onboarding.env_hint")]),Fi(ue,function(){return a(b)},function(ne){p(b,ne)}),oe("click",he,Ue),v(X,ie)},ze=X=>{var ie=vv(),$=Te(ie),N=s(e($),2),U=e(N),ee=s(N,2),te=e(ee),ve=s($,2),re=e(ve),z=e(re),ue=s(e(z),2),Ae=e(ue),xe=e(Ae),bt=s(Ae,2),He=e(bt),he=s(z,2),Xe=e(he),Ve=s(re,2),nt=e(Ve),Pe=s(e(nt),2),le=e(Pe),Y=e(le),ne=s(le,2),me=e(ne),ye=s(nt,2),Ie=e(ye),Ee=s(ve,2),Fe=e(Ee);x((Ye,Qe,Ke,Se,st,lt,B,W,Re)=>{n(U,Ye),n(te,Qe),n(xe,Ke),n(He,Se),at(he,1,`px-2 py-1 text-xs rounded-full font-medium
                                ${a(q)?"bg-green-900/40 text-green-400 border border-green-700/50":"bg-surface text-text-muted border border-border"}`),n(Xe,st),n(Y,lt),n(me,B),at(ye,1,`px-2 py-1 text-xs rounded-full font-medium
                                ${a(ce)?"bg-green-900/40 text-green-400 border border-green-700/50":"bg-surface text-text-muted border border-border"}`),n(Ie,W),n(Fe,Re)},[()=>l("onboarding.messaging"),()=>l("onboarding.messaging_desc"),()=>l("onboarding.telegram"),()=>l("onboarding.telegram_requires"),()=>a(q)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.whatsapp"),()=>l("onboarding.whatsapp_requires"),()=>a(ce)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.messaging_hint")]),v(X,ie)},be=X=>{var ie=fv(),$=Te(ie),N=s(e($),2),U=e(N),ee=s(N,2),te=e(ee),ve=s($,2),re=e(ve),z=e(re),ue=e(z),Ae=s(z,2),xe=e(Ae),bt=s(re,2),He=e(bt),he=e(He),Xe=s(He,2),Ve=e(Xe),nt=s(bt,2),Pe=e(nt),le=e(Pe),Y=s(Pe,2),ne=e(Y),me=s(nt,2),ye=e(me),Ie=e(ye),Ee=s(ye,2),Fe=e(Ee),Ye=s(me,2);{var Qe=st=>{var lt=uv(),B=e(lt),W=e(B),Re=s(B,2),Le=e(Re);x(rt=>{n(W,rt),n(Le,a(f))},[()=>l("onboarding.review_personality")]),v(st,lt)};g(()=>y(Ye,st=>{a(f)&&st(Qe)}),"if",yt,465,24)}var Ke=s(ve,2),Se=e(Ke);x((st,lt,B,W,Re,Le,rt,wt,dt,Ge,Ne)=>{n(U,st),n(te,lt),n(ue,B),n(xe,W),n(he,Re),n(Ve,Le),n(le,rt),at(Y,1,`text-sm font-medium ${a(q)?"text-green-400":"text-text-muted"}`),n(ne,wt),n(Ie,dt),at(Ee,1,`text-sm font-medium ${a(ce)?"text-green-400":"text-text-muted"}`),n(Fe,Ge),n(Se,Ne)},[()=>l("onboarding.ready"),()=>l("onboarding.ready_desc"),()=>l("onboarding.review_name"),()=>a(c)||l("onboarding.default"),()=>l("onboarding.review_backend"),()=>a(b)||l("onboarding.default"),()=>l("onboarding.review_telegram"),()=>a(q)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.review_whatsapp"),()=>a(ce)?l("common.enabled"):l("common.not_configured"),()=>l("onboarding.change_later")]),v(X,ie)};g(()=>y(_e,X=>{j(a(o),1)?X(K):j(a(o),2)?X(qe,1):j(a(o),3)?X(ze,2):j(a(o),4)&&X(be,3)}),"if",yt,232,16)}var tt=s(F,2);{var Q=X=>{var ie=pv(),$=e(ie),N=s(e($));x(()=>n(N,` ${a($e)??""}`)),v(X,ie)};g(()=>y(tt,X=>{a($e)&&X(Q)}),"if",yt,480,12)}var D=s(tt,2),L=e(D),ge=e(L);{var Ze=X=>{var ie=_v(),$=s(e(ie));x(N=>n($,` ${N??""}`),[()=>l("common.back")]),oe("click",ie,G),v(X,ie)};g(()=>y(ge,X=>{a(o)>1&&X(Ze)}),"if",yt,491,20)}var vt=s(L,2),it=e(vt),J=e(it),Be=s(it,2);{var _t=X=>{var ie=mv(),$=e(ie);x(N=>n($,`${N??""} `),[()=>l("common.skip")]),oe("click",ie,ht),v(X,ie)};g(()=>y(Be,X=>{j(a(o),3)&&X(_t)}),"if",yt,504,20)}var Rt=s(Be,2);{var Et=X=>{var ie=gv(),$=e(ie);{var N=ee=>{var te=xv();v(ee,te)},U=ee=>{var te=bv();v(ee,te)};g(()=>y($,ee=>{a(de)?ee(N):ee(U,!1)}),"if",yt,520,28)}x(()=>ie.disabled=a(de)),oe("click",ie,ht),v(X,ie)},pt=X=>{var ie=wv(),$=e(ie);{var N=ee=>{var te=hv();v(ee,te)},U=ee=>{var te=yv();v(ee,te)};g(()=>y($,ee=>{a(We)?ee(N):ee(U,!1)}),"if",yt,533,28)}x(()=>ie.disabled=a(We)),oe("click",ie,ut),v(X,ie)};g(()=>y(Rt,X=>{a(o)<d?X(Et):X(pt,!1)}),"if",yt,513,20)}return x(X=>n(J,X),[()=>l("onboarding.step_of",{current:a(o),total:d})]),v(r,pe),Er(we)}Dr(["click"]);class Tv extends Error{constructor(){super("Unauthorized"),this.name="UnauthorizedError"}}async function jt(r,i,o){const d={method:r,headers:{}};o&&(d.headers["Content-Type"]="application/json",d.body=JSON.stringify(o));const c=await fetch(i,d);if(c.status===401)throw sr.authenticated=!1,new Tv;if(!c.ok)throw new Error(`${r} ${i}: ${c.status}`);return c.json()}Ea[u]="src/components/Header.svelte";var $v=_(m('<button class="px-4 py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-play mr-1"></i> </button>'),Ea[u],[[80,12,[[84,16]]]]),Ev=_(m('<button class="px-4 py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-pause mr-1"></i> </button>'),Ea[u],[[87,12,[[91,16]]]]),Sv=_(m('<span class="text-text-muted/60 ml-1"> </span>'),Ea[u],[[107,20]]),Cv=_(m('<span class="text-xs text-text-muted border border-border rounded px-2 py-1"><i class="fa-solid fa-user mr-1"></i> <!></span>'),Ea[u],[[103,12,[[104,16]]]]),Av=_(m('<header class="flex justify-between items-center px-6 py-4 border-b border-border bg-surface"><div class="flex items-center gap-3"><h1 class="text-lg font-semibold tracking-tight text-primary-400"><i class="fa-solid fa-robot mr-1"></i> </h1> <span><i></i> </span> <span class="text-xs px-2 py-0.5 rounded-full font-medium bg-primary-950 text-primary-400"><i class="fa-solid fa-screwdriver-wrench mr-1"></i> </span></div> <div class="flex gap-2"><!> <button class="px-4 py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-bolt mr-1"></i> </button> <!> <button class="px-4 py-2 border border-border rounded-md bg-surface text-sm hover:bg-surface-elevated transition-colors text-text-muted"><i class="fa-solid fa-right-from-bracket"></i></button></div></header>'),Ea[u],[[66,0,[[67,4,[[68,8,[[69,12]]],[71,8,[[72,12]]],[74,8,[[75,12]]]]],[78,4,[[95,8,[[99,12]]],[112,8,[[117,12]]]]]]]]);function Ea(r,i){Cr(new.target),$r(i,!0,Ea);let o=S(A(!1),"paused"),d=S(A(0),"toolsCount"),c=S(A(""),"statusClass"),f=S(A("fa-spinner fa-spin"),"statusIcon"),b=S(A(rr(l("header.loading"))),"statusText"),h=S(A(!1),"disconnected");async function w(){try{const we=(await O(jt("GET","/api/status")))();p(o,we.paused,!0),p(d,we.tools_count,!0),p(h,!1),we.paused?(p(c,"badge-paused"),p(f,"fa-circle-pause"),p(b,l("header.paused"),!0)):(p(c,"badge-running"),p(f,"fa-circle-check"),p(b,l("header.running"),!0))}catch{p(h,!0),p(c,"text-error-500"),p(f,"fa-circle-xmark"),p(b,l("header.disconnected"),!0)}}async function P(){(await O(jt("POST","/api/agent/pause")))(),$a()}async function C(){(await O(jt("POST","/api/agent/resume")))(),$a()}async function E(){(await O(jt("POST","/api/agent/tick")))(),$a()}async function k(){try{(await O(fetch("/api/auth/logout",{method:"POST"})))()}catch{}sr.authenticated=!1}Gr(()=>{Vt.refreshCounter,w()});var M={...Ar()},I=Av(),Z=e(I),R=e(Z),q=s(e(R)),ce=s(R,2),de=e(ce),$e=s(de,1,!0),We=s(ce,2),Oe=s(e(We),1,!0),je=s(Z,2),De=e(je);{var ct=we=>{var pe=$v(),se=s(e(pe));x(V=>n(se,` ${V??""}`),[()=>l("header.resume")]),oe("click",pe,C),v(we,pe)},ke=we=>{var pe=Ev(),se=s(e(pe));x(V=>n(se,` ${V??""}`),[()=>l("header.pause")]),oe("click",pe,P),v(we,pe)};g(()=>y(De,we=>{a(o)?we(ct):we(ke,!1)}),"if",Ea,79,8)}var ae=s(De,2),Ue=s(e(ae)),ut=s(ae,2);{var ht=we=>{var pe=Cv(),se=s(e(pe)),V=s(se);{var T=F=>{var _e=Sv(),K=e(_e);x(()=>n(K,`(${sr.role??""})`)),v(F,_e)};g(()=>y(V,F=>{sr.role&&F(T)}),"if",Ea,106,16)}x(()=>n(se,` ${sr.subject??""} `)),v(we,pe)};g(()=>y(ut,we=>{sr.subject&&we(ht)}),"if",Ea,102,8)}var G=s(ut,2);return x((we,pe,se,V)=>{n(q,` ${we??""}`),at(ce,1,`text-xs px-2 py-0.5 rounded-full font-medium ${a(c)??""}`),at(de,1,`fa-solid ${a(f)??""} mr-1`),n($e,a(b)),n(Oe,pe),n(Ue,` ${se??""}`),Lt(G,"title",V)},[()=>l("header.title"),()=>l("header.tools_count",{count:a(d)}),()=>l("header.force_tick"),()=>l("header.sign_out")]),oe("click",ae,E),oe("click",G,k),v(r,I),Er(M)}Dr(["click"]);ps[u]="src/components/PendingActions.svelte";var Pv=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),ps[u],[[66,12]]),Ov=_(m('<div class="p-3 border border-border rounded-md mb-2 bg-surface-muted"><div class="text-xs uppercase tracking-wider text-primary-500 font-semibold mb-1"><i class="fa-solid fa-gear mr-1"></i> </div> <pre class="text-xs whitespace-pre-wrap my-1 text-text font-mono"> </pre> <div class="text-xs text-text-muted mb-2"> </div> <div class="text-[11px] text-text-subtle"> </div> <div class="flex gap-1.5 mt-2"><button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"><i class="fa-solid fa-check mr-1"></i> </button> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-xmark mr-1"></i> </button></div></div>'),ps[u],[[69,16,[[70,20,[[71,24]]],[73,20],[74,20],[75,20],[76,20,[[77,24,[[81,28]]],[83,24,[[87,28]]]]]]]]),jv=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-clock-rotate-left mr-1.5"></i> </h2> <div class="flex gap-1.5 pr-3"><button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"> </button> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors"> </button></div></div> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),ps[u],[[48,0,[[49,4,[[50,8,[[51,12]]],[53,8,[[54,12],[58,12]]]]],[64,4]]]]);function ps(r,i){Cr(new.target),$r(i,!0,ps);let o=S(A(rr([])),"actions");async function d(){try{p(o,(await O(jt("GET","/api/pending")))(),!0)}catch(je){console.error(...tr("error","loadPending:",je))}}async function c(je){(await O(jt("POST",`/api/pending/${je}/approve`)))(),$a()}async function f(je){(await O(jt("POST",`/api/pending/${je}/reject`)))(),$a()}async function b(){(await O(jt("POST","/api/pending/approve-all")))(),$a()}async function h(){(await O(jt("POST","/api/pending/reject-all")))(),$a()}function w(je){var ct;const De=(ct=je.action)==null?void 0:ct.params;return De?JSON.stringify(De,null,2):"{}"}Gr(()=>{Vt.refreshCounter,d()});var P={...Ar()},C=jv(),E=e(C),k=e(E),M=s(e(k)),I=s(k,2),Z=e(I),R=e(Z),q=s(Z,2),ce=e(q),de=s(E,2),$e=e(de);{var We=je=>{var De=Pv(),ct=e(De);x(ke=>n(ct,ke),[()=>l("pending.no_pending")]),v(je,De)},Oe=je=>{var De=Sr(),ct=Te(De);g(()=>Wt(ct,17,()=>a(o),ke=>ke.id,(ke,ae)=>{var Ue=Ov(),ut=e(Ue),ht=s(e(ut),1,!0);var G=s(ut,2),we=e(G,!0);var pe=s(G,2),se=e(pe,!0);var V=s(pe,2),T=e(V,!0);var F=s(V,2),_e=e(F),K=s(e(_e),1,!0);var qe=s(_e,2),ze=s(e(qe),1,!0);x((be,tt,Q)=>{var D,L;n(ht,((D=a(ae).action)==null?void 0:D.tool)??"unknown"),n(we,be),n(se,a(ae).reasoning??((L=a(ae).action)==null?void 0:L.reasoning)??""),n(T,a(ae).proposed_at),n(K,tt),n(ze,Q)},[()=>w(a(ae)),()=>l("pending.approve"),()=>l("pending.reject")]),oe("click",_e,function(){return c(a(ae).id)}),oe("click",qe,function(){return f(a(ae).id)}),v(ke,Ue)}),"each",ps,68,12),v(je,De)};g(()=>y($e,je=>{j(a(o).length,0)?je(We):je(Oe,!1)}),"if",ps,65,8)}return x((je,De,ct)=>{n(M,` ${je??""}`),n(R,De),n(ce,ct)},[()=>l("pending.title"),()=>l("pending.approve_all"),()=>l("pending.reject_all")]),oe("click",Z,b),oe("click",q,h),v(r,C),Er(P)}Dr(["click"]);function qo(r){if(!r)return null;try{return/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(r)?new Date(r.replace(" ","T")+"Z"):new Date(r)}catch{return null}}function fn(r,i){const o=qo(r);return!o||isNaN(o.getTime())?"":o.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function _s(r,i){const o=qo(r);return!o||isNaN(o.getTime())?r:o.toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Ao(r,i){const o=qo(r);if(!o||isNaN(o.getTime()))return r;const d=new Date,c=new Date(d.getFullYear(),d.getMonth(),d.getDate()),f=new Date(c.getTime()-864e5),b=new Date(o.getFullYear(),o.getMonth(),o.getDate()),h=o.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return b.getTime()===c.getTime()?`Today ${h}`:b.getTime()===f.getTime()?`Yesterday ${h}`:_s(r)}Ia[u]="src/components/ActivityLog.svelte";var Rv=_(m('<p class="text-text-subtle text-sm italic text-center py-4">No activity yet</p>'),Ia[u],[[35,12]]),Lv=_(m('<br/><span class="text-text-muted"> </span>',1),Ia[u],[[43,28],[43,32]]),Nv=_(m('<div class="flex items-start gap-2.5 py-2 border-b border-border-muted text-sm"><div></div> <div class="flex-1"><strong> </strong> <!></div> <div class="text-[11px] text-text-subtle whitespace-nowrap"> </div></div>'),Ia[u],[[38,16,[[39,20],[40,20,[[41,24]]],[46,20]]]]),Mv=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-list-check mr-1.5"></i> Activity Log</h2> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),Ia[u],[[29,0,[[30,4,[[31,8]]],[33,4]]]]);function Ia(r,i){Cr(new.target),$r(i,!0,Ia);let o=S(A(rr([])),"entries");async function d(){try{p(o,(await O(jt("GET","/api/activity?limit=30")))(),!0)}catch(E){console.error(...tr("error","loadActivity:",E))}}function c(E){return j(E,"ok")?"bg-success-500":j(E,"error")?"bg-error-500":"bg-warning-500"}Gr(()=>{Vt.refreshCounter,d()});var f={...Ar()},b=Mv(),h=s(e(b),2),w=e(h);{var P=E=>{var k=Rv();v(E,k)},C=E=>{var k=Sr(),M=Te(k);g(()=>Wt(M,17,()=>a(o),fr,(I,Z)=>{var R=Nv(),q=e(R),ce=s(q,2),de=e(ce),$e=e(de,!0);var We=s(de),Oe=s(We);{var je=ke=>{var ae=Lv(),Ue=s(Te(ae)),ut=e(Ue,!0);x(ht=>n(ut,ht),[()=>a(Z).detail.slice(0,200)]),v(ke,ae)};g(()=>y(Oe,ke=>{a(Z).detail&&ke(je)}),"if",Ia,42,24)}var De=s(ce,2),ct=e(De,!0);x((ke,ae)=>{at(q,1,`w-1.5 h-1.5 rounded-full mt-1.5 shrink-0 ${ke??""}`),n($e,a(Z).action_type),n(We,`: ${a(Z).summary??""} `),n(ct,ae)},[()=>c(a(Z).status),()=>Ao(a(Z).created_at)]),v(I,R)}),"each",Ia,37,12),v(E,k)};g(()=>y(w,E=>{j(a(o).length,0)?E(P):E(C,!1)}),"if",Ia,34,8)}return v(r,b),Er(f)}wr[u]="src/components/LiveFeed.svelte";var Dv=_(m('<span class="relative flex h-2.5 w-2.5"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-500 opacity-75"></span> <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-primary-500"></span></span>'),wr[u],[[119,16,[[120,20],[121,20]]]]),Iv=_(m('<i class="fa-solid fa-bolt"></i>'),wr[u],[[124,16]]),Fv=_(m('<span class="text-[10px] bg-surface-muted text-text-subtle px-1.5 py-0.5 rounded-full normal-case tracking-normal font-normal"> </span>'),wr[u],[[128,16]]),Uv=_(m('<span class="text-[11px] text-primary-400 font-mono animate-pulse"><i class="fa-solid fa-gear fa-spin mr-1"></i> </span>'),wr[u],[[136,16,[[137,20]]]]),zv=_(m('<span class="text-[11px] text-info-400 animate-pulse"><i class="fa-solid fa-brain mr-1"></i> </span>'),wr[u],[[141,16,[[142,20]]]]),Bv=_(m('<button class="text-[11px] text-text-subtle hover:text-text-muted transition-colors" title="Clear feed"><i class="fa-solid fa-xmark"></i></button>'),wr[u],[[146,16,[[151,20]]]]),qv=_(m('<p class="text-text-subtle text-sm italic text-center py-6"></p>'),wr[u],[[160,16]]),Gv=_(m('<div class="text-xs text-text-muted mt-0.5 truncate font-mono"> </div>'),wr[u],[[173,36]]),Vv=_(m('<div><i></i> <div class="flex-1 min-w-0"><div class="text-sm text-text leading-snug"> </div> <!></div> <div class="text-[10px] text-text-subtle whitespace-nowrap shrink-0 mt-0.5"> </div></div>'),wr[u],[[166,24,[[167,28],[168,28,[[169,32]]],[178,28]]]]),Kv=_(m('<div class="divide-y divide-border-muted"></div>'),wr[u],[[164,16]]),Wv=_(m('<div class="max-h-72 overflow-y-auto custom-scroll"><!></div>'),wr[u],[[158,8]]),Jv=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><button class="flex items-center gap-2 text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted hover:text-text transition-colors"><!> <!> <i></i></button> <div class="flex items-center gap-2 pr-3"><!> <!> <!></div></div> <!></section>'),wr[u],[[112,0,[[113,4,[[114,8,[[132,12]]],[134,8]]]]]]);function wr(r,i){Cr(new.target),$r(i,!0,wr);let o=S(A(!0),"expanded");fi(async()=>{if(j(yr.events.length,0))try{const G=(await O(jt("GET","/api/tool-events?limit=50")))();for(const we of G)vl(we)}catch(G){console.error(...tr("error","Failed to load buffered tool events:",G))}});function d(G){switch(G.type){case"thinking":return"fa-brain";case"tool_start":return"fa-play";case"tool_result":return G.success?"fa-circle-check":"fa-circle-xmark";case"approval_needed":return"fa-shield-halved";case"turn_complete":return"fa-flag-checkered";case"error":return"fa-triangle-exclamation";default:return"fa-circle"}}function c(G){switch(G.type){case"thinking":return"text-info-500";case"tool_start":return"text-primary-500";case"tool_result":return G.success?"text-success-500":"text-error-500";case"approval_needed":return"text-warning-500";case"turn_complete":return"text-success-400";case"error":return"text-error-500";default:return"text-text-muted"}}function f(G){switch(G.type){case"thinking":return"border-l-info-500";case"tool_start":return"border-l-primary-500";case"tool_result":return G.success?"border-l-success-500":"border-l-error-500";case"approval_needed":return"border-l-warning-500";case"turn_complete":return"border-l-success-400";case"error":return"border-l-error-500";default:return"border-l-border"}}function b(G){switch(G.type){case"thinking":return j(G.context,"follow_up_after_approval")?"Generating follow-up reply…":`Thinking (turn ${G.turn+1}/${G.max_turns})…`;case"tool_start":{const we=G.auto_approved?"auto":G.approved?"approved":"manual";return`Executing ${G.tool} [${we}]`}case"tool_result":return`${G.tool}: ${G.success?"success":"error"}`;case"approval_needed":return`${G.tool} needs approval`;case"turn_complete":{if(G.exhausted)return`Max turns exhausted (${G.turns_used})`;const we=G.pending_approvals?`, ${G.pending_approvals} awaiting approval`:"";return`Complete in ${G.turns_used} turn${j(G.turns_used,1)?"":"s"}${we}`}case"error":return G.message;default:return"Unknown event"}}function h(G){switch(G.type){case"tool_start":return G.reasoning||null;case"tool_result":return G.output_preview||null;case"approval_needed":return G.reasoning||null;default:return null}}function w(G){try{return new Date(G).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}const P=S(Br(()=>yr.events.length>0),"hasEvents"),C=S(Br(()=>yr.isThinking||j(yr.activeTool,null,!1)),"isActive");var E={...Ar()},k=Jv(),M=e(k),I=e(M),Z=e(I);{var R=G=>{var we=Dv();v(G,we)},q=G=>{var we=Iv();v(G,we)};g(()=>y(Z,G=>{a(C)?G(R):G(q,!1)}),"if",wr,118,12)}var ce=s(Z);ce.nodeValue=` ${t("feed.title")??""} `;var de=s(ce);{var $e=G=>{var we=Fv(),pe=e(we);x(()=>n(pe,yr.events.length)),v(G,we)};g(()=>y(de,G=>{a(P)&&G($e)}),"if",wr,127,12)}var We=s(de,2),Oe=s(I,2),je=e(Oe);{var De=G=>{var we=Uv(),pe=s(e(we),1,!0);x(()=>n(pe,yr.activeTool)),v(G,we)};g(()=>y(je,G=>{yr.activeTool&&G(De)}),"if",wr,135,12)}var ct=s(je,2);{var ke=G=>{var we=zv(),pe=s(e(we));pe.nodeValue=`${t("feed.thinking")??""}…`,v(G,we)};g(()=>y(ct,G=>{yr.isThinking&&!yr.activeTool&&G(ke)}),"if",wr,140,12)}var ae=s(ct,2);{var Ue=G=>{var we=Bv();oe("click",we,function(){return ul()}),v(G,we)};g(()=>y(ae,G=>{a(P)&&G(Ue)}),"if",wr,145,12)}var ut=s(M,2);{var ht=G=>{var we=Wv(),pe=e(we);{var se=T=>{var F=qv();F.textContent=t("feed.no_events"),v(T,F)},V=T=>{var F=Kv();g(()=>Wt(F,21,()=>yr.events,fr,(_e,K,qe)=>{var ze=Vv(),be=e(ze),tt=s(be,2),Q=e(tt),D=e(Q,!0);var L=s(Q,2);{var ge=J=>{var Be=Gv(),_t=e(Be,!0);x((Rt,Et)=>{Lt(Be,"title",Rt),n(_t,Et)},[()=>h(a(K))??void 0,()=>h(a(K))]),v(J,Be)},Ze=Br(()=>h(a(K)));g(()=>y(L,J=>{a(Ze)&&J(ge)}),"if",wr,172,32)}var vt=s(tt,2),it=e(vt,!0);x((J,Be,_t,Rt,Et)=>{at(ze,1,`flex items-start gap-2.5 px-4 py-2.5 border-l-2 ${J??""} ${j(qe,0)&&a(C)?"bg-surface-muted/50":""}`),at(be,1,`fa-solid ${Be??""} ${_t??""} text-xs mt-0.5 w-4 text-center shrink-0`),n(D,Rt),n(it,Et)},[()=>f(a(K)),()=>d(a(K)),()=>c(a(K)),()=>b(a(K)),()=>w(a(K).timestamp)]),v(_e,ze)}),"each",wr,165,20),v(T,F)};g(()=>y(pe,T=>{a(P)?T(V,!1):T(se)}),"if",wr,159,12)}v(G,we)};g(()=>y(ut,G=>{a(o)&&G(ht)}),"if",wr,157,4)}return x(()=>at(We,1,`fa-solid ${a(o)?"fa-chevron-up":"fa-chevron-down"} text-[10px] ml-1`)),oe("click",I,function(){return p(o,!a(o))}),v(r,k),Er(E)}Dr(["click"]);Mr[u]="src/components/MemoryPanel.svelte";var Hv=_(m("<button><i></i> </button>"),Mr[u],[[69,12,[[74,16]]]]),Yv=_(m('<div class="px-4 py-2 border-b border-border"><input type="text" class="w-full px-2.5 py-1.5 border border-border rounded-md bg-background text-text text-sm outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 font-sans"/></div>'),Mr[u],[[80,8,[[81,12]]]]),Qv=_(m('<p class="text-text-subtle text-sm italic text-center py-4">Error loading memory</p>'),Mr[u],[[93,12]]),Zv=_(m('<div class="whitespace-pre-wrap font-mono text-xs leading-relaxed"> </div>'),Mr[u],[[95,12]]),Xv=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Mr[u],[[98,16]]),eu=_(m('<div class="py-1.5 border-b border-border-muted text-sm"><strong> </strong> <span class="text-text-muted"> </span><br/> </div>'),Mr[u],[[101,20,[[102,24],[103,24],[103,91]]]]),tu=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Mr[u],[[110,16]]),ru=_(m('<div class="py-1.5 border-b border-border-muted text-sm"><span class="text-xs text-primary-500 font-semibold uppercase tracking-wider"> </span> <span class="text-text-muted text-[11px]"> </span><br/> </div>'),Mr[u],[[113,20,[[114,24],[115,24],[115,104]]]]),au=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-brain mr-1.5"></i> Memory</h2> <div class="flex px-4 border-b border-border"></div> <!> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),Mr[u],[[63,0,[[64,4,[[65,8]]],[67,4],[91,4]]]]);function Mr(r,i){Cr(new.target),$r(i,!0,Mr);let o=S(A(""),"content"),d=S(A(rr([])),"messages"),c=S(A(rr([])),"archivalEntries"),f=S(A(""),"searchQuery"),b=S(A(!1),"error");const h=[{id:"core",label:"Core",icon:"fa-microchip"},{id:"conversation",label:"Conversation",icon:"fa-comments"},{id:"archival",label:"Archival",icon:"fa-box-archive"}];function w(Oe){Vt.currentMemoryTab=Oe}async function P(){p(b,!1);try{if(j(Vt.currentMemoryTab,"core")){const Oe=(await O(jt("GET","/api/memory/core")))();p(o,Oe.personality||"(empty)",!0),p(d,[],!0),p(c,[],!0)}else if(j(Vt.currentMemoryTab,"conversation")){const Oe=(await O(jt("GET","/api/memory/conversation")))();p(d,Oe,!0),p(o,""),p(c,[],!0)}else if(j(Vt.currentMemoryTab,"archival")){const Oe=a(f)?`/api/memory/archival?q=${encodeURIComponent(a(f))}`:"/api/memory/archival",je=(await O(jt("GET",Oe)))();p(c,je,!0),p(o,""),p(d,[],!0)}}catch(Oe){p(b,!0),console.error(...tr("error","loadMemory:",Oe))}}function C(Oe){j(Oe.key,"Enter")&&P()}Gr(()=>{Vt.refreshCounter,Vt.currentMemoryTab,P()});var E={...Ar()},k=au(),M=s(e(k),2);g(()=>Wt(M,21,()=>h,fr,(Oe,je)=>{var De=Hv();let ct;var ke=e(De),ae=s(ke);x(Ue=>{ct=at(De,1,"mem-tab",null,ct,{active:j(Vt.currentMemoryTab,a(je).id)}),at(ke,1,`fa-solid ${a(je).icon??""} mr-1`),n(ae,` ${Ue??""}`)},[()=>l("memory."+a(je).id)]),oe("click",De,function(){return w(a(je).id)}),v(Oe,De)}),"each",Mr,68,8);var I=s(M,2);{var Z=Oe=>{var je=Yv(),De=e(je);x(ct=>Lt(De,"placeholder",ct),[()=>l("memory.search_placeholder")]),oe("keyup",De,C),vr(De,function(){return a(f)},function(ke){p(f,ke)}),v(Oe,je)};g(()=>y(I,Oe=>{j(Vt.currentMemoryTab,"archival")&&Oe(Z)}),"if",Mr,79,4)}var R=s(I,2),q=e(R);{var ce=Oe=>{var je=Qv();v(Oe,je)},de=Oe=>{var je=Zv(),De=e(je);x(()=>n(De,a(o))),v(Oe,je)},$e=Oe=>{var je=Sr(),De=Te(je);{var ct=ae=>{var Ue=Xv(),ut=e(Ue);x(ht=>n(ut,ht),[()=>l("memory.empty")]),v(ae,Ue)},ke=ae=>{var Ue=Sr(),ut=Te(Ue);g(()=>Wt(ut,17,()=>a(d),fr,(ht,G)=>{var we=eu(),pe=e(we),se=e(pe,!0);var V=s(pe,2),T=e(V,!0);var F=s(V,2);x(_e=>{n(se,a(G).role),n(T,_e),n(F,` ${a(G).content??""}`)},[()=>Ao(a(G).created_at)]),v(ht,we)}),"each",Mr,100,16),v(ae,Ue)};g(()=>y(De,ae=>{j(a(d).length,0)?ae(ct):ae(ke,!1)}),"if",Mr,97,12)}v(Oe,je)},We=Oe=>{var je=Sr(),De=Te(je);{var ct=ae=>{var Ue=tu(),ut=e(Ue);x(ht=>n(ut,ht),[()=>l("memory.empty")]),v(ae,Ue)},ke=ae=>{var Ue=Sr(),ut=Te(Ue);g(()=>Wt(ut,17,()=>a(c),fr,(ht,G)=>{var we=ru(),pe=e(we),se=e(pe,!0);var V=s(pe,2),T=e(V,!0);var F=s(V,2);x(_e=>{n(se,a(G).category),n(T,_e),n(F,` ${a(G).content??""}`)},[()=>Ao(a(G).created_at)]),v(ht,we)}),"each",Mr,112,16),v(ae,Ue)};g(()=>y(De,ae=>{j(a(c).length,0)?ae(ct):ae(ke,!1)}),"if",Mr,109,12)}v(Oe,je)};g(()=>y(q,Oe=>{a(b)?Oe(ce):j(Vt.currentMemoryTab,"core")?Oe(de,1):j(Vt.currentMemoryTab,"conversation")?Oe($e,2):j(Vt.currentMemoryTab,"archival")&&Oe(We,3)}),"if",Mr,92,8)}return v(r,k),Er(E)}Dr(["click","keyup"]);Ua[u]="src/components/StatsPanel.svelte";var su=_(m('<i class="fa-regular fa-clock mr-1"></i> <br/>',1),Ua[u],[[49,20],[49,104]]),iu=_(m("No ticks yet<br/>",1),Ua[u],[[51,32]]),ou=_(m('<div class="grid grid-cols-2 gap-3"><div class="text-center"><div class="text-3xl font-bold text-primary-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div> <div class="text-center"><div class="text-3xl font-bold text-primary-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div> <div class="text-center"><div class="text-3xl font-bold text-success-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div> <div class="text-center"><div class="text-3xl font-bold text-error-500"> </div> <div class="text-[11px] text-text-muted uppercase tracking-wider mt-0.5"> </div></div></div> <div class="mt-3 text-xs text-text-muted"><!> <i class="fa-solid fa-power-off mr-1"></i> </div>',1),Ua[u],[[29,12,[[30,16,[[31,20],[32,20]]],[34,16,[[35,20],[36,20]]],[38,16,[[39,20],[40,20]]],[42,16,[[43,20],[44,20]]]]],[47,12,[[53,16]]]]),nu=_(m('<p class="text-text-subtle text-sm italic text-center py-4">Loading...</p>'),Ua[u],[[56,12]]),lu=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-chart-bar mr-1.5"></i> </h2> <div class="p-3 max-h-96 overflow-y-auto custom-scroll"><!></div></section>'),Ua[u],[[23,0,[[24,4,[[25,8]]],[27,4]]]]);function Ua(r,i){Cr(new.target),$r(i,!0,Ua);let o=S(A(null),"stats");async function d(){try{p(o,(await O(jt("GET","/api/stats")))(),!0)}catch(k){console.error(...tr("error","loadStats:",k))}}Gr(()=>{Vt.refreshCounter,d()});var c={...Ar()},f=lu(),b=e(f),h=s(e(b)),w=s(b,2),P=e(w);{var C=k=>{var M=ou(),I=Te(M),Z=e(I),R=e(Z),q=e(R),ce=s(R,2),de=e(ce),$e=s(Z,2),We=e($e),Oe=e(We),je=s(We,2),De=e(je),ct=s($e,2),ke=e(ct),ae=e(ke),Ue=s(ke,2),ut=e(Ue),ht=s(ct,2),G=e(ht),we=e(G),pe=s(G,2),se=e(pe),V=s(I,2),T=e(V);{var F=qe=>{var ze=su(),be=s(Te(ze));x(tt=>n(be,`${tt??""}: ${a(o).last_tick_at??""}`),[()=>l("stats.last_tick")]),v(qe,ze)},_e=qe=>{var ze=iu();v(qe,ze)};g(()=>y(T,qe=>{a(o).last_tick_at?qe(F):qe(_e,!1)}),"if",Ua,48,16)}var K=s(T,3);x((qe,ze,be,tt)=>{n(q,a(o).total_ticks),n(de,qe),n(Oe,a(o).total_actions),n(De,ze),n(ae,a(o).total_approved),n(ut,be),n(we,a(o).total_rejected),n(se,tt),n(K,`Started: ${a(o).started_at??""}`)},[()=>l("stats.ticks"),()=>l("stats.messages"),()=>l("stats.approvals"),()=>l("stats.rejections")]),v(k,M)},E=k=>{var M=nu();v(k,M)};g(()=>y(P,k=>{a(o)?k(C):k(E,!1)}),"if",Ua,28,8)}return x(k=>n(h,` ${k??""}`),[()=>l("stats.title")]),v(r,f),Er(c)}Tr[u]="src/components/ChatTab.svelte";var du=_(m('<div class="flex items-center justify-center h-full"><div class="text-center text-text-subtle"><i class="fa-solid fa-comments text-3xl mb-3 block text-text-subtle"></i> <p class="text-sm"> </p></div></div>'),Tr[u],[[93,12,[[94,16,[[95,20],[96,20]]]]]]),cu=_(m('<div class="flex justify-end"><div class="max-w-[70%] min-w-[120px]"><div class="bg-primary-600 text-white rounded-lg rounded-br-sm px-3 py-2 text-sm whitespace-pre-wrap break-words"> </div> <div class="text-[10px] text-text-subtle mt-0.5 text-right"> </div></div></div>'),Tr[u],[[102,20,[[103,24,[[104,28],[107,28]]]]]]),vu=_(m('<div class="flex justify-start"><div class="max-w-[70%] min-w-[120px]"><div class="bg-surface-elevated border border-border rounded-lg rounded-bl-sm px-3 py-2 text-sm whitespace-pre-wrap break-words"> </div> <div class="text-[10px] text-text-subtle mt-0.5"> </div></div></div>'),Tr[u],[[113,20,[[114,24,[[115,28],[118,28]]]]]]),uu=_(m('<div class="flex justify-center"><div class="text-[11px] text-text-subtle italic px-3 py-1 bg-surface-muted rounded-full max-w-[80%] truncate"> </div></div>'),Tr[u],[[125,20,[[126,24]]]]),fu=_(m('<i class="fa-solid fa-gear fa-spin mr-1.5 text-primary-500"></i> <span class="text-primary-400 font-mono"> </span> <span class="text-text-subtle ml-1">running…</span>',1),Tr[u],[[138,32],[139,32],[140,32]]),pu=_(m('<i class="fa-solid fa-brain mr-1.5 text-info-500 animate-pulse"></i>Thinking…',1),Tr[u],[[142,32]]),_u=_(m('<i class="fa-solid fa-circle-notch fa-spin mr-1.5"></i> ',1),Tr[u],[[144,32]]),mu=_(m('<div class="flex justify-start"><div class="min-w-[120px] max-w-[70%]"><div class="bg-surface-elevated border border-border rounded-lg rounded-bl-sm px-3 py-2 text-sm text-text-muted"><!></div></div></div>'),Tr[u],[[134,16,[[135,20,[[136,24]]]]]]),xu=_(m("<!> <!>",1),Tr[u],[]),bu=_(m('<div class="mx-4 mb-2 px-3 py-2 rounded-md bg-error-950 border border-error-500/30 text-error-400 text-xs"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div>'),Tr[u],[[155,8,[[156,12]]]]),gu=_(m('<i class="fa-solid fa-circle-notch fa-spin"></i>'),Tr[u],[[181,20]]),hu=_(m('<i class="fa-solid fa-paper-plane"></i>'),Tr[u],[[183,20]]),yu=_(m(`<div class="flex flex-col h-[calc(100vh-140px)]"><div class="flex-1 overflow-y-auto custom-scroll p-4 space-y-3"><!></div> <!> <div class="border-t border-border bg-surface px-4 py-3"><div class="flex gap-2 items-end"><textarea placeholder="Type a message..." rows="1" class="flex-1 px-3 py-2 rounded-md border border-border bg-background text-text text-sm outline-none
                       focus:border-primary-500 focus:ring-1 focus:ring-primary-500/50 font-sans
                       placeholder:text-text-subtle disabled:opacity-50 disabled:cursor-not-allowed resize-none"></textarea> <button class="px-4 py-2 rounded-md bg-primary-600 text-white text-sm font-medium
                       hover:bg-primary-500 transition-colors
                       disabled:opacity-50 disabled:cursor-not-allowed shrink-0"><!></button></div></div></div>`),Tr[u],[[86,0,[[88,4],[161,4,[[162,8,[[163,12],[173,12]]]]]]]]);function Tr(r,i){Cr(new.target),$r(i,!0,Tr);let o=S(A(rr([])),"messages"),d=S(A(""),"input"),c=S(A(!1),"sending"),f=S(A(""),"error"),b=S(A(void 0),"messagesEl");async function h(){try{p(o,(await O(jt("GET","/api/memory/conversation")))(),!0),(await O(Ji()))(),w()}catch(ke){console.error(...tr("error","loadChat:",ke))}}function w(){a(b)&&(a(b).scrollTop=a(b).scrollHeight)}async function P(){const ke=a(d).trim();if(!(!ke||a(c))){p(f,""),p(c,!0),p(d,""),p(o,[...a(o),{id:Date.now(),role:"user",content:ke,created_at:new Date().toISOString()}],!0),(await O(Ji()))(),w();try{const ae={message:ke};sr.userId&&(ae.user_id=sr.userId);const Ue=(await O(jt("POST","/api/chat",ae)))();(await O(h()))()}catch(ae){p(f,(ae==null?void 0:ae.message)||l("chat.send_failed"),!0),(await O(h()))()}finally{p(c,!1),(await O(Ji()))(),w()}}}function C(ke){j(ke.key,"Enter")&&!ke.shiftKey&&(ke.preventDefault(),P())}fi(()=>{h()}),Gr(()=>{Vt.refreshCounter,a(c)||h()});var E={...Ar()},k=yu(),M=e(k),I=e(M);{var Z=ke=>{var ae=du(),Ue=e(ae),ut=s(e(Ue),2),ht=e(ut);x(G=>n(ht,G),[()=>l("chat.no_messages")]),v(ke,ae)},R=ke=>{var ae=xu(),Ue=Te(ae);g(()=>Wt(Ue,17,()=>a(o),G=>G.id,(G,we)=>{var pe=Sr(),se=Te(pe);{var V=_e=>{var K=cu(),qe=e(K),ze=e(qe),be=e(ze,!0);var tt=s(ze,2),Q=e(tt,!0);x(D=>{n(be,a(we).content),n(Q,D)},[()=>fn(a(we).created_at)]),v(_e,K)},T=_e=>{var K=vu(),qe=e(K),ze=e(qe),be=e(ze,!0);var tt=s(ze,2),Q=e(tt,!0);x(D=>{n(be,a(we).content),n(Q,D)},[()=>fn(a(we).created_at)]),v(_e,K)},F=_e=>{var K=uu(),qe=e(K),ze=e(qe,!0);x(()=>n(ze,a(we).content)),v(_e,K)};g(()=>y(se,_e=>{j(a(we).role,"user")?_e(V):j(a(we).role,"assistant")?_e(T,1):_e(F,!1)}),"if",Tr,101,16)}v(G,pe)}),"each",Tr,100,12);var ut=s(Ue,2);{var ht=G=>{var we=mu(),pe=e(we),se=e(pe),V=e(se);{var T=K=>{var qe=fu(),ze=s(Te(qe),2),be=e(ze);x(()=>n(be,yr.activeTool)),v(K,qe)},F=K=>{var qe=pu();v(K,qe)},_e=K=>{var qe=_u(),ze=s(Te(qe),1,!0);x(be=>n(ze,be),[()=>l("chat.processing")]),v(K,qe)};g(()=>y(V,K=>{yr.activeTool?K(T):yr.isThinking?K(F,1):K(_e,!1)}),"if",Tr,137,28)}v(G,we)};g(()=>y(ut,G=>{a(c)&&G(ht)}),"if",Tr,133,12)}v(ke,ae)};g(()=>y(I,ke=>{j(a(o).length,0)&&!a(c)?ke(Z):ke(R,!1)}),"if",Tr,92,8)}fc(M,ke=>p(b,ke),()=>a(b));var q=s(M,2);{var ce=ke=>{var ae=bu(),Ue=s(e(ae),1,!0);x(()=>n(Ue,a(f))),v(ke,ae)};g(()=>y(q,ke=>{a(f)&&ke(ce)}),"if",Tr,154,4)}var de=s(q,2),$e=e(de),We=e($e),Oe=s(We,2),je=e(Oe);{var De=ke=>{var ae=gu();v(ke,ae)},ct=ke=>{var ae=hu();v(ke,ae)};g(()=>y(je,ke=>{a(c)?ke(De):ke(ct,!1)}),"if",Tr,180,16)}return x(ke=>{We.disabled=a(c),Oe.disabled=ke},[()=>a(c)||!a(d).trim()]),oe("keydown",We,C),vr(We,function(){return a(d)},function(ae){p(d,ae)}),oe("click",Oe,P),v(r,k),Er(E)}Dr(["keydown","click"]);Gt[u]="src/components/GoalsTab.svelte";var wu=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Gt[u],[[164,12]]),ku=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Gt[u],[[166,12]]),Tu=_(m('<span class="text-[11px] px-1.5 py-0.5 rounded-full bg-warning-500/15 text-warning-500 font-medium shrink-0"> </span>'),Gt[u],[[181,32]]),$u=_(m('<div class="flex items-center gap-1.5"><div class="w-20 h-1.5 bg-border rounded-full overflow-hidden"><div class="h-full bg-success-500 rounded-full transition-all"></div></div> <span class="text-[11px] text-text-muted font-mono"> </span></div>'),Gt[u],[[188,32,[[189,36,[[190,40]]],[195,36]]]]),Eu=_(m('<div class="text-sm text-text-muted px-4 pb-3 -mt-1"> </div>'),Gt[u],[[207,24]]),Su=_(m('<div class="text-sm text-text-muted px-4 pt-3 pb-2"> </div>'),Gt[u],[[214,32]]),Cu=_(m('<button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-warning-500 hover:bg-warning-500/10 hover:border-warning-500 transition-colors"><i class="fa-solid fa-pause mr-1"></i> </button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-error-400 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-ban mr-1"></i> </button>',1),Gt[u],[[220,36,[[224,40]]],[226,36,[[230,40]]]]),Au=_(m('<button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"><i class="fa-solid fa-play mr-1"></i> </button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-error-400 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-ban mr-1"></i> </button>',1),Gt[u],[[233,36,[[237,40]]],[239,36,[[243,40]]]]),Pu=_(m('<div class="p-4 text-sm text-text-subtle italic text-center"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </div>'),Gt[u],[[249,32,[[250,36]]]]),Ou=_(m('<div class="mx-4 mt-3 p-3 bg-primary-950/40 border border-primary-800/30 rounded-md"><div class="text-[11px] font-semibold uppercase tracking-wider text-primary-400 mb-1"><i class="fa-solid fa-brain mr-1"></i> </div> <div class="text-xs text-text-muted leading-relaxed"> </div></div>'),Gt[u],[[255,36,[[256,40,[[257,44]]],[259,40]]]]),ju=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),Gt[u],[[273,40]]),Ru=_(m('<div class="text-xs text-text-muted mb-1"> </div>'),Gt[u],[[293,60]]),Lu=_(m('<div class="text-[10px] text-text-subtle"> </div>'),Gt[u],[[296,60]]),Nu=_(m('<div class="mt-1.5 p-2 bg-background border border-border rounded text-[11px] font-mono text-text-muted max-h-[120px] overflow-auto whitespace-pre-wrap break-all leading-relaxed"> </div>'),Gt[u],[[301,60]]),Mu=_(m('<div class="mt-1 text-[10px] text-accent-300 font-mono"> </div>'),Gt[u],[[306,60]]),Du=_(m('<div class="flex items-start gap-3 p-3 bg-surface border border-border rounded-md"><div class="shrink-0 mt-0.5"><span><i></i></span></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-0.5"><span class="text-sm font-medium"> </span> <span> </span></div> <!> <!> <!> <!></div></div>'),Gt[u],[[279,48,[[280,52,[[281,56,[[282,60]]]]],[285,52,[[286,56,[[287,60],[288,60]]]]]]]]),Iu=_(m('<div class="space-y-2"></div>'),Gt[u],[[277,40]]),Fu=_(m('<span class="text-text-subtle"> </span> <span class="text-text-muted font-mono"> </span>',1),Gt[u],[[325,44],[326,44]]),Uu=_(m('<!> <div class="p-4"><div class="text-xs font-semibold uppercase tracking-wider text-text-muted mb-3"><i class="fa-solid fa-list-check mr-1"></i> </div> <!></div> <div class="px-4 pb-4"><div class="grid grid-cols-2 gap-x-4 gap-y-1 text-[11px]"><span class="text-text-subtle"> </span> <span class="text-text-muted font-mono"> </span> <span class="text-text-subtle"> </span> <span class="text-text-muted font-mono"> </span> <!> <span class="text-text-subtle"> </span> <span class="text-text-muted font-mono truncate"> </span></div></div>',1),Gt[u],[[266,32,[[267,36,[[268,40]]]]],[318,32,[[319,36,[[320,40],[321,40],[322,40],[323,40],[328,40],[329,40]]]]]]),zu=_(m('<div class="border-t border-border"><!> <div class="flex items-center gap-2 px-4 py-2 border-b border-border"><!></div> <!></div>'),Gt[u],[[212,24,[[218,28]]]]),Bu=_(m('<div class="border border-border rounded-md mb-3 bg-surface-muted overflow-hidden"><button class="w-full p-4 flex justify-between items-center hover:bg-surface-elevated/40 transition-colors cursor-pointer text-left"><div class="flex items-center gap-2 flex-1 min-w-0"><i></i> <span class="text-[15px] font-semibold truncate"> </span> <!></div> <div class="flex items-center gap-2 shrink-0 ml-3"><!> <span><i></i> </span></div></button> <!> <!></div>'),Gt[u],[[171,16,[[173,20,[[177,24,[[178,28],[179,28]]],[186,24,[[200,28,[[201,32]]]]]]]]]]),qu=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-bullseye mr-1.5"></i> </h2> <div class="flex items-center gap-2 pr-3"><select class="text-xs px-2 py-1 border border-border rounded-md bg-surface text-text outline-none focus:border-primary-500"><option> </option><option> </option><option> </option><option> </option><option> </option><option> </option></select> <span class="text-xs text-text-muted"> </span> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div></div> <div class="p-3"><!></div></section>'),Gt[u],[[132,0,[[133,4,[[134,8,[[135,12]]],[137,8,[[138,12,[[143,16],[144,16],[145,16],[146,16],[147,16],[148,16]]],[150,12],[153,12,[[157,16]]]]]]],[162,4]]]]);function Gt(r,i){Cr(new.target),$r(i,!0,Gt);let o=S(A(rr([])),"goals"),d=S(A(!1),"error"),c=S(A(""),"statusFilter"),f=S(A(null),"expandedGoal"),b=S(A(null),"goalDetail"),h=S(A(!1),"detailLoading");async function w(){p(d,!1);try{const be=a(c)?`?status=${a(c)}`:"";p(o,(await O(jt("GET",`/api/goals${be}`)))(),!0)}catch(be){p(d,!0),console.error(...tr("error","loadGoals:",be))}}async function P(be){p(h,!0);try{p(b,(await O(jt("GET",`/api/goals/${encodeURIComponent(be)}`)))(),!0)}catch(tt){console.error(...tr("error","loadGoalDetail:",tt))}finally{p(h,!1)}}async function C(be,tt){try{(await O(jt("PUT",`/api/goals/${encodeURIComponent(be)}/status`,{status:tt})))(),w(),j(a(f),be)&&P(be)}catch(Q){alert(l("goals.status_update_failed")+Q.message)}}function E(be){j(a(f),be)?(p(f,null),p(b,null)):(p(f,be,!0),P(be))}function k(be){switch(be){case"active":return"bg-primary-500/15 text-primary-400";case"paused":return"bg-warning-500/15 text-warning-500";case"completed":return"bg-success-500/15 text-success-500";case"failed":return"bg-error-500/12 text-error-400";case"cancelled":return"bg-text-subtle/10 text-text-subtle";case"in_progress":return"bg-primary-500/15 text-primary-400";case"pending":return"bg-text-subtle/10 text-text-muted";case"skipped":return"bg-text-subtle/10 text-text-subtle";default:return"bg-text-subtle/10 text-text-subtle"}}function M(be){switch(be){case"active":return"fa-circle-play";case"paused":return"fa-circle-pause";case"completed":return"fa-circle-check";case"failed":return"fa-circle-xmark";case"cancelled":return"fa-ban";case"in_progress":return"fa-spinner fa-spin";case"pending":return"fa-clock";case"skipped":return"fa-forward";default:return"fa-question"}}Gr(()=>{j(Vt.currentTab,"goals")&&(Vt.refreshCounter,w())});var I={...Ar()},Z=qu(),R=e(Z),q=e(R),ce=s(e(q)),de=s(q,2),$e=e(de),We=e($e),Oe=e(We);We.value=We.__value="";var je=s(We),De=e(je);je.value=je.__value="active";var ct=s(je),ke=e(ct);ct.value=ct.__value="paused";var ae=s(ct),Ue=e(ae);ae.value=ae.__value="completed";var ut=s(ae),ht=e(ut);ut.value=ut.__value="failed";var G=s(ut),we=e(G);G.value=G.__value="cancelled";var pe=s($e,2),se=e(pe),V=s(pe,2),T=s(e(V)),F=s(R,2),_e=e(F);{var K=be=>{var tt=wu(),Q=e(tt);x(D=>n(Q,D),[()=>l("goals.error_loading")]),v(be,tt)},qe=be=>{var tt=ku(),Q=e(tt);x(D=>n(Q,D),[()=>l("goals.no_goals")]),v(be,tt)},ze=be=>{var tt=Sr(),Q=Te(tt);g(()=>Wt(Q,17,()=>a(o),D=>D.id,(D,L)=>{var ge=Bu(),Ze=e(ge),vt=e(Ze),it=e(vt),J=s(it,2),Be=e(J,!0);var _t=s(J,2);{var Rt=re=>{var z=Tu(),ue=e(z);x(()=>n(ue,`P${a(L).priority??""}`)),v(re,z)};g(()=>y(_t,re=>{a(L).priority>0&&re(Rt)}),"if",Gt,180,28)}var Et=s(vt,2),pt=e(Et);{var X=re=>{var z=$u(),ue=e(z),Ae=e(ue);var xe=s(ue,2),bt=e(xe);x(()=>{Js(Ae,`width: ${a(L).total_tasks>0?a(L).completed_tasks/a(L).total_tasks*100:0}%`),n(bt,`${a(L).completed_tasks??""}/${a(L).total_tasks??""}`)}),v(re,z)};g(()=>y(pt,re=>{a(L).total_tasks>0&&re(X)}),"if",Gt,187,28)}var ie=s(pt,2),$=e(ie),N=s($,1,!0);var U=s(Ze,2);{var ee=re=>{var z=Eu(),ue=e(z,!0);x(()=>n(ue,a(L).description)),v(re,z)};g(()=>y(U,re=>{a(L).description&&j(a(f),a(L).id,!1)&&re(ee)}),"if",Gt,206,20)}var te=s(U,2);{var ve=re=>{var z=zu(),ue=e(z);{var Ae=Pe=>{var le=Su(),Y=e(le,!0);x(()=>n(Y,a(L).description)),v(Pe,le)};g(()=>y(ue,Pe=>{a(L).description&&Pe(Ae)}),"if",Gt,213,28)}var xe=s(ue,2),bt=e(xe);{var He=Pe=>{var le=Cu(),Y=Te(le),ne=s(e(Y),1,!0);var me=s(Y,2),ye=s(e(me),1,!0);x((Ie,Ee)=>{n(ne,Ie),n(ye,Ee)},[()=>l("goals.pause"),()=>l("common.cancel")]),oe("click",Y,function(){return C(a(L).id,"paused")}),oe("click",me,function(){return C(a(L).id,"cancelled")}),v(Pe,le)},he=Pe=>{var le=Au(),Y=Te(le),ne=s(e(Y),1,!0);var me=s(Y,2),ye=s(e(me),1,!0);x((Ie,Ee)=>{n(ne,Ie),n(ye,Ee)},[()=>l("goals.resume"),()=>l("common.cancel")]),oe("click",Y,function(){return C(a(L).id,"active")}),oe("click",me,function(){return C(a(L).id,"cancelled")}),v(Pe,le)};g(()=>y(bt,Pe=>{j(a(L).status,"active")?Pe(He):j(a(L).status,"paused")&&Pe(he,1)}),"if",Gt,219,32)}var Xe=s(xe,2);{var Ve=Pe=>{var le=Pu(),Y=s(e(le),1,!0);x(ne=>n(Y,ne),[()=>l("common.loading")]),v(Pe,le)},nt=Pe=>{var le=Uu(),Y=Te(le);{var ne=et=>{var ft=Ou(),ot=e(ft),Je=s(e(ot));var St=s(ot,2),$t=e(St,!0);x(kt=>{n(Je,` ${kt??""}`),n($t,a(b).goal.reflection)},[()=>l("goals.self_reflection")]),v(et,ft)};g(()=>y(Y,et=>{a(b).goal.reflection&&et(ne)}),"if",Gt,254,32)}var me=s(Y,2),ye=e(me),Ie=s(e(ye));var Ee=s(ye,2);{var Fe=et=>{var ft=ju(),ot=e(ft,!0);x(Je=>n(ot,Je),[()=>l("goals.no_tasks")]),v(et,ft)},Ye=et=>{var ft=Iu();g(()=>Wt(ft,23,()=>a(b).tasks,ot=>ot.id,(ot,Je)=>{var St=Du(),$t=e(St),kt=e($t),Ut=e(kt);var Dt=s($t,2),Ot=e(Dt),Bt=e(Ot),ur=e(Bt,!0);var or=s(Bt,2),hr=e(or,!0);var pr=s(Ot,2);{var At=qt=>{var Yt=Ru(),xr=e(Yt,!0);x(()=>n(xr,a(Je).description)),v(qt,Yt)};g(()=>y(pr,qt=>{a(Je).description&&qt(At)}),"if",Gt,292,56)}var Nt=s(pr,2);{var cr=qt=>{var Yt=Lu(),xr=e(Yt);x((Pr,Hr)=>n(xr,`${Pr??""} ${Hr??""}`),[()=>l("goals.depends_on"),()=>a(Je).depends_on.join(", ")]),v(qt,Yt)};g(()=>y(Nt,qt=>{a(Je).depends_on.length>0&&qt(cr)}),"if",Gt,295,56)}var xt=s(Nt,2);{var Pt=qt=>{var Yt=Nu(),xr=e(Yt,!0);x(()=>n(xr,a(Je).result)),v(qt,Yt)};g(()=>y(xt,qt=>{a(Je).result&&qt(Pt)}),"if",Gt,300,56)}var It=s(xt,2);{var Ft=qt=>{var Yt=Mu(),xr=e(Yt);x((Pr,Hr)=>n(xr,`${Pr??""} ${Hr??""}`),[()=>l("goals.tool"),()=>JSON.stringify(a(Je).tool_call)]),v(qt,Yt)};g(()=>y(It,qt=>{a(Je).tool_call&&qt(Ft)}),"if",Gt,305,56)}x((qt,Yt,xr)=>{at(kt,1,`inline-flex items-center justify-center w-6 h-6 rounded-full text-[11px] font-semibold ${qt??""}`),at(Ut,1,`fa-solid ${Yt??""}`),n(ur,a(Je).title),at(or,1,`text-[10px] px-1.5 py-0.5 rounded-full ${xr??""}`),n(hr,a(Je).status)},[()=>k(a(Je).status),()=>M(a(Je).status),()=>k(a(Je).status)]),v(ot,St)}),"each",Gt,278,44),v(et,ft)};g(()=>y(Ee,et=>{j(a(b).tasks.length,0)?et(Fe):et(Ye,!1)}),"if",Gt,272,36)}var Qe=s(me,2),Ke=e(Qe),Se=e(Ke),st=e(Se,!0);var lt=s(Se,2),B=e(lt,!0);var W=s(lt,2),Re=e(W,!0);var Le=s(W,2),rt=e(Le,!0);var wt=s(Le,2);{var dt=et=>{var ft=Fu(),ot=Te(ft),Je=e(ot,!0);var St=s(ot,2),$t=e(St,!0);x((kt,Ut)=>{n(Je,kt),n($t,Ut)},[()=>l("goals.completed_at"),()=>_s(a(b).goal.completed_at)]),v(et,ft)};g(()=>y(wt,et=>{a(b).goal.completed_at&&et(dt)}),"if",Gt,324,40)}var Ge=s(wt,2),Ne=e(Ge,!0);var Me=s(Ge,2),gt=e(Me,!0);x((et,ft,ot,Je,St,$t)=>{n(Ie,` ${et??""} (${a(b).tasks.length??""})`),n(st,ft),n(B,ot),n(Re,Je),n(rt,St),n(Ne,$t),Lt(Me,"title",a(b).goal.id),n(gt,a(b).goal.id)},[()=>l("goals.tasks"),()=>l("goals.created"),()=>_s(a(b).goal.created_at),()=>l("goals.updated"),()=>_s(a(b).goal.updated_at),()=>l("goals.id")]),v(Pe,le)};g(()=>y(Xe,Pe=>{a(h)?Pe(Ve):a(b)&&Pe(nt,1)}),"if",Gt,248,28)}v(re,z)};g(()=>y(te,re=>{j(a(f),a(L).id)&&re(ve)}),"if",Gt,211,20)}x((re,z)=>{at(it,1,`fa-solid fa-chevron-right text-[10px] text-text-subtle transition-transform ${j(a(f),a(L).id)?"rotate-90":""}`),n(Be,a(L).title),at(ie,1,`text-[11px] px-2 py-0.5 rounded-full font-medium ${re??""}`),at($,1,`fa-solid ${z??""} mr-1`),n(N,a(L).status)},[()=>k(a(L).status),()=>M(a(L).status)]),oe("click",Ze,function(){return E(a(L).id)}),v(D,ge)}),"each",Gt,170,12),v(be,tt)};g(()=>y(_e,be=>{a(d)?be(K):j(a(o).length,0)?be(qe,1):be(ze,!1)}),"if",Gt,163,8)}return x((be,tt,Q,D,L,ge,Ze,vt,it)=>{n(ce,` ${be??""}`),n(Oe,tt),n(De,Q),n(ke,D),n(Ue,L),n(ht,ge),n(we,Ze),n(se,vt),n(T,` ${it??""}`)},[()=>l("goals.title"),()=>l("goals.all_statuses"),()=>l("goals.active"),()=>l("goals.paused"),()=>l("goals.completed"),()=>l("goals.failed"),()=>l("goals.cancelled"),()=>l("goals.count",{count:a(o).length}),()=>l("common.refresh")]),oe("change",$e,function(){return w()}),Fi($e,function(){return a(c)},function(tt){p(c,tt)}),oe("click",V,w),v(r,Z),Er(I)}Dr(["change","click"]);di[u]="src/components/CredentialRow.svelte";var Gu=_(m('<button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors"><i class="fa-solid fa-trash-can"></i></button>'),di[u],[[91,12,[[96,16]]]]),Vu=_(m('<div class="flex items-center gap-2 mb-2 text-sm"><div></div> <div class="font-mono text-xs min-w-[200px] shrink-0 text-accent-300"> </div> <input type="password" class="flex-1 px-2 py-1 border border-border rounded-md bg-background text-text text-xs font-mono outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 placeholder:text-text-subtle"/> <div class="flex gap-1 shrink-0"><button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors"><i class="fa-solid fa-floppy-disk"></i></button> <!></div></div>'),di[u],[[67,0,[[68,4],[69,4],[75,4],[82,4,[[83,8,[[88,12]]]]]]]]);function di(r,i){Cr(new.target),$r(i,!0,di);let o=S(A(""),"inputValue");function d(){return i.credential.configured?"bg-success-500":i.credential.required?"bg-error-500":"bg-warning-500"}function c(){return i.credential.configured?l("cred.configured"):i.credential.required?l("cred.required"):l("cred.optional")}function f(){return i.credential.configured?l("cred.configured_placeholder"):i.credential.description||l("cred.enter_value")}async function b(){const de=a(o).trim();if(de)try{(await O(jt("PUT",`/api/skills/${encodeURIComponent(i.skillName)}/credentials`,{key:i.credential.name,value:de})))(),p(o,""),i.onchange()}catch($e){console.error(...tr("error","saveCredential:",$e)),alert(l("cred.save_failed")+$e.message)}}async function h(){if(confirm(l("cred.remove_confirm",{name:i.credential.name,skill:i.skillName})))try{(await O(jt("DELETE",`/api/skills/${encodeURIComponent(i.skillName)}/credentials/${encodeURIComponent(i.credential.name)}`)))(),i.onchange()}catch(de){console.error(...tr("error","deleteCredential:",de)),alert(l("cred.remove_failed")+de.message)}}function w(de){j(de.key,"Enter")&&b()}var P={...Ar()},C=Vu(),E=e(C),k=s(E,2),M=e(k),I=s(k,2),Z=s(I,2),R=e(Z),q=s(R,2);{var ce=de=>{var $e=Gu();x(We=>Lt($e,"title",We),[()=>l("common.delete")]),oe("click",$e,h),v(de,$e)};g(()=>y(q,de=>{i.credential.configured&&de(ce)}),"if",di,90,8)}return x((de,$e,We,Oe)=>{at(E,1,`w-2 h-2 rounded-full shrink-0 ${de??""}`),Lt(E,"title",$e),Lt(k,"title",i.credential.description),n(M,i.credential.label||i.credential.name),Lt(I,"placeholder",We),Lt(R,"title",Oe)},[d,c,f,()=>l("common.save")]),oe("keyup",I,w),vr(I,function(){return a(o)},function($e){p(o,$e)}),oe("click",R,b),v(r,C),Er(P)}Dr(["keyup","click"]);mt[u]="src/components/SkillCard.svelte";var Ku=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-primary-950 text-primary-400"><i class="fa-solid fa-server mr-1"></i>daemon</span>'),mt[u],[[202,16,[[203,20]]]]),Wu=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-warning-500/15 text-warning-500"><i class="fa-solid fa-bolt mr-1"></i>oneshot</span>'),mt[u],[[206,16,[[207,20]]]]),Ju=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-text-subtle/10 text-text-subtle"><i class="fa-solid fa-ban mr-1"></i>disabled</span>'),mt[u],[[212,16,[[213,20]]]]),Hu=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-success-500/15 text-success-500"><i class="fa-solid fa-circle-check mr-1"></i>running</span>'),mt[u],[[216,16,[[217,20]]]]),Yu=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-error-500/12 text-error-400"><i class="fa-solid fa-circle-stop mr-1"></i>stopped</span>'),mt[u],[[220,16,[[221,20]]]]),Qu=_(m('<span class="text-[11px] px-2 py-0.5 rounded-full font-medium bg-violet-900/30 text-violet-400 border border-violet-800/40"><i class="fa-solid fa-plug mr-1"></i>ext</span>'),mt[u],[[226,16,[[227,20]]]]),Zu=_(m('<span class="text-[11px] text-text-subtle font-mono"> </span>'),mt[u],[[232,16]]),Xu=_(m('<div class="text-sm text-text-muted px-4 pb-3 -mt-1"> </div>'),mt[u],[[238,8]]),ef=_(m('<div class="text-sm text-text-muted px-4 pt-3 pb-2"> </div>'),mt[u],[[245,16]]),tf=_(m('<i class="fa-solid fa-power-off mr-1"></i> ',1),mt[u],[[255,24]]),rf=_(m('<i class="fa-solid fa-play mr-1"></i> ',1),mt[u],[[257,24]]),af=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),mt[u],[[279,24]]),sf=_(m('<i class="fa-solid fa-trash-can mr-1"></i> ',1),mt[u],[[281,24]]),of=_(m('<div class="p-4 text-sm text-text-subtle italic text-center"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </div>'),mt[u],[[287,16,[[288,20]]]]),nf=_(m('<div class="p-4 text-sm text-error-400 italic text-center"> </div>'),mt[u],[[291,16]]),lf=_(m('<button><i class="fa-solid fa-plug mr-1"></i> </button>'),mt[u],[[314,24,[[318,28]]]]),df=_(m('<div class="flex items-center gap-2 mb-1.5 text-xs"><span class="font-mono text-accent-300 min-w-[180px]"> </span> <span class="flex-1 font-mono text-text-muted truncate"> </span> <button class="px-2 py-0.5 text-xs border border-border rounded bg-surface text-error-500 hover:bg-error-500/10 hover:border-error-500 transition-colors shrink-0"><i class="fa-solid fa-trash-can"></i></button></div>'),mt[u],[[345,36,[[346,40],[347,40],[348,40,[[353,44]]]]]]),cf=_(m('<div class="border-t border-border pt-3 mb-3"><div class="text-xs font-semibold uppercase tracking-wider text-primary-400 mb-2"><i class="fa-solid fa-gear mr-1"></i> </div> <!> <div class="flex items-center gap-2 mt-2 text-xs"><input type="text" placeholder="KEY" class="w-[180px] px-2 py-1 border border-border rounded bg-background text-text text-xs font-mono outline-none focus:border-primary-500 placeholder:text-text-subtle"/> <input type="text" placeholder="value" class="flex-1 px-2 py-1 border border-border rounded bg-background text-text text-xs font-mono outline-none focus:border-primary-500 placeholder:text-text-subtle"/> <button class="px-2.5 py-1 text-xs border border-border rounded bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors shrink-0"><i class="fa-solid fa-plus mr-1"></i> </button></div></div>'),mt[u],[[340,28,[[341,32,[[342,36]]],[359,32,[[360,36],[366,36],[372,36,[[376,40]]]]]]]]),vf=_(m('<div class="border-t border-border pt-3"><div class="text-xs font-semibold uppercase tracking-wider text-accent-500 mb-2"><i class="fa-solid fa-key mr-1"></i> </div> <!></div>'),mt[u],[[384,28,[[385,32,[[386,36]]]]]]),uf=_(m('<div class="grid grid-cols-2 gap-x-4 gap-y-1 mb-4 text-xs"><div class="text-text-muted"> </div> <div class="font-mono text-accent-300"> </div> <div class="text-text-muted">Directory</div> <div class="font-mono text-accent-300 truncate"> </div> <div class="text-text-muted">Type</div> <div> </div> <div class="text-text-muted">Enabled</div> <div> </div></div> <!> <!>',1),mt[u],[[327,24,[[328,28],[329,28],[330,28],[331,28],[332,28],[333,28],[334,28],[335,28]]]]),ff=_(m('<div class="p-4 text-sm text-text-subtle italic text-center"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </div>'),mt[u],[[408,32,[[409,36]]]]),pf=_(m('<pre class="bg-background border border-border rounded-md p-3 text-[11px] font-mono text-text-muted max-h-[400px] overflow-auto whitespace-pre-wrap break-all leading-relaxed"> </pre>'),mt[u],[[412,32]]),_f=_(m('<div class="relative"><div class="flex justify-between items-center mb-2"><span class="text-xs text-text-muted"> </span> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div> <!></div>'),mt[u],[[395,24,[[396,28,[[397,32],[400,32,[[404,36]]]]]]]]),mf=_(m('<div><div class="text-xs font-semibold uppercase tracking-wider text-violet-400 mb-2"><i class="fa-solid fa-window-maximize mr-1"></i> </div> <div class="bg-background border border-border rounded-md overflow-hidden"><iframe class="w-full border-0" style="min-height: 300px;" sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe></div></div>'),mt[u],[[420,32,[[421,36,[[422,40]]],[424,36,[[425,40]]]]]]),xf=_(m('<div class="flex items-center gap-2"><a target="_blank" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md border border-violet-800/50 bg-violet-900/20 text-violet-400 hover:bg-violet-900/40 transition-colors"><i class="fa-solid fa-arrow-up-right-from-square"></i> </a></div>'),mt[u],[[438,32,[[439,36,[[444,40]]]]]]),bf=_(m('<div class="flex items-center gap-2 text-xs font-mono"><span class="px-1.5 py-0.5 rounded bg-violet-900/30 text-violet-300 border border-violet-800/40 min-w-[48px] text-center"> </span> <span class="text-text-muted"> </span></div>'),mt[u],[[457,44,[[458,48],[461,48]]]]),gf=_(m('<div><div class="text-xs font-semibold uppercase tracking-wider text-violet-400 mb-2"><i class="fa-solid fa-route mr-1"></i> </div> <div class="space-y-1"></div></div>'),mt[u],[[451,32,[[452,36,[[453,40]]],[455,36]]]]),hf=_(m('<p class="text-sm text-text-subtle italic text-center py-4"> </p>'),mt[u],[[469,32]]),yf=_(m('<div class="space-y-4"><!> <!> <!> <!></div>'),mt[u],[[417,24]]),wf=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),mt[u],[[487,40]]),kf=_(m('<i class="fa-solid fa-floppy-disk mr-1"></i> ',1),mt[u],[[489,40]]),Tf=_(m('<div class="text-xs text-error-400 mb-2 p-2 bg-error-500/10 border border-error-500/30 rounded"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div>'),mt[u],[[494,32,[[495,36]]]]),$f=_(m('<div class="text-xs text-success-500 mb-2 p-2 bg-success-500/10 border border-success-500/30 rounded"><i class="fa-solid fa-check mr-1"></i> </div>'),mt[u],[[499,32,[[500,36]]]]),Ef=_(m('<div><div class="flex justify-between items-center mb-2"><span class="text-xs text-text-muted"> </span> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface text-success-500 hover:bg-success-500/10 hover:border-success-500 transition-colors disabled:opacity-50"><!></button></div> <!> <!> <textarea spellcheck="false" class="w-full h-[320px] bg-background border border-border rounded-md p-3 text-[12px] font-mono text-text outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 resize-y leading-relaxed"></textarea></div>'),mt[u],[[476,24,[[477,28,[[478,32],[481,32]]],[503,28]]]]),Sf=_(m('<div class="flex border-b border-border"><button><i class="fa-solid fa-sliders mr-1"></i> </button> <button><i class="fa-solid fa-terminal mr-1"></i> </button> <button><i class="fa-solid fa-file-code mr-1"></i> </button> <!></div> <div class="p-4"><!></div>',1),mt[u],[[294,16,[[295,20,[[299,24]]],[301,20,[[305,24]]],[307,20,[[311,24]]]]],[324,16]]),Cf=_(m('<div class="border-t border-border"><!> <div class="flex items-center gap-2 px-4 py-2 border-b border-border"><button><!></button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-rotate-right mr-1"></i> </button> <button class="px-3 py-1.5 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i>Refresh</button> <div class="flex-1"></div> <button class="px-3 py-1.5 text-xs border border-error-500/40 rounded-md bg-surface text-error-400 hover:bg-error-500/10 hover:border-error-500 transition-colors disabled:opacity-50"><!></button></div> <!></div>'),mt[u],[[243,8,[[249,12,[[250,16],[260,16,[[264,20]]],[266,16,[[270,20]]],[272,16],[273,16]]]]]]),Af=_(m('<div class="border border-border rounded-md mb-3 bg-surface-muted overflow-hidden"><button class="w-full p-4 flex justify-between items-center hover:bg-surface-elevated/40 transition-colors cursor-pointer text-left"><div class="flex items-center gap-2"><i></i> <span class="text-[15px] font-semibold"> </span></div> <div class="flex items-center gap-2"><!> <!> <!> <!></div></button> <!> <!></div>'),mt[u],[[190,0,[[192,4,[[196,8,[[197,12],[198,12]]],[200,8]]]]]]);function mt(r,i){Cr(new.target),$r(i,!0,mt);let o=_c(i,"extension",3,null),d=S(A(!1),"expanded"),c=S(A(null),"detail"),f=S(A(!1),"detailLoading"),b=S(A(""),"detailError"),h=S(A("params"),"activeTab"),w=S(A(""),"logContent"),P=S(A(!1),"logLoading"),C=S(A(""),"manifestEdit"),E=S(A(!1),"manifestSaving"),k=S(A(""),"manifestError"),M=S(A(""),"manifestSuccess"),I=S(A(""),"newEnvKey"),Z=S(A(""),"newEnvValue"),R=S(A(!1),"deleting");async function q(){p(d,!a(d)),a(d)&&!a(c)&&(await O(ce()))()}async function ce(){p(f,!0),p(b,"");try{p(c,(await O(jt("GET",`/api/skills/${encodeURIComponent(i.skill.name)}/detail`)))(),!0),p(C,a(c).manifest_raw,!0)}catch(J){p(b,J.message,!0)}finally{p(f,!1)}}async function de(){p(P,!0);try{const J=(await O(jt("GET",`/api/skills/${encodeURIComponent(i.skill.name)}/log?lines=300`)))();p(w,J.log,!0)}catch(J){p(w,`Error loading log: ${J.message}`)}finally{p(P,!1)}}async function $e(){try{(await O(jt("POST",`/api/skills/${encodeURIComponent(i.skill.name)}/restart`)))(),setTimeout(i.onrefresh,1e3)}catch(J){console.error(...tr("error","restartSkill:",J)),alert(l("skills.restart_failed")+J.message)}}async function We(){const J=!i.skill.enabled;try{(await O(jt("PUT",`/api/skills/${encodeURIComponent(i.skill.name)}/enabled`,{enabled:J})))(),setTimeout(i.onrefresh,500)}catch(Be){console.error(...tr("error","toggleEnabled:",Be)),alert(l("skills.toggle_failed")+Be.message)}}async function Oe(){p(E,!0),p(k,""),p(M,"");try{(await O(jt("PUT",`/api/skills/${encodeURIComponent(i.skill.name)}/manifest`,{toml:a(C)})))(),p(M,l("skills.saved_restart"),!0),setTimeout(()=>{p(M,"")},5e3),(await O(ce()))()}catch(J){p(k,J.message,!0)}finally{p(E,!1)}}async function je(){const J=a(I).trim(),Be=a(Z).trim();if(J)try{(await O(jt("PUT",`/api/skills/${encodeURIComponent(i.skill.name)}/env`,{key:J,value:Be})))(),p(I,""),p(Z,""),(await O(ce()))()}catch(_t){alert(l("skills.env_failed")+_t.message)}}async function De(J){if(confirm(l("skills.remove_env_confirm",{key:J,skill:i.skill.name})))try{(await O(jt("DELETE",`/api/skills/${encodeURIComponent(i.skill.name)}/env/${encodeURIComponent(J)}`)))(),(await O(ce()))()}catch(Be){alert(l("skills.delete_env_failed")+Be.message)}}async function ct(){if(confirm(l("skills.delete_confirm",{name:i.skill.name}))){p(R,!0);try{(await O(jt("DELETE",`/api/skills/${encodeURIComponent(i.skill.name)}`)))(),i.onrefresh()}catch(J){console.error(...tr("error","deleteSkill:",J)),alert(l("skills.delete_failed")+J.message)}finally{p(R,!1)}}}function ke(J){p(h,J,!0),j(J,"logs")&&de()}let ae=S(Br(()=>j(o(),null,!1)&&(Xo(o().ui.panel,null,!1)||Xo(o().ui.page,null,!1)||o().route_count>0)),"hasExtension");var Ue={...Ar()},ut=Af(),ht=e(ut),G=e(ht),we=e(G),pe=s(we,2),se=e(pe),V=s(G,2),T=e(V);{var F=J=>{var Be=Ku();v(J,Be)},_e=J=>{var Be=Wu();v(J,Be)};g(()=>y(T,J=>{j(i.skill.skill_type,"daemon")?J(F):J(_e,!1)}),"if",mt,201,12)}var K=s(T,2);{var qe=J=>{var Be=Ju();v(J,Be)},ze=J=>{var Be=Hu();v(J,Be)},be=J=>{var Be=Yu();v(J,Be)};g(()=>y(K,J=>{i.skill.enabled?i.skill.running?J(ze,1):J(be,!1):J(qe)}),"if",mt,211,12)}var tt=s(K,2);{var Q=J=>{var Be=Qu();v(J,Be)};g(()=>y(tt,J=>{a(ae)&&J(Q)}),"if",mt,225,12)}var D=s(tt,2);{var L=J=>{var Be=Zu(),_t=e(Be);x(()=>n(_t,`PID ${i.skill.pid??""}`)),v(J,Be)};g(()=>y(D,J=>{i.skill.pid&&J(L)}),"if",mt,231,12)}var ge=s(ht,2);{var Ze=J=>{var Be=Xu(),_t=e(Be);x(()=>n(_t,i.skill.description)),v(J,Be)};g(()=>y(ge,J=>{i.skill.description&&!a(d)&&J(Ze)}),"if",mt,237,4)}var vt=s(ge,2);{var it=J=>{var Be=Cf(),_t=e(Be);{var Rt=He=>{var he=ef(),Xe=e(he);x(()=>n(Xe,i.skill.description)),v(He,he)};g(()=>y(_t,He=>{i.skill.description&&He(Rt)}),"if",mt,244,12)}var Et=s(_t,2),pt=e(Et),X=e(pt);{var ie=He=>{var he=tf(),Xe=s(Te(he),1,!0);x(Ve=>n(Xe,Ve),[()=>l("skills.disable")]),v(He,he)},$=He=>{var he=rf(),Xe=s(Te(he),1,!0);x(Ve=>n(Xe,Ve),[()=>l("skills.enable")]),v(He,he)};g(()=>y(X,He=>{i.skill.enabled?He(ie):He($,!1)}),"if",mt,254,20)}var N=s(pt,2),U=s(e(N),1,!0),ee=s(N,2),te=s(ee,4),ve=e(te);{var re=He=>{var he=af(),Xe=s(Te(he),1,!0);x(Ve=>n(Xe,Ve),[()=>l("skills.deleting")]),v(He,he)},z=He=>{var he=sf(),Xe=s(Te(he),1,!0);x(Ve=>n(Xe,Ve),[()=>l("skills.delete")]),v(He,he)};g(()=>y(ve,He=>{a(R)?He(re):He(z,!1)}),"if",mt,278,20)}var ue=s(Et,2);{var Ae=He=>{var he=of(),Xe=s(e(he),1,!0);x(Ve=>n(Xe,Ve),[()=>l("skills.loading_detail")]),v(He,he)},xe=He=>{var he=nf(),Xe=e(he);x(()=>n(Xe,a(b))),v(He,he)},bt=He=>{var he=Sf(),Xe=Te(he),Ve=e(Xe),nt=s(e(Ve),1,!0),Pe=s(Ve,2),le=s(e(Pe),1,!0),Y=s(Pe,2),ne=s(e(Y),1,!0),me=s(Y,2);{var ye=Se=>{var st=lf(),lt=s(e(st),1,!0);x(B=>{at(st,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${j(a(h),"plugin")?"text-violet-400 border-b-2 border-violet-400":"text-text-muted hover:text-text"}`),n(lt,B)},[()=>l("skills.extension")]),oe("click",st,function(){return ke("plugin")}),v(Se,st)};g(()=>y(me,Se=>{a(ae)&&Se(ye)}),"if",mt,313,20)}var Ie=s(Xe,2),Ee=e(Ie);{var Fe=Se=>{var st=uf(),lt=Te(st),B=e(lt),W=e(B),Re=s(B,2),Le=e(Re),rt=s(Re,4),wt=e(rt),dt=s(rt,4),Ge=e(dt),Ne=s(dt,4),Me=e(Ne),gt=s(lt,2);{var et=St=>{var $t=cf(),kt=e($t),Ut=s(e(kt)),Dt=s(kt,2);g(()=>Wt(Dt,17,()=>Object.entries(a(c).env),([pr,At])=>pr,(pr,At)=>{var Nt=Br(()=>gn(a(At),2));let cr=()=>a(Nt)[0];cr();let xt=()=>a(Nt)[1];xt();var Pt=df(),It=e(Pt),Ft=e(It,!0);var qt=s(It,2),Yt=e(qt,!0);var xr=s(qt,2);x(Pr=>{n(Ft,cr()),Lt(qt,"title",xt()),n(Yt,xt()),Lt(xr,"title",Pr)},[()=>l("common.delete")]),oe("click",xr,function(){return De(cr())}),v(pr,Pt)}),"each",mt,344,32);var Ot=s(Dt,2),Bt=e(Ot),ur=s(Bt,2),or=s(ur,2),hr=s(e(or),1,!0);x((pr,At)=>{n(Ut,` ${pr??""}`),n(hr,At)},[()=>l("skills.environment_vars"),()=>l("skills.add")]),vr(Bt,function(){return a(I)},function(At){p(I,At)}),vr(ur,function(){return a(Z)},function(At){p(Z,At)}),oe("click",or,je),v(St,$t)},ft=Br(()=>Object.keys(a(c).env).length>0||!0);g(()=>y(gt,St=>{a(ft)&&St(et)}),"if",mt,339,24)}var ot=s(gt,2);{var Je=St=>{var $t=vf(),kt=e($t),Ut=s(e(kt)),Dt=s(kt,2);g(()=>Wt(Dt,17,()=>i.skill.credentials,Ot=>Ot.name,(Ot,Bt)=>{g(()=>di(Ot,{get credential(){return a(Bt)},get skillName(){return i.skill.name},get onchange(){return i.onrefresh}}),"component",mt,389,36,{componentTag:"CredentialRow"})}),"each",mt,388,32),x(Ot=>n(Ut,` ${Ot??""}`),[()=>l("skills.credentials")]),v(St,$t)};g(()=>y(ot,St=>{var $t;($t=i.skill.credentials)!=null&&$t.length&&St(Je)}),"if",mt,383,24)}x(St=>{n(W,St),n(Le,a(c).entrypoint),Lt(rt,"title",a(c).dir),n(wt,a(c).dir),n(Ge,a(c).skill_type),n(Me,a(c).enabled?"Yes":"No")},[()=>l("skills.entrypoint")]),v(Se,st)},Ye=Se=>{var st=_f(),lt=e(st),B=e(lt),W=e(B),Re=s(B,2),Le=s(e(Re),1,!0),rt=s(lt,2);{var wt=Ge=>{var Ne=ff(),Me=s(e(Ne),1,!0);x(gt=>n(Me,gt),[()=>l("common.loading")]),v(Ge,Ne)},dt=Ge=>{var Ne=pf(),Me=e(Ne);x(gt=>n(Me,gt),[()=>a(w)||l("skills.no_log")]),v(Ge,Ne)};g(()=>y(rt,Ge=>{a(P)?Ge(wt):Ge(dt,!1)}),"if",mt,407,28)}x((Ge,Ne)=>{n(W,Ge),n(Le,Ne)},[()=>l("skills.last_lines"),()=>l("common.refresh")]),oe("click",Re,de),v(Se,st)},Qe=Se=>{var st=yf(),lt=e(st);{var B=Ge=>{var Ne=mf(),Me=e(Ne),gt=s(e(Me)),et=s(Me,2),ft=e(et);x((ot,Je)=>{n(gt,` ${ot??""}`),Lt(ft,"src",`/skills/${Je??""}/ui/${o().ui.panel??""}`),Lt(ft,"title",`${i.skill.name??""} extension panel`)},[()=>l("skills.skill_panel"),()=>encodeURIComponent(i.skill.name)]),v(Ge,Ne)};g(()=>y(lt,Ge=>{o().ui.panel&&Ge(B)}),"if",mt,419,28)}var W=s(lt,2);{var Re=Ge=>{var Ne=xf(),Me=e(Ne),gt=s(e(Me));x((et,ft)=>{Lt(Me,"href",`/skills/${et??""}/page`),n(gt,` ${ft??""}`)},[()=>encodeURIComponent(i.skill.name),()=>l("skills.open_full_page")]),v(Ge,Ne)};g(()=>y(W,Ge=>{o().ui.page&&Ge(Re)}),"if",mt,437,28)}var Le=s(W,2);{var rt=Ge=>{var Ne=gf(),Me=e(Ne),gt=s(e(Me)),et=s(Me,2);g(()=>Wt(et,21,()=>o().routes,fr,(ft,ot)=>{var Je=bf(),St=e(Je),$t=e(St,!0);var kt=s(St,2),Ut=e(kt);x((Dt,Ot)=>{n($t,Dt),n(Ut,`/api/skills/${i.skill.name??""}/ext${Ot??""}`)},[()=>a(ot).split(" ")[0],()=>a(ot).split(" ").slice(1).join(" ")]),v(ft,Je)}),"each",mt,456,40),x(ft=>n(gt,` ${ft??""} (${o().route_count??""})`),[()=>l("skills.registered_routes")]),v(Ge,Ne)};g(()=>y(Le,Ge=>{o().route_count>0&&Ge(rt)}),"if",mt,450,28)}var wt=s(Le,2);{var dt=Ge=>{var Ne=hf(),Me=e(Ne);x(gt=>n(Me,gt),[()=>l("skills.no_extension_ui")]),v(Ge,Ne)};g(()=>y(wt,Ge=>{!o().ui.panel&&j(o().route_count,0)&&Ge(dt)}),"if",mt,468,28)}v(Se,st)},Ke=Se=>{var st=Ef(),lt=e(st),B=e(lt),W=e(B),Re=s(B,2),Le=e(Re);{var rt=et=>{var ft=wf(),ot=s(Te(ft),1,!0);x(Je=>n(ot,Je),[()=>l("common.saving")]),v(et,ft)},wt=et=>{var ft=kf(),ot=s(Te(ft),1,!0);x(Je=>n(ot,Je),[()=>l("common.save")]),v(et,ft)};g(()=>y(Le,et=>{a(E)?et(rt):et(wt,!1)}),"if",mt,486,36)}var dt=s(lt,2);{var Ge=et=>{var ft=Tf(),ot=s(e(ft),1,!0);x(()=>n(ot,a(k))),v(et,ft)};g(()=>y(dt,et=>{a(k)&&et(Ge)}),"if",mt,493,28)}var Ne=s(dt,2);{var Me=et=>{var ft=$f(),ot=s(e(ft),1,!0);x(()=>n(ot,a(M))),v(et,ft)};g(()=>y(Ne,et=>{a(M)&&et(Me)}),"if",mt,498,28)}var gt=s(Ne,2);x(et=>{n(W,et),Re.disabled=a(E)},[()=>l("skills.edit_manifest")]),oe("click",Re,Oe),vr(gt,function(){return a(C)},function(ft){p(C,ft)}),v(Se,st)};g(()=>y(Ee,Se=>{j(a(h),"params")?Se(Fe):j(a(h),"logs")?Se(Ye,1):j(a(h),"plugin")&&o()?Se(Qe,2):j(a(h),"manifest")&&Se(Ke,3)}),"if",mt,325,20)}x((Se,st,lt)=>{at(Ve,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${j(a(h),"params")?"text-primary-400 border-b-2 border-primary-400":"text-text-muted hover:text-text"}`),n(nt,Se),at(Pe,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${j(a(h),"logs")?"text-primary-400 border-b-2 border-primary-400":"text-text-muted hover:text-text"}`),n(le,st),at(Y,1,`px-4 py-2 text-xs font-semibold uppercase tracking-wider transition-colors ${j(a(h),"manifest")?"text-primary-400 border-b-2 border-primary-400":"text-text-muted hover:text-text"}`),n(ne,lt)},[()=>l("skills.parameters"),()=>l("skills.logs"),()=>l("skills.manifest")]),oe("click",Ve,function(){return ke("params")}),oe("click",Pe,function(){return ke("logs")}),oe("click",Y,function(){return ke("manifest")}),v(He,he)};g(()=>y(ue,He=>{a(f)?He(Ae):a(b)?He(xe,1):a(c)&&He(bt,2)}),"if",mt,286,12)}x(He=>{at(pt,1,`px-3 py-1.5 text-xs border border-border rounded-md bg-surface transition-colors ${i.skill.enabled?"hover:bg-error-500/10 hover:border-error-500 text-error-400":"hover:bg-success-500/10 hover:border-success-500 text-success-500"}`),n(U,He),te.disabled=a(R)},[()=>l("skills.restart")]),oe("click",pt,We),oe("click",N,$e),oe("click",ee,ce),oe("click",te,ct),v(J,Be)};g(()=>y(vt,J=>{a(d)&&J(it)}),"if",mt,242,4)}return x(()=>{at(we,1,`fa-solid fa-chevron-right text-[10px] text-text-subtle transition-transform ${a(d)?"rotate-90":""}`),n(se,i.skill.name)}),oe("click",ht,q),v(r,ut),Er(Ue)}Dr(["click"]);Ur[u]="src/components/SkillsTab.svelte";var Pf=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Ur[u],[[168,28]]),Of=_(m('<i class="fa-solid fa-download mr-1"></i> ',1),Ur[u],[[170,28]]),jf=_(m('<div class="mt-2 text-xs text-error-400 p-2 bg-error-500/10 border border-error-500/30 rounded"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </div>'),Ur[u],[[177,16,[[178,20]]]]),Rf=_(m('<div class="mt-2 text-xs text-success-500 p-2 bg-success-500/10 border border-success-500/30 rounded"><i class="fa-solid fa-check mr-1"></i> </div>'),Ur[u],[[182,16,[[183,20]]]]),Lf=_(m('<div class="border-b border-border bg-surface-muted p-4"><div class="text-xs font-semibold uppercase tracking-wider text-primary-400 mb-3"><i class="fa-solid fa-file-import mr-1"></i> </div> <div class="flex items-center gap-1 mb-3"><button><i class="fa-brands fa-git-alt mr-1"></i> </button> <button><i class="fa-solid fa-globe mr-1"></i> </button> <button><i class="fa-solid fa-folder mr-1"></i> </button></div> <div class="flex flex-col gap-2"><input type="text" class="w-full px-3 py-2 text-sm border border-border rounded-md bg-background text-text font-mono outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 placeholder:text-text-subtle"/> <div class="flex items-center gap-2"><input type="text" class="flex-1 px-3 py-2 text-sm border border-border rounded-md bg-background text-text outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 placeholder:text-text-subtle"/> <button class="px-4 py-2 text-xs font-semibold border border-primary-500/50 rounded-md bg-primary-500/15 text-primary-400 hover:bg-primary-500/25 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"><!></button></div></div> <!> <!> <p class="mt-2 text-[11px] text-text-subtle"> </p></div>'),Ur[u],[[120,8,[[121,12,[[122,16]]],[126,12,[[127,16,[[131,20]]],[133,16,[[137,20]]],[139,16,[[143,20]]]]],[148,12,[[149,16],[155,16,[[156,20],[162,20]]]]],[187,12]]]]),Nf=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Ur[u],[[195,12]]),Mf=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Ur[u],[[197,12]]),Df=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-puzzle-piece mr-1.5"></i> </h2> <div class="flex items-center gap-2 pr-3"><span class="text-xs text-text-muted"> </span> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-primary-500/10 hover:border-primary-500 text-primary-400 transition-colors"><i class="fa-solid fa-file-import mr-1"></i> Import</button> <button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div></div> <!> <div class="p-3"><!></div></section>'),Ur[u],[[94,0,[[95,4,[[96,8,[[97,12]]],[99,8,[[100,12],[103,12,[[107,16]]],[109,12,[[113,16]]]]]]],[193,4]]]]);function Ur(r,i){Cr(new.target),$r(i,!0,Ur);let o=S(A(rr([])),"skills"),d=S(A(!1),"error"),c=S(A(rr([])),"extensions"),f=S(A(!1),"showImport"),b=S(A("git"),"importSource"),h=S(A(""),"importLocation"),w=S(A(""),"importName"),P=S(A(!1),"importing"),C=S(A(""),"importError"),E=S(A(""),"importSuccess");async function k(){p(d,!1);try{p(o,(await O(jt("GET","/api/skills")))(),!0)}catch(se){p(d,!0),console.error(...tr("error","loadSkills:",se))}}async function M(){try{p(c,(await O(jt("GET","/api/skills/extensions")))(),!0)}catch(se){console.error(...tr("error","loadExtensions:",se))}}function I(se){return a(c).find(V=>j(V.skill_name,se))??null}async function Z(){const se=a(h).trim();if(se){p(P,!0),p(C,""),p(E,"");try{const V={source:a(b),location:se},T=a(w).trim();T&&(V.name=T);const F=(await O(jt("POST","/api/skills/import",V)))();F.ok?(p(E,F.message??"Skill imported successfully",!0),p(h,""),p(w,""),setTimeout(()=>{p(E,""),p(f,!1)},3e3),k(),M()):p(C,F.message??"Import failed",!0)}catch(V){p(C,V.message,!0)}finally{p(P,!1)}}}Gr(()=>{j(Vt.currentTab,"skills")&&(Vt.refreshCounter,k(),M())});var R={...Ar()},q=Df(),ce=e(q),de=e(ce),$e=s(e(de)),We=s(de,2),Oe=e(We),je=e(Oe),De=s(Oe,2),ct=s(De,2),ke=s(e(ct)),ae=s(ce,2);{var Ue=se=>{var V=Lf(),T=e(V),F=s(e(T)),_e=s(T,2),K=e(_e),qe=s(e(K)),ze=s(K,2),be=s(e(ze)),tt=s(ze,2),Q=s(e(tt)),D=s(_e,2),L=e(D),ge=s(L,2),Ze=e(ge),vt=s(Ze,2),it=e(vt);{var J=$=>{var N=Pf(),U=s(Te(N));x(ee=>n(U,` ${ee??""}`),[()=>l("skills.importing")]),v($,N)},Be=$=>{var N=Of(),U=s(Te(N));x(ee=>n(U,` ${ee??""}`),[()=>l("skills.import_skill")]),v($,N)};g(()=>y(it,$=>{a(P)?$(J):$(Be,!1)}),"if",Ur,167,24)}var _t=s(D,2);{var Rt=$=>{var N=jf(),U=s(e(N),1,!0);x(()=>n(U,a(C))),v($,N)};g(()=>y(_t,$=>{a(C)&&$(Rt)}),"if",Ur,176,12)}var Et=s(_t,2);{var pt=$=>{var N=Rf(),U=s(e(N),1,!0);x(()=>n(U,a(E))),v($,N)};g(()=>y(Et,$=>{a(E)&&$(pt)}),"if",Ur,181,12)}var X=s(Et,2),ie=e(X);x(($,N,U,ee,te,ve,re,z)=>{n(F,` ${$??""}`),at(K,1,`px-3 py-1.5 text-xs rounded-md transition-colors ${j(a(b),"git")?"bg-primary-500/20 text-primary-400 border border-primary-500/50":"border border-border text-text-muted hover:bg-surface-elevated"}`),n(qe,` ${N??""}`),at(ze,1,`px-3 py-1.5 text-xs rounded-md transition-colors ${j(a(b),"url")?"bg-primary-500/20 text-primary-400 border border-primary-500/50":"border border-border text-text-muted hover:bg-surface-elevated"}`),n(be,` ${U??""}`),at(tt,1,`px-3 py-1.5 text-xs rounded-md transition-colors ${j(a(b),"path")?"bg-primary-500/20 text-primary-400 border border-primary-500/50":"border border-border text-text-muted hover:bg-surface-elevated"}`),n(Q,` ${ee??""}`),Lt(L,"placeholder",te),Lt(Ze,"placeholder",ve),vt.disabled=re,n(ie,z)},[()=>l("skills.import_skill"),()=>l("skills.git_repo"),()=>l("skills.archive_url"),()=>l("skills.local_path"),()=>j(a(b),"git")?l("skills.git_placeholder"):j(a(b),"url")?l("skills.url_placeholder"):l("skills.path_placeholder"),()=>l("skills.name_placeholder"),()=>a(P)||!a(h).trim(),()=>l("skills.import_desc")]),oe("click",K,function(){return p(b,"git")}),oe("click",ze,function(){return p(b,"url")}),oe("click",tt,function(){return p(b,"path")}),vr(L,function(){return a(h)},function(N){p(h,N)}),vr(Ze,function(){return a(w)},function(N){p(w,N)}),oe("click",vt,Z),v(se,V)};g(()=>y(ae,se=>{a(f)&&se(Ue)}),"if",Ur,119,4)}var ut=s(ae,2),ht=e(ut);{var G=se=>{var V=Nf(),T=e(V);x(F=>n(T,F),[()=>l("skills.error_loading")]),v(se,V)},we=se=>{var V=Mf(),T=e(V);x(F=>n(T,F),[()=>l("skills.no_skills_import")]),v(se,V)},pe=se=>{var V=Sr(),T=Te(V);g(()=>Wt(T,17,()=>a(o),F=>F.name,(F,_e)=>{{let K=Br(()=>I(a(_e).name));g(()=>mt(F,{get skill(){return a(_e)},onrefresh:k,get extension(){return a(K)}}),"component",Ur,202,16,{componentTag:"SkillCard"})}}),"each",Ur,201,12),v(se,V)};g(()=>y(ht,se=>{a(d)?se(G):j(a(o).length,0)?se(we,1):se(pe,!1)}),"if",Ur,194,8)}return x((se,V,T)=>{n($e,` ${se??""}`),n(je,V),n(ke,` ${T??""}`)},[()=>l("skills.title"),()=>l("skills.count",{count:a(o).length}),()=>l("common.refresh")]),oe("click",De,function(){p(f,!a(f)),p(C,""),p(E,"")}),oe("click",ct,k),v(r,q),Er(R)}Dr(["click"]);Sa[u]="src/components/KnowledgeTab.svelte";var If=_(m('<div class="p-3 border border-border rounded-md mb-2 bg-surface-muted"><div class="text-xs uppercase tracking-wider text-accent-500 font-semibold mb-1"><i class="fa-solid fa-arrow-right-arrow-left mr-1"></i> </div> <div class="text-sm"> <span class="text-text-muted text-[11px]"> </span></div></div>'),Sa[u],[[106,16,[[107,20,[[108,24]]],[110,20,[[112,24]]]]]]),Ff=_(m('<button class="px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors mb-3"><i class="fa-solid fa-arrow-left mr-1"></i> </button> <!>',1),Sa[u],[[99,12,[[103,16]]]]),Uf=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),Sa[u],[[117,12]]),zf=_(m('<button class="w-full text-left p-3 border border-border rounded-md mb-2 bg-surface-muted cursor-pointer hover:border-primary-500/50 transition-colors"><div class="text-xs uppercase tracking-wider text-primary-500 font-semibold mb-1"><i class="fa-solid fa-tag mr-1"></i> </div> <div class="text-sm font-semibold mb-1"> </div> <div class="text-xs text-text-muted"> </div> <div class="text-[11px] text-text-subtle mt-1"> </div></button>'),Sa[u],[[120,16,[[124,20,[[125,24]]],[127,20],[128,20],[129,20]]]]),Bf=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-diagram-project mr-1.5"></i> </h2> <div class="flex items-center gap-2 pr-3"><span class="text-xs text-text-muted"><i class="fa-solid fa-circle-nodes mr-1"></i> </span></div></div> <div class="px-4 py-2 border-b border-border"><input type="text" class="w-full px-2.5 py-1.5 border border-border rounded-md bg-background text-text text-sm outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-900 font-sans"/></div> <div class="p-3 max-h-[600px] overflow-y-auto custom-scroll"><!></div></section>'),Sa[u],[[77,0,[[78,4,[[79,8,[[80,12]]],[82,8,[[83,12,[[84,16]]]]]]],[88,4,[[89,8]]],[97,4]]]]);function Sa(r,i){Cr(new.target),$r(i,!0,Sa);let o=S(A(rr({nodes:0,edges:0})),"stats"),d=S(A(rr([])),"nodes"),c=S(A(rr([])),"neighbors"),f=S(A(!1),"viewingNeighbors"),b=S(A(""),"searchQuery");async function h(){try{const[ae,Ue]=(await O(Promise.all([jt("GET","/api/knowledge/stats"),jt("GET","/api/knowledge/nodes?limit=100")])))();p(o,ae,!0),p(d,Ue,!0),p(f,!1)}catch(ae){console.error(...tr("error","loadKnowledge:",ae))}}async function w(){if(!a(b)){h();return}try{p(d,(await O(jt("GET",`/api/knowledge/search?q=${encodeURIComponent(a(b))}`)))(),!0),p(f,!1)}catch(ae){console.error(...tr("error","searchKnowledge:",ae))}}async function P(ae){try{const Ue=(await O(jt("GET",`/api/knowledge/nodes/${ae}/neighbors`)))();if(!Ue.length){alert(l("knowledge.no_neighbors"));return}p(c,Ue,!0),p(f,!0)}catch(Ue){console.error(...tr("error","loadNodeNeighbors:",Ue))}}function C(){p(f,!1)}function E(ae){j(ae.key,"Enter")&&w()}Gr(()=>{j(Vt.currentTab,"knowledge")&&(Vt.refreshCounter,h())});var k={...Ar()},M=Bf(),I=e(M),Z=e(I),R=s(e(Z)),q=s(Z,2),ce=e(q),de=s(e(ce),1,!0),$e=s(I,2),We=e($e),Oe=s($e,2),je=e(Oe);{var De=ae=>{var Ue=Ff(),ut=Te(Ue),ht=s(e(ut)),G=s(ut,2);g(()=>Wt(G,17,()=>a(c),fr,(we,pe)=>{var se=If(),V=e(se),T=s(e(V),1,!0);var F=s(V,2),_e=e(F),K=s(_e),qe=e(K);x(()=>{n(T,a(pe).edge.relation),n(_e,`${a(pe).node.label??""} `),n(qe,`(${a(pe).node.node_type??""})`)}),v(we,se)}),"each",Sa,105,12),x(we=>n(ht,` ${we??""}`),[()=>l("knowledge.back")]),oe("click",ut,C),v(ae,Ue)},ct=ae=>{var Ue=Uf(),ut=e(Ue);x(ht=>n(ut,ht),[()=>l("knowledge.no_nodes")]),v(ae,Ue)},ke=ae=>{var Ue=Sr(),ut=Te(Ue);g(()=>Wt(ut,17,()=>a(d),ht=>ht.id,(ht,G)=>{var we=zf(),pe=e(we),se=s(e(pe),1,!0);var V=s(pe,2),T=e(V,!0);var F=s(V,2),_e=e(F,!0);var K=s(F,2),qe=e(K);x((ze,be,tt,Q)=>{n(se,a(G).node_type??"node"),n(T,a(G).label),n(_e,ze),n(qe,`${be??""} ${tt??""} · ${Q??""}`)},[()=>a(G).content.slice(0,200),()=>l("knowledge.confidence"),()=>(a(G).confidence??1).toFixed(2),()=>_s(a(G).updated_at)]),oe("click",we,function(){return P(a(G).id)}),v(ht,we)}),"each",Sa,119,12),v(ae,Ue)};g(()=>y(je,ae=>{a(f)?ae(De):j(a(d).length,0)?ae(ct,1):ae(ke,!1)}),"if",Sa,98,8)}return x((ae,Ue,ut)=>{n(R,` ${ae??""}`),n(de,Ue),Lt(We,"placeholder",ut)},[()=>l("knowledge.title"),()=>l("knowledge.summary",{nodes:a(o).nodes,edges:a(o).edges}),()=>l("knowledge.search_placeholder")]),oe("keyup",We,E),vr(We,function(){return a(b)},function(Ue){p(b,Ue)}),v(r,M),Er(k)}Dr(["keyup","click"]);ms[u]="src/components/ToolsTab.svelte";var qf=_(m('<p class="text-text-subtle text-sm italic text-center py-4"> </p>'),ms[u],[[31,12]]),Gf=_(m('<div class="p-3 border border-border rounded-md mb-2 bg-surface-muted"><div class="text-xs uppercase tracking-wider text-primary-500 font-semibold mb-1"><i class="fa-solid fa-wrench mr-1"></i> </div> <div class="text-sm text-text-muted"> </div></div>'),ms[u],[[34,16,[[35,20,[[36,24]]],[38,20]]]]),Vf=_(m('<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted border-b border-border"><i class="fa-solid fa-screwdriver-wrench mr-1.5"></i> </h2> <div class="p-3 max-h-[600px] overflow-y-auto custom-scroll"><!></div></section>'),ms[u],[[25,0,[[26,4,[[27,8]]],[29,4]]]]);function ms(r,i){Cr(new.target),$r(i,!0,ms);let o=S(A(rr([])),"tools");async function d(){try{p(o,(await O(jt("GET","/api/tools")))(),!0)}catch(k){console.error(...tr("error","loadTools:",k))}}Gr(()=>{j(Vt.currentTab,"tools")&&(Vt.refreshCounter,d())});var c={...Ar()},f=Vf(),b=e(f),h=s(e(b)),w=s(b,2),P=e(w);{var C=k=>{var M=qf(),I=e(M);x(Z=>n(I,Z),[()=>l("tools.no_tools")]),v(k,M)},E=k=>{var M=Sr(),I=Te(M);g(()=>Wt(I,17,()=>a(o),Z=>Z.name,(Z,R,q,ce)=>{var de=Gf(),$e=e(de),We=s(e($e),1,!0);var Oe=s($e,2),je=e(Oe,!0);x(()=>{n(We,a(R).name),n(je,a(R).description)}),v(Z,de)}),"each",ms,33,12),v(k,M)};g(()=>y(P,k=>{j(a(o).length,0)?k(C):k(E,!1)}),"if",ms,30,8)}return x(k=>n(h,` ${k??""}`),[()=>l("tools.title")]),v(r,f),Er(c)}kr[u]="src/components/TrashTab.svelte";var Kf=_(m('<button class="text-xs px-3 py-1.5 rounded bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-400 hover:text-red-300 transition-colors"><i class="fa-solid fa-trash mr-1"></i> </button>'),kr[u],[[164,24,[[168,28]]]]),Wf=_(m('<div class="flex items-center gap-1.5"><span class="text-xs text-red-400"> </span> <button class="text-xs px-2 py-1 rounded bg-red-600 hover:bg-red-700 text-white transition-colors">Yes</button> <button class="text-xs px-2 py-1 rounded bg-surface-muted hover:bg-surface border border-border text-text-muted transition-colors">No</button></div>'),kr[u],[[171,24,[[172,28],[173,28],[177,28]]]]),Jf=_(m('<div class="bg-red-500/10 border border-red-500/30 text-red-400 text-sm rounded-lg px-4 py-2"><i class="fa-solid fa-circle-exclamation mr-1.5"></i> </div>'),kr[u],[[190,8,[[191,12]]]]),Hf=_(m('<div class="bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 text-sm rounded-lg px-4 py-2"><i class="fa-solid fa-check-circle mr-1.5"></i> </div>'),kr[u],[[195,8,[[196,12]]]]),Yf=_(m('<div class="relative"><i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle text-xs"></i> <input type="text" class="w-full pl-9 pr-3 py-2 text-sm bg-surface border border-border rounded-lg text-text placeholder:text-text-subtle focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"/></div>'),kr[u],[[202,8,[[203,12],[204,12]]]]),Qf=_(m('<div class="p-8 text-center text-text-subtle text-sm"><i class="fa-solid fa-spinner fa-spin mr-1.5"></i> </div>'),kr[u],[[216,12,[[217,16]]]]),Zf=_(m('<i class="fa-solid fa-search mr-1.5"></i> ',1),kr[u],[[222,20]]),Xf=_(m('<i class="fa-solid fa-trash-can mr-1.5 opacity-40"></i> <p class="mt-1"> </p> <p class="text-xs mt-1 text-text-subtle opacity-70"> </p>',1),kr[u],[[224,20],[225,20],[226,20]]),ep=_(m('<div class="p-8 text-center text-text-subtle text-sm"><!></div>'),kr[u],[[220,12]]),tp=_(m('<div class="p-3 hover:bg-surface-muted/50 transition-colors group"><div class="flex items-start justify-between gap-3"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><i></i> <span class="text-sm font-medium text-text truncate"> </span> <span class="text-xs text-text-subtle bg-surface-muted px-1.5 py-0.5 rounded"> </span></div> <div class="text-xs text-text-subtle truncate pl-6"> </div> <div class="flex items-center gap-3 mt-1 pl-6"><span class="text-xs text-text-subtle"><i class="fa-regular fa-clock mr-0.5"></i> </span> <span class="text-xs text-text-subtle"><i class="fa-solid fa-tag mr-0.5"></i> </span></div></div> <div class="flex items-center gap-1.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"><button class="text-xs px-2.5 py-1.5 rounded bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/30 text-emerald-400 hover:text-emerald-300 transition-colors"><i class="fa-solid fa-rotate-left mr-1"></i> </button> <button class="text-xs px-2.5 py-1.5 rounded bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-400 hover:text-red-300 transition-colors"><i class="fa-solid fa-xmark"></i></button></div></div></div>'),kr[u],[[234,20,[[235,24,[[236,28,[[237,32,[[238,36],[239,36],[240,36]]],[244,32],[247,32,[[248,36,[[249,40]]],[251,36,[[252,40]]]]]]],[256,28,[[257,32,[[262,36]]],[264,32,[[269,36]]]]]]]]]]),rp=_(m('<div class="max-h-[600px] overflow-y-auto custom-scroll divide-y divide-border"></div>'),kr[u],[[232,12]]),ap=_(m('<section class="space-y-4"><div class="bg-surface border border-border rounded-lg shadow-sm p-4"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><h2 class="text-xs font-semibold uppercase tracking-wider text-text-muted"><i class="fa-solid fa-trash-can mr-1.5"></i> </h2> <span class="text-xs text-text-subtle bg-surface-muted px-2 py-0.5 rounded-full"> </span></div> <div class="flex items-center gap-2"><button class="text-xs px-3 py-1.5 rounded bg-surface-muted hover:bg-surface border border-border text-text-muted hover:text-text transition-colors"><i></i> </button> <!></div></div></div> <!> <!> <!> <div class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><!></div></section>'),kr[u],[[142,0,[[144,4,[[145,8,[[146,12,[[147,16,[[148,20]]],[150,16]]],[154,12,[[155,16,[[160,20]]]]]]]]],[214,4]]]]);function kr(r,i){Cr(new.target),$r(i,!0,kr);let o=S(A(rr([])),"items"),d=S(A(rr({count:0,total_bytes:0})),"stats"),c=S(A(!1),"loading"),f=S(A(""),"error"),b=S(A(""),"successMsg"),h=S(A(!1),"confirmEmpty"),w=S(A(""),"searchQuery");async function P(){p(c,!0),p(f,"");try{const Q=(await O(jt("GET","/api/trash")))();p(o,Q.items,!0),p(d,Q.stats,!0)}catch(Q){p(f,(Q==null?void 0:Q.message)||l("trash.load_failed"),!0),console.error(...tr("error","loadTrash:",Q))}finally{p(c,!1)}}async function C(Q){try{const D=(await O(jt("POST",`/api/trash/${Q}/restore`)))();p(b,D.message||l("trash.restored"),!0),(await O(P()))(),setTimeout(()=>p(b,""),3e3)}catch(D){p(f,(D==null?void 0:D.message)||l("trash.restore_failed"),!0)}}async function E(Q,D){if(confirm(l("trash.permanent_confirm",{name:D})))try{const L=(await O(jt("DELETE",`/api/trash/${Q}`)))();p(b,L.message||l("trash.deleted"),!0),(await O(P()))(),setTimeout(()=>p(b,""),3e3)}catch(L){p(f,(L==null?void 0:L.message)||l("trash.delete_failed"),!0)}}async function k(){try{const Q=(await O(jt("POST","/api/trash/empty")))();p(b,Q.message||l("trash.emptied"),!0),p(h,!1),(await O(P()))(),setTimeout(()=>p(b,""),3e3)}catch(Q){p(f,(Q==null?void 0:Q.message)||l("trash.empty_failed"),!0)}}function M(Q){if(j(Q,0))return"0 B";const D=["B","KB","MB","GB"],L=Math.min(Math.floor(Math.log(Q)/Math.log(1024)),D.length-1);return`${(Q/Math.pow(1024,L)).toFixed(j(L,0)?0:1)} ${D[L]}`}function I(Q){try{const D=new Date(Q),ge=new Date().getTime()-D.getTime(),Ze=Math.floor(ge/6e4),vt=Math.floor(ge/36e5),it=Math.floor(ge/864e5);return Ze<1?"just now":Ze<60?`${Ze}m ago`:vt<24?`${vt}h ago`:it<7?`${it}d ago`:D.toLocaleDateString()}catch{return Q}}function Z(Q){return Q.startsWith("tool:")?Q.replace("tool:",""):Q.startsWith("shell:")?Q.replace("shell:","")+" (shell)":Q.startsWith("rhai:")?Q.replace("rhai:","")+" (skill)":Q}let R=S(Br(()=>a(w).trim()?a(o).filter(Q=>Q.name.toLowerCase().includes(a(w).toLowerCase())||Q.original_path.toLowerCase().includes(a(w).toLowerCase())||Q.source.toLowerCase().includes(a(w).toLowerCase())):a(o)),"filtered");Gr(()=>{j(Vt.currentTab,"trash")&&(Vt.refreshCounter,P())});var q={...Ar()},ce=ap(),de=e(ce),$e=e(de),We=e($e),Oe=e(We),je=s(e(Oe)),De=s(Oe,2),ct=e(De),ke=s(We,2),ae=e(ke),Ue=e(ae);let ut;var ht=s(Ue),G=s(ae,2);{var we=Q=>{var D=Sr(),L=Te(D);{var ge=vt=>{var it=Kf(),J=s(e(it));x(Be=>n(J,` ${Be??""}`),[()=>l("trash.empty_trash")]),oe("click",it,function(){return p(h,!0)}),v(vt,it)},Ze=vt=>{var it=Wf(),J=e(it),Be=e(J),_t=s(J,2),Rt=s(_t,2);x(Et=>n(Be,Et),[()=>l("trash.delete_all")]),oe("click",_t,k),oe("click",Rt,function(){return p(h,!1)}),v(vt,it)};g(()=>y(L,vt=>{a(h)?vt(Ze,!1):vt(ge)}),"if",kr,163,20)}v(Q,D)};g(()=>y(G,Q=>{a(d).count>0&&Q(we)}),"if",kr,162,16)}var pe=s(de,2);{var se=Q=>{var D=Jf(),L=s(e(D));x(()=>n(L,` ${a(f)??""}`)),v(Q,D)};g(()=>y(pe,Q=>{a(f)&&Q(se)}),"if",kr,189,4)}var V=s(pe,2);{var T=Q=>{var D=Hf(),L=s(e(D));x(()=>n(L,` ${a(b)??""}`)),v(Q,D)};g(()=>y(V,Q=>{a(b)&&Q(T)}),"if",kr,194,4)}var F=s(V,2);{var _e=Q=>{var D=Yf(),L=s(e(D),2);x(ge=>Lt(L,"placeholder",ge),[()=>l("trash.search_placeholder")]),vr(L,function(){return a(w)},function(Ze){p(w,Ze)}),v(Q,D)};g(()=>y(F,Q=>{a(o).length>0&&Q(_e)}),"if",kr,201,4)}var K=s(F,2),qe=e(K);{var ze=Q=>{var D=Qf(),L=s(e(D));x(ge=>n(L,` ${ge??""}`),[()=>l("common.loading")]),v(Q,D)},be=Q=>{var D=ep(),L=e(D);{var ge=it=>{var J=Zf(),Be=s(Te(J));x(_t=>n(Be,` ${_t??""}`),[()=>l("trash.no_match",{query:a(w)})]),v(it,J)},Ze=Br(()=>a(w).trim()),vt=it=>{var J=Xf(),Be=s(Te(J),2),_t=e(Be),Rt=s(Be,2),Et=e(Rt);x((pt,X)=>{n(_t,pt),n(Et,X)},[()=>l("trash.empty"),()=>l("trash.empty_hint")]),v(it,J)};g(()=>y(L,it=>{a(Ze)?it(ge):it(vt,!1)}),"if",kr,221,16)}v(Q,D)},tt=Q=>{var D=rp();g(()=>Wt(D,21,()=>a(R),L=>L.id,(L,ge)=>{var Ze=tp(),vt=e(Ze),it=e(vt),J=e(it),Be=e(J),_t=s(Be,2),Rt=e(_t,!0);var Et=s(_t,2),pt=e(Et,!0);var X=s(J,2),ie=e(X,!0);var $=s(X,2),N=e($),U=s(e(N));var ee=s(N,2),te=s(e(ee));var ve=s(it,2),re=e(ve),z=s(e(re));var ue=s(re,2);x((Ae,xe,bt,He,he,Xe)=>{at(Be,1,`fa-solid ${a(ge).is_dir?"fa-folder text-amber-400":"fa-file text-blue-400"} text-sm`),n(Rt,a(ge).name),n(pt,Ae),Lt(X,"title",a(ge).original_path),n(ie,a(ge).original_path),Lt(N,"title",a(ge).trashed_at),n(U,` ${xe??""}`),n(te,` ${bt??""}`),Lt(re,"title",He),n(z,` ${he??""}`),Lt(ue,"title",Xe)},[()=>M(a(ge).size_bytes),()=>I(a(ge).trashed_at),()=>Z(a(ge).source),()=>l("trash.restore_title"),()=>l("trash.restore"),()=>l("trash.delete_permanent_title")]),oe("click",re,function(){return C(a(ge).id)}),oe("click",ue,function(){return E(a(ge).id,a(ge).name)}),v(L,Ze)}),"each",kr,233,16),v(Q,D)};g(()=>y(qe,Q=>{a(c)&&j(a(o).length,0)?Q(ze):j(a(R).length,0)?Q(be,1):Q(tt,!1)}),"if",kr,215,8)}return x((Q,D,L,ge)=>{n(je,` ${Q??""}`),n(ct,`${D??""} · ${L??""}`),ae.disabled=a(c),ut=at(Ue,1,"fa-solid fa-arrows-rotate mr-1",null,ut,{"fa-spin":a(c)}),n(ht,` ${ge??""}`)},[()=>l("trash.title"),()=>l("trash.items_count",{count:a(d).count}),()=>M(a(d).total_bytes),()=>l("common.refresh")]),oe("click",ae,P),v(r,ce),Er(q)}Dr(["click"]);Tt[u]="src/components/SecurityTab.svelte";var sp=_(m("<button><i></i> </button>"),Tt[u],[[206,12,[[214,16]]]]),ip=_(m('<div class="grid grid-cols-2 md:grid-cols-4 gap-3"><div class="card p-3 text-center"><div class="text-2xl font-bold text-heading"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-2xl font-bold text-blue-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div> </div> <div class="text-xs text-muted"> <!></div></div> <div class="card p-3 text-center"><div> </div> <div class="text-xs text-muted"> </div></div></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-3"><div class="card p-3 text-center"><div class="text-lg font-bold text-green-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-lg font-bold text-red-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-lg font-bold text-orange-400"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-lg font-bold text-red-500"> </div> <div class="text-xs text-muted"> </div></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3"><div class="card p-4"><h3 class="text-sm font-semibold text-heading mb-2"><i class="fa-solid fa-dollar-sign mr-1"></i>Cost Summary</h3> <div class="space-y-1 text-sm"><div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted"> </span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Requests Today</span><span> </span></div></div></div> <div class="card p-4"><h3 class="text-sm font-semibold text-heading mb-2"><i class="fa-solid fa-gauge-high mr-1"></i>Rate Limits</h3> <div class="space-y-1 text-sm"><div class="flex justify-between"><span class="text-muted">Per Minute</span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Per Hour</span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Status</span> <span> </span></div> <div class="flex justify-between"><span class="text-muted">2FA Challenges</span><span> </span></div> <div class="flex justify-between"><span class="text-muted">Permission Denials</span><span> </span></div></div></div></div>',1),Tt[u],[[222,12,[[223,16,[[224,20],[225,20]]],[227,16,[[228,20],[229,20]]],[231,16,[[232,20],[235,20]]],[242,16,[[243,20],[246,20]]]]],[250,12,[[251,16,[[252,20],[253,20]]],[255,16,[[256,20],[257,20]]],[259,16,[[260,20],[261,20]]],[263,16,[[264,20],[265,20]]]]],[269,12,[[270,16,[[271,20,[[271,72]]],[272,20,[[273,24,[[273,58],[273,117]]],[274,24,[[274,58],[274,116]]],[275,24,[[275,58],[275,116]]],[276,24,[[276,58],[276,112]]],[277,24,[[277,58],[277,118]]],[278,24,[[278,58],[278,104]]]]]]],[281,16,[[282,20,[[282,72]]],[283,20,[[284,24,[[284,58],[284,100]]],[285,24,[[285,58],[285,98]]],[286,24,[[287,28],[288,28]]],[292,24,[[292,58],[292,104]]],[293,24,[[293,58],[293,108]]]]]]]]]]),op=_(m('<p class="text-muted text-sm"> </p>'),Tt[u],[[298,12]]),np=_(m('<p class="text-muted text-sm"> </p>'),Tt[u],[[326,12]]),lp=_(m('<span class="text-xs bg-card-hover px-1.5 py-0.5 rounded"> </span>'),Tt[u],[[336,36]]),dp=_(m('<span class="text-xs text-muted"> </span>'),Tt[u],[[339,36]]),cp=_(m("<span> </span>"),Tt[u],[[342,36]]),vp=_(m('<div class="text-xs text-muted mt-0.5 truncate"> </div>'),Tt[u],[[349,32]]),up=_(m('<div class="text-xs text-muted mt-0.5 truncate"> </div>'),Tt[u],[[352,32]]),fp=_(m('<div class="card p-2 flex items-start gap-2 text-sm"><i></i> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span> </span> <!> <!> <!> <span class="text-xs text-muted ml-auto"> </span></div> <!> <!> <div class="text-xs text-muted mt-0.5 flex justify-between"><span> </span> <button class="text-blue-400 hover:text-blue-300" title="Explain this action"><i class="fa-solid fa-magnifying-glass"></i> </button></div></div></div>'),Tt[u],[[330,20,[[331,24],[332,24,[[333,28,[[334,32],[346,32]]],[354,28,[[355,32],[356,32,[[357,36]]]]]]]]]]),pp=_(m('<div class="space-y-1"></div>'),Tt[u],[[328,12]]),_p=_(m('<p class="text-muted text-sm"> </p>'),Tt[u],[[377,24]]),mp=_(m('<span class="text-muted"> </span>'),Tt[u],[[384,55]]),xp=_(m('<div class="text-sm mt-1"><span class="text-muted">Reasoning:</span> </div>'),Tt[u],[[387,40,[[387,66]]]]),bp=_(m('<div class="text-xs text-muted mt-1"> </div>'),Tt[u],[[390,40]]),gp=_(m('<div class="text-xs text-muted mt-1"> </div>'),Tt[u],[[393,40]]),hp=_(m('<div><div> <!></div> <!> <!> <!> <div class="text-xs text-muted"> </div></div>'),Tt[u],[[381,32,[[382,36],[395,36]]]]),yp=_(m('<div class="space-y-2"></div>'),Tt[u],[[379,24]]),wp=_(m('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50" role="dialog"><div class="card p-4 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto" role="document"><div class="flex justify-between items-center mb-3"><h3 class="text-lg font-bold text-heading"><i class="fa-solid fa-lightbulb mr-2"></i> </h3> <button class="text-muted hover:text-heading"><i class="fa-solid fa-xmark"></i></button></div> <!></div></div>'),Tt[u],[[368,12,[[369,16,[[370,20,[[371,24,[[371,67]]],[372,24,[[373,28]]]]]]]]]]),kp=_(m('<div class="flex gap-2 mb-3"><select class="bg-bg border border-border rounded px-2 py-1 text-sm"><option> </option><option>Tool Calls</option><option>Approvals</option><option>Rate Limits</option><option>PII Detected</option><option>2FA</option><option>Permission Denied</option></select> <input type="text" class="bg-bg border border-border rounded px-2 py-1 text-sm flex-1"/> <button class="btn btn-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div> <!> <!>',1),Tt[u],[[303,8,[[304,12,[[305,16],[306,16],[307,16],[308,16],[309,16],[310,16],[311,16]]],[313,12],[320,12,[[321,16]]]]]]),Tp=_(m('<div class="mt-2 w-full bg-bg rounded-full h-2"><div></div></div> <div class="text-xs text-muted mt-1"> </div>',1),Tt[u],[[414,24,[[415,28]]],[422,24]]),$p=_(m('<div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-4"><div class="card p-4 text-center"><div> </div> <div class="text-xs text-muted"> </div> <!></div> <div class="card p-4 text-center"><div class="text-3xl font-bold text-heading"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-4 text-center"><div class="text-3xl font-bold text-heading"> </div> <div class="text-xs text-muted"> </div></div></div> <div class="grid grid-cols-3 gap-3"><div class="card p-3 text-center"><div class="text-xl font-bold"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-xl font-bold"> </div> <div class="text-xs text-muted"> </div></div> <div class="card p-3 text-center"><div class="text-xl font-bold"> </div> <div class="text-xs text-muted">Requests Today</div></div></div>',1),Tt[u],[[407,12,[[408,16,[[409,20],[412,20]]],[425,16,[[426,20],[427,20]]],[429,16,[[430,20],[431,20]]]]],[434,12,[[435,16,[[436,20],[437,20]]],[439,16,[[440,20],[441,20]]],[443,16,[[444,20],[445,20]]]]]]),Ep=_(m('<p class="text-muted text-sm"> </p>'),Tt[u],[[449,12]]),Sp=_(m('<div class="w-full bg-bg rounded-full h-3"><div></div></div>'),Tt[u],[[464,28,[[465,32]]]]),Cp=_(m('<div class="w-full bg-bg rounded-full h-3"><div></div></div>'),Tt[u],[[481,28,[[482,32]]]]),Ap=_(m('<div class="card p-6 max-w-md"><h3 class="text-lg font-bold text-heading mb-4"><i class="fa-solid fa-gauge-high mr-2"></i>Rate Limit Status</h3> <div class="space-y-4"><div><div class="flex justify-between text-sm mb-1"><span class="text-muted">Per Minute</span> <span> </span></div> <!></div> <div><div class="flex justify-between text-sm mb-1"><span class="text-muted">Per Hour</span> <span> </span></div> <!></div> <div class="text-center p-3 rounded"><span> </span></div></div></div>'),Tt[u],[[455,12,[[456,16,[[456,64]]],[457,16,[[458,20,[[459,24,[[460,28],[461,28]]]]],[475,20,[[476,24,[[477,28],[478,28]]]]],[492,20,[[493,24]]]]]]]]),Pp=_(m('<p class="text-muted text-sm"> </p>'),Tt[u],[[500,12]]),Op=_(m(`<div class="card p-6 text-center"><i class="fa-solid fa-shield-check text-3xl text-green-400 mb-2"></i> <p class="text-muted"> </p> <p class="text-xs text-muted mt-1">When the agent attempts a dangerous operation (like executing shell commands),
                        a 2FA challenge will appear here for your confirmation.</p></div>`),Tt[u],[[514,16,[[515,20],[516,20],[517,20]]]]),jp=_(m('<div class="card p-4"><div class="flex items-start gap-3"><i class="fa-solid fa-lock text-purple-400 text-lg mt-1"></i> <div class="flex-1"><div class="flex items-center gap-2"><span class="font-semibold text-heading"> </span> <span class="text-xs bg-card-hover px-1.5 py-0.5 rounded"> </span> <span class="text-xs text-muted"> </span></div> <p class="text-sm text-muted mt-1"> </p> <div class="flex gap-2 mt-2"><button class="btn btn-sm bg-green-600 hover:bg-green-500 text-white"><i class="fa-solid fa-check mr-1"></i> </button> <button class="btn btn-sm bg-red-600 hover:bg-red-500 text-white"><i class="fa-solid fa-xmark mr-1"></i> </button></div></div></div></div>'),Tt[u],[[524,20,[[525,24,[[526,28],[527,28,[[528,32,[[529,36],[530,36],[531,36]]],[533,32],[534,32,[[535,36,[[536,40]]],[538,36,[[539,40]]]]]]]]]]]]),Rp=_(m('<div class="space-y-3"><div class="flex items-center justify-between mb-2"><h3 class="text-lg font-bold text-heading"><i class="fa-solid fa-lock mr-2"></i> </h3> <button class="btn btn-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div> <!></div>'),Tt[u],[[505,8,[[506,12,[[507,16,[[507,59]]],[508,16,[[509,20]]]]]]]]),Lp=_(m('<div class="space-y-4"><div class="flex items-center gap-3 mb-4"><h2 class="text-xl font-bold text-heading"><i class="fa-solid fa-shield-halved mr-2"></i> </h2></div> <div class="flex gap-1 border-b border-border pb-1 mb-4"></div> <!></div>'),Tt[u],[[192,0,[[193,4,[[194,8,[[194,51]]]]],[198,4]]]]);function Tt(r,i){Cr(new.target),$r(i,!0,Tt);let o=S(A(null),"auditSummary"),d=S(A(null),"costSummary"),c=S(A(null),"rateStatus"),f=S(A(rr([])),"challenges"),b=S(A(rr([])),"auditEntries"),h=S(A(rr([])),"explanationChain"),w=S(A(!1),"showExplanation"),P=S(A("overview"),"activeSection"),C=vi(rr({event_type:"",tool:""}),"auditFilter");async function E(){try{const T=(await O(fetch("/api/security/overview")))(),F=(await O(T.json()))();p(o,F.audit,!0),p(d,F.cost,!0),p(c,F.rate_limit,!0),p(f,[],!0)}catch(T){console.error(...tr("error","Failed to load security overview",T))}}async function k(){try{const T=new URLSearchParams({limit:"50"});C.event_type&&T.set("event_type",C.event_type),C.tool&&T.set("tool",C.tool);const F=(await O(fetch(`/api/security/audit?${T}`)))();p(b,(await O(F.json()))(),!0)}catch(T){console.error(...tr("error","Failed to load audit log",T))}}async function M(){try{const T=(await O(fetch("/api/security/cost")))();p(d,(await O(T.json()))(),!0)}catch(T){console.error(...tr("error","Failed to load cost summary",T))}}async function I(){try{const T=(await O(fetch("/api/security/rate-limit")))();p(c,(await O(T.json()))(),!0)}catch(T){console.error(...tr("error","Failed to load rate limit status",T))}}async function Z(){try{const T=(await O(fetch("/api/security/2fa")))();p(f,(await O(T.json()))(),!0)}catch(T){console.error(...tr("error","Failed to load 2FA challenges",T))}}async function R(T){(await O(fetch(`/api/security/2fa/${T}/confirm`,{method:"POST"})))(),(await O(Z()))()}async function q(T){(await O(fetch(`/api/security/2fa/${T}/reject`,{method:"POST"})))(),(await O(Z()))()}async function ce(T){try{const F=(await O(fetch(`/api/security/audit/${T}/explain`)))();p(h,(await O(F.json()))(),!0),p(w,!0)}catch(F){console.error(...tr("error","Failed to load explanation",F))}}function de(T){p(P,T,!0),j(T,"overview")?E():j(T,"audit")?k():j(T,"cost")?M():j(T,"rate")?I():j(T,"2fa")&&Z()}function $e(T){return`$${T.toFixed(4)}`}function We(T){return T>=1e6?`${(T/1e6).toFixed(1)}M`:T>=1e3?`${(T/1e3).toFixed(1)}K`:T.toString()}function Oe(T){switch(T){case"tool_call":return"text-blue-400";case"approval":return"text-yellow-400";case"rate_limit":return"text-orange-400";case"pii_detected":return"text-red-400";case"2fa":return"text-purple-400";case"permission_denied":return"text-red-500";default:return"text-muted"}}function je(T){switch(T){case"tool_call":return"fa-wrench";case"approval":return"fa-check-double";case"rate_limit":return"fa-gauge-high";case"pii_detected":return"fa-user-shield";case"2fa":return"fa-lock";case"permission_denied":return"fa-ban";default:return"fa-circle-info"}}Gr(()=>{Vt.refreshCounter,E()});var De={...Ar()},ct=Lp(),ke=e(ct),ae=e(ke),Ue=s(e(ae),1,!0),ut=s(ke,2);g(()=>Wt(ut,21,()=>[{id:"overview",label:l("security.overview"),icon:"fa-chart-pie"},{id:"audit",label:l("security.audit_trail"),icon:"fa-scroll"},{id:"cost",label:l("security.cost_tracking"),icon:"fa-dollar-sign"},{id:"rate",label:l("security.rate_limits"),icon:"fa-gauge-high"},{id:"2fa",label:l("security.twofa"),icon:"fa-lock"}],fr,(T,F)=>{var _e=sp();let K;var qe=e(_e),ze=s(qe,1,!0);x(()=>{K=at(_e,1,"px-3 py-1.5 text-sm rounded-t transition-colors",null,K,{"bg-card":j(a(P),a(F).id),"text-heading":j(a(P),a(F).id),"text-muted":j(a(P),a(F).id,!1),"hover:text-heading":j(a(P),a(F).id,!1)}),at(qe,1,`fa-solid ${a(F).icon??""} mr-1`),n(ze,a(F).label)}),oe("click",_e,function(){return de(a(F).id)}),v(T,_e)}),"each",Tt,199,8);var ht=s(ut,2);{var G=T=>{var F=Sr(),_e=Te(F);{var K=ze=>{var be=ip(),tt=Te(be),Q=e(tt),D=e(Q),L=e(D),ge=s(D,2),Ze=e(ge),vt=s(Q,2),it=e(vt),J=e(it),Be=s(it,2),_t=e(Be),Rt=s(vt,2),Et=e(Rt);let pt;var X=e(Et),ie=s(Et,2),$=e(ie),N=s($);{var U=zt=>{var nr=Da();x(_r=>n(nr,`/ ${_r??""}`),[()=>$e(a(d).daily_limit_usd)]),v(zt,nr)};g(()=>y(N,zt=>{a(d).daily_limit_usd>0&&zt(U)}),"if",Tt,237,24)}var ee=s(Rt,2),te=e(ee);let ve;var re=e(te),z=s(te,2),ue=e(z),Ae=s(tt,2),xe=e(Ae),bt=e(xe),He=e(bt),he=s(bt,2),Xe=e(he),Ve=s(xe,2),nt=e(Ve),Pe=e(nt),le=s(nt,2),Y=e(le),ne=s(Ve,2),me=e(ne),ye=e(me),Ie=s(me,2),Ee=e(Ie),Fe=s(ne,2),Ye=e(Fe),Qe=e(Ye),Ke=s(Ye,2),Se=e(Ke),st=s(Ae,2),lt=e(st),B=s(e(lt),2),W=e(B),Re=e(W),Le=e(Re),rt=s(Re),wt=e(rt),dt=s(W,2),Ge=e(dt),Ne=e(Ge),Me=s(Ge),gt=e(Me),et=s(dt,2),ft=e(et),ot=e(ft),Je=s(ft),St=e(Je),$t=s(et,2),kt=e($t),Ut=e(kt),Dt=s(kt),Ot=e(Dt),Bt=s($t,2),ur=e(Bt),or=e(ur),hr=s(ur),pr=e(hr),At=s(Bt,2),Nt=s(e(At)),cr=e(Nt),xt=s(lt,2),Pt=s(e(xt),2),It=e(Pt),Ft=s(e(It)),qt=e(Ft),Yt=s(It,2),xr=s(e(Yt)),Pr=e(xr),Hr=s(Yt,2),ir=s(e(Hr),2);let Zr;var Or=e(ir),Xr=s(Hr,2),da=s(e(Xr)),ca=e(da),jr=s(Xr,2),Nr=s(e(jr)),Jt=e(Nr);x((zt,nr,_r,es,ts,xs,qa,bs,pi,rs,Gs,gs,_i,Ct,Mt,Qt,lr,Ir,sa)=>{n(L,a(o).total_events),n(Ze,zt),n(J,a(o).tool_calls),n(_t,nr),pt=at(Et,1,"text-2xl font-bold",null,pt,{"text-red-400":a(d).limit_exceeded,"text-green-400":!a(d).limit_exceeded}),n(X,_r),n($,`${es??""} `),ve=at(te,1,"text-2xl font-bold",null,ve,{"text-orange-400":a(c).is_limited,"text-green-400":!a(c).is_limited}),n(re,`${a(c).calls_last_minute??""}/${(a(c).limit_per_minute||"∞")??""}`),n(ue,ts),n(He,a(o).approvals),n(Xe,xs),n(Pe,a(o).rejections),n(Y,qa),n(ye,a(o).rate_limits),n(Ee,bs),n(Qe,a(o).pii_detections),n(Se,pi),n(Le,rs),n(wt,Gs),n(Ne,gs),n(gt,_i),n(ot,Ct),n(St,Mt),n(Ut,Qt),n(Ot,lr),n(or,Ir),n(pr,sa),n(cr,a(d).today_requests),n(qt,`${a(c).calls_last_minute??""} / ${(a(c).limit_per_minute||"∞")??""}`),n(Pr,`${a(c).calls_last_hour??""} / ${(a(c).limit_per_hour||"∞")??""}`),Zr=at(ir,1,"",null,Zr,{"text-red-400":a(c).is_limited,"text-green-400":!a(c).is_limited}),n(Or,a(c).is_limited?"RATE LIMITED":"OK"),n(ca,a(o).twofa_challenges),n(Jt,a(o).permission_denials)},[()=>l("security.total_events"),()=>l("security.tool_calls"),()=>$e(a(d).today_usd),()=>l("security.todays_cost"),()=>l("security.calls_per_min"),()=>l("security.approvals"),()=>l("security.rejections"),()=>l("security.rate_limits"),()=>l("security.pii_detections"),()=>l("security.todays_cost"),()=>$e(a(d).today_usd),()=>l("security.month_cost"),()=>$e(a(d).month_usd),()=>l("security.total_cost"),()=>$e(a(d).total_usd),()=>l("security.tokens"),()=>We(a(d).today_tokens),()=>l("security.total_tokens"),()=>We(a(d).total_tokens)]),v(ze,be)},qe=ze=>{var be=op(),tt=e(be);x(Q=>n(tt,Q),[()=>l("common.loading")]),v(ze,be)};g(()=>y(_e,ze=>{a(o)&&a(d)&&a(c)?ze(K):ze(qe,!1)}),"if",Tt,221,8)}v(T,F)},we=T=>{var F=kp(),_e=Te(F),K=e(_e),qe=e(K),ze=e(qe);qe.value=qe.__value="";var be=s(qe);be.value=be.__value="tool_call";var tt=s(be);tt.value=tt.__value="approval";var Q=s(tt);Q.value=Q.__value="rate_limit";var D=s(Q);D.value=D.__value="pii_detected";var L=s(D);L.value=L.__value="2fa";var ge=s(L);ge.value=ge.__value="permission_denied",cn("bind:value={auditFilter.event_type}",[],()=>C,()=>"event_type",304,81);var Ze=s(K,2);cn("bind:value={auditFilter.tool}",[],()=>C,()=>"tool",317,16);var vt=s(Ze,2),it=s(e(vt),1,!0),J=s(_e,2);{var Be=pt=>{var X=np(),ie=e(X);x($=>n(ie,$),[()=>l("security.no_events")]),v(pt,X)},_t=pt=>{var X=pp();g(()=>Wt(X,21,()=>a(b),fr,(ie,$)=>{var N=fp(),U=e(N),ee=s(U,2),te=e(ee),ve=e(te),re=e(ve,!0);var z=s(ve,2);{var ue=Ee=>{var Fe=lp(),Ye=e(Fe,!0);x(()=>n(Ye,a($).tool)),v(Ee,Fe)};g(()=>y(z,Ee=>{a($).tool&&Ee(ue)}),"if",Tt,335,32)}var Ae=s(z,2);{var xe=Ee=>{var Fe=dp(),Ye=e(Fe,!0);x(()=>n(Ye,a($).action)),v(Ee,Fe)};g(()=>y(Ae,Ee=>{a($).action&&Ee(xe)}),"if",Tt,338,32)}var bt=s(Ae,2);{var He=Ee=>{var Fe=cp();let Ye;var Qe=e(Fe,!0);x(()=>{Ye=at(Fe,1,"text-xs",null,Ye,{"text-green-400":a($).success,"text-red-400":!a($).success}),n(Qe,a($).success?"✓":"✗")}),v(Ee,Fe)};g(()=>y(bt,Ee=>{j(a($).success,null,!1)&&Ee(He)}),"if",Tt,341,32)}var he=s(bt,2),Xe=e(he,!0);var Ve=s(te,2);{var nt=Ee=>{var Fe=vp(),Ye=e(Fe);x(()=>n(Ye,`Reasoning: ${a($).reasoning??""}`)),v(Ee,Fe)};g(()=>y(Ve,Ee=>{a($).reasoning&&Ee(nt)}),"if",Tt,348,28)}var Pe=s(Ve,2);{var le=Ee=>{var Fe=up(),Ye=e(Fe);x(()=>n(Ye,`Result: ${a($).result??""}`)),v(Ee,Fe)};g(()=>y(Pe,Ee=>{a($).result&&Ee(le)}),"if",Tt,351,28)}var Y=s(Pe,2),ne=e(Y),me=e(ne,!0);var ye=s(ne,2),Ie=s(e(ye));x((Ee,Fe,Ye,Qe,Ke)=>{at(U,1,`fa-solid ${Ee??""} ${Fe??""} mt-0.5`),at(ve,1,`font-semibold ${Ye??""}`),n(re,a($).event_type),n(Xe,a($).source),n(me,Qe),n(Ie,` ${Ke??""}`)},[()=>je(a($).event_type),()=>Oe(a($).event_type),()=>Oe(a($).event_type),()=>_s(a($).created_at),()=>l("security.why")]),oe("click",ye,function(){return ce(a($).id)}),v(ie,N)}),"each",Tt,329,16),v(pt,X)};g(()=>y(J,pt=>{j(a(b).length,0)?pt(Be):pt(_t,!1)}),"if",Tt,325,8)}var Rt=s(J,2);{var Et=pt=>{var X=wp(),ie=e(X),$=e(ie),N=e($),U=s(e(N),1,!0),ee=s(N,2),te=s($,2);{var ve=z=>{var ue=_p(),Ae=e(ue);x(xe=>n(Ae,xe),[()=>l("security.no_explanation")]),v(z,ue)},re=z=>{var ue=yp();g(()=>Wt(ue,21,()=>a(h),fr,(Ae,xe,bt)=>{var He=hp();let he;var Xe=e(He),Ve=e(Xe),nt=s(Ve);{var Pe=Ye=>{var Qe=mp(),Ke=e(Qe);x(()=>n(Ke,`(${a(xe).tool??""})`)),v(Ye,Qe)};g(()=>y(nt,Ye=>{a(xe).tool&&Ye(Pe)}),"if",Tt,384,40)}var le=s(Xe,2);{var Y=Ye=>{var Qe=xp(),Ke=s(e(Qe));x(()=>n(Ke,` ${a(xe).reasoning??""}`)),v(Ye,Qe)};g(()=>y(le,Ye=>{a(xe).reasoning&&Ye(Y)}),"if",Tt,386,36)}var ne=s(le,2);{var me=Ye=>{var Qe=bp(),Ke=e(Qe);x(()=>n(Ke,`Context: ${a(xe).user_context??""}`)),v(Ye,Qe)};g(()=>y(ne,Ye=>{a(xe).user_context&&Ye(me)}),"if",Tt,389,36)}var ye=s(ne,2);{var Ie=Ye=>{var Qe=gp(),Ke=e(Qe);x(()=>n(Ke,`Result: ${a(xe).result??""}`)),v(Ye,Qe)};g(()=>y(ye,Ye=>{a(xe).result&&Ye(Ie)}),"if",Tt,392,36)}var Ee=s(ye,2),Fe=e(Ee,!0);x((Ye,Qe,Ke)=>{he=at(He,1,"border-l-2 pl-3",null,he,Ye),at(Xe,1,`text-sm font-semibold ${Qe??""}`),n(Ve,`Step ${bt+1}: ${a(xe).event_type??""} `),n(Fe,Ke)},[()=>({"border-blue-400":j(a(xe).event_type,"tool_call"),"border-yellow-400":j(a(xe).event_type,"approval"),"border-red-400":j(a(xe).event_type,"pii_detected")||j(a(xe).event_type,"permission_denied"),"border-border":!["tool_call","approval","pii_detected","permission_denied"].includes(a(xe).event_type)}),()=>Oe(a(xe).event_type),()=>_s(a(xe).created_at)]),v(Ae,He)}),"each",Tt,380,28),v(z,ue)};g(()=>y(te,z=>{j(a(h).length,0)?z(ve):z(re,!1)}),"if",Tt,376,20)}x((z,ue)=>{n(U,z),Lt(ee,"title",ue)},[()=>l("security.action_explanation"),()=>l("common.close")]),oe("click",X,function(){return p(w,!1)}),oe("click",ie,function(ue){return ue.stopPropagation()}),oe("click",ee,function(){return p(w,!1)}),v(pt,X)};g(()=>y(Rt,pt=>{a(w)&&pt(Et)}),"if",Tt,367,8)}x((pt,X,ie)=>{n(ze,pt),Lt(Ze,"placeholder",X),n(it,ie)},[()=>l("security.all_types"),()=>l("security.filter"),()=>l("common.refresh")]),oe("change",K,function(){return k()}),Fi(K,function(){return C.event_type},function(X){C.event_type=X}),oe("keyup",Ze,function(X){j(X.key,"Enter")&&k()}),vr(Ze,function(){return C.tool},function(X){C.tool=X}),oe("click",vt,function(){return k()}),v(T,F)},pe=T=>{var F=Sr(),_e=Te(F);{var K=ze=>{var be=$p(),tt=Te(be),Q=e(tt),D=e(Q);let L;var ge=e(D),Ze=s(D,2),vt=e(Ze),it=s(Ze,2);{var J=Pe=>{var le=Tp(),Y=Te(le),ne=e(Y);let me;var ye=s(Y,2),Ie=e(ye);x((Ee,Fe)=>{me=at(ne,1,"h-2 rounded-full transition-all",null,me,{"bg-green-400":!a(d).limit_exceeded,"bg-red-400":a(d).limit_exceeded}),Js(ne,`width: ${Ee??""}%`),n(Ie,`Limit: ${Fe??""}`)},[()=>Math.min(100,a(d).today_usd/a(d).daily_limit_usd*100),()=>$e(a(d).daily_limit_usd)]),v(Pe,le)};g(()=>y(it,Pe=>{a(d).daily_limit_usd>0&&Pe(J)}),"if",Tt,413,20)}var Be=s(Q,2),_t=e(Be),Rt=e(_t),Et=s(_t,2),pt=e(Et),X=s(Be,2),ie=e(X),$=e(ie),N=s(ie,2),U=e(N),ee=s(tt,2),te=e(ee),ve=e(te),re=e(ve),z=s(ve,2),ue=e(z),Ae=s(te,2),xe=e(Ae),bt=e(xe),He=s(xe,2),he=e(He),Xe=s(Ae,2),Ve=e(Xe),nt=e(Ve);x((Pe,le,Y,ne,me,ye,Ie,Ee,Fe,Ye)=>{L=at(D,1,"text-3xl font-bold",null,L,{"text-red-400":a(d).limit_exceeded,"text-green-400":!a(d).limit_exceeded}),n(ge,Pe),n(vt,le),n(Rt,Y),n(pt,ne),n($,me),n(U,ye),n(re,Ie),n(ue,Ee),n(bt,Fe),n(he,Ye),n(nt,a(d).today_requests)},[()=>$e(a(d).today_usd),()=>l("security.todays_cost"),()=>$e(a(d).month_usd),()=>l("security.month_cost"),()=>$e(a(d).total_usd),()=>l("security.total_cost"),()=>We(a(d).today_tokens),()=>l("security.tokens"),()=>We(a(d).total_tokens),()=>l("security.total_tokens")]),v(ze,be)},qe=ze=>{var be=Ep(),tt=e(be);x(Q=>n(tt,Q),[()=>l("common.loading")]),v(ze,be)};g(()=>y(_e,ze=>{a(d)?ze(K):ze(qe,!1)}),"if",Tt,406,8)}v(T,F)},se=T=>{var F=Sr(),_e=Te(F);{var K=ze=>{var be=Ap(),tt=s(e(be),2),Q=e(tt),D=e(Q),L=s(e(D),2),ge=e(L),Ze=s(D,2);{var vt=N=>{var U=Sp(),ee=e(U);let te;x(ve=>{te=at(ee,1,"h-3 rounded-full transition-all",null,te,{"bg-green-400":a(c).calls_last_minute/a(c).limit_per_minute<.8,"bg-yellow-400":a(c).calls_last_minute/a(c).limit_per_minute>=.8&&a(c).calls_last_minute/a(c).limit_per_minute<1,"bg-red-400":a(c).calls_last_minute/a(c).limit_per_minute>=1}),Js(ee,`width: ${ve??""}%`)},[()=>Math.min(100,a(c).calls_last_minute/a(c).limit_per_minute*100)]),v(N,U)};g(()=>y(Ze,N=>{a(c).limit_per_minute>0&&N(vt)}),"if",Tt,463,24)}var it=s(Q,2),J=e(it),Be=s(e(J),2),_t=e(Be),Rt=s(J,2);{var Et=N=>{var U=Cp(),ee=e(U);let te;x(ve=>{te=at(ee,1,"h-3 rounded-full transition-all",null,te,{"bg-green-400":a(c).calls_last_hour/a(c).limit_per_hour<.8,"bg-yellow-400":a(c).calls_last_hour/a(c).limit_per_hour>=.8&&a(c).calls_last_hour/a(c).limit_per_hour<1,"bg-red-400":a(c).calls_last_hour/a(c).limit_per_hour>=1}),Js(ee,`width: ${ve??""}%`)},[()=>Math.min(100,a(c).calls_last_hour/a(c).limit_per_hour*100)]),v(N,U)};g(()=>y(Rt,N=>{a(c).limit_per_hour>0&&N(Et)}),"if",Tt,480,24)}var pt=s(it,2),X=e(pt);let ie;var $=e(X);x(()=>{n(ge,`${a(c).calls_last_minute??""} / ${(a(c).limit_per_minute||"∞")??""}`),n(_t,`${a(c).calls_last_hour??""} / ${(a(c).limit_per_hour||"∞")??""}`),Js(pt,`background-color: ${a(c).is_limited?"rgba(248,113,113,0.1)":"rgba(74,222,128,0.1)"}`),ie=at(X,1,"text-lg font-bold",null,ie,{"text-green-400":!a(c).is_limited,"text-red-400":a(c).is_limited}),n($,a(c).is_limited?"RATE LIMITED":"Within Limits")}),v(ze,be)},qe=ze=>{var be=Pp(),tt=e(be);x(Q=>n(tt,Q),[()=>l("common.loading")]),v(ze,be)};g(()=>y(_e,ze=>{a(c)?ze(K):ze(qe,!1)}),"if",Tt,454,8)}v(T,F)},V=T=>{var F=Rp(),_e=e(F),K=e(_e),qe=s(e(K),1,!0),ze=s(K,2),be=s(e(ze),1,!0),tt=s(_e,2);{var Q=L=>{var ge=Op(),Ze=s(e(ge),2),vt=e(Ze);x(it=>n(vt,it),[()=>l("security.no_challenges")]),v(L,ge)},D=L=>{var ge=Sr(),Ze=Te(ge);g(()=>Wt(Ze,17,()=>a(f),fr,(vt,it)=>{var J=jp(),Be=e(J),_t=s(e(Be),2),Rt=e(_t),Et=e(Rt),pt=e(Et,!0);var X=s(Et,2),ie=e(X,!0);var $=s(X,2),N=e($);var U=s(Rt,2),ee=e(U,!0);var te=s(U,2),ve=e(te),re=s(e(ve),1,!0);var z=s(ve,2),ue=s(e(z),1,!0);x((Ae,xe)=>{n(pt,a(it).tool),n(ie,a(it).source),n(N,`${a(it).age_secs??""}s ago`),n(ee,a(it).description),n(re,Ae),n(ue,xe)},[()=>l("common.confirm"),()=>l("security.reject")]),oe("click",ve,function(){return R(a(it).id)}),oe("click",z,function(){return q(a(it).id)}),v(vt,J)}),"each",Tt,523,16),v(L,ge)};g(()=>y(tt,L=>{j(a(f).length,0)?L(Q):L(D,!1)}),"if",Tt,513,12)}x((L,ge)=>{n(qe,L),n(be,ge)},[()=>l("security.pending_challenges"),()=>l("common.refresh")]),oe("click",ze,function(){return Z()}),v(T,F)};g(()=>y(ht,T=>{j(a(P),"overview")?T(G):j(a(P),"audit")?T(we,1):j(a(P),"cost")?T(pe,2):j(a(P),"rate")?T(se,3):j(a(P),"2fa")&&T(V,4)}),"if",Tt,220,4)}return x(T=>n(Ue,T),[()=>l("security.title")]),v(r,ct),Er(De)}Dr(["click","change","keyup"]);fe[u]="src/components/OperationsTab.svelte";var Np=_(m("<button><i></i> </button>"),fe[u],[[271,12,[[275,16]]]]),Mp=_(m('<p class="text-muted"> </p>'),fe[u],[[287,16]]),Dp=_(m('<div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3"><div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div></div></div>'),fe[u],[[298,24,[[299,28,[[300,32],[301,32]]],[305,28,[[306,32],[307,32]]],[311,28,[[312,32],[313,32]]]]]]),Ip=_(m('<div class="space-y-3"><div class="flex items-center gap-3"><span> </span> <span class="text-muted text-sm"> </span></div> <!> <button class="btn-secondary text-sm mt-2"><i class="fa-solid fa-rotate mr-1"></i> </button></div>'),fe[u],[[289,16,[[290,20,[[291,24],[294,24]]],[318,20,[[319,24]]]]]]),Fp=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-heart-pulse mr-1"></i> </h3> <!></div> <div class="card"><h3 class="text-lg font-semibold mb-2"><i class="fa-solid fa-chart-bar mr-1"></i> </h3> <p class="text-sm text-muted mb-2"> </p> <p class="text-sm text-muted"> </p> <div class="mt-2"><button class="btn-secondary text-sm"><i class="fa-solid fa-arrow-up-right-from-square mr-1"></i> </button></div></div>',1),fe[u],[[282,8,[[283,12,[[284,16]]]]],[326,8,[[327,12,[[328,16]]],[330,12],[333,12],[336,12,[[337,16,[[338,20]]]]]]]]),Up=_(m('<span class="text-sm text-muted">&rarr;</span> <span class="font-mono text-green-400"> </span> <span class="bg-green-500/20 text-green-400 text-xs px-2 py-0.5 rounded"> </span>',1),fe[u],[[356,28],[357,28],[358,28]]),zp=_(m('<span class="bg-surface text-muted text-xs px-2 py-0.5 rounded"> </span>'),fe[u],[[360,28]]),Bp=_(m('<div class="bg-surface rounded p-3 text-sm"><div class="text-xs text-muted mb-1"> </div> <pre class="whitespace-pre-wrap text-fg"> </pre></div>'),fe[u],[[365,24,[[366,28],[367,28]]]]),qp=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),fe[u],[[375,36]]),Gp=_(m('<i class="fa-solid fa-rocket mr-1"></i> ',1),fe[u],[[377,36]]),Vp=_(m('<a target="_blank" class="btn-secondary text-sm"><i class="fa-solid fa-arrow-up-right-from-square mr-1"></i> </a>'),fe[u],[[381,32,[[382,36]]]]),Kp=_(m('<div class="flex gap-2"><button class="btn-primary text-sm"><!></button> <!></div>'),fe[u],[[372,24,[[373,28]]]]),Wp=_(m('<div class="flex items-center gap-3 flex-wrap"><span class="text-sm text-muted"> </span> <span class="font-mono text-fg"> </span> <!></div> <!> <!>',1),fe[u],[[352,20,[[353,24],[354,24]]]]),Jp=_(m('<div class="bg-surface rounded p-2 text-sm text-muted"> </div>'),fe[u],[[390,20]]),Hp=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),fe[u],[[395,24]]),Yp=_(m('<i class="fa-solid fa-magnifying-glass mr-1"></i> ',1),fe[u],[[397,24]]),Qp=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-download mr-1"></i> </h3> <div class="space-y-3"><!> <!> <button class="btn-secondary text-sm"><!></button></div></div>'),fe[u],[[346,8,[[347,12,[[348,16]]],[350,12,[[393,16]]]]]]),Zp=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),fe[u],[[418,28]]),Xp=_(m('<i class="fa-solid fa-download mr-1"></i> ',1),fe[u],[[420,28]]),e_=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),fe[u],[[434,28]]),t_=_(m('<i class="fa-solid fa-upload mr-1"></i> ',1),fe[u],[[436,28]]),r_=_(m('<div class="bg-surface rounded p-2 text-sm text-muted mt-2"> </div>'),fe[u],[[441,24]]),a_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-box-archive mr-1"></i> </h3> <div class="space-y-4"><div><h4 class="text-sm font-medium mb-2"> </h4> <p class="text-xs text-muted mb-2">Download a JSON export of all agent data (memory, activity, goals, cron jobs, stats).</p> <button class="btn-primary text-sm"><!></button></div> <hr class="border-border"/> <div><h4 class="text-sm font-medium mb-2"> </h4> <p class="text-xs text-muted mb-2">Upload a previously exported backup file. Existing data will be merged (INSERT OR REPLACE).</p> <label><!> <input type="file" accept=".json" class="hidden"/></label> <!></div></div></div>'),fe[u],[[406,8,[[407,12,[[408,16]]],[410,12,[[411,16,[[412,20],[413,20],[416,20]]],[425,16],[427,16,[[428,20],[429,20],[432,20,[[438,24]]]]]]]]]]),s_=_(m('<p class="text-muted"> </p>'),fe[u],[[456,16]]),i_=_(m('<span class="text-sm text-muted">Node:</span> <span class="font-mono text-sm text-fg"> </span> <span class="text-xs text-muted font-mono"> </span>',1),fe[u],[[464,28],[465,28],[466,28]]),o_=_(m('<p class="text-sm text-muted"> </p>'),fe[u],[[471,24]]),n_=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i>'),fe[u],[[488,36]]),l_=_(m('<i class="fa-solid fa-plus mr-1"></i>'),fe[u],[[490,36]]),d_=_(m('<div class="text-sm text-muted"> </div>'),fe[u],[[496,28]]),c_=_(m('<div class="bg-surface rounded p-3 flex items-center justify-between"><div><span class="font-mono text-sm text-fg"> </span> <span class="text-xs text-muted ml-2"> </span> <span> </span> <span class="text-xs text-muted ml-2"> </span></div> <button class="text-red-400 hover:text-red-300 text-sm"><i class="fa-solid fa-xmark"></i></button></div>'),fe[u],[[504,36,[[505,40,[[506,44],[507,44],[508,44],[511,44]]],[513,40,[[514,44]]]]]]),v_=_(m('<div class="space-y-2"></div>'),fe[u],[[502,28]]),u_=_(m('<p class="text-sm text-muted"> </p>'),fe[u],[[520,28]]),f_=_(m('<div class="flex gap-2 items-end"><div class="flex-1"><label class="text-xs text-muted block mb-1"> </label> <input type="text" class="w-full bg-surface border border-border rounded px-3 py-1.5 text-sm font-mono"/></div> <button class="btn-primary text-sm"><!> </button></div> <!> <h4 class="text-sm font-medium"> </h4> <!>',1),fe[u],[[476,24,[[477,28,[[478,32],[479,32]]],[486,28]]],[500,24]]),p_=_(m('<div class="space-y-4"><div class="flex items-center gap-3"><span> </span> <!></div> <!> <button class="btn-secondary text-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div>'),fe[u],[[458,16,[[459,20,[[460,24]]],[524,20,[[525,24]]]]]]),__=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-network-wired mr-1"></i> </h3> <!></div>'),fe[u],[[450,8,[[451,12,[[452,16]]]]]]),m_=_(m('<p class="text-muted"> </p>'),fe[u],[[540,16]]),x_=_(m('<div><i></i> <span class="font-mono text-sm"> </span></div>'),fe[u],[[552,28,[[553,32],[554,32]]]]),b_=_(m('<div class="space-y-3"><div class="flex items-center gap-3"><span class="text-sm text-muted"> </span> <span class="bg-accent/20 text-accent px-2 py-1 rounded font-mono text-sm"> </span> <span class="text-sm text-muted"> </span></div> <h4 class="text-sm font-medium mt-3"> </h4> <div class="grid grid-cols-2 sm:grid-cols-3 gap-2"></div> <p class="text-xs text-muted mt-2"> </p> <button class="btn-secondary text-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div>'),fe[u],[[542,16,[[543,20,[[544,24],[545,24],[546,24]]],[549,20],[550,20],[559,20],[563,20,[[564,24]]]]]]),g_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-brain mr-1"></i> </h3> <!></div>'),fe[u],[[534,8,[[535,12,[[536,16]]]]]]),h_=_(m('<p class="text-muted"> </p>'),fe[u],[[579,16]]),y_=_(m('<div class="font-mono text-fg"> </div> <div class="text-xs text-muted truncate"> </div>',1),fe[u],[[595,28],[596,28]]),w_=_(m('<div class="font-mono text-muted"> </div>'),fe[u],[[598,28]]),k_=_(m('<div class="text-xs text-green-400"> </div>'),fe[u],[[605,28]]),T_=_(m('<div class="grid grid-cols-2 sm:grid-cols-4 gap-3"><div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div> <div class="text-xs text-muted"> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div> <div class="text-xs text-muted truncate"> </div></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <!></div> <div class="bg-surface rounded p-3"><div class="text-xs text-muted mb-1"> </div> <div class="font-mono text-fg"> </div> <!></div></div>'),fe[u],[[581,16,[[582,20,[[583,24],[584,24],[585,24]]],[587,20,[[588,24],[589,24],[590,24]]],[592,20,[[593,24]]],[601,20,[[602,24],[603,24]]]]]]),$_=_(m('<button class="btn-primary text-sm"><i class="fa-solid fa-wand-magic-sparkles mr-1"></i> </button>'),fe[u],[[610,16,[[611,20]]]]),E_=_(m('<p class="text-muted"> </p>'),fe[u],[[622,16]]),S_=_(m('<span class="text-xs text-muted"> </span>'),fe[u],[[628,24]]),C_=_(m('<span class="bg-surface px-2 py-1 rounded text-xs font-mono"> </span>'),fe[u],[[634,28]]),A_=_(m('<div class="flex flex-wrap gap-2"></div>'),fe[u],[[632,20]]),P_=_(m('<p class="text-xs text-muted mt-2"> </p>'),fe[u],[[639,20]]),O_=_(m('<div class="flex items-center gap-3 mb-3"><span></span> <span class="text-sm"> </span> <!></div> <!> <!>',1),fe[u],[[624,16,[[625,20],[626,20]]]]),j_=_(m('<p class="text-muted text-sm"> </p>'),fe[u],[[642,16]]),R_=_(m('<div class="bg-green-500/10 border border-green-500/30 rounded p-3 text-sm text-green-400"> </div>'),fe[u],[[647,12]]),L_=_(m('<p class="text-muted"> </p>'),fe[u],[[679,20]]),N_=_(m('<button class="bg-accent/20 text-accent px-2 py-1 rounded text-xs hover:bg-accent/30 transition-colors"> </button>'),fe[u],[[726,48]]),M_=_(m('<span class="text-xs text-muted"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </span>'),fe[u],[[734,52,[[735,56]]]]),D_=_(m('<button class="bg-surface text-fg px-2 py-1 rounded text-xs hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-download mr-1"></i> </button>'),fe[u],[[738,52,[[742,56]]]]),I_=_(m('<span class="text-xs text-muted">—</span>'),fe[u],[[746,48]]),F_=_(m('<tr class="border-b border-border/30 hover:bg-surface/50"><td class="py-2 pr-3"><div class="font-mono text-fg"> </div> <div class="text-xs text-muted"> </div></td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2 pr-3"><div class="flex items-center gap-1"><div class="w-16 h-2 bg-surface rounded-full overflow-hidden"><div></div></div> <span class="text-xs font-mono"> </span></div></td><td class="py-2 pr-3"><span> </span></td><td class="py-2 pr-3 text-xs"> </td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2 pr-3 font-mono text-xs"> </td><td class="py-2"><!></td></tr>'),fe[u],[[698,36,[[699,40,[[700,44],[701,44]]],[703,40],[704,40,[[705,44,[[706,48,[[707,52]]],[712,48]]]]],[715,40,[[716,44]]],[720,40],[721,40],[722,40],[723,40],[724,40]]]]),U_=_(m('<div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="text-left text-xs text-muted border-b border-border"><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2 pr-3"> </th><th class="pb-2"> </th></tr></thead><tbody></tbody></table></div>'),fe[u],[[681,20,[[682,24,[[683,28,[[684,32,[[685,36],[686,36],[687,36],[688,36],[689,36],[690,36],[691,36],[692,36],[693,36]]]]],[696,28]]]]]]),z_=_(m('<p class="text-muted text-sm"> </p>'),fe[u],[[755,20]]),B_=_(m('<div class="card"><div class="flex items-center justify-between mb-3 flex-wrap gap-2"><h3 class="text-lg font-semibold"><i class="fa-solid fa-ranking-star mr-1"></i> </h3> <div class="flex items-center gap-2"><select class="bg-surface border border-border rounded px-2 py-1 text-sm"><option> </option><option> </option><option> </option><option> </option><option> </option><option> </option></select> <button class="btn-secondary text-sm"><i class="fa-solid fa-rotate mr-1"></i> </button></div></div> <!></div>'),fe[u],[[654,12,[[655,16,[[656,20,[[657,24]]],[659,20,[[660,24,[[665,28],[666,28],[667,28],[668,28],[669,28],[670,28]]],[672,24,[[673,28]]]]]]]]]]),q_=_(m('<div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-microchip mr-1"></i> </h3> <!></div> <div class="card"><h3 class="text-lg font-semibold mb-3"><i class="fa-solid fa-server mr-1"></i> </h3> <!></div> <!> <!>',1),fe[u],[[574,8,[[575,12,[[576,16]]]]],[617,8,[[618,12,[[619,16]]]]]]),G_=_(m('<div class="space-y-4"><div class="flex gap-2 mb-4 flex-wrap"></div> <!> <!> <!> <!> <!> <!></div>'),fe[u],[[268,0,[[269,4]]]]);function fe(r,i){Cr(new.target),$r(i,!0,fe);let o=S(A("health"),"activeSection"),d=S(A(null),"health"),c=S(A(!0),"healthLoading"),f=S(A(null),"updateInfo"),b=S(A(!1),"updateLoading"),h=S(A(!1),"updateApplying"),w=S(A(""),"updateMessage"),P=S(A(!1),"backupLoading"),C=S(A(!1),"restoreLoading"),E=S(A(""),"restoreMessage"),k=S(A(null),"fedStatus"),M=S(A(!0),"fedLoading"),I=S(A(""),"addPeerAddress"),Z=S(A(!1),"addPeerLoading"),R=S(A(""),"addPeerMessage"),q=S(A(null),"backends"),ce=S(A(!0),"backendsLoading"),de=S(A(null),"systemSpecs"),$e=S(A(!1),"specsLoading"),We=S(A(rr([])),"recommendations"),Oe=S(A(!1),"recsLoading"),je=S(A(""),"useCaseFilter"),De=S(A(null),"ollamaStatus"),ct=S(A(!1),"ollamaLoading"),ke=S(A(""),"pullingModel"),ae=S(A(""),"pullStatus"),Ue=S(A(""),"configureMsg");async function ut(){p(c,!0);try{const $=(await O(fetch("/healthz")))();p(d,(await O($.json()))(),!0)}catch{p(d,{status:"error",checks:{}},!0)}p(c,!1)}async function ht(){p(b,!0),p(w,"");try{const $=(await O(fetch("/api/update/check")))();p(f,(await O($.json()))(),!0)}catch{p(w,"Failed to check for updates")}p(b,!1)}async function G(){p(h,!0),p(w,"");try{const $=(await O(fetch("/api/update/apply",{method:"POST"})))(),N=(await O($.json()))();p(w,N.message||(N.ok?"Update applied":"Update failed"),!0)}catch{p(w,"Failed to apply update")}p(h,!1)}async function we(){p(P,!0);try{const $=(await O(fetch("/api/backup")))(),N=(await O($.blob()))(),U=URL.createObjectURL(N),ee=document.createElement("a");ee.href=U,ee.download=`safe-agent-backup-${new Date().toISOString().slice(0,10)}.json`,ee.click(),URL.revokeObjectURL(U)}catch($){console.error(...tr("error","Backup download failed",$))}p(P,!1)}async function pe($){var U;const N=$.target;if((U=N.files)!=null&&U.length){p(C,!0),p(E,"");try{const ee=(await O(N.files[0].text()))(),te=JSON.parse(ee),ve=(await O(fetch("/api/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)})))(),re=(await O(ve.json()))();p(E,re.message||(re.ok?"Restore complete":"Restore failed"),!0)}catch{p(E,"Failed to restore backup")}p(C,!1),N.value=""}}async function se(){p(M,!0);try{const $=(await O(fetch("/api/federation/status")))();p(k,(await O($.json()))(),!0)}catch{p(k,{enabled:!1,peers:[]},!0)}p(M,!1)}async function V(){if(a(I).trim()){p(Z,!0),p(R,"");try{const $=(await O(fetch("/api/federation/peers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:a(I)})})))(),N=(await O($.json()))();p(R,N.message||(N.ok?"Peer added":"Failed"),!0),N.ok&&(p(I,""),se())}catch{p(R,"Failed to add peer")}p(Z,!1)}}async function T($){try{(await O(fetch(`/api/federation/peers/${$}`,{method:"DELETE"})))(),se()}catch(N){console.error(...tr("error","Failed to remove peer",N))}}async function F(){p(ce,!0);try{const $=(await O(fetch("/api/llm/backends")))();p(q,(await O($.json()))(),!0)}catch{p(q,{active:"unknown",available:[]},!0)}p(ce,!1)}async function _e(){p($e,!0);try{const $=(await O(fetch("/api/llm/advisor/system")))();p(de,(await O($.json()))(),!0)}catch{p(de,null)}p($e,!1)}async function K(){p(Oe,!0);try{const $=new URLSearchParams;a(je)&&$.set("use_case",a(je)),$.set("limit","20");const N=(await O(fetch(`/api/llm/advisor/recommend?${$}`)))(),U=(await O(N.json()))();p(We,U.models||[],!0)}catch{p(We,[],!0)}p(Oe,!1)}async function qe(){p(ct,!0);try{const $=(await O(fetch("/api/llm/ollama/status")))();p(De,(await O($.json()))(),!0)}catch{p(De,{available:!1,installed_models:[]},!0)}p(ct,!1)}async function ze($){p(ke,$,!0),p(ae,l("ops.advisor_pulling"),!0);try{const N=(await O(fetch("/api/llm/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:$})})))(),U=(await O(N.json()))();U.ok?(p(ae,l("ops.advisor_pull_complete"),!0),qe(),K()):p(ae,U.error||"Pull failed",!0)}catch{p(ae,"Pull failed")}setTimeout(()=>{p(ke,""),p(ae,"")},3e3)}async function be($){p(Ue,"");try{const N=(await O(fetch("/api/llm/ollama/configure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:$})})))(),U=(await O(N.json()))();p(Ue,U.ok?l("ops.advisor_configured",{model:$}):U.error||"Failed",!0),F()}catch{p(Ue,"Configuration failed")}setTimeout(()=>{p(Ue,"")},5e3)}fi(()=>{ut(),se(),F()});const tt=[{id:"health",label:l("ops.health"),icon:"fa-heart-pulse"},{id:"update",label:l("ops.updates"),icon:"fa-download"},{id:"backup",label:l("ops.backup"),icon:"fa-box-archive"},{id:"federation",label:l("ops.federation"),icon:"fa-network-wired"},{id:"backends",label:l("ops.llm_backends"),icon:"fa-brain"},{id:"advisor",label:l("ops.model_advisor"),icon:"fa-microchip"}];var Q={...Ar()},D=G_(),L=e(D);g(()=>Wt(L,21,()=>tt,fr,($,N)=>{var U=Np(),ee=e(U),te=s(ee);x(()=>{at(U,1,`px-3 py-1.5 rounded text-sm transition-colors ${j(a(o),a(N).id)?"bg-accent text-white":"bg-surface text-muted hover:text-fg"}`),at(ee,1,`fa-solid ${a(N).icon??""} mr-1`),n(te,` ${a(N).label??""}`)}),oe("click",U,function(){return p(o,a(N).id,!0)}),v($,U)}),"each",fe,270,8);var ge=s(L,2);{var Ze=$=>{var N=Fp(),U=Te(N),ee=e(U),te=s(e(ee)),ve=s(ee,2);{var re=le=>{var Y=Mp(),ne=e(Y);x(me=>n(ne,me),[()=>l("ops.checking_health")]),v(le,Y)},z=le=>{var Y=Ip(),ne=e(Y),me=e(ne),ye=e(me),Ie=s(me,2),Ee=e(Ie),Fe=s(ne,2);{var Ye=Se=>{var st=Dp(),lt=e(st),B=e(lt),W=e(B),Re=s(B,2),Le=e(Re),rt=s(lt,2),wt=e(rt),dt=e(wt),Ge=s(wt,2),Ne=e(Ge),Me=s(rt,2),gt=e(Me),et=e(gt),ft=s(gt,2),ot=e(ft);x((Je,St,$t)=>{n(W,Je),at(Re,1,`font-mono ${j(a(d).checks.database,"ok")?"text-green-400":"text-red-400"}`),n(Le,a(d).checks.database),n(dt,St),at(Ge,1,`font-mono ${j(a(d).checks.agent,"running")?"text-green-400":"text-yellow-400"}`),n(Ne,a(d).checks.agent),n(et,$t),n(ot,a(d).checks.tools)},[()=>l("ops.database"),()=>l("ops.agent"),()=>l("ops.tools")]),v(Se,st)};g(()=>y(Fe,Se=>{a(d).checks&&Se(Ye)}),"if",fe,297,20)}var Qe=s(Fe,2),Ke=s(e(Qe));x((Se,st)=>{at(me,1,`px-3 py-1 rounded text-sm font-mono font-bold ${j(a(d).status,"healthy")?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),n(ye,Se),n(Ee,`v${a(d).version??""}`),n(Ke,` ${st??""}`)},[()=>{var Se;return(Se=a(d).status)==null?void 0:Se.toUpperCase()},()=>l("common.refresh")]),oe("click",Qe,ut),v(le,Y)};g(()=>y(ve,le=>{a(c)?le(re):a(d)&&le(z,1)}),"if",fe,286,12)}var ue=s(U,2),Ae=e(ue),xe=s(e(Ae)),bt=s(Ae,2),He=e(bt),he=s(bt,2),Xe=e(he),Ve=s(he,2),nt=e(Ve),Pe=s(e(nt));x((le,Y,ne,me,ye)=>{n(te,` ${le??""}`),n(xe,` ${Y??""}`),n(He,ne),n(Xe,me),n(Pe,` ${ye??""}`)},[()=>l("ops.health_check"),()=>l("ops.prometheus"),()=>l("ops.prometheus_desc"),()=>l("ops.prometheus_hint"),()=>l("ops.view_raw_metrics")]),oe("click",nt,function(){return window.open("/metrics","_blank")}),v($,N)};g(()=>y(ge,$=>{j(a(o),"health")&&$(Ze)}),"if",fe,281,4)}var vt=s(ge,2);{var it=$=>{var N=Qp(),U=e(N),ee=s(e(U)),te=s(U,2),ve=e(te);{var re=he=>{var Xe=Wp(),Ve=Te(Xe),nt=e(Ve),Pe=e(nt),le=s(nt,2),Y=e(le),ne=s(le,2);{var me=Qe=>{var Ke=Up(),Se=s(Te(Ke),2),st=e(Se),lt=s(Se,2),B=e(lt);x(W=>{n(st,`v${a(f).latest_version??""}`),n(B,W)},[()=>l("ops.update_available")]),v(Qe,Ke)},ye=Qe=>{var Ke=zp(),Se=e(Ke);x(st=>n(Se,st),[()=>l("ops.up_to_date")]),v(Qe,Ke)};g(()=>y(ne,Qe=>{a(f).update_available?Qe(me):Qe(ye,!1)}),"if",fe,355,24)}var Ie=s(Ve,2);{var Ee=Qe=>{var Ke=Bp(),Se=e(Ke),st=e(Se),lt=s(Se,2),B=e(lt);x(W=>{n(st,W),n(B,a(f).release_notes)},[()=>l("ops.release_notes")]),v(Qe,Ke)};g(()=>y(Ie,Qe=>{a(f).update_available&&a(f).release_notes&&Qe(Ee)}),"if",fe,364,20)}var Fe=s(Ie,2);{var Ye=Qe=>{var Ke=Kp(),Se=e(Ke),st=e(Se);{var lt=Le=>{var rt=qp(),wt=s(Te(rt));x(dt=>n(wt,` ${dt??""}`),[()=>l("ops.applying")]),v(Le,rt)},B=Le=>{var rt=Gp(),wt=s(Te(rt));x(dt=>n(wt,` ${dt??""}`),[()=>l("ops.apply_update")]),v(Le,rt)};g(()=>y(st,Le=>{a(h)?Le(lt):Le(B,!1)}),"if",fe,374,32)}var W=s(Se,2);{var Re=Le=>{var rt=Vp(),wt=s(e(rt));x(dt=>{Lt(rt,"href",a(f).release_url),n(wt,` ${dt??""}`)},[()=>l("ops.view_release")]),v(Le,rt)};g(()=>y(W,Le=>{a(f).release_url&&Le(Re)}),"if",fe,380,28)}x(()=>Se.disabled=a(h)),oe("click",Se,G),v(Qe,Ke)};g(()=>y(Fe,Qe=>{a(f).update_available&&Qe(Ye)}),"if",fe,371,20)}x(Qe=>{n(Pe,Qe),n(Y,`v${a(f).current_version??""}`)},[()=>l("ops.current_version")]),v(he,Xe)};g(()=>y(ve,he=>{a(f)&&he(re)}),"if",fe,351,16)}var z=s(ve,2);{var ue=he=>{var Xe=Jp(),Ve=e(Xe);x(()=>n(Ve,a(w))),v(he,Xe)};g(()=>y(z,he=>{a(w)&&he(ue)}),"if",fe,389,16)}var Ae=s(z,2),xe=e(Ae);{var bt=he=>{var Xe=Hp(),Ve=s(Te(Xe));x(nt=>n(Ve,` ${nt??""}`),[()=>l("ops.checking")]),v(he,Xe)},He=he=>{var Xe=Yp(),Ve=s(Te(Xe));x(nt=>n(Ve,` ${nt??""}`),[()=>l("ops.check_updates")]),v(he,Xe)};g(()=>y(xe,he=>{a(b)?he(bt):he(He,!1)}),"if",fe,394,20)}x(he=>{n(ee,` ${he??""}`),Ae.disabled=a(b)},[()=>l("ops.auto_update")]),oe("click",Ae,ht),v($,N)};g(()=>y(vt,$=>{j(a(o),"update")&&$(it)}),"if",fe,345,4)}var J=s(vt,2);{var Be=$=>{var N=a_(),U=e(N),ee=s(e(U)),te=s(U,2),ve=e(te),re=e(ve),z=e(re),ue=s(re,4),Ae=e(ue);{var xe=ye=>{var Ie=Zp(),Ee=s(Te(Ie));x(Fe=>n(Ee,` ${Fe??""}`),[()=>l("ops.exporting")]),v(ye,Ie)},bt=ye=>{var Ie=Xp(),Ee=s(Te(Ie));x(Fe=>n(Ee,` ${Fe??""}`),[()=>l("ops.download_backup")]),v(ye,Ie)};g(()=>y(Ae,ye=>{a(P)?ye(xe):ye(bt,!1)}),"if",fe,417,24)}var He=s(ve,4),he=e(He),Xe=e(he),Ve=s(he,4),nt=e(Ve);{var Pe=ye=>{var Ie=e_(),Ee=s(Te(Ie));x(Fe=>n(Ee,` ${Fe??""}`),[()=>l("ops.restoring")]),v(ye,Ie)},le=ye=>{var Ie=t_(),Ee=s(Te(Ie));x(Fe=>n(Ee,` ${Fe??""}`),[()=>l("ops.upload_backup")]),v(ye,Ie)};g(()=>y(nt,ye=>{a(C)?ye(Pe):ye(le,!1)}),"if",fe,433,24)}var Y=s(nt,2),ne=s(Ve,2);{var me=ye=>{var Ie=r_(),Ee=e(Ie);x(()=>n(Ee,a(E))),v(ye,Ie)};g(()=>y(ne,ye=>{a(E)&&ye(me)}),"if",fe,440,20)}x((ye,Ie,Ee)=>{n(ee,` ${ye??""}`),n(z,Ie),ue.disabled=a(P),n(Xe,Ee),at(Ve,1,`btn-secondary text-sm inline-flex items-center cursor-pointer ${a(C)?"opacity-50":""}`),Y.disabled=a(C)},[()=>l("ops.backup_restore"),()=>l("ops.export_backup"),()=>l("ops.restore_backup")]),oe("click",ue,we),oe("change",Y,pe),v($,N)};g(()=>y(J,$=>{j(a(o),"backup")&&$(Be)}),"if",fe,405,4)}var _t=s(J,2);{var Rt=$=>{var N=__(),U=e(N),ee=s(e(U)),te=s(U,2);{var ve=z=>{var ue=s_(),Ae=e(ue);x(xe=>n(Ae,xe),[()=>l("ops.federation_loading")]),v(z,ue)},re=z=>{var ue=p_(),Ae=e(ue),xe=e(Ae),bt=e(xe),He=s(xe,2);{var he=Y=>{var ne=i_(),me=s(Te(ne),2),ye=e(me),Ie=s(me,2),Ee=e(Ie);x(Fe=>{n(ye,a(k).node.name),n(Ee,`(${Fe??""}...)`)},[()=>a(k).node.node_id.slice(0,8)]),v(Y,ne)};g(()=>y(He,Y=>{a(k).node&&Y(he)}),"if",fe,463,24)}var Xe=s(Ae,2);{var Ve=Y=>{var ne=o_(),me=e(ne);x(ye=>n(me,ye),[()=>l("ops.federation_disabled")]),v(Y,ne)},nt=Y=>{var ne=f_(),me=Te(ne),ye=e(me),Ie=e(ye),Ee=e(Ie),Fe=s(Ie,2),Ye=s(ye,2),Qe=e(Ye);{var Ke=dt=>{var Ge=n_();v(dt,Ge)},Se=dt=>{var Ge=l_();v(dt,Ge)};g(()=>y(Qe,dt=>{a(Z)?dt(Ke):dt(Se,!1)}),"if",fe,487,32)}var st=s(Qe),lt=s(me,2);{var B=dt=>{var Ge=d_(),Ne=e(Ge);x(()=>n(Ne,a(R))),v(dt,Ge)};g(()=>y(lt,dt=>{a(R)&&dt(B)}),"if",fe,495,24)}var W=s(lt,2),Re=e(W),Le=s(W,2);{var rt=dt=>{var Ge=v_();g(()=>Wt(Ge,21,()=>a(k).peers,fr,(Ne,Me)=>{var gt=c_(),et=e(gt),ft=e(et),ot=e(ft,!0);var Je=s(ft,2),St=e(Je,!0);var $t=s(Je,2),kt=e($t,!0);var Ut=s($t,2),Dt=e(Ut);var Ot=s(et,2);x(Bt=>{n(ot,a(Me).name),n(St,a(Me).address),at($t,1,`ml-2 px-1.5 py-0.5 rounded text-xs ${j(a(Me).status,"online")?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),n(kt,a(Me).status),n(Dt,`v${a(Me).version??""}`),Lt(Ot,"title",Bt)},[()=>l("ops.remove_peer_title")]),oe("click",Ot,function(){return T(a(Me).node_id)}),v(Ne,gt)}),"each",fe,503,32),v(dt,Ge)},wt=dt=>{var Ge=u_(),Ne=e(Ge);x(Me=>n(Ne,Me),[()=>l("ops.no_peers")]),v(dt,Ge)};g(()=>y(Le,dt=>{var Ge;(Ge=a(k).peers)!=null&&Ge.length?dt(rt):dt(wt,!1)}),"if",fe,501,24)}x((dt,Ge,Ne,Me)=>{n(Ee,dt),Lt(Fe,"placeholder",Ge),Ye.disabled=a(Z),n(st,` ${Ne??""}`),n(Re,Me)},[()=>l("ops.add_peer"),()=>l("ops.peer_placeholder"),()=>l("ops.add"),()=>l("ops.peers_count",{count:a(k).peer_count||0})]),vr(Fe,function(){return a(I)},function(Ge){p(I,Ge)}),oe("click",Ye,V),v(Y,ne)};g(()=>y(Xe,Y=>{a(k).enabled?Y(nt,!1):Y(Ve)}),"if",fe,470,20)}var Pe=s(Xe,2),le=s(e(Pe));x(Y=>{at(xe,1,`px-2 py-1 rounded text-xs font-semibold ${a(k).enabled?"bg-green-500/20 text-green-400":"bg-surface text-muted"}`),n(bt,a(k).enabled?"ENABLED":"DISABLED"),n(le,` ${Y??""}`)},[()=>l("common.refresh")]),oe("click",Pe,se),v(z,ue)};g(()=>y(te,z=>{a(M)?z(ve):a(k)&&z(re,1)}),"if",fe,455,12)}x(z=>n(ee,` ${z??""}`),[()=>l("ops.federation_title")]),v($,N)};g(()=>y(_t,$=>{j(a(o),"federation")&&$(Rt)}),"if",fe,449,4)}var Et=s(_t,2);{var pt=$=>{var N=g_(),U=e(N),ee=s(e(U)),te=s(U,2);{var ve=z=>{var ue=m_(),Ae=e(ue);x(xe=>n(Ae,xe),[()=>l("ops.loading_backends")]),v(z,ue)},re=z=>{var ue=b_(),Ae=e(ue),xe=e(Ae),bt=e(xe),He=s(xe,2),he=e(He),Xe=s(He,2),Ve=e(Xe),nt=s(Ae,2),Pe=e(nt),le=s(nt,2);g(()=>Wt(le,21,()=>a(q).available,fr,(Ie,Ee)=>{var Fe=x_(),Ye=e(Fe),Qe=s(Ye,2),Ke=e(Qe,!0);x(()=>{at(Fe,1,`bg-surface rounded p-3 flex items-center gap-2 ${j(a(Ee),a(q).active)?"ring-1 ring-accent":""}`),at(Ye,1,`fa-solid ${j(a(Ee),a(q).active)?"fa-circle-check text-accent":"fa-circle text-muted"} text-xs`),n(Ke,a(Ee))}),v(Ie,Fe)}),"each",fe,551,24);var Y=s(le,2),ne=e(Y),me=s(Y,2),ye=s(e(me));x((Ie,Ee,Fe,Ye)=>{n(bt,Ie),n(he,a(q).active),n(Ve,`(${a(q).active_info??""})`),n(Pe,Ee),n(ne,Fe),n(ye,` ${Ye??""}`)},[()=>l("ops.active_backend"),()=>l("ops.available_backends"),()=>l("ops.switch_backend_hint"),()=>l("common.refresh")]),oe("click",me,F),v(z,ue)};g(()=>y(te,z=>{a(ce)?z(ve):a(q)&&z(re,1)}),"if",fe,539,12)}x(z=>n(ee,` ${z??""}`),[()=>l("ops.llm_plugins")]),v($,N)};g(()=>y(Et,$=>{j(a(o),"backends")&&$(pt)}),"if",fe,533,4)}var X=s(Et,2);{var ie=$=>{var N=q_(),U=Te(N),ee=e(U),te=s(e(ee)),ve=s(ee,2);{var re=ne=>{var me=h_(),ye=e(me);x(Ie=>n(ye,Ie),[()=>l("common.loading")]),v(ne,me)},z=ne=>{var me=T_(),ye=e(me),Ie=e(ye),Ee=e(Ie),Fe=s(Ie,2),Ye=e(Fe),Qe=s(Fe,2),Ke=e(Qe),Se=s(ye,2),st=e(Se),lt=e(st),B=s(st,2),W=e(B),Re=s(B,2),Le=e(Re),rt=s(Se,2),wt=e(rt),dt=e(wt),Ge=s(wt,2);{var Ne=kt=>{var Ut=y_(),Dt=Te(Ut),Ot=e(Dt),Bt=s(Dt,2),ur=e(Bt);x(or=>{n(Ot,`${or??""} GB VRAM`),Lt(Bt,"title",a(de).gpu_name),n(ur,`${(a(de).gpu_name||"GPU")??""}${a(de).gpu_count>1?` (×${a(de).gpu_count})`:""}`)},[()=>{var or;return((or=a(de).gpu_vram_gb)==null?void 0:or.toFixed(1))??"?"}]),v(kt,Ut)},Me=kt=>{var Ut=w_(),Dt=e(Ut);x(Ot=>n(Dt,Ot),[()=>l("ops.advisor_no_gpu")]),v(kt,Ut)};g(()=>y(Ge,kt=>{a(de).has_gpu?kt(Ne):kt(Me,!1)}),"if",fe,594,24)}var gt=s(rt,2),et=e(gt),ft=e(et),ot=s(et,2),Je=e(ot),St=s(ot,2);{var $t=kt=>{var Ut=k_(),Dt=e(Ut);x(Ot=>n(Dt,Ot),[()=>l("ops.advisor_unified")]),v(kt,Ut)};g(()=>y(St,kt=>{a(de).unified_memory&&kt($t)}),"if",fe,604,24)}x((kt,Ut,Dt,Ot,Bt,ur,or,hr)=>{n(Ee,kt),n(Ye,`${Ut??""} GB`),n(Ke,`${Dt??""} GB ${Ot??""}`),n(lt,Bt),n(W,`${a(de).cpu_cores??""} ${ur??""}`),Lt(Re,"title",a(de).cpu_name),n(Le,a(de).cpu_name),n(dt,or),n(ft,hr),n(Je,a(de).backend)},[()=>l("ops.advisor_ram"),()=>{var kt;return(kt=a(de).total_ram_gb)==null?void 0:kt.toFixed(1)},()=>{var kt;return(kt=a(de).available_ram_gb)==null?void 0:kt.toFixed(1)},()=>l("ops.advisor_available"),()=>l("ops.advisor_cpu"),()=>l("ops.advisor_cores"),()=>l("ops.advisor_gpu"),()=>l("ops.advisor_backend_accel")]),v(ne,me)},ue=ne=>{var me=$_(),ye=s(e(me));x(Ie=>n(ye,` ${Ie??""}`),[()=>l("ops.advisor_detect")]),oe("click",me,function(){_e(),K(),qe()}),v(ne,me)};g(()=>y(ve,ne=>{a($e)?ne(re):a(de)?ne(z,1):ne(ue,!1)}),"if",fe,578,12)}var Ae=s(U,2),xe=e(Ae),bt=s(e(xe)),He=s(xe,2);{var he=ne=>{var me=E_(),ye=e(me);x(Ie=>n(ye,Ie),[()=>l("common.loading")]),v(ne,me)},Xe=ne=>{var me=O_(),ye=Te(me),Ie=e(ye),Ee=s(Ie,2),Fe=e(Ee),Ye=s(Ee,2);{var Qe=B=>{var W=S_(),Re=e(W);x(Le=>n(Re,`(${a(De).installed_models.length??""} ${Le??""})`),[()=>l("ops.advisor_models_installed")]),v(B,W)};g(()=>y(Ye,B=>{var W;a(De).available&&((W=a(De).installed_models)!=null&&W.length)&&B(Qe)}),"if",fe,627,20)}var Ke=s(ye,2);{var Se=B=>{var W=A_();g(()=>Wt(W,21,()=>a(De).installed_models,fr,(Re,Le)=>{var rt=C_(),wt=e(rt,!0);x(()=>n(wt,a(Le))),v(Re,rt)}),"each",fe,633,24),v(B,W)};g(()=>y(Ke,B=>{var W;a(De).available&&((W=a(De).installed_models)!=null&&W.length)&&B(Se)}),"if",fe,631,16)}var st=s(Ke,2);{var lt=B=>{var W=P_(),Re=e(W);x(Le=>n(Re,Le),[()=>l("ops.ollama_install_hint")]),v(B,W)};g(()=>y(st,B=>{a(De).available||B(lt)}),"if",fe,638,16)}x(B=>{at(Ie,1,`w-3 h-3 rounded-full ${a(De).available?"bg-green-500":"bg-red-500"}`),n(Fe,B)},[()=>a(De).available?l("ops.ollama_running"):l("ops.ollama_not_running")]),v(ne,me)},Ve=ne=>{var me=j_(),ye=e(me);x(Ie=>n(ye,Ie),[()=>l("ops.advisor_detect_first")]),v(ne,me)};g(()=>y(He,ne=>{a(ct)?ne(he):a(De)?ne(Xe,1):ne(Ve,!1)}),"if",fe,621,12)}var nt=s(Ae,2);{var Pe=ne=>{var me=R_(),ye=e(me);x(()=>n(ye,a(Ue))),v(ne,me)};g(()=>y(nt,ne=>{a(Ue)&&ne(Pe)}),"if",fe,646,8)}var le=s(nt,2);{var Y=ne=>{var me=B_(),ye=e(me),Ie=e(ye),Ee=s(e(Ie)),Fe=s(Ie,2),Ye=e(Fe),Qe=e(Ye),Ke=e(Qe);Qe.value=Qe.__value="";var Se=s(Qe),st=e(Se);Se.value=Se.__value="general";var lt=s(Se),B=e(lt);lt.value=lt.__value="coding";var W=s(lt),Re=e(W);W.value=W.__value="reasoning";var Le=s(W),rt=e(Le);Le.value=Le.__value="chat";var wt=s(Le),dt=e(wt);wt.value=wt.__value="multimodal";var Ge=s(Ye,2),Ne=s(e(Ge)),Me=s(ye,2);{var gt=ot=>{var Je=L_(),St=e(Je);x($t=>n(St,$t),[()=>l("ops.advisor_analyzing")]),v(ot,Je)},et=ot=>{var Je=U_(),St=e(Je),$t=e(St),kt=e($t),Ut=e(kt),Dt=e(Ut),Ot=s(Ut),Bt=e(Ot),ur=s(Ot),or=e(ur),hr=s(ur),pr=e(hr),At=s(hr),Nt=e(At),cr=s(At),xt=e(cr),Pt=s(cr),It=e(Pt),Ft=s(Pt),qt=e(Ft),Yt=s(Ft),xr=e(Yt),Pr=s($t);g(()=>Wt(Pr,21,()=>a(We),fr,(Hr,ir)=>{var Zr=F_(),Or=e(Zr),Xr=e(Or),da=e(Xr,!0);var ca=s(Xr,2),jr=e(ca);var Nr=s(Or),Jt=e(Nr);var zt=s(Nr),nr=e(zt),_r=e(nr),es=e(_r);var ts=s(_r,2),xs=e(ts,!0);var qa=s(zt),bs=e(qa),pi=e(bs,!0);var rs=s(qa),Gs=e(rs,!0);var gs=s(rs),_i=e(gs,!0);var Ct=s(gs),Mt=e(Ct,!0);var Qt=s(Ct),lr=e(Qt);var Ir=s(Qt),sa=e(Ir);{var ba=mr=>{var Fr=N_(),Ga=e(Fr,!0);x(Va=>n(Ga,Va),[()=>l("ops.advisor_use")]),oe("click",Fr,function(){return be(a(ir).ollama_tag||a(ir).name)}),v(mr,Fr)},Pa=mr=>{var Fr=Sr(),Ga=Te(Fr);{var Va=as=>{var ga=M_(),xi=s(e(ga),1,!0);x(()=>n(xi,a(ae))),v(as,ga)},mi=as=>{var ga=D_(),xi=s(e(ga),1,!0);x(Ui=>n(xi,Ui),[()=>l("ops.advisor_install")]),oe("click",ga,function(){return ze(a(ir).ollama_tag)}),v(as,ga)};g(()=>y(Ga,as=>{j(a(ke),a(ir).ollama_tag)?as(Va):as(mi,!1)}),"if",fe,733,48)}v(mr,Fr)},Vs=mr=>{var Fr=I_();v(mr,Fr)};g(()=>y(sa,mr=>{var Fr;a(ir).installed?mr(ba):a(ir).ollama_tag&&((Fr=a(De))!=null&&Fr.available)?mr(Pa,1):mr(Vs,!1)}),"if",fe,725,44)}x((mr,Fr,Ga,Va,mi)=>{n(da,a(ir).name),n(jr,`${a(ir).provider??""} · ${a(ir).use_case??""}`),n(Jt,`${mr??""}B`),at(es,1,`h-full rounded-full ${a(ir).score>=70?"bg-green-500":a(ir).score>=40?"bg-yellow-500":"bg-red-500"}`),Js(es,`width: ${Fr??""}%`),n(xs,Ga),at(bs,1,`px-1.5 py-0.5 rounded text-xs ${j(a(ir).fit_level,"Perfect")?"bg-green-500/20 text-green-400":j(a(ir).fit_level,"Good")?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`),n(pi,a(ir).fit_level),n(Gs,a(ir).run_mode),n(_i,a(ir).best_quant),n(Mt,Va),n(lr,`${mi??""} GB`)},[()=>{var mr;return(mr=a(ir).params_b)==null?void 0:mr.toFixed(1)},()=>Math.min(a(ir).score,100),()=>{var mr;return(mr=a(ir).score)==null?void 0:mr.toFixed(0)},()=>{var mr;return(mr=a(ir).estimated_tps)==null?void 0:mr.toFixed(1)},()=>{var mr;return(mr=a(ir).memory_required_gb)==null?void 0:mr.toFixed(1)}]),v(Hr,Zr)}),"each",fe,697,32),x((Hr,ir,Zr,Or,Xr,da,ca,jr,Nr)=>{n(Dt,Hr),n(Bt,ir),n(or,Zr),n(pr,Or),n(Nt,Xr),n(xt,da),n(It,ca),n(qt,jr),n(xr,Nr)},[()=>l("ops.advisor_col_name"),()=>l("ops.advisor_col_params"),()=>l("ops.advisor_col_score"),()=>l("ops.advisor_col_fit"),()=>l("ops.advisor_col_mode"),()=>l("ops.advisor_col_quant"),()=>l("ops.advisor_col_tps"),()=>l("ops.advisor_col_mem"),()=>l("ops.advisor_col_action")]),v(ot,Je)},ft=ot=>{var Je=z_(),St=e(Je);x($t=>n(St,$t),[()=>l("ops.advisor_no_models")]),v(ot,Je)};g(()=>y(Me,ot=>{a(Oe)?ot(gt):a(We).length?ot(et,1):ot(ft,!1)}),"if",fe,678,16)}x((ot,Je,St,$t,kt,Ut,Dt,Ot)=>{n(Ee,` ${ot??""}`),n(Ke,Je),n(st,St),n(B,$t),n(Re,kt),n(rt,Ut),n(dt,Dt),n(Ne,` ${Ot??""}`)},[()=>l("ops.recommended_models"),()=>l("ops.advisor_all_use_cases"),()=>l("ops.advisor_uc_general"),()=>l("ops.advisor_uc_coding"),()=>l("ops.advisor_uc_reasoning"),()=>l("ops.advisor_uc_chat"),()=>l("ops.advisor_uc_multimodal"),()=>l("common.refresh")]),oe("change",Ye,function(){return K()}),Fi(Ye,function(){return a(je)},function(Je){p(je,Je)}),oe("click",Ge,K),v(ne,me)};g(()=>y(le,ne=>{a(de)&&ne(Y)}),"if",fe,653,8)}x((ne,me)=>{n(te,` ${ne??""}`),n(bt,` ${me??""}`)},[()=>l("ops.system_specs"),()=>l("ops.ollama_status")]),v($,N)};g(()=>y(X,$=>{j(a(o),"advisor")&&$(ie)}),"if",fe,572,4)}return v(r,D),Er(Q)}Dr(["click","change"]);gr[u]="src/components/UsersPanel.svelte";var V_=_(m('<button class="btn-primary text-sm"><i class="fa-solid fa-plus mr-1"></i> </button>'),gr[u],[[143,12,[[144,16]]]]),K_=_(m('<div class="bg-surface rounded p-2 text-sm text-muted mb-3"> </div>'),gr[u],[[150,8]]),W_=_(m('<div class="bg-surface rounded p-4 mb-4 space-y-3"><h4 class="text-sm font-medium"> </h4> <div class="grid grid-cols-1 sm:grid-cols-2 gap-3"><div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="jdoe" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="Jane Doe" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <select class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"><option>Admin</option><option>User</option><option>Viewer</option></select></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="password" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="email" placeholder="jane@example.com" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="123456789" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <div><label class="text-xs text-muted block mb-1"> </label> <input type="text" placeholder="+15551234567" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div></div> <div class="flex gap-2"><button class="btn-primary text-sm"><i class="fa-solid fa-check mr-1"></i> </button> <button class="btn-secondary text-sm"> </button></div></div>'),gr[u],[[155,8,[[156,12],[157,12,[[158,16,[[159,20],[160,20]]],[162,16,[[163,20],[164,20]]],[166,16,[[167,20],[168,20,[[169,24],[170,24],[171,24]]]]],[174,16,[[175,20],[176,20]]],[178,16,[[179,20],[180,20]]],[182,16,[[183,20],[184,20]]],[186,16,[[187,20],[188,20]]]]],[191,12,[[192,16,[[193,20]]],[195,16]]]]]]),J_=_(m('<p class="text-muted text-sm"> </p>'),gr[u],[[202,8]]),H_=_(m('<p class="text-muted text-sm"> </p>'),gr[u],[[204,8]]),Y_=_(m('<span class="px-1.5 py-0.5 rounded text-xs bg-red-500/20 text-red-400"> </span>'),gr[u],[[219,36]]),Q_=_(m('<span><i class="fa-solid fa-envelope mr-0.5"></i> </span>'),gr[u],[[224,36,[[224,42]]]]),Z_=_(m('<span><i class="fa-brands fa-telegram mr-0.5"></i> </span>'),gr[u],[[227,36,[[227,42]]]]),X_=_(m('<span><i class="fa-brands fa-whatsapp mr-0.5"></i> </span>'),gr[u],[[230,36,[[230,42]]]]),em=_(m('<div class="flex items-center gap-2 flex-shrink-0"><select class="bg-bg border border-border rounded px-2 py-1 text-xs"><option>Admin</option><option>User</option><option>Viewer</option></select> <button> </button> <button class="text-xs px-2 py-1 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30"><i class="fa-solid fa-trash"></i></button></div>'),gr[u],[[238,24,[[239,28,[[244,32],[245,32],[246,32]]],[248,28],[255,28,[[260,32]]]]]]),tm=_(m('<div class="bg-surface rounded p-3 flex items-center justify-between gap-3 flex-wrap"><div class="flex items-center gap-3 min-w-0"><div class="w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center text-accent font-bold text-sm flex-shrink-0"> </div> <div class="min-w-0"><div class="flex items-center gap-2"><span class="font-medium text-fg truncate"> </span> <span class="text-xs text-muted font-mono"> </span> <span> </span> <!></div> <div class="flex gap-3 text-xs text-muted mt-0.5"><!> <!> <!> <span> </span></div></div></div> <!></div>'),gr[u],[[208,16,[[209,20,[[210,24],[213,24,[[214,28,[[215,32],[216,32],[217,32]]],[222,28,[[232,32]]]]]]]]]]),rm=_(m('<div class="space-y-2"></div>'),gr[u],[[206,8]]),am=_(m('<div class="card"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"><i class="fa-solid fa-users mr-1"></i> </h3> <!></div> <!> <!> <!></div>'),gr[u],[[137,0,[[138,4,[[139,8,[[140,12]]]]]]]]);function gr(r,i){Cr(new.target),$r(i,!0,gr);let o=S(A(rr([])),"users"),d=S(A(!0),"loading"),c=S(A(!1),"showCreateForm"),f=S(A(""),"message"),b=S(A(""),"newUsername"),h=S(A(""),"newDisplayName"),w=S(A("user"),"newRole"),P=S(A(""),"newPassword"),C=S(A(""),"newEmail"),E=S(A(""),"newTelegramId"),k=S(A(""),"newWhatsappId");async function M(){p(d,!0);try{const T=(await O(fetch("/api/users")))(),F=(await O(T.json()))();p(o,F.users||[],!0)}catch{p(o,[],!0)}p(d,!1)}async function I(){p(f,"");const T={username:a(b),display_name:a(h)||a(b),role:a(w),password:a(P)};a(C)&&(T.email=a(C)),a(E)&&(T.telegram_id=parseInt(a(E))),a(k)&&(T.whatsapp_id=a(k));try{(await O(fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)})))().ok?(p(f,l("users.created",{username:a(b)}),!0),p(b,""),p(h,""),p(w,"user"),p(P,""),p(C,""),p(E,""),p(k,""),p(c,!1),M()):p(f,l("users.failed_create"),!0)}catch{p(f,l("users.error_create"),!0)}}async function Z(T){try{(await O(fetch(`/api/users/${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!T.enabled})})))(),M()}catch{p(f,l("users.failed_update"),!0)}}async function R(T,F){try{(await O(fetch(`/api/users/${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:F})})))(),M()}catch{p(f,l("users.failed_role"),!0)}}async function q(T){if(confirm(l("users.delete_confirm",{username:T.username})))try{(await O(fetch(`/api/users/${T.id}`,{method:"DELETE"})))(),M()}catch{p(f,l("users.failed_delete"),!0)}}function ce(T){switch(T){case"admin":return"bg-red-500/20 text-red-400";case"viewer":return"bg-blue-500/20 text-blue-400";default:return"bg-green-500/20 text-green-400"}}function de(T){if(!T)return l("users.never");const F=new Date(T+"Z"),_e=Date.now()-F.getTime();return _e<6e4?l("users.just_now"):_e<36e5?`${Math.floor(_e/6e4)}m ago`:_e<864e5?`${Math.floor(_e/36e5)}h ago`:`${Math.floor(_e/864e5)}d ago`}fi(M);const $e=S(Br(()=>j(sr.role,"admin")||!sr.userId),"isAdmin");var We={...Ar()},Oe=am(),je=e(Oe),De=e(je),ct=s(e(De)),ke=s(De,2);{var ae=T=>{var F=V_(),_e=s(e(F));x(K=>n(_e,` ${K??""}`),[()=>l("users.add_user")]),oe("click",F,function(){return p(c,!a(c))}),v(T,F)};g(()=>y(ke,T=>{a($e)&&T(ae)}),"if",gr,142,8)}var Ue=s(je,2);{var ut=T=>{var F=K_(),_e=e(F);x(()=>n(_e,a(f))),v(T,F)};g(()=>y(Ue,T=>{a(f)&&T(ut)}),"if",gr,149,4)}var ht=s(Ue,2);{var G=T=>{var F=W_(),_e=e(F),K=e(_e),qe=s(_e,2),ze=e(qe),be=e(ze),tt=e(be),Q=s(be,2),D=s(ze,2),L=e(D),ge=e(L),Ze=s(L,2),vt=s(D,2),it=e(vt),J=e(it),Be=s(it,2),_t=e(Be);_t.value=_t.__value="admin";var Rt=s(_t);Rt.value=Rt.__value="user";var Et=s(Rt);Et.value=Et.__value="viewer";var pt=s(vt,2),X=e(pt),ie=e(X),$=s(X,2),N=s(pt,2),U=e(N),ee=e(U),te=s(U,2),ve=s(N,2),re=e(ve),z=e(re),ue=s(re,2),Ae=s(ve,2),xe=e(Ae),bt=e(xe),He=s(xe,2),he=s(qe,2),Xe=e(he),Ve=s(e(Xe)),nt=s(Xe,2),Pe=e(nt);x((le,Y,ne,me,ye,Ie,Ee,Fe,Ye,Qe,Ke)=>{n(K,le),n(tt,`${Y??""} *`),n(ge,ne),n(J,me),n(ie,ye),n(ee,Ie),n(z,Ee),n(bt,Fe),Xe.disabled=Ye,n(Ve,` ${Qe??""}`),n(Pe,Ke)},[()=>l("users.create_user"),()=>l("users.username"),()=>l("users.display_name"),()=>l("users.role"),()=>l("users.password"),()=>l("users.email"),()=>l("users.telegram_id"),()=>l("users.whatsapp_id"),()=>!a(b).trim(),()=>l("users.create"),()=>l("common.cancel")]),vr(Q,function(){return a(b)},function(Y){p(b,Y)}),vr(Ze,function(){return a(h)},function(Y){p(h,Y)}),Fi(Be,function(){return a(w)},function(Y){p(w,Y)}),vr($,function(){return a(P)},function(Y){p(P,Y)}),vr(te,function(){return a(C)},function(Y){p(C,Y)}),vr(ue,function(){return a(E)},function(Y){p(E,Y)}),vr(He,function(){return a(k)},function(Y){p(k,Y)}),oe("click",Xe,I),oe("click",nt,function(){return p(c,!1)}),v(T,F)};g(()=>y(ht,T=>{a(c)&&a($e)&&T(G)}),"if",gr,154,4)}var we=s(ht,2);{var pe=T=>{var F=J_(),_e=e(F);x(K=>n(_e,K),[()=>l("users.loading")]),v(T,F)},se=T=>{var F=H_(),_e=e(F);x(K=>n(_e,K),[()=>l("users.no_users_desc")]),v(T,F)},V=T=>{var F=rm();g(()=>Wt(F,21,()=>a(o),fr,(_e,K)=>{var qe=tm(),ze=e(qe),be=e(ze),tt=e(be,!0);var Q=s(be,2),D=e(Q),L=e(D),ge=e(L,!0);var Ze=s(L,2),vt=e(Ze);var it=s(Ze,2),J=e(it,!0);var Be=s(it,2);{var _t=re=>{var z=Y_(),ue=e(z,!0);x(Ae=>n(ue,Ae),[()=>l("users.disabled")]),v(re,z)};g(()=>y(Be,re=>{a(K).enabled||re(_t)}),"if",gr,218,32)}var Rt=s(D,2),Et=e(Rt);{var pt=re=>{var z=Q_(),ue=s(e(z));x(()=>n(ue,` ${a(K).email??""}`)),v(re,z)};g(()=>y(Et,re=>{a(K).email&&re(pt)}),"if",gr,223,32)}var X=s(Et,2);{var ie=re=>{var z=Z_(),ue=s(e(z));x(()=>n(ue,` ${a(K).telegram_id??""}`)),v(re,z)};g(()=>y(X,re=>{a(K).telegram_id&&re(ie)}),"if",gr,226,32)}var $=s(X,2);{var N=re=>{var z=X_(),ue=s(e(z));x(()=>n(ue,` ${a(K).whatsapp_id??""}`)),v(re,z)};g(()=>y($,re=>{a(K).whatsapp_id&&re(N)}),"if",gr,229,32)}var U=s($,2),ee=e(U);var te=s(ze,2);{var ve=re=>{var z=em(),ue=e(z),Ae=e(ue);Ae.value=Ae.__value="admin";var xe=s(Ae);xe.value=xe.__value="user";var bt=s(xe);bt.value=bt.__value="viewer";var He;Bo(ue);var he=s(ue,2),Xe=e(he,!0);var Ve=s(he,2);x((nt,Pe,le)=>{He!==(He=a(K).role)&&(ue.value=(ue.__value=a(K).role)??"",vo(ue,a(K).role)),at(he,1,`text-xs px-2 py-1 rounded ${a(K).enabled?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`),Lt(he,"title",nt),n(Xe,Pe),Lt(Ve,"title",le)},[()=>a(K).enabled?l("users.disable_user"):l("users.enable_user"),()=>a(K).enabled?l("users.disable"):l("users.enable"),()=>l("users.delete_user")]),oe("change",ue,function(Pe){return R(a(K),Pe.target.value)}),oe("click",he,function(){return Z(a(K))}),oe("click",Ve,function(){return q(a(K))}),v(re,z)};g(()=>y(te,re=>{a($e)&&re(ve)}),"if",gr,237,20)}x((re,z,ue,Ae)=>{n(tt,re),n(ge,a(K).display_name||a(K).username),n(vt,`@${a(K).username??""}`),at(it,1,`px-1.5 py-0.5 rounded text-xs font-semibold ${z??""}`),n(J,a(K).role),n(ee,`${ue??""} ${Ae??""}`)},[()=>{var re,z;return((z=(re=a(K).display_name)==null?void 0:re.charAt(0))==null?void 0:z.toUpperCase())||a(K).username.charAt(0).toUpperCase()},()=>ce(a(K).role),()=>l("users.last_seen"),()=>de(a(K).last_seen_at)]),v(_e,qe)}),"each",gr,207,12),v(T,F)};g(()=>y(we,T=>{a(d)?T(pe):j(a(o).length,0)?T(se,1):T(V,!1)}),"if",gr,201,4)}return x(T=>n(ct,` ${T??""}`),[()=>l("users.title")]),v(r,Oe),Er(We)}Dr(["click","change"]);er[u]="src/components/TwoFactorPanel.svelte";var sm=_(m('<div class="card"><p class="text-text-muted text-sm"><i class="fa-solid fa-circle-info mr-1"></i> </p></div>'),er[u],[[243,4,[[244,8,[[245,12]]]]]]),im=_(m('<div class="card"><p class="text-text-muted text-sm"><i class="fa-solid fa-spinner fa-spin mr-1"></i> </p></div>'),er[u],[[250,4,[[251,8,[[251,43]]]]]]),om=_(m("<div><i></i> </div>"),er[u],[[256,12,[[257,16]]]]),nm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),er[u],[[273,20]]),lm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),er[u],[[275,20]]),dm=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i>'),er[u],[[301,32]]),cm=_(m('<p class="text-sm text-text-subtle mb-3"> </p> <div class="flex gap-2 items-end"><div><label class="text-xs text-text-muted block mb-1"> </label> <input type="text" maxlength="6" placeholder="000000" class="w-32 bg-bg border border-border rounded px-3 py-1.5 text-sm font-mono tracking-widest text-center"/></div> <button class="px-3 py-1.5 text-sm rounded bg-red-600/80 text-white hover:bg-red-500 transition-colors disabled:opacity-50"><!> </button></div>',1),er[u],[[281,20],[284,20,[[285,24,[[286,28],[287,28]]],[295,24]]]]),vm=_(m('<p class="text-sm text-text-subtle mb-3"> </p> <button class="px-4 py-2 text-sm rounded bg-primary-600 text-white hover:bg-primary-500 transition-colors"><i class="fa-solid fa-shield-halved mr-1"></i> </button>',1),er[u],[[308,20],[311,20,[[315,24]]]]),um=_(m('<div class="px-2 py-1 rounded bg-bg border border-border"><span class="text-text-muted mr-1"></span> </div>'),er[u],[[350,40,[[351,44]]]]),fm=_(m('<div class="grid grid-cols-2 gap-1 font-mono text-xs"></div>'),er[u],[[348,32]]),pm=_(m('<div class="space-y-4"><div class="p-4 rounded-lg bg-surface border border-border"><p class="text-sm text-text mb-2 font-medium"> </p> <div class="bg-white p-4 rounded-lg inline-block"><img alt="TOTP QR Code" class="w-48 h-48"/></div> <p class="text-xs text-text-muted mt-3"> </p> <code class="block mt-1 px-3 py-2 rounded bg-bg border border-border text-sm font-mono break-all select-all"> </code></div> <div class="p-4 rounded-lg bg-surface border border-border"><p class="text-sm text-text mb-2 font-medium"> </p> <p class="text-xs text-text-subtle mb-2"> </p> <button class="text-xs text-primary-400 hover:text-primary-300 mb-2"> </button> <!></div> <div class="p-4 rounded-lg bg-surface border border-border"><p class="text-sm text-text mb-2 font-medium"> </p> <p class="text-xs text-text-subtle mb-2"> </p> <div class="flex gap-2"><input type="text" maxlength="6" placeholder="000000" class="w-32 bg-bg border border-border rounded px-3 py-1.5 text-sm font-mono tracking-widest text-center"/> <button class="px-4 py-1.5 text-sm rounded bg-green-600 text-white hover:bg-green-500 transition-colors disabled:opacity-50"><i class="fa-solid fa-check mr-1"></i> </button> <button class="px-3 py-1.5 text-sm rounded border border-border text-text-muted hover:bg-surface-elevated transition-colors"> </button></div></div></div>'),er[u],[[319,20,[[320,24,[[321,28],[322,28,[[324,32]]],[330,28],[331,28]]],[336,24,[[337,28],[338,28],[341,28]]],[358,24,[[359,28],[360,28],[361,28,[[362,32],[370,32,[[375,36]]],[377,32]]]]]]]]),_m=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),er[u],[[402,24]]),mm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),er[u],[[406,24]]),xm=_(m('<div class="flex items-center justify-between p-2.5 rounded-md bg-surface border border-border/50"><div class="flex items-center gap-2.5"><i class="fa-solid fa-key text-text-muted"></i> <div><span class="text-sm text-text"> </span> <span class="text-xs text-text-subtle ml-2"> </span></div></div> <button class="text-xs px-2 py-1 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors"><i class="fa-solid fa-trash"></i></button></div>'),er[u],[[414,32,[[415,36,[[416,40],[417,40,[[418,44],[419,44]]]]],[422,36,[[427,40]]]]]]),bm=_(m('<div class="space-y-2 mb-4"></div>'),er[u],[[412,24]]),gm=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),er[u],[[451,32]]),hm=_(m('<i class="fa-solid fa-plus mr-1"></i> ',1),er[u],[[453,32]]),ym=_(m('<p class="text-xs text-text-subtle mt-3"><i class="fa-solid fa-circle-info mr-1"></i> </p>'),er[u],[[459,24,[[460,28]]]]),wm=_(m('<div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-fingerprint text-amber-400"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-4"><!> <div class="flex items-end gap-2"><div class="flex-1"><label class="text-xs text-text-muted block mb-1"> </label> <input type="text" class="w-full bg-bg border border-border rounded px-3 py-1.5 text-sm"/></div> <button class="px-4 py-1.5 text-sm rounded bg-primary-600 text-white hover:bg-primary-500 transition-colors disabled:opacity-50 whitespace-nowrap"><!></button></div> <!></div></div>'),er[u],[[392,12,[[393,16,[[394,20,[[395,24],[396,24,[[397,24],[398,24]]]]]]],[409,16,[[435,20,[[436,24,[[437,28],[438,28]]],[445,24]]]]]]]]),km=_(m('<div class="space-y-4"><!> <div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-clock text-primary-400"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-4"><!></div></div> <!> <div class="p-3 rounded-lg bg-surface-elevated border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> <!></p></div></div>'),er[u],[[254,4,[[263,8,[[264,12,[[265,16,[[266,20],[267,20,[[268,24],[269,24]]]]]]],[278,12]]],[469,8,[[470,12,[[471,16]]]]]]]]);function er(r,i){Cr(new.target),$r(i,!0,er);let o=S(A(null),"status"),d=S(A(rr([])),"passkeys"),c=S(A(!0),"loading"),f=S(A(""),"message"),b=S(A("success"),"messageType"),h=S(A("idle"),"setupStep"),w=S(A(""),"totpSecret"),P=S(A(""),"otpauthUri"),C=S(A(rr([])),"recoveryCodes"),E=S(A(""),"verifyCode"),k=S(A(!1),"showRecoveryCodes"),M=S(A(""),"passkeyName"),I=S(A(!1),"registeringPasskey"),Z=S(A(""),"disableCode"),R=S(A(!1),"disabling");async function q(){p(c,!0);try{const[se,V]=(await O(Promise.all([fetch("/api/auth/2fa/status"),fetch("/api/auth/passkeys")])))();p(o,(await O(se.json()))(),!0);const T=(await O(V.json()))();p(d,T.passkeys||[],!0)}catch{ce(l("twofa.load_failed"),"error")}p(c,!1)}function ce(se,V="success"){p(f,se,!0),p(b,V,!0),se&&setTimeout(()=>{p(f,"")},5e3)}async function de(){try{const se=(await O(fetch("/api/auth/2fa/setup",{method:"POST"})))(),V=(await O(se.json()))();V.ok?(p(w,V.secret,!0),p(P,V.otpauth_uri,!0),p(C,V.recovery_codes,!0),p(h,"showing_secret")):ce(V.error||"Failed to set up TOTP","error")}catch{ce("Failed to set up TOTP","error")}}async function $e(){if(a(E).trim())try{const se=(await O(fetch("/api/auth/2fa/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a(E).trim()})})))(),V=(await O(se.json()))();V.ok?(ce("TOTP 2FA enabled successfully"),p(h,"idle"),p(E,""),p(w,""),p(P,""),(await O(q()))()):ce(V.error||"Invalid code","error")}catch{ce("Failed to enable TOTP","error")}}async function We(){if(a(Z).trim()){p(R,!0);try{const se=(await O(fetch("/api/auth/2fa/disable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a(Z).trim()})})))(),V=(await O(se.json()))();V.ok?(ce("TOTP 2FA disabled"),p(Z,""),(await O(q()))()):ce(V.error||"Invalid code","error")}catch{ce("Failed to disable TOTP","error")}p(R,!1)}}async function Oe(){p(I,!0);try{const se=(await O(fetch("/api/auth/passkey/register/start",{method:"POST"})))(),V=(await O(se.json()))();if(!V.ok){ce(V.error||"Failed to start passkey registration","error"),p(I,!1);return}const T=V.options;if(T.publicKey.challenge=De(T.publicKey.challenge),T.publicKey.user.id=De(T.publicKey.user.id),T.publicKey.excludeCredentials)for(const be of T.publicKey.excludeCredentials)be.id=De(be.id);const F=(await O(navigator.credentials.create(T)))();if(!F){ce("Passkey creation was cancelled","error"),p(I,!1);return}const _e=F.response,K={credential:{id:F.id,rawId:ct(F.rawId),response:{attestationObject:ct(_e.attestationObject),clientDataJSON:ct(_e.clientDataJSON)},type:F.type},name:a(M)||"Passkey"},qe=(await O(fetch("/api/auth/passkey/register/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})))(),ze=(await O(qe.json()))();ze.ok?(ce("Passkey registered successfully"),p(M,""),(await O(q()))()):ce(ze.error||"Failed to register passkey","error")}catch(se){j(se.name,"NotAllowedError")?ce("Passkey creation was cancelled or timed out","error"):ce(`Passkey registration failed: ${se.message}`,"error")}p(I,!1)}async function je(se){if(confirm(`Delete passkey "${se.name}"?`))try{const V=(await O(fetch(`/api/auth/passkeys/${se.id}`,{method:"DELETE"})))(),T=(await O(V.json()))();T.ok?(ce("Passkey deleted"),(await O(q()))()):ce(T.error||"Failed to delete passkey","error")}catch{ce("Failed to delete passkey","error")}}function De(se){const V=se.replace(/-/g,"+").replace(/_/g,"/"),T=V+"=".repeat((4-V.length%4)%4),F=atob(T),_e=new ArrayBuffer(F.length),K=new Uint8Array(_e);for(let qe=0;qe<F.length;qe++)K[qe]=F.charCodeAt(qe);return _e}function ct(se){const V=new Uint8Array(se);let T="";for(const F of V)T+=String.fromCharCode(F);return btoa(T).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ke(se){const V=new Date(se+"Z"),T=Date.now()-V.getTime();return T<6e4?"Just now":T<36e5?`${Math.floor(T/6e4)}m ago`:T<864e5?`${Math.floor(T/36e5)}h ago`:`${Math.floor(T/864e5)}d ago`}const ae=S(Br(()=>!!sr.userId),"hasUserId");fi(()=>{a(ae)&&q()});var Ue={...Ar()},ut=Sr(),ht=Te(ut);{var G=se=>{var V=sm(),T=e(V),F=s(e(T));x(_e=>n(F,` ${_e??""}`),[()=>l("twofa.multi_user_only")]),v(se,V)},we=se=>{var V=im(),T=e(V),F=s(e(T));x(_e=>n(F,` ${_e??""}`),[()=>l("twofa.loading_status")]),v(se,V)},pe=se=>{var V=km(),T=e(V);{var F=U=>{var ee=om(),te=e(ee),ve=s(te);x(()=>{at(ee,1,`px-3 py-2 rounded-md text-sm ${j(a(b),"error")?"bg-red-900/20 border border-red-800/40 text-red-400":"bg-green-900/20 border border-green-800/40 text-green-400"}`),at(te,1,`fa-solid ${j(a(b),"error")?"fa-circle-exclamation":"fa-check-circle"} mr-1`),n(ve,` ${a(f)??""}`)}),v(U,ee)};g(()=>y(T,U=>{a(f)&&U(F)}),"if",er,255,8)}var _e=s(T,2),K=e(_e),qe=e(K),ze=s(e(qe),2),be=e(ze),tt=e(be),Q=s(be,2),D=e(Q),L=s(qe,2);{var ge=U=>{var ee=nm(),te=e(ee);x(ve=>n(te,ve),[()=>l("twofa.enabled_badge")]),v(U,ee)},Ze=U=>{var ee=lm(),te=e(ee);x(ve=>n(te,ve),[()=>l("twofa.disabled_badge")]),v(U,ee)};g(()=>y(L,U=>{a(o).totp_enabled?U(ge):U(Ze,!1)}),"if",er,272,16)}var vt=s(K,2),it=e(vt);{var J=U=>{var ee=cm(),te=Te(ee),ve=e(te),re=s(te,2),z=e(re),ue=e(z),Ae=e(ue),xe=s(ue,2),bt=s(z,2),He=e(bt);{var he=Ve=>{var nt=dm();v(Ve,nt)};g(()=>y(He,Ve=>{a(R)&&Ve(he)}),"if",er,300,28)}var Xe=s(He);x((Ve,nt,Pe,le)=>{n(ve,Ve),n(Ae,nt),bt.disabled=Pe,n(Xe,` ${le??""}`)},[()=>l("twofa.totp_enabled"),()=>l("twofa.totp_code"),()=>a(R)||j(a(Z).trim().length,6,!1),()=>l("twofa.disable_2fa")]),vr(xe,function(){return a(Z)},function(nt){p(Z,nt)}),oe("click",bt,We),v(U,ee)},Be=U=>{var ee=vm(),te=Te(ee),ve=e(te),re=s(te,2),z=s(e(re));x((ue,Ae)=>{n(ve,ue),n(z,` ${Ae??""}`)},[()=>l("twofa.setup_desc"),()=>l("twofa.setup_authenticator")]),oe("click",re,de),v(U,ee)},_t=U=>{var ee=pm(),te=e(ee),ve=e(te),re=e(ve),z=s(ve,2),ue=e(z),Ae=s(z,2),xe=e(Ae),bt=s(Ae,2),He=e(bt),he=s(te,2),Xe=e(he),Ve=e(Xe),nt=s(Xe,2),Pe=e(nt),le=s(nt,2),Y=e(le),ne=s(le,2);{var me=W=>{var Re=fm();g(()=>Wt(Re,21,()=>a(C),fr,(Le,rt,wt)=>{var dt=um(),Ge=e(dt);Ge.textContent=`${wt+1}.`;var Ne=s(Ge);x(()=>n(Ne,` ${a(rt)??""}`)),v(Le,dt)}),"each",er,349,36),v(W,Re)};g(()=>y(ne,W=>{a(k)&&W(me)}),"if",er,347,28)}var ye=s(he,2),Ie=e(ye),Ee=e(Ie),Fe=s(Ie,2),Ye=e(Fe),Qe=s(Fe,2),Ke=e(Qe),Se=s(Ke,2),st=s(e(Se)),lt=s(Se,2),B=e(lt);x((W,Re,Le,rt,wt,dt,Ge,Ne,Me,gt,et)=>{n(re,W),Lt(ue,"src",`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${Re??""}`),n(xe,Le),n(He,a(w)),n(Ve,rt),n(Pe,wt),n(Y,dt),n(Ee,Ge),n(Ye,Ne),Se.disabled=Me,n(st,` ${gt??""}`),n(B,et)},[()=>l("twofa.scan_step"),()=>encodeURIComponent(a(P)),()=>l("twofa.manual_key"),()=>l("twofa.save_recovery"),()=>l("twofa.recovery_hint"),()=>a(k)?l("twofa.hide_codes"):l("twofa.show_codes"),()=>l("twofa.verify_step"),()=>l("twofa.verify_hint"),()=>j(a(E).trim().length,6,!1),()=>l("twofa.verify_enable"),()=>l("common.cancel")]),oe("click",le,function(){return p(k,!a(k))}),oe("keydown",Ke,function(Re){j(Re.key,"Enter")&&$e()}),vr(Ke,function(){return a(E)},function(Re){p(E,Re)}),oe("click",Se,$e),oe("click",lt,function(){p(h,"idle"),p(w,""),p(P,"")}),v(U,ee)};g(()=>y(it,U=>{a(o).totp_enabled?U(J):j(a(h),"idle")?U(Be,1):j(a(h),"showing_secret")&&U(_t,2)}),"if",er,279,16)}var Rt=s(_e,2);{var Et=U=>{var ee=wm(),te=e(ee),ve=e(te),re=s(e(ve),2),z=e(re),ue=e(z),Ae=s(z,2),xe=e(Ae),bt=s(ve,2);{var He=Ke=>{var Se=_m(),st=e(Se);x(lt=>n(st,lt),[()=>l("twofa.registered",{count:a(o).passkey_count})]),v(Ke,Se)},he=Ke=>{var Se=mm(),st=e(Se);x(lt=>n(st,lt),[()=>l("twofa.none_badge")]),v(Ke,Se)};g(()=>y(bt,Ke=>{a(o).passkey_count>0?Ke(He):Ke(he,!1)}),"if",er,401,20)}var Xe=s(te,2),Ve=e(Xe);{var nt=Ke=>{var Se=bm();g(()=>Wt(Se,21,()=>a(d),fr,(st,lt)=>{var B=xm(),W=e(B),Re=s(e(W),2),Le=e(Re),rt=e(Le,!0);var wt=s(Le,2),dt=e(wt);var Ge=s(W,2);x((Ne,Me,gt)=>{n(rt,a(lt).name),n(dt,`${Ne??""} ${Me??""}`),Lt(Ge,"title",gt)},[()=>l("twofa.added_label"),()=>ke(a(lt).created_at),()=>l("twofa.delete_passkey")]),oe("click",Ge,function(){return je(a(lt))}),v(st,B)}),"each",er,413,28),v(Ke,Se)};g(()=>y(Ve,Ke=>{a(d).length>0&&Ke(nt)}),"if",er,411,20)}var Pe=s(Ve,2),le=e(Pe),Y=e(le),ne=e(Y),me=s(Y,2),ye=s(le,2),Ie=e(ye);{var Ee=Ke=>{var Se=gm(),st=s(Te(Se));x(lt=>n(st,` ${lt??""}`),[()=>l("twofa.registering")]),v(Ke,Se)},Fe=Ke=>{var Se=hm(),st=s(Te(Se));x(lt=>n(st,` ${lt??""}`),[()=>l("twofa.add_passkey")]),v(Ke,Se)};g(()=>y(Ie,Ke=>{a(I)?Ke(Ee):Ke(Fe,!1)}),"if",er,450,28)}var Ye=s(Pe,2);{var Qe=Ke=>{var Se=ym(),st=s(e(Se));x(lt=>n(st,` ${lt??""}`),[()=>l("twofa.passkey_info")]),v(Ke,Se)};g(()=>y(Ye,Ke=>{j(a(d).length,0)&&Ke(Qe)}),"if",er,458,20)}x((Ke,Se,st,lt)=>{n(ue,Ke),n(xe,Se),n(ne,st),Lt(me,"placeholder",lt),ye.disabled=a(I)},[()=>l("twofa.passkeys"),()=>l("twofa.passkeys_desc"),()=>l("twofa.passkey_name"),()=>l("twofa.passkey_placeholder")]),vr(me,function(){return a(M)},function(Se){p(M,Se)}),oe("click",ye,Oe),v(U,ee)};g(()=>y(Rt,U=>{a(o).passkeys_available&&U(Et)}),"if",er,391,8)}var pt=s(Rt,2),X=e(pt),ie=s(e(X)),$=s(ie);{var N=U=>{var ee=Da();x(te=>n(ee,te),[()=>l("twofa.info_both")]),v(U,ee)};g(()=>y($,U=>{a(o).totp_enabled&&a(o).passkey_count>0&&U(N)}),"if",er,473,16)}x((U,ee,te)=>{n(tt,U),n(D,ee),n(ie,` ${te??""} `)},[()=>l("twofa.authenticator_app"),()=>l("twofa.authenticator_hint"),()=>l("twofa.info_box")]),v(se,V)};g(()=>y(ht,se=>{a(ae)?a(c)?se(we,1):a(o)&&se(pe,2):se(G)}),"if",er,242,0)}return v(r,ut),Er(Ue)}Dr(["click","keydown"]);Ce[u]="src/components/SettingsTab.svelte";var Tm=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),Ce[u],[[261,12]]),$m=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),Ce[u],[[274,24]]),Em=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-red-900/40 text-red-400 border-red-800/50"> </span>'),Ce[u],[[276,24]]),Sm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),Ce[u],[[278,24]]),Cm=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div>'),Ce[u],[[293,24,[[294,28],[295,28]]]]),Am=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-amber-400 text-xs"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </span></div>'),Ce[u],[[300,24,[[301,28],[302,28,[[303,32]]]]]]),Pm=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div>'),Ce[u],[[308,24,[[309,28],[310,28]]]]),Om=_(m('<div class="mt-2 p-2 rounded bg-zinc-800/40 border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> </p></div>'),Ce[u],[[314,24,[[315,28,[[316,32]]]]]]),jm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),Ce[u],[[335,24]]),Rm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),Ce[u],[[337,24]]),Lm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-amber-900/40 text-amber-400 border-amber-800/50"> </span>'),Ce[u],[[339,24]]),Nm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-red-900/40 text-red-400 border-red-800/50"> </span>'),Ce[u],[[341,24]]),Mm=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div>'),Ce[u],[[359,28,[[360,32],[361,32]]]]),Dm=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-amber-400 text-xs"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </span></div>'),Ce[u],[[366,28,[[367,32],[368,32,[[369,36]]]]]]),Im=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-green-400 font-mono text-xs"> </span></div>'),Ce[u],[[374,28,[[375,32],[376,32]]]]),Fm=_(m('<img alt="WhatsApp QR Code" class="mx-auto w-52 h-52 rounded-lg shadow-lg"/>'),Ce[u],[[387,36]]),Um=_(m('<div class="w-52 h-52 mx-auto bg-zinc-800 rounded-lg flex items-center justify-center"><span class="text-text-subtle text-sm"> </span></div>'),Ce[u],[[389,36,[[390,40]]]]),zm=_(m('<div class="mt-3 p-4 rounded-lg bg-surface border border-amber-800/50 text-center"><p class="text-sm text-amber-400 mb-3"><i class="fa-solid fa-qrcode mr-1.5"></i> </p> <!> <button class="mt-3 px-4 py-1.5 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div>'),Ce[u],[[382,28,[[383,32,[[384,36]]],[393,32,[[397,36]]]]]]),Bm=_(m('<div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text font-mono text-xs"> </span></div> <!> <!> <!>',1),Ce[u],[[350,24,[[351,28],[352,28]]],[354,24,[[355,28],[356,28]]]]),qm=_(m('<div class="mt-2 p-2 rounded bg-zinc-800/40 border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> </p></div>'),Ce[u],[[402,24,[[403,28,[[404,32]]]]]]),Gm=_(m('<div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-brands fa-telegram text-blue-400 text-lg"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-3 space-y-2 text-sm"><div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text"> </span></div> <div class="flex justify-between"><span class="text-text-muted"> </span> <span> </span></div> <!> <!> <!></div></div> <div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-brands fa-whatsapp text-green-400 text-lg"></i> <div><span class="text-sm font-medium text-text"> </span> <p class="text-xs text-text-subtle mt-0.5"> </p></div></div> <!></div> <div class="p-3 space-y-2 text-sm"><div class="flex justify-between"><span class="text-text-muted"> </span> <span class="text-text"> </span></div> <!></div></div> <div class="flex items-center gap-3 p-2.5 rounded-lg bg-surface-elevated border border-border/50"><i class="fa-solid fa-circle-info text-text-subtle"></i> <span class="text-xs text-text-subtle"> <!> </span></div>',1),Ce[u],[[264,12,[[265,16,[[266,20,[[267,24],[268,24,[[269,28],[270,28]]]]]]],[281,16,[[282,20,[[283,24],[284,24]]],[286,20,[[287,24],[288,24]]]]]]],[325,12,[[326,16,[[327,20,[[328,24],[329,24,[[330,28],[331,28]]]]]]],[344,16,[[345,20,[[346,24],[347,24]]]]]]],[413,12,[[414,16],[415,16]]]]),Vm=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),Ce[u],[[436,12]]),Km=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),Ce[u],[[447,28]]),Wm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),Ce[u],[[449,28]]),Jm=_(m("<p> </p>"),Ce[u],[[454,28]]),Hm=_(m("<p> </p>"),Ce[u],[[456,28]]),Ym=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-green-900/40 text-green-400 border-green-800/50"> </span>'),Ce[u],[[469,28]]),Qm=_(m('<span class="text-xs px-2 py-0.5 rounded-full border bg-zinc-800/60 text-text-subtle border-border"> </span>'),Ce[u],[[473,28]]),Zm=_(m('<div class="flex items-center gap-2 p-2 rounded-md bg-surface border border-border/50"><i></i> <span class="text-sm text-text"> </span> <span class="text-xs px-1.5 py-0.5 rounded bg-primary-900/30 text-primary-400 border border-primary-800/30 ml-auto">SSO</span></div>'),Ce[u],[[480,36,[[481,40],[482,40],[483,40]]]]),Xm=_(m('<div class="space-y-1.5"></div>'),Ce[u],[[478,28]]),e2=_(m('<p class="text-sm text-text-subtle"> </p>'),Ce[u],[[488,28]]),t2=_(m('<div class="p-3 rounded-lg bg-red-900/20 border border-red-800/40"><p class="text-sm text-red-400"><i class="fa-solid fa-triangle-exclamation mr-1"></i> </p></div>'),Ce[u],[[497,16,[[498,20,[[499,24]]]]]]),r2=_(m(`<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-key text-amber-400"></i> <span class="text-sm font-medium text-text"> </span></div> <!></div> <div class="p-3 text-sm text-text-subtle"><!></div></div> <div class="rounded-lg border border-border overflow-hidden"><div class="flex items-center justify-between p-3 bg-surface-elevated"><div class="flex items-center gap-2.5"><i class="fa-solid fa-right-to-bracket text-primary-400"></i> <span class="text-sm font-medium text-text"> </span></div> <!></div> <div class="p-3"><!></div></div></div> <!> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="text-xs text-text-subtle"><i class="fa-solid fa-circle-info mr-1"></i> Configure SSO in your <code class="px-1 py-0.5 bg-zinc-900 rounded text-text-muted">config.toml</code>:</p> <code class="block mt-2 whitespace-pre-wrap text-xs text-text-subtle leading-relaxed">[dashboard]
password_enabled = true
sso_providers = ["google", "github"]
sso_allowed_emails = ["you@example.com"]</code> <p class="text-xs text-text-subtle mt-2">SSO reuses the same OAuth client credentials (e.g. <code class="px-1 py-0.5 bg-zinc-900 rounded text-text-muted">GOOGLE_CLIENT_ID</code>). The SSO callback URL is <code class="px-1 py-0.5 bg-zinc-900 rounded text-text-muted">/api/auth/sso/&#123;provider&#125;/callback</code>.</p></div>`,1),Ce[u],[[438,12,[[440,16,[[441,20,[[442,24,[[443,28],[444,28]]]]],[452,20]]],[462,16,[[463,20,[[464,24,[[465,28],[466,28]]]]],[476,20]]]]],[505,12,[[506,16,[[507,20],[508,42]]],[510,16],[514,16,[[515,71],[515,183]]]]]]),a2=_(m('<span class="text-xs text-text-muted pr-3"> </span>'),Ce[u],[[541,12]]),s2=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),Ce[u],[[548,12]]),i2=_(m('<button class="px-2 py-0.5 text-xs border border-border rounded bg-surface hover:bg-surface-elevated transition-colors disabled:opacity-50"><i></i></button>'),Ce[u],[[569,32,[[575,36]]]]),o2=_(m("<span> </span>"),Ce[u],[[598,48]]),n2=_(m('<span class="text-amber-400"><i class="fa-solid fa-triangle-exclamation"></i> </span>'),Ce[u],[[601,48,[[602,52]]]]),l2=_(m('<div class="flex items-center justify-between p-2 rounded-md bg-surface border border-border/50"><div class="min-w-0 flex-1 space-y-0.5"><div class="text-sm text-text truncate"> </div> <div class="flex items-center gap-2 text-xs text-text-subtle"><!> <!></div></div> <div class="flex gap-1.5 ml-2 flex-shrink-0"><button class="px-2 py-1 text-xs border border-border rounded bg-surface hover:bg-surface-elevated transition-colors disabled:opacity-50"><i></i></button> <button class="px-2 py-1 text-xs border border-red-800/50 rounded bg-red-900/20 text-red-400 hover:bg-red-900/40 transition-colors" title="Disconnect"><i class="fa-solid fa-xmark"></i></button></div></div>'),Ce[u],[[593,32,[[594,36,[[595,40],[596,40]]],[607,36,[[608,40,[[614,44]]],[616,40,[[621,44]]]]]]]]),d2=_(m('<div class="mt-1.5 space-y-1.5 pl-7"></div>'),Ce[u],[[591,24]]),c2=_(m('<div class="mb-3 last:mb-0"><div role="button" tabindex="0" class="w-full flex items-center justify-between p-2.5 rounded-lg bg-surface-elevated border border-border hover:border-text-subtle/30 transition-colors cursor-pointer"><div class="flex items-center gap-2"><i></i> <span class="text-sm font-medium text-text"> </span> <span class="text-xs px-1.5 py-0.5 rounded-full bg-green-900/40 text-green-400 border border-green-800/50"> </span></div> <div class="flex items-center gap-2"><!> <a class="px-2 py-0.5 text-xs border border-border rounded bg-surface hover:bg-surface-elevated transition-colors text-text-muted"><i class="fa-solid fa-plus"></i></a> <i></i></div></div> <!></div>'),Ce[u],[[552,16,[[553,20,[[560,24,[[561,28],[562,28],[563,28]]],[567,24,[[578,28,[[584,32]]],[586,28]]]]]]]]),v2=_(m('<a class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md border border-border bg-surface hover:bg-surface-elevated hover:border-text-subtle/30 transition-colors text-text"><i></i> </a>'),Ce[u],[[638,32,[[642,36]]]]),u2=_(m('<span class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-md border border-border/50 bg-surface text-text-subtle opacity-50 cursor-not-allowed"><i></i> </span>'),Ce[u],[[645,32,[[649,36]]]]),f2=_(m('<div class="mt-3 pt-3 border-t border-border/50"><p class="text-xs text-text-subtle mb-2 uppercase tracking-wider"> </p> <div class="flex flex-wrap gap-2"></div></div>'),Ce[u],[[633,16,[[634,20],[635,20]]]]),p2=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),Ce[u],[[658,16]]),_2=_(m("<!> <!> <!>",1),Ce[u],[]),m2=_(m("<option> </option>"),Ce[u],[[694,20]]),x2=_(m('<span class="text-xs text-text-subtle"> </span>'),Ce[u],[[719,24]]),b2=_(m('<span class="text-xs text-text-subtle"> </span>'),Ce[u],[[721,24]]),g2=_(m("<option></option>"),Ce[u],[[748,32]]),h2=_(m("<option></option>"),Ce[u],[[751,32]]),y2=_(m('<i class="fa-solid fa-spinner fa-spin mr-1"></i> ',1),Ce[u],[[786,28]]),w2=_(m('<i class="fa-solid fa-floppy-disk mr-1"></i> ',1),Ce[u],[[788,28]]),k2=_(m("<span> </span>"),Ce[u],[[792,24]]),T2=_(m(`<div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm"><div class="p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-text-muted text-xs uppercase tracking-wide"> </span> <p class="text-text font-medium mt-1"> </p></div> <div class="p-3 rounded-lg bg-surface-elevated border border-border"><span class="text-text-muted text-xs uppercase tracking-wide"> </span> <p class="text-text font-medium mt-1"> </p> <!></div></div> <div class="space-y-3"><div><div class="flex items-center gap-2 mb-1"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded border border-border bg-surface-elevated text-text-muted hover:text-text transition-colors"><i class="fa-solid fa-crosshairs mr-0.5"></i> </button></div> <div class="relative"><input type="text" list="tz-list" class="w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text text-sm
                                   placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50"/> <datalist id="tz-list"><!><!></datalist></div> <p class="text-xs text-text-subtle mt-1"> </p></div> <div><div class="flex items-center gap-2 mb-1"><span class="text-xs font-medium text-text-muted uppercase tracking-wide"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded border border-border bg-surface-elevated text-text-muted hover:text-text transition-colors"><i class="fa-solid fa-crosshairs mr-0.5"></i> </button></div> <input type="text" class="w-full px-3 py-2 rounded-md border border-border bg-surface-elevated text-text text-sm
                               placeholder-text-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500/50"/> <p class="text-xs text-text-subtle mt-1"> </p></div> <div class="flex items-center gap-3"><button class="px-4 py-2 rounded-md bg-primary-600 text-white font-medium text-sm
                               hover:bg-primary-500 transition-colors disabled:opacity-50"><!></button> <!></div></div>`,1),Ce[u],[[710,12,[[711,16,[[712,20],[713,20]]],[715,16,[[716,20],[717,20]]]]],[726,12,[[727,16,[[728,20,[[729,24],[730,24,[[734,28]]]]],[737,20,[[738,24],[746,24]]],[755,20]]],[758,16,[[759,20,[[760,24],[761,24,[[765,28]]]]],[768,20],[775,20]]],[778,16,[[779,20]]]]]]),$2=_(m('<p class="text-text-subtle text-sm italic text-center py-2"> </p>'),Ce[u],[[797,12]]),E2=_(m(`<section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-tower-broadcast mr-1.5"></i> </h2> <button class="mr-3 px-2.5 py-1 text-xs border border-border rounded-md bg-surface hover:bg-surface-elevated transition-colors"><i class="fa-solid fa-arrows-rotate mr-1"></i> </button></div> <div class="p-4 space-y-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-shield-halved mr-1.5"></i> </h2></div> <div class="p-4 space-y-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-lock mr-1.5"></i> </h2></div> <div class="p-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="flex justify-between items-center border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-link mr-1.5"></i> </h2> <!></div> <div class="p-3"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-language mr-1.5"></i> </h2></div> <div class="p-4 space-y-3"><p class="text-xs text-text-subtle"> </p> <div class="flex items-center gap-3"><select class="px-3 py-2 rounded-md border border-border bg-surface-elevated text-text text-sm
                       focus:outline-none focus:ring-2 focus:ring-primary-500/50"></select></div></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden mb-4"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-clock mr-1.5"></i> </h2></div> <div class="p-4 space-y-4"><!></div></section> <section class="bg-surface border border-border rounded-lg shadow-sm overflow-hidden"><div class="border-b border-border"><h2 class="text-xs font-semibold px-4 py-3 uppercase tracking-wider text-text-muted"><i class="fa-solid fa-circle-info mr-1.5"></i> </h2></div> <div class="p-4 space-y-3 text-xs text-text-subtle"><p> </p> <div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">Telegram</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed">[telegram]
enabled = true
allowed_chat_ids = [123456]

# env: TELEGRAM_BOT_TOKEN</code></div> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">WhatsApp</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed">[whatsapp]
enabled = true
bridge_port = 3033
webhook_port = 3030
allowed_numbers = ["+1234567890"]</code></div> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">Dashboard SSO</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed">[dashboard]
password_enabled = true
sso_providers = ["google", "github"]
sso_allowed_emails = ["admin@example.com"]</code></div> <div class="p-3 rounded bg-surface-elevated border border-border/50"><p class="font-medium text-text-muted mb-1.5">OAuth Providers</p> <code class="block whitespace-pre-wrap text-text-subtle leading-relaxed"># Per-provider env vars:
GOOGLE_CLIENT_ID / GOOGLE_CLIENT_SECRET
GITHUB_CLIENT_ID / GITHUB_CLIENT_SECRET
DISCORD_CLIENT_ID / DISCORD_CLIENT_SECRET
# ... etc. See config.example.toml</code></div></div></div></section> <section class="mt-6"><!></section>`,1),Ce[u],[[247,0,[[248,4,[[249,8,[[250,12]]],[252,8,[[256,12]]]]],[259,4]]],[428,0,[[429,4,[[430,8,[[431,12]]]]],[434,4]]],[523,0,[[524,4,[[525,8,[[526,12]]]]],[529,4]]],[535,0,[[536,4,[[537,8,[[538,12]]]]],[546,4]]],[665,0,[[666,4,[[667,8,[[668,12]]]]],[671,4,[[672,8],[673,8,[[674,12]]]]]]],[702,0,[[703,4,[[704,8,[[705,12]]]]],[708,4]]],[803,0,[[804,4,[[805,8,[[806,12]]]]],[809,4,[[810,8],[811,8,[[812,12,[[813,16],[814,16]]],[820,12,[[821,16],[822,16]]],[828,12,[[829,16],[830,16]]],[835,12,[[836,16],[837,16]]]]]]]]],[848,0]]);function Ce(r,i){Cr(new.target),$r(i,!0,Ce);let o=S(A(null),"msgConfig"),d=S(A(null),"oauth"),c=S(A(null),"authInfo"),f=S(A(null),"refreshing"),b=S(A(rr(new Set)),"expandedProviders"),h=S(A(null),"waQrImage");async function w(){var B,W,Re,Le;try{if(p(o,(await O(jt("GET","/api/messaging/config")))(),!0),j((W=(B=a(o))==null?void 0:B.whatsapp)==null?void 0:W.bridge_status,"pairing")&&((Le=(Re=a(o))==null?void 0:Re.whatsapp)!=null&&Le.qr))try{const rt=(await O(jt("GET","/api/messaging/whatsapp/qr")))();p(h,(rt==null?void 0:rt.qr)??null,!0)}catch{p(h,null)}else p(h,null)}catch(rt){console.error(...tr("error","loadConfig:",rt))}}async function P(){try{p(d,(await O(jt("GET","/api/oauth/status")))(),!0)}catch(B){console.error(...tr("error","loadOAuth:",B))}}async function C(){try{p(c,(await O(jt("GET","/api/auth/info")))(),!0)}catch(B){console.error(...tr("error","loadAuth:",B))}}async function E(B,W){p(f,W??`${B}:all`,!0);try{const Re=W?`/api/oauth/${B}/refresh?account=${encodeURIComponent(W)}`:`/api/oauth/${B}/refresh`;(await O(jt("POST",Re)))(),(await O(P()))()}catch(Re){console.error(...tr("error","refreshToken:",Re))}finally{p(f,null)}}async function k(B,W,Re){if(confirm(l("settings.disconnect_confirm",{email:Re,provider:B})))try{(await O(jt("POST",`/api/oauth/${B}/disconnect/${encodeURIComponent(W)}`)))(),(await O(P()))()}catch(Le){console.error(...tr("error","disconnect:",Le))}}function M(B){const W=new Set(a(b));W.has(B)?W.delete(B):W.add(B),p(b,W,!0)}function I(B){return B.filter(W=>W.accounts.length>0)}function Z(B){return B.filter(W=>j(W.accounts.length,0))}let R=S(A(null),"tzInfo"),q=S(A(rr([])),"allTimezones"),ce=S(A(""),"selectedTimezone"),de=S(A(""),"selectedLocale"),$e=S(A(!1),"tzSaving"),We=S(A(""),"tzMessage");async function Oe(){try{const B=sr.userId||"",W=(await O(jt("GET",`/api/timezone?user_id=${encodeURIComponent(B)}`)))();p(R,W,!0),p(ce,(W==null?void 0:W.user_timezone)||"",!0),p(de,(W==null?void 0:W.user_locale)||"",!0)}catch(B){console.error(...tr("error","loadTimezone:",B))}}async function je(){if(!(a(q).length>0))try{const B=(await O(jt("GET","/api/timezones")))();p(q,(B==null?void 0:B.timezones)??[],!0)}catch(B){console.error(...tr("error","loadTimezoneList:",B))}}async function De(){if(sr.userId){p($e,!0),p(We,"");try{const B=(await O(jt("POST","/api/timezone",{user_id:sr.userId,timezone:a(ce)||void 0,locale:a(de)||void 0})))();p(We,B!=null&&B.ok?l("common.saved"):(B==null?void 0:B.message)??l("common.failed"),!0),(await O(Oe()))(),setTimeout(()=>{p(We,"")},3e3)}catch{p(We,l("common.network_error"),!0)}finally{p($e,!1)}}}function ct(){try{p(ce,Intl.DateTimeFormat().resolvedOptions().timeZone,!0)}catch{p(ce,"UTC")}}function ke(){try{p(de,navigator.language||"en-US",!0)}catch{p(de,"en-US")}}const ae=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","America/Vancouver","America/Sao_Paulo","America/Mexico_City","Europe/London","Europe/Paris","Europe/Berlin","Europe/Moscow","Asia/Tokyo","Asia/Shanghai","Asia/Kolkata","Asia/Singapore","Asia/Dubai","Australia/Sydney","Australia/Melbourne","Pacific/Auckland","Africa/Cairo","Africa/Johannesburg"];Gr(()=>{j(Vt.currentTab,"settings")&&(Vt.refreshCounter,w(),P(),C(),Oe(),je())});var Ue={...Ar()},ut=E2(),ht=Te(ut),G=e(ht),we=e(G),pe=s(e(we)),se=s(we,2),V=s(e(se)),T=s(G,2),F=e(T);{var _e=B=>{var W=Tm(),Re=e(W);x(Le=>n(Re,Le),[()=>l("common.loading")]),v(B,W)},K=B=>{var W=Gm(),Re=Te(W),Le=e(Re),rt=e(Le),wt=s(e(rt),2),dt=e(wt),Ge=e(dt),Ne=s(dt,2),Me=e(Ne),gt=s(rt,2);{var et=Ct=>{var Mt=$m(),Qt=e(Mt);x(lr=>n(Qt,lr),[()=>l("common.connected")]),v(Ct,Mt)},ft=Ct=>{var Mt=Em(),Qt=e(Mt);x(lr=>n(Qt,lr),[()=>l("common.disconnected")]),v(Ct,Mt)},ot=Ct=>{var Mt=Sm(),Qt=e(Mt);x(lr=>n(Qt,lr),[()=>l("common.disabled")]),v(Ct,Mt)};g(()=>y(gt,Ct=>{a(o).telegram.enabled&&a(o).telegram.connected?Ct(et):a(o).telegram.enabled?Ct(ft,1):Ct(ot,!1)}),"if",Ce,273,20)}var Je=s(Le,2),St=e(Je),$t=e(St),kt=e($t),Ut=s($t,2),Dt=e(Ut),Ot=s(St,2),Bt=e(Ot),ur=e(Bt),or=s(Bt,2),hr=e(or),pr=s(Ot,2);{var At=Ct=>{var Mt=Cm(),Qt=e(Mt),lr=e(Qt),Ir=s(Qt,2),sa=e(Ir);x((ba,Pa)=>{n(lr,ba),n(sa,Pa)},[()=>l("settings.allowed_chat_ids"),()=>a(o).telegram.allowed_chat_ids.join(", ")]),v(Ct,Mt)},Nt=Ct=>{var Mt=Am(),Qt=e(Mt),lr=e(Qt),Ir=s(Qt,2),sa=s(e(Ir));x((ba,Pa)=>{n(lr,ba),n(sa,` ${Pa??""}`)},[()=>l("settings.allowed_chat_ids"),()=>l("settings.none_all_denied")]),v(Ct,Mt)};g(()=>y(pr,Ct=>{a(o).telegram.allowed_chat_ids.length>0?Ct(At):Ct(Nt,!1)}),"if",Ce,292,20)}var cr=s(pr,2);{var xt=Ct=>{var Mt=Pm(),Qt=e(Mt),lr=e(Qt),Ir=s(Qt,2),sa=e(Ir);x(ba=>{n(lr,ba),n(sa,a(o).telegram.primary_channel)},[()=>l("settings.primary_channel")]),v(Ct,Mt)};g(()=>y(cr,Ct=>{a(o).telegram.primary_channel&&Ct(xt)}),"if",Ce,307,20)}var Pt=s(cr,2);{var It=Ct=>{var Mt=Om(),Qt=e(Mt),lr=s(e(Qt));x(Ir=>n(lr,` ${Ir??""}`),[()=>l("settings.enable_telegram_hint")]),v(Ct,Mt)};g(()=>y(Pt,Ct=>{a(o).telegram.enabled||Ct(It)}),"if",Ce,313,20)}var Ft=s(Re,2),qt=e(Ft),Yt=e(qt),xr=s(e(Yt),2),Pr=e(xr),Hr=e(Pr),ir=s(Pr,2),Zr=e(ir),Or=s(Yt,2);{var Xr=Ct=>{var Mt=jm(),Qt=e(Mt);x(lr=>n(Qt,lr),[()=>l("common.disabled")]),v(Ct,Mt)},da=Ct=>{var Mt=Rm(),Qt=e(Mt);x(lr=>n(Qt,lr),[()=>l("common.connected")]),v(Ct,Mt)},ca=Ct=>{var Mt=Lm(),Qt=e(Mt);x(lr=>n(Qt,lr),[()=>l("settings.pairing")]),v(Ct,Mt)},jr=Ct=>{var Mt=Nm(),Qt=e(Mt);x(()=>n(Qt,a(o).whatsapp.bridge_status)),v(Ct,Mt)};g(()=>y(Or,Ct=>{a(o).whatsapp.enabled?j(a(o).whatsapp.bridge_status,"connected")?Ct(da,1):j(a(o).whatsapp.bridge_status,"pairing")?Ct(ca,2):Ct(jr,!1):Ct(Xr)}),"if",Ce,334,20)}var Nr=s(qt,2),Jt=e(Nr),zt=e(Jt),nr=e(zt),_r=s(zt,2),es=e(_r),ts=s(Jt,2);{var xs=Ct=>{var Mt=Bm(),Qt=Te(Mt),lr=e(Qt),Ir=e(lr),sa=s(lr,2),ba=e(sa),Pa=s(Qt,2),Vs=e(Pa),mr=e(Vs),Fr=s(Vs,2),Ga=e(Fr),Va=s(Pa,2);{var mi=Yr=>{var ia=Mm(),ha=e(ia),hs=e(ha),ss=s(ha,2),ys=e(ss);x((ws,Ks)=>{n(hs,ws),n(ys,Ks)},[()=>l("settings.allowed_numbers"),()=>a(o).whatsapp.allowed_numbers.join(", ")]),v(Yr,ia)},as=Yr=>{var ia=Dm(),ha=e(ia),hs=e(ha),ss=s(ha,2),ys=s(e(ss));x((ws,Ks)=>{n(hs,ws),n(ys,` ${Ks??""}`)},[()=>l("settings.allowed_numbers"),()=>l("settings.none_all_denied")]),v(Yr,ia)};g(()=>y(Va,Yr=>{a(o).whatsapp.allowed_numbers.length>0?Yr(mi):Yr(as,!1)}),"if",Ce,358,24)}var ga=s(Va,2);{var xi=Yr=>{var ia=Im(),ha=e(ia),hs=e(ha),ss=s(ha,2),ys=e(ss);x(ws=>{n(hs,ws),n(ys,a(o).whatsapp.connected_number)},[()=>l("settings.connected_number")]),v(Yr,ia)};g(()=>y(ga,Yr=>{a(o).whatsapp.connected_number&&Yr(xi)}),"if",Ce,373,24)}var Ui=s(ga,2);{var fl=Yr=>{var ia=zm(),ha=e(ia),hs=s(e(ha)),ss=s(ha,2);{var ys=is=>{var ks=Fm();x(()=>Lt(ks,"src",a(h))),v(is,ks)},ws=is=>{var ks=Um(),_l=e(ks),ml=e(_l);x(xl=>n(ml,xl),[()=>l("settings.waiting_qr")]),v(is,ks)};g(()=>y(ss,is=>{a(h)?is(ys):is(ws,!1)}),"if",Ce,386,32)}var Ks=s(ss,2),pl=s(e(Ks));x((is,ks)=>{n(hs,` ${is??""}`),n(pl,` ${ks??""}`)},[()=>l("settings.scan_qr"),()=>l("settings.refresh_qr")]),oe("click",Ks,w),v(Yr,ia)};g(()=>y(Ui,Yr=>{j(a(o).whatsapp.bridge_status,"pairing")&&Yr(fl)}),"if",Ce,381,24)}x((Yr,ia)=>{n(Ir,Yr),n(ba,a(o).whatsapp.bridge_port),n(mr,ia),n(Ga,a(o).whatsapp.webhook_port)},[()=>l("settings.bridge_port"),()=>l("settings.webhook_port")]),v(Ct,Mt)},qa=Ct=>{var Mt=qm(),Qt=e(Mt),lr=s(e(Qt));x(Ir=>n(lr,` ${Ir??""}`),[()=>l("settings.enable_whatsapp_hint")]),v(Ct,Mt)};g(()=>y(ts,Ct=>{a(o).whatsapp.enabled?Ct(xs):Ct(qa,!1)}),"if",Ce,349,20)}var bs=s(Ft,2),pi=s(e(bs),2),rs=e(pi),Gs=s(rs);{var gs=Ct=>{var Mt=Da();x(Qt=>n(Mt,`(${Qt??""})`),[()=>a(o).active_platforms.join(", ")]),v(Ct,Mt)};g(()=>y(Gs,Ct=>{a(o).active_platforms.length>0&&Ct(gs)}),"if",Ce,417,20)}var _i=s(Gs);x((Ct,Mt,Qt,lr,Ir,sa,ba,Pa,Vs,mr,Fr,Ga)=>{n(Ge,Ct),n(Me,Mt),n(kt,Qt),n(Dt,lr),n(ur,Ir),at(or,1,a(o).telegram.has_token?"text-green-400":"text-red-400"),n(hr,sa),n(Hr,ba),n(Zr,Pa),n(nr,Vs),n(es,mr),n(rs,`${Fr??""} `),n(_i,` — ${Ga??""}`)},[()=>l("settings.telegram"),()=>l("settings.telegram_desc"),()=>l("common.enabled"),()=>a(o).telegram.enabled?l("common.yes"):l("common.no"),()=>l("settings.bot_token"),()=>a(o).telegram.has_token?l("settings.bot_token_set"):l("settings.bot_token_not_set"),()=>l("settings.whatsapp"),()=>l("settings.whatsapp_desc"),()=>l("common.enabled"),()=>a(o).whatsapp.enabled?l("common.yes"):l("common.no"),()=>l("settings.active_platforms",{count:a(o).active_platforms.length}),()=>l("settings.active_platforms_detail")]),v(B,W)};g(()=>y(F,B=>{a(o)?B(K,!1):B(_e)}),"if",Ce,260,8)}var qe=s(ht,2),ze=e(qe),be=e(ze),tt=s(e(be)),Q=s(ze,2),D=e(Q);{var L=B=>{var W=Vm(),Re=e(W);x(Le=>n(Re,Le),[()=>l("common.loading")]),v(B,W)},ge=B=>{var W=r2(),Re=Te(W),Le=e(Re),rt=e(Le),wt=e(rt),dt=s(e(wt),2),Ge=e(dt),Ne=s(wt,2);{var Me=xt=>{var Pt=Km(),It=e(Pt);x(Ft=>n(It,Ft),[()=>l("common.enabled")]),v(xt,Pt)},gt=xt=>{var Pt=Wm(),It=e(Pt);x(Ft=>n(It,Ft),[()=>l("common.disabled")]),v(xt,Pt)};g(()=>y(Ne,xt=>{a(c).password_enabled?xt(Me):xt(gt,!1)}),"if",Ce,446,24)}var et=s(rt,2),ft=e(et);{var ot=xt=>{var Pt=Jm(),It=e(Pt);x(Ft=>n(It,Ft),[()=>l("settings.password_active")]),v(xt,Pt)},Je=xt=>{var Pt=Hm(),It=e(Pt);x(Ft=>n(It,Ft),[()=>l("settings.password_disabled")]),v(xt,Pt)};g(()=>y(ft,xt=>{a(c).password_enabled?xt(ot):xt(Je,!1)}),"if",Ce,453,24)}var St=s(Le,2),$t=e(St),kt=e($t),Ut=s(e(kt),2),Dt=e(Ut),Ot=s(kt,2);{var Bt=xt=>{var Pt=Ym(),It=e(Pt);x(Ft=>n(It,Ft),[()=>l("settings.sso_configured",{count:a(c).sso_providers.length})]),v(xt,Pt)},ur=xt=>{var Pt=Qm(),It=e(Pt);x(Ft=>n(It,Ft),[()=>l("common.none")]),v(xt,Pt)};g(()=>y(Ot,xt=>{a(c).sso_providers.length>0?xt(Bt):xt(ur,!1)}),"if",Ce,468,24)}var or=s($t,2),hr=e(or);{var pr=xt=>{var Pt=Xm();g(()=>Wt(Pt,21,()=>a(c).sso_providers,fr,(It,Ft)=>{var qt=Zm(),Yt=e(qt),xr=s(Yt,2),Pr=e(xr,!0);x(()=>{at(Yt,1,`${a(Ft).icon??""} text-sm w-5 text-center`),n(Pr,a(Ft).name)}),v(It,qt)}),"each",Ce,479,32),v(xt,Pt)},At=xt=>{var Pt=e2(),It=e(Pt);x(Ft=>n(It,Ft),[()=>l("settings.no_sso")]),v(xt,Pt)};g(()=>y(hr,xt=>{a(c).sso_providers.length>0?xt(pr):xt(At,!1)}),"if",Ce,477,24)}var Nt=s(Re,2);{var cr=xt=>{var Pt=t2(),It=e(Pt),Ft=s(e(It));x(qt=>n(Ft,` ${qt??""}`),[()=>l("settings.lockout_warning")]),v(xt,Pt)};g(()=>y(Nt,xt=>{!a(c).password_enabled&&j(a(c).sso_providers.length,0)&&xt(cr)}),"if",Ce,496,12)}x((xt,Pt)=>{n(Ge,xt),n(Dt,Pt)},[()=>l("settings.password_login"),()=>l("settings.sso_providers")]),v(B,W)};g(()=>y(D,B=>{a(c)?B(ge,!1):B(L)}),"if",Ce,435,8)}var Ze=s(qe,2),vt=e(Ze),it=e(vt),J=s(e(it)),Be=s(vt,2),_t=e(Be);g(()=>er(_t,{}),"component",Ce,530,8,{componentTag:"TwoFactorPanel"});var Rt=s(Ze,2),Et=e(Rt),pt=e(Et),X=s(e(pt)),ie=s(pt,2);{var $=B=>{var W=a2(),Re=e(W);x((Le,rt)=>n(Re,`${Le??""} account${rt??""}`),[()=>I(a(d).providers).reduce((Le,rt)=>Le+rt.accounts.length,0),()=>j(I(a(d).providers).reduce((Le,rt)=>Le+rt.accounts.length,0),1,!1)?"s":""]),v(B,W)};g(()=>y(ie,B=>{a(d)&&B($)}),"if",Ce,540,8)}var N=s(Et,2),U=e(N);{var ee=B=>{var W=s2(),Re=e(W);x(Le=>n(Re,Le),[()=>l("common.loading")]),v(B,W)},te=B=>{var W=_2(),Re=Te(W);g(()=>Wt(Re,17,()=>I(a(d).providers),Ne=>Ne.id,(Ne,Me)=>{var gt=c2(),et=e(gt),ft=e(et),ot=e(ft),Je=s(ot,2),St=e(Je,!0);var $t=s(Je,2),kt=e($t,!0);var Ut=s(ft,2),Dt=e(Ut);{var Ot=At=>{var Nt=i2(),cr=e(Nt);let xt;x(Pt=>{Nt.disabled=j(a(f),null,!1),Lt(Nt,"title",Pt),xt=at(cr,1,"fa-solid fa-arrows-rotate",null,xt,{"fa-spin":j(a(f),`${a(Me).id}:all`)})},[()=>l("settings.refresh_all")]),oe("click",Nt,function(It){It.stopPropagation(),E(a(Me).id)}),v(At,Nt)};g(()=>y(Dt,At=>{a(Me).accounts.length>1&&At(Ot)}),"if",Ce,568,28)}var Bt=s(Dt,2),ur=s(Bt,2);var or=s(et,2);{var hr=At=>{var Nt=d2();g(()=>Wt(Nt,21,()=>a(Me).accounts,cr=>cr.account,(cr,xt)=>{var Pt=l2(),It=e(Pt),Ft=e(It),qt=e(Ft,!0);var Yt=s(Ft,2),xr=e(Yt);{var Pr=jr=>{var Nr=o2(),Jt=e(Nr);x((zt,nr)=>n(Jt,`${zt??""} ${nr??""}`),[()=>l("settings.updated"),()=>_s(a(xt).updated_at)]),v(jr,Nr)};g(()=>y(xr,jr=>{a(xt).updated_at&&jr(Pr)}),"if",Ce,597,44)}var Hr=s(xr,2);{var ir=jr=>{var Nr=n2(),Jt=s(e(Nr));x(zt=>n(Jt,` ${zt??""}`),[()=>l("settings.no_refresh_token")]),v(jr,Nr)};g(()=>y(Hr,jr=>{a(xt).has_refresh_token||jr(ir)}),"if",Ce,600,44)}var Zr=s(It,2),Or=e(Zr),Xr=e(Or);let da;var ca=s(Or,2);x(jr=>{n(qt,a(xt).email),Or.disabled=j(a(f),null,!1),Lt(Or,"title",jr),da=at(Xr,1,"fa-solid fa-arrows-rotate",null,da,{"fa-spin":j(a(f),a(xt).account)})},[()=>l("common.refresh")]),oe("click",Or,function(){return E(a(Me).id,a(xt).account)}),oe("click",ca,function(){return k(a(Me).id,a(xt).account,a(xt).email)}),v(cr,Pt)}),"each",Ce,592,28),v(At,Nt)},pr=Br(()=>a(b).has(a(Me).id)||a(Me).accounts.length<=2);g(()=>y(or,At=>{a(pr)&&At(hr)}),"if",Ce,590,20)}x((At,Nt)=>{at(ot,1,`${a(Me).icon??""} text-sm w-5 text-center`),n(St,a(Me).name),n(kt,a(Me).accounts.length),Lt(Bt,"href",a(Me).authorize_url),Lt(Bt,"title",At),at(ur,1,`fa-solid fa-chevron-${Nt??""} text-xs text-text-subtle`)},[()=>l("settings.add_account"),()=>a(b).has(a(Me).id)?"up":"down"]),oe("click",et,function(){return M(a(Me).id)}),oe("keydown",et,function(Nt){j(Nt.key,"Enter")&&M(a(Me).id)}),oe("click",Bt,function(Nt){return Nt.stopPropagation()}),v(Ne,gt)}),"each",Ce,551,12);var Le=s(Re,2);{var rt=Ne=>{var Me=f2(),gt=e(Me),et=e(gt),ft=s(gt,2);g(()=>Wt(ft,21,()=>Z(a(d).providers),ot=>ot.id,(ot,Je)=>{var St=Sr(),$t=Te(St);{var kt=Dt=>{var Ot=v2(),Bt=e(Ot),ur=s(Bt);x(()=>{Lt(Ot,"href",a(Je).authorize_url),at(Bt,1,a(Je).icon),n(ur,` ${a(Je).name??""}`)}),v(Dt,Ot)},Ut=Dt=>{var Ot=u2(),Bt=e(Ot),ur=s(Bt);x((or,hr)=>{Lt(Ot,"title",`Not configured — set ${or??""}_CLIENT_ID and ${hr??""}_CLIENT_SECRET`),at(Bt,1,a(Je).icon),n(ur,` ${a(Je).name??""}`)},[()=>a(Je).id.toUpperCase(),()=>a(Je).id.toUpperCase()]),v(Dt,Ot)};g(()=>y($t,Dt=>{a(Je).configured?Dt(kt):Dt(Ut,!1)}),"if",Ce,637,28)}v(ot,St)}),"each",Ce,636,24),x(ot=>n(et,ot),[()=>l("settings.available_integrations")]),v(Ne,Me)},wt=Br(()=>Z(a(d).providers).length>0);g(()=>y(Le,Ne=>{a(wt)&&Ne(rt)}),"if",Ce,632,12)}var dt=s(Le,2);{var Ge=Ne=>{var Me=p2(),gt=e(Me);x(et=>n(gt,et),[()=>l("settings.no_oauth")]),v(Ne,Me)};g(()=>y(dt,Ne=>{j(a(d).providers.length,0)&&Ne(Ge)}),"if",Ce,657,12)}v(B,W)};g(()=>y(U,B=>{j(a(d),null)?B(ee):B(te,!1)}),"if",Ce,547,8)}var ve=s(Rt,2),re=e(ve),z=e(re),ue=s(e(z)),Ae=s(re,2),xe=e(Ae),bt=e(xe),He=s(xe,2),he=e(He);g(()=>Wt(he,21,()=>Object.entries(Yi),fr,(B,W)=>{var Re=Br(()=>gn(a(W),2));let Le=()=>a(Re)[0];Le();let rt=()=>a(Re)[1];rt();var wt=m2(),dt=e(wt,!0);var Ge={};x(()=>{n(dt,rt()),Ge!==(Ge=Le())&&(wt.value=(wt.__value=Le())??"")}),v(B,wt)}),"each",Ce,693,16);var Xe;Bo(he);var Ve=s(ve,2),nt=e(Ve),Pe=e(nt),le=s(e(Pe)),Y=s(nt,2),ne=e(Y);{var me=B=>{var W=T2(),Re=Te(W),Le=e(Re),rt=e(Le),wt=e(rt),dt=s(rt,2),Ge=e(dt),Ne=s(Le,2),Me=e(Ne),gt=e(Me),et=s(Me,2),ft=e(et),ot=s(et,2);{var Je=Jt=>{var zt=x2(),nr=e(zt);x(_r=>n(nr,_r),[()=>l("settings.per_user_override")]),v(Jt,zt)},St=Jt=>{var zt=b2(),nr=e(zt);x(_r=>n(nr,_r),[()=>l("settings.system_default")]),v(Jt,zt)};g(()=>y(ot,Jt=>{a(R).user_timezone?Jt(Je):Jt(St,!1)}),"if",Ce,718,20)}var $t=s(Re,2),kt=e($t),Ut=e(kt),Dt=e(Ut),Ot=e(Dt),Bt=s(Dt,2),ur=s(e(Bt)),or=s(Ut,2),hr=e(or),pr=s(hr,2),At=e(pr);g(()=>Wt(At,17,()=>ae,fr,(Jt,zt)=>{var nr=g2(),_r={};x(()=>{_r!==(_r=a(zt))&&(nr.value=(nr.__value=a(zt))??"")}),v(Jt,nr)}),"each",Ce,747,28);var Nt=s(At);g(()=>Wt(Nt,17,()=>a(q).filter(Jt=>!ae.includes(Jt)),fr,(Jt,zt)=>{var nr=h2(),_r={};x(()=>{_r!==(_r=a(zt))&&(nr.value=(nr.__value=a(zt))??"")}),v(Jt,nr)}),"each",Ce,750,28);var cr=s(or,2),xt=e(cr),Pt=s(kt,2),It=e(Pt),Ft=e(It),qt=e(Ft),Yt=s(Ft,2),xr=s(e(Yt)),Pr=s(It,2),Hr=s(Pr,2),ir=e(Hr),Zr=s(Pt,2),Or=e(Zr),Xr=e(Or);{var da=Jt=>{var zt=y2(),nr=s(Te(zt));x(_r=>n(nr,` ${_r??""}`),[()=>l("common.saving")]),v(Jt,zt)},ca=Jt=>{var zt=w2(),nr=s(Te(zt));x(_r=>n(nr,` ${_r??""}`),[()=>l("common.save")]),v(Jt,zt)};g(()=>y(Xr,Jt=>{a($e)?Jt(da):Jt(ca,!1)}),"if",Ce,785,24)}var jr=s(Or,2);{var Nr=Jt=>{var zt=k2(),nr=e(zt);x(_r=>{at(zt,1,`text-xs ${_r??""}`),n(nr,a(We))},[()=>j(a(We),l("common.saved"))?"text-green-400":"text-red-400"]),v(Jt,zt)};g(()=>y(jr,Jt=>{a(We)&&Jt(Nr)}),"if",Ce,791,20)}x((Jt,zt,nr,_r,es,ts,xs,qa)=>{n(wt,Jt),n(Ge,a(R).current_time_formatted),n(gt,zt),n(ft,a(R).effective_timezone),n(Ot,nr),n(ur,` ${_r??""}`),Lt(hr,"placeholder",a(R).system_timezone||"UTC"),n(xt,es),n(qt,ts),n(xr,` ${xs??""}`),Lt(Pr,"placeholder",a(R).system_locale||"en-US"),n(ir,qa),Or.disabled=a($e)},[()=>l("settings.current_time"),()=>l("settings.effective_timezone"),()=>l("settings.timezone"),()=>l("settings.detect"),()=>l("settings.timezone_hint",{default:a(R).system_timezone}),()=>l("settings.locale"),()=>l("settings.detect"),()=>l("settings.locale_hint",{default:a(R).system_locale})]),oe("click",Bt,ct),vr(hr,function(){return a(ce)},function(zt){p(ce,zt)}),oe("click",Yt,ke),vr(Pr,function(){return a(de)},function(zt){p(de,zt)}),oe("click",Or,De),v(B,W)},ye=B=>{var W=$2(),Re=e(W);x(Le=>n(Re,Le),[()=>l("common.loading")]),v(B,W)};g(()=>y(ne,B=>{a(R)?B(me):B(ye,!1)}),"if",Ce,709,8)}var Ie=s(Ve,2),Ee=e(Ie),Fe=e(Ee),Ye=s(e(Fe)),Qe=s(Ee,2),Ke=e(Qe),Se=e(Ke),st=s(Ie,2),lt=e(st);return g(()=>gr(lt,{}),"component",Ce,849,4,{componentTag:"UsersPanel"}),x((B,W,Re,Le,rt,wt,dt,Ge,Ne,Me)=>{n(pe,` ${B??""}`),n(V,` ${W??""}`),n(tt,` ${Re??""}`),n(J,` ${Le??""}`),n(X,` ${rt??""}`),n(ue,` ${wt??""}`),n(bt,dt),Xe!==(Xe=Ds.locale)&&(he.value=(he.__value=Ds.locale)??"",vo(he,Ds.locale)),n(le,` ${Ge??""}`),n(Ye,` ${Ne??""}`),n(Se,Me)},[()=>l("settings.messaging"),()=>l("common.refresh"),()=>l("settings.dashboard_auth"),()=>l("settings.twofa"),()=>l("settings.oauth"),()=>l("settings.language"),()=>l("settings.language_hint"),()=>l("settings.timezone_locale"),()=>l("settings.config_reference"),()=>l("settings.config_hint")]),oe("click",se,w),oe("change",he,function(W){const Re=W.target.value;if(Co(Re),sr.userId){const Le={en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",ja:"ja-JP","zh-CN":"zh-CN","pt-BR":"pt-BR"};jt("POST","/api/timezone",{user_id:sr.userId,locale:Le[Re]??Re}).catch(()=>{})}}),v(r,ut),Er(Ue)}Dr(["click","keydown","change"]);br[u]="src/App.svelte";var S2=_(m("<button><i></i> </button>"),br[u],[[142,16,[[147,20]]]]),C2=_(m('<!> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"><!> <!> <!> <!></div>',1),br[u],[[154,12]]),A2=_(m('<!> <main class="p-6"><div class="flex border-b border-border mb-4"></div> <!></main>',1),br[u],[[139,4,[[140,8]]]]);function br(r,i){Cr(new.target),$r(i,!0,br);const o=3e4,d=[{id:"overview",label:"Overview",icon:"fa-chart-line"},{id:"chat",label:"Chat",icon:"fa-comments"},{id:"goals",label:"Goals",icon:"fa-bullseye"},{id:"skills",label:"Skills",icon:"fa-puzzle-piece"},{id:"knowledge",label:"Knowledge",icon:"fa-diagram-project"},{id:"tools",label:"Tools",icon:"fa-screwdriver-wrench"},{id:"trash",label:"Trash",icon:"fa-trash-can"},{id:"security",label:"Security",icon:"fa-shield-halved"},{id:"operations",label:"Ops",icon:"fa-server"},{id:"settings",label:"Settings",icon:"fa-gear"}];function c(q){Vt.currentTab=q}async function f(){try{const q=(await O(fetch("/api/auth/check")))(),ce=(await O(q.json()))();sr.authenticated=j(ce.authenticated,!0),sr.userId=ce.user_id||null,sr.role=ce.role||null,sr.subject=ce.subject||null}catch{sr.authenticated=!1}finally{sr.checked=!0}}async function b(){try{const q=(await O(fetch("/api/onboarding/status")))(),ce=(await O(q.json()))();sr.onboardingCompleted=j(ce.completed,!0)}catch{sr.onboardingCompleted=!0}}function h(){sr.onboardingCompleted=!0}fi(()=>(gc(),b(),f(),window.addEventListener("onboarding-complete",h),()=>{window.removeEventListener("onboarding-complete",h)}));let w,P;Gr(()=>(sr.authenticated&&(ui(()=>$a()),w=new EventSource("/api/events"),w.onmessage=q=>{const ce=q.data;if(ce&&ce.startsWith("{"))try{const de=JSON.parse(ce);if(de.type){vl(de),(j(de.type,"turn_complete")||j(de.type,"approval_needed"))&&$a();return}}catch{}$a()},w.onerror=()=>{console.error("SSE connection lost, will retry..."),ul()},P=setInterval($a,o)),()=>{w==null||w.close(),w=void 0,P&&(clearInterval(P),P=void 0)}));var C={...Ar()},E=Sr(),k=Te(E);{var M=q=>{},I=q=>{g(()=>yt(q,{}),"component",br,133,4,{componentTag:"OnboardingWizard"})},Z=q=>{g(()=>Kt(q,{}),"component",br,135,4,{componentTag:"LoginOverlay"})},R=q=>{var ce=A2(),de=Te(ce);g(()=>Ea(de,{}),"component",br,137,4,{componentTag:"Header"});var $e=s(de,2),We=e($e);g(()=>Wt(We,21,()=>d,fr,(pe,se)=>{var V=S2();let T;var F=e(V),_e=s(F);x(K=>{T=at(V,1,"main-tab",null,T,{active:j(Vt.currentTab,a(se).id)}),at(F,1,`fa-solid ${a(se).icon??""} mr-1.5`),n(_e,` ${K??""}`)},[()=>l("nav."+a(se).id)]),oe("click",V,function(){return c(a(se).id)}),v(pe,V)}),"each",br,141,12);var Oe=s(We,2);{var je=pe=>{var se=C2(),V=Te(se);g(()=>wr(V,{}),"component",br,153,12,{componentTag:"LiveFeed"});var T=s(V,2),F=e(T);g(()=>ps(F,{}),"component",br,155,16,{componentTag:"PendingActions"});var _e=s(F,2);g(()=>Ia(_e,{}),"component",br,156,16,{componentTag:"ActivityLog"});var K=s(_e,2);g(()=>Mr(K,{}),"component",br,157,16,{componentTag:"MemoryPanel"});var qe=s(K,2);g(()=>Ua(qe,{}),"component",br,158,16,{componentTag:"StatsPanel"}),v(pe,se)},De=pe=>{g(()=>Tr(pe,{}),"component",br,161,12,{componentTag:"ChatTab"})},ct=pe=>{g(()=>Gt(pe,{}),"component",br,163,12,{componentTag:"GoalsTab"})},ke=pe=>{g(()=>Ur(pe,{}),"component",br,165,12,{componentTag:"SkillsTab"})},ae=pe=>{g(()=>Sa(pe,{}),"component",br,167,12,{componentTag:"KnowledgeTab"})},Ue=pe=>{g(()=>ms(pe,{}),"component",br,169,12,{componentTag:"ToolsTab"})},ut=pe=>{g(()=>kr(pe,{}),"component",br,171,12,{componentTag:"TrashTab"})},ht=pe=>{g(()=>Tt(pe,{}),"component",br,173,12,{componentTag:"SecurityTab"})},G=pe=>{g(()=>fe(pe,{}),"component",br,175,12,{componentTag:"OperationsTab"})},we=pe=>{g(()=>Ce(pe,{}),"component",br,177,12,{componentTag:"SettingsTab"})};g(()=>y(Oe,pe=>{j(Vt.currentTab,"overview")?pe(je):j(Vt.currentTab,"chat")?pe(De,1):j(Vt.currentTab,"goals")?pe(ct,2):j(Vt.currentTab,"skills")?pe(ke,3):j(Vt.currentTab,"knowledge")?pe(ae,4):j(Vt.currentTab,"tools")?pe(Ue,5):j(Vt.currentTab,"trash")?pe(ut,6):j(Vt.currentTab,"security")?pe(ht,7):j(Vt.currentTab,"operations")?pe(G,8):j(Vt.currentTab,"settings")&&pe(we,9)}),"if",br,152,8)}v(q,ce)};g(()=>y(k,q=>{sr.checked?j(sr.onboardingCompleted,!1)?q(I,1):sr.authenticated?q(R,!1):q(Z,2):q(M)}),"if",br,130,0)}return v(r,E),Er(C)}Dr(["click"]);Xd(br,{target:document.getElementById("app")});
